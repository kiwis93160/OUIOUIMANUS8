var E5=Object.defineProperty;var O5=(e,t,n)=>t in e?E5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ug=(e,t,n)=>O5(e,typeof t!="symbol"?t+"":t,n);function C5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A5(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var qg={exports:{}},Pc={};/**
 */var SS;function k5(){if(SS)return Pc;SS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var d in i)d!=="key"&&(s[d]=i[d])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Pc.Fragment=t,Pc.jsx=n,Pc.jsxs=n,Pc}var NS;function T5(){return NS||(NS=1,qg.exports=k5()),qg.exports}var c=T5(),Bg={exports:{}},Ue={};/**
 */var ES;function P5(){if(ES)return Ue;ES=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function N(P,M,G){this.props=P,this.context=M,this.refs=S,this.updater=G||_}N.prototype.isReactComponent={},N.prototype.setState=function(P,M){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,M,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function O(){}O.prototype=N.prototype;function C(P,M,G){this.props=P,this.context=M,this.refs=S,this.updater=G||_}var A=C.prototype=new O;A.constructor=C,j(A,N.prototype),A.isPureReactComponent=!0;var T=Array.isArray;function k(){}var R={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function K(P,M,G){var ne=G.ref;return{$$typeof:e,type:P,key:M,ref:ne!==void 0?ne:null,props:G}}function B(P,M){return K(P.type,M,P.props)}function F(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function z(P){var M={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(G){return M[G]})}var Q=/\/+/g;function H(P,M){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):M.toString(36)}function X(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(k,k):(P.status="pending",P.then(function(M){P.status==="pending"&&(P.status="fulfilled",P.value=M)},function(M){P.status==="pending"&&(P.status="rejected",P.reason=M)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function I(P,M,G,ne,se){var he=typeof P;(he==="undefined"||he==="boolean")&&(P=null);var me=!1;if(P===null)me=!0;else switch(he){case"bigint":case"string":case"number":me=!0;break;case"object":switch(P.$$typeof){case e:case t:me=!0;break;case m:return me=P._init,I(me(P._payload),M,G,ne,se)}}if(me)return se=se(P),me=ne===""?"."+H(P,0):ne,T(se)?(G="",me!=null&&(G=me.replace(Q,"$&/")+"/"),I(se,M,G,"",function(de){return de})):se!=null&&(F(se)&&(se=B(se,G+(se.key==null||P&&P.key===se.key?"":(""+se.key).replace(Q,"$&/")+"/")+me)),M.push(se)),1;me=0;var $e=ne===""?".":ne+":";if(T(P))for(var fe=0;fe<P.length;fe++)ne=P[fe],he=$e+H(ne,fe),me+=I(ne,M,G,he,se);else if(fe=x(P),typeof fe=="function")for(P=fe.call(P),fe=0;!(ne=P.next()).done;)ne=ne.value,he=$e+H(ne,fe++),me+=I(ne,M,G,he,se);else if(he==="object"){if(typeof P.then=="function")return I(X(P),M,G,ne,se);throw M=String(P),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return me}function $(P,M,G){if(P==null)return P;var ne=[],se=0;return I(P,ne,"","",function(he){return M.call(G,he,se++)}),ne}function U(P){if(P._status===-1){var M=P._result;M=M(),M.then(function(G){(P._status===0||P._status===-1)&&(P._status=1,P._result=G)},function(G){(P._status===0||P._status===-1)&&(P._status=2,P._result=G)}),P._status===-1&&(P._status=0,P._result=M)}if(P._status===1)return P._result.default;throw P._result}var ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},W={map:$,forEach:function(P,M,G){$(P,function(){M.apply(this,arguments)},G)},count:function(P){var M=0;return $(P,function(){M++}),M},toArray:function(P){return $(P,function(M){return M})||[]},only:function(P){if(!F(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ue.Activity=g,Ue.Children=W,Ue.Component=N,Ue.Fragment=n,Ue.Profiler=i,Ue.PureComponent=C,Ue.StrictMode=r,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(P){return R.H.useMemoCache(P)}},Ue.cache=function(P){return function(){return P.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(P,M,G){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ne=j({},P.props),se=P.key;if(M!=null)for(he in M.key!==void 0&&(se=""+M.key),M)!L.call(M,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&M.ref===void 0||(ne[he]=M[he]);var he=arguments.length-2;if(he===1)ne.children=G;else if(1<he){for(var me=Array(he),$e=0;$e<he;$e++)me[$e]=arguments[$e+2];ne.children=me}return K(P.type,se,ne)},Ue.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Ue.createElement=function(P,M,G){var ne,se={},he=null;if(M!=null)for(ne in M.key!==void 0&&(he=""+M.key),M)L.call(M,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(se[ne]=M[ne]);var me=arguments.length-2;if(me===1)se.children=G;else if(1<me){for(var $e=Array(me),fe=0;fe<me;fe++)$e[fe]=arguments[fe+2];se.children=$e}if(P&&P.defaultProps)for(ne in me=P.defaultProps,me)se[ne]===void 0&&(se[ne]=me[ne]);return K(P,he,se)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(P){return{$$typeof:d,render:P}},Ue.isValidElement=F,Ue.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:U}},Ue.memo=function(P,M){return{$$typeof:h,type:P,compare:M===void 0?null:M}},Ue.startTransition=function(P){var M=R.T,G={};R.T=G;try{var ne=P(),se=R.S;se!==null&&se(G,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(k,ee)}catch(he){ee(he)}finally{M!==null&&G.types!==null&&(M.types=G.types),R.T=M}},Ue.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ue.use=function(P){return R.H.use(P)},Ue.useActionState=function(P,M,G){return R.H.useActionState(P,M,G)},Ue.useCallback=function(P,M){return R.H.useCallback(P,M)},Ue.useContext=function(P){return R.H.useContext(P)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(P,M){return R.H.useDeferredValue(P,M)},Ue.useEffect=function(P,M){return R.H.useEffect(P,M)},Ue.useEffectEvent=function(P){return R.H.useEffectEvent(P)},Ue.useId=function(){return R.H.useId()},Ue.useImperativeHandle=function(P,M,G){return R.H.useImperativeHandle(P,M,G)},Ue.useInsertionEffect=function(P,M){return R.H.useInsertionEffect(P,M)},Ue.useLayoutEffect=function(P,M){return R.H.useLayoutEffect(P,M)},Ue.useMemo=function(P,M){return R.H.useMemo(P,M)},Ue.useOptimistic=function(P,M){return R.H.useOptimistic(P,M)},Ue.useReducer=function(P,M,G){return R.H.useReducer(P,M,G)},Ue.useRef=function(P){return R.H.useRef(P)},Ue.useState=function(P){return R.H.useState(P)},Ue.useSyncExternalStore=function(P,M,G){return R.H.useSyncExternalStore(P,M,G)},Ue.useTransition=function(){return R.H.useTransition()},Ue.version="19.2.0",Ue}var OS;function El(){return OS||(OS=1,Bg.exports=P5()),Bg.exports}var b=El();const cr=Qr(b),M5=C5({__proto__:null,default:cr},[b]);var Fg={exports:{}},Mc={},Hg={exports:{}},Kg={};/**
 */var CS;function R5(){return CS||(CS=1,(function(e){function t(I,$){var U=I.length;I.push($);e:for(;0<U;){var ee=U-1>>>1,W=I[ee];if(0<i(W,$))I[ee]=$,I[U]=W,U=ee;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var $=I[0],U=I.pop();if(U!==$){I[0]=U;e:for(var ee=0,W=I.length,P=W>>>1;ee<P;){var M=2*(ee+1)-1,G=I[M],ne=M+1,se=I[ne];if(0>i(G,U))ne<W&&0>i(se,G)?(I[ee]=se,I[ne]=U,ee=ne):(I[ee]=G,I[M]=U,ee=M);else if(ne<W&&0>i(se,U))I[ee]=se,I[ne]=U,ee=ne;else break e}}return $}function i(I,$){var U=I.sortIndex-$.sortIndex;return U!==0?U:I.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var f=[],h=[],m=1,g=null,v=3,x=!1,_=!1,j=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(I){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=I)r(h),$.sortIndex=$.expirationTime,t(f,$);else break;$=n(h)}}function T(I){if(j=!1,A(I),!_)if(n(f)!==null)_=!0,k||(k=!0,z());else{var $=n(h);$!==null&&X(T,$.startTime-I)}}var k=!1,R=-1,L=5,K=-1;function B(){return S?!0:!(e.unstable_now()-K<L)}function F(){if(S=!1,k){var I=e.unstable_now();K=I;var $=!0;try{e:{_=!1,j&&(j=!1,O(R),R=-1),x=!0;var U=v;try{t:{for(A(I),g=n(f);g!==null&&!(g.expirationTime>I&&B());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,v=g.priorityLevel;var W=ee(g.expirationTime<=I);if(I=e.unstable_now(),typeof W=="function"){g.callback=W,A(I),$=!0;break t}g===n(f)&&r(f),A(I)}else r(f);g=n(f)}if(g!==null)$=!0;else{var P=n(h);P!==null&&X(T,P.startTime-I),$=!1}}break e}finally{g=null,v=U,x=!1}$=void 0}}finally{$?z():k=!1}}}var z;if(typeof C=="function")z=function(){C(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,H=Q.port2;Q.port1.onmessage=F,z=function(){H.postMessage(null)}}else z=function(){N(F,0)};function X(I,$){R=N(function(){I(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(I){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var U=v;v=$;try{return I()}finally{v=U}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(I,$){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var U=v;v=I;try{return $()}finally{v=U}},e.unstable_scheduleCallback=function(I,$,U){var ee=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ee+U:ee):U=ee,I){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,I={id:m++,callback:$,priorityLevel:I,startTime:U,expirationTime:W,sortIndex:-1},U>ee?(I.sortIndex=U,t(h,I),n(f)===null&&I===n(h)&&(j?(O(R),R=-1):j=!0,X(T,U-ee))):(I.sortIndex=W,t(f,I),_||x||(_=!0,k||(k=!0,z()))),I},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(I){var $=v;return function(){var U=v;v=$;try{return I.apply(this,arguments)}finally{v=U}}}})(Kg)),Kg}var AS;function D5(){return AS||(AS=1,Hg.exports=R5()),Hg.exports}var Gg={exports:{}},On={};/**
 */var kS;function I5(){if(kS)return On;kS=1;var e=El();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,On.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,m)},On.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},On.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},On.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},On.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,g=d(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&r.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},On.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=d(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},On.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=d(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},On.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=d(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},On.requestFormReset=function(f){r.d.r(f)},On.unstable_batchedUpdates=function(f,h){return f(h)},On.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},On.useFormStatus=function(){return l.H.useHostTransitionStatus()},On.version="19.2.0",On}var TS;function KC(){if(TS)return Gg.exports;TS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gg.exports=I5(),Gg.exports}/**
 */var PS;function L5(){if(PS)return Mc;PS=1;var e=D5(),t=El(),n=KC();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var u=a,p=o;;){var y=u.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===u)return f(y),a;if(w===p)return f(y),o;w=w.sibling}throw Error(r(188))}if(u.return!==p.return)u=y,p=w;else{for(var E=!1,D=y.child;D;){if(D===u){E=!0,u=y,p=w;break}if(D===p){E=!0,p=y,u=w;break}D=D.sibling}if(!E){for(D=w.child;D;){if(D===u){E=!0,u=w,p=y;break}if(D===p){E=!0,p=w,u=y;break}D=D.sibling}if(!E)throw Error(r(189))}}if(u.alternate!==p)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Symbol.for("react.client.reference");function H(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case N:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case K:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case C:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case A:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return o=a.displayName||null,o!==null?o:H(a.type)||"Memo";case L:o=a._payload,a=a._init;try{return H(a(o))}catch{}}return null}var X=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},ee=[],W=-1;function P(a){return{current:a}}function M(a){0>W||(a.current=ee[W],ee[W]=null,W--)}function G(a,o){W++,ee[W]=a.current,a.current=o}var ne=P(null),se=P(null),he=P(null),me=P(null);function $e(a,o){switch(G(he,o),G(se,a),G(ne,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Yj(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Yj(o),a=Vj(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}M(ne),G(ne,a)}function fe(){M(ne),M(se),M(he)}function de(a){a.memoizedState!==null&&G(me,a);var o=ne.current,u=Vj(o,a.type);o!==u&&(G(se,a),G(ne,u))}function we(a){se.current===a&&(M(ne),M(se)),me.current===a&&(M(me),Cc._currentValue=U)}var le,Ve;function be(a){if(le===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);le=o&&o[1]||"",Ve=-1<u.stack.indexOf(`
`+le+a+Ve}var rt=!1;function ve(a,o){if(!a||rt)return"";rt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ae){var te=ae}Reflect.construct(a,[],ue)}else{try{ue.call()}catch(ae){te=ae}a.call(ue.prototype)}}else{try{throw Error()}catch(ae){te=ae}(ue=a())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),E=w[0],D=w[1];if(E&&D){var q=E.split(`
`),Z=D.split(`
`+q[p].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=p&&0<=y);break}}}finally{rt=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?be(u):""}function je(a,o){switch(a.tag){case 26:case 27:case 5:return be(a.type);case 16:return be("Lazy");case 13:return a.child!==o&&o!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return ve(a.type,!1);case 11:return ve(a.type.render,!1);case 1:return ve(a.type,!0);case 31:return be("Activity");default:return""}}function ze(a){try{var o="",u=null;do o+=je(a,u),u=a,a=a.return;while(a);return o}catch(p){return`
`+p.stack}}var At=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,bt=e.unstable_cancelCallback,_t=e.unstable_shouldYield,Dn=e.unstable_requestPaint,Nt=e.unstable_now,Wn=e.unstable_getCurrentPriorityLevel,In=e.unstable_ImmediatePriority,Lr=e.unstable_UserBlockingPriority,pe=e.unstable_NormalPriority,xe=e.unstable_LowPriority,ie=e.unstable_IdlePriority,Se=e.log,Re=e.unstable_setDisableYieldValue,De=null,Ae=null;function Ge(a){if(typeof Se=="function"&&Re(a),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(De,a)}catch{}}var tt=Math.clz32?Math.clz32:ao,ht=Math.log,mr=Math.LN2;function ao(a){return a>>>=0,a===0?32:31-(ht(a)/mr|0)|0}var $r=256,ln=262144,En=4194304;function Oe(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function nt(a,o,u){var p=a.pendingLanes;if(p===0)return 0;var y=0,w=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var D=p&134217727;return D!==0?(p=D&~w,p!==0?y=Oe(p):(E&=D,E!==0?y=Oe(E):u||(u=D&~a,u!==0&&(y=Oe(u))))):(D=p&~w,D!==0?y=Oe(D):E!==0?y=Oe(E):u||(u=p&~a,u!==0&&(y=Oe(u)))),y===0?0:o!==0&&o!==y&&(o&w)===0&&(w=y&-y,u=o&-o,w>=u||w===32&&(u&4194048)!==0)?o:y}function Ht(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function va(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ql(){var a=En;return En<<=1,(En&62914560)===0&&(En=4194304),a}function Cm(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function Bl(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function mR(a,o,u,p,y,w){var E=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var D=a.entanglements,q=a.expirationTimes,Z=a.hiddenUpdates;for(u=E&~u;0<u;){var oe=31-tt(u),ue=1<<oe;D[oe]=0,q[oe]=-1;var te=Z[oe];if(te!==null)for(Z[oe]=null,oe=0;oe<te.length;oe++){var ae=te[oe];ae!==null&&(ae.lane&=-536870913)}u&=~ue}p!==0&&Aw(a,p,0),w!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=w&~(E&~o))}function Aw(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-tt(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|u&261930}function kw(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var p=31-tt(u),y=1<<p;y&o|a[p]&o&&(a[p]|=o),u&=~y}}function Tw(a,o){var u=o&-o;return u=(u&42)!==0?1:Am(u),(u&(a.suspendedLanes|o))!==0?0:u}function Am(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function km(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Pw(){var a=$.p;return a!==0?a:(a=window.event,a===void 0?32:vS(a.type))}function Mw(a,o){var u=$.p;try{return $.p=a,o()}finally{$.p=u}}var ii=Math.random().toString(36).slice(2),yn="__reactFiber$"+ii,Ln="__reactProps$"+ii,io="__reactContainer$"+ii,Tm="__reactEvents$"+ii,pR="__reactListeners$"+ii,gR="__reactHandles$"+ii,Rw="__reactResources$"+ii,Fl="__reactMarker$"+ii;function Pm(a){delete a[yn],delete a[Ln],delete a[Tm],delete a[pR],delete a[gR]}function so(a){var o=a[yn];if(o)return o;for(var u=a.parentNode;u;){if(o=u[io]||u[yn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=tS(a);a!==null;){if(u=a[yn])return u;a=tS(a)}return o}a=u,u=a.parentNode}return null}function oo(a){if(a=a[yn]||a[io]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function Hl(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function lo(a){var o=a[Rw];return o||(o=a[Rw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function cn(a){a[Fl]=!0}var Dw=new Set,Iw={};function Zi(a,o){co(a,o),co(a+"Capture",o)}function co(a,o){for(Iw[a]=o,a=0;a<o.length;a++)Dw.add(o[a])}var vR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lw={},$w={};function yR(a){return At.call($w,a)?!0:At.call(Lw,a)?!1:vR.test(a)?$w[a]=!0:(Lw[a]=!0,!1)}function Vu(a,o,u){if(yR(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function Wu(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function ya(a,o,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+p)}}function pr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function zw(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bR(a,o,u){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,w=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(E){u=""+E,w.call(this,E)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Mm(a){if(!a._valueTracker){var o=zw(a)?"checked":"value";a._valueTracker=bR(a,o,""+a[o])}}function Uw(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return a&&(p=zw(a)?a.checked?"true":"false":a.value),a=p,a!==u?(o.setValue(a),!0):!1}function Xu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xR=/[\n"\\]/g;function gr(a){return a.replace(xR,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rm(a,o,u,p,y,w,E,D){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+pr(o)):a.value!==""+pr(o)&&(a.value=""+pr(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?Dm(a,E,pr(o)):u!=null?Dm(a,E,pr(u)):p!=null&&a.removeAttribute("value"),y==null&&w!=null&&(a.defaultChecked=!!w),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+pr(D):a.removeAttribute("name")}function qw(a,o,u,p,y,w,E,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),o!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){Mm(a);return}u=u!=null?""+pr(u):"",o=o!=null?""+pr(o):u,D||o===a.value||(a.value=o),a.defaultValue=o}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=D?a.checked:!!p,a.defaultChecked=!!p,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),Mm(a)}function Dm(a,o,u){o==="number"&&Xu(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function uo(a,o,u,p){if(a=a.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<a.length;u++)y=o.hasOwnProperty("$"+a[u].value),a[u].selected!==y&&(a[u].selected=y),y&&p&&(a[u].defaultSelected=!0)}else{for(u=""+pr(u),o=null,y=0;y<a.length;y++){if(a[y].value===u){a[y].selected=!0,p&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function Bw(a,o,u){if(o!=null&&(o=""+pr(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+pr(u):""}function Fw(a,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(r(92));if(X(p)){if(1<p.length)throw Error(r(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=pr(o),a.defaultValue=u,p=a.textContent,p===u&&p!==""&&p!==null&&(a.value=p),Mm(a)}function fo(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var wR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hw(a,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,u):typeof u!="number"||u===0||wR.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function Kw(a,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var y in o)p=o[y],o.hasOwnProperty(y)&&u[y]!==p&&Hw(a,y,p)}else for(var w in o)o.hasOwnProperty(w)&&Hw(a,w,o[w])}function Im(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _R=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qu(a){return jR.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function ba(){}var Lm=null;function $m(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ho=null,mo=null;function Gw(a){var o=oo(a);if(o&&(a=o.stateNode)){var u=a[Ln]||null;e:switch(a=o.stateNode,o.type){case"input":if(Rm(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+gr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==a&&p.form===a.form){var y=p[Ln]||null;if(!y)throw Error(r(90));Rm(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===a.form&&Uw(p)}break e;case"textarea":Bw(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&uo(a,!!u.multiple,o,!1)}}}var zm=!1;function Yw(a,o,u){if(zm)return a(o,u);zm=!0;try{var p=a(o);return p}finally{if(zm=!1,(ho!==null||mo!==null)&&($d(),ho&&(o=ho,a=mo,mo=ho=null,Gw(o),a)))for(o=0;o<a.length;o++)Gw(a[o])}}function Kl(a,o){var u=a.stateNode;if(u===null)return null;var p=u[Ln]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Um=!1;if(xa)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Um=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Um=!1}var si=null,qm=null,Ju=null;function Vw(){if(Ju)return Ju;var a,o=qm,u=o.length,p,y="value"in si?si.value:si.textContent,w=y.length;for(a=0;a<u&&o[a]===y[a];a++);var E=u-a;for(p=1;p<=E&&o[u-p]===y[w-p];p++);return Ju=y.slice(a,1<p?1-p:void 0)}function Zu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function ed(){return!0}function Ww(){return!1}function $n(a){function o(u,p,y,w,E){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(u=a[D],this[D]=u?u(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ed:Ww,this.isPropagationStopped=Ww,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),o}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=$n(es),Yl=g({},es,{view:0,detail:0}),SR=$n(Yl),Bm,Fm,Vl,nd=g({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Km,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Vl&&(Vl&&a.type==="mousemove"?(Bm=a.screenX-Vl.screenX,Fm=a.screenY-Vl.screenY):Fm=Bm=0,Vl=a),Bm)},movementY:function(a){return"movementY"in a?a.movementY:Fm}}),Xw=$n(nd),NR=g({},nd,{dataTransfer:0}),ER=$n(NR),OR=g({},Yl,{relatedTarget:0}),Hm=$n(OR),CR=g({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),AR=$n(CR),kR=g({},es,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),TR=$n(kR),PR=g({},es,{data:0}),Qw=$n(PR),MR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=DR[a])?!!o[a]:!1}function Km(){return IR}var LR=g({},Yl,{key:function(a){if(a.key){var o=MR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Zu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?RR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Km,charCode:function(a){return a.type==="keypress"?Zu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Zu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$R=$n(LR),zR=g({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jw=$n(zR),UR=g({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Km}),qR=$n(UR),BR=g({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),FR=$n(BR),HR=g({},nd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),KR=$n(HR),GR=g({},es,{newState:0,oldState:0}),YR=$n(GR),VR=[9,13,27,32],Gm=xa&&"CompositionEvent"in window,Wl=null;xa&&"documentMode"in document&&(Wl=document.documentMode);var WR=xa&&"TextEvent"in window&&!Wl,Zw=xa&&(!Gm||Wl&&8<Wl&&11>=Wl),e_=" ",t_=!1;function n_(a,o){switch(a){case"keyup":return VR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r_(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var po=!1;function XR(a,o){switch(a){case"compositionend":return r_(o);case"keypress":return o.which!==32?null:(t_=!0,e_);case"textInput":return a=o.data,a===e_&&t_?null:a;default:return null}}function QR(a,o){if(po)return a==="compositionend"||!Gm&&n_(a,o)?(a=Vw(),Ju=qm=si=null,po=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zw&&o.locale!=="ko"?null:o.data;default:return null}}var JR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!JR[a.type]:o==="textarea"}function i_(a,o,u,p){ho?mo?mo.push(p):mo=[p]:ho=p,o=Kd(o,"onChange"),0<o.length&&(u=new td("onChange","change",null,u,p),a.push({event:u,listeners:o}))}var Xl=null,Ql=null;function ZR(a){qj(a,0)}function rd(a){var o=Hl(a);if(Uw(o))return a}function s_(a,o){if(a==="change")return o}var o_=!1;if(xa){var Ym;if(xa){var Vm="oninput"in document;if(!Vm){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),Vm=typeof l_.oninput=="function"}Ym=Vm}else Ym=!1;o_=Ym&&(!document.documentMode||9<document.documentMode)}function c_(){Xl&&(Xl.detachEvent("onpropertychange",u_),Ql=Xl=null)}function u_(a){if(a.propertyName==="value"&&rd(Ql)){var o=[];i_(o,Ql,a,$m(a)),Yw(ZR,o)}}function eD(a,o,u){a==="focusin"?(c_(),Xl=o,Ql=u,Xl.attachEvent("onpropertychange",u_)):a==="focusout"&&c_()}function tD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return rd(Ql)}function nD(a,o){if(a==="click")return rd(o)}function rD(a,o){if(a==="input"||a==="change")return rd(o)}function aD(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Xn=typeof Object.is=="function"?Object.is:aD;function Jl(a,o){if(Xn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!At.call(o,y)||!Xn(a[y],o[y]))return!1}return!0}function d_(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function f_(a,o){var u=d_(a);a=0;for(var p;u;){if(u.nodeType===3){if(p=a+u.textContent.length,a<=o&&p>=o)return{node:u,offset:o-a};a=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=d_(u)}}function h_(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?h_(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function m_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Xu(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Xu(a.document)}return o}function Wm(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var iD=xa&&"documentMode"in document&&11>=document.documentMode,go=null,Xm=null,Zl=null,Qm=!1;function p_(a,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qm||go==null||go!==Xu(p)||(p=go,"selectionStart"in p&&Wm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Zl&&Jl(Zl,p)||(Zl=p,p=Kd(Xm,"onSelect"),0<p.length&&(o=new td("onSelect","select",null,o,u),a.push({event:o,listeners:p}),o.target=go)))}function ts(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var vo={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Jm={},g_={};xa&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ns(a){if(Jm[a])return Jm[a];if(!vo[a])return a;var o=vo[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in g_)return Jm[a]=o[u];return a}var v_=ns("animationend"),y_=ns("animationiteration"),b_=ns("animationstart"),sD=ns("transitionrun"),oD=ns("transitionstart"),lD=ns("transitioncancel"),x_=ns("transitionend"),w_=new Map,Zm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zm.push("scrollEnd");function zr(a,o){w_.set(a,o),Zi(o,[a])}var ad=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},vr=[],yo=0,ep=0;function id(){for(var a=yo,o=ep=yo=0;o<a;){var u=vr[o];vr[o++]=null;var p=vr[o];vr[o++]=null;var y=vr[o];vr[o++]=null;var w=vr[o];if(vr[o++]=null,p!==null&&y!==null){var E=p.pending;E===null?y.next=y:(y.next=E.next,E.next=y),p.pending=y}w!==0&&__(u,y,w)}}function sd(a,o,u,p){vr[yo++]=a,vr[yo++]=o,vr[yo++]=u,vr[yo++]=p,ep|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function tp(a,o,u,p){return sd(a,o,u,p),od(a)}function rs(a,o){return sd(a,null,null,o),od(a)}function __(a,o,u){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u);for(var y=!1,w=a.return;w!==null;)w.childLanes|=u,p=w.alternate,p!==null&&(p.childLanes|=u),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(y=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,y&&o!==null&&(y=31-tt(u),a=w.hiddenUpdates,p=a[y],p===null?a[y]=[o]:p.push(o),o.lane=u|536870912),w):null}function od(a){if(50<wc)throw wc=0,ug=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var bo={};function cD(a,o,u,p){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(a,o,u,p){return new cD(a,o,u,p)}function np(a){return a=a.prototype,!(!a||!a.isReactComponent)}function wa(a,o){var u=a.alternate;return u===null?(u=Qn(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function j_(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function ld(a,o,u,p,y,w){var E=0;if(p=a,typeof a=="function")np(a)&&(E=1);else if(typeof a=="string")E=m5(a,u,ne.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case K:return a=Qn(31,u,o,y),a.elementType=K,a.lanes=w,a;case j:return as(u.children,y,w,o);case S:E=8,y|=24;break;case N:return a=Qn(12,u,o,y|2),a.elementType=N,a.lanes=w,a;case T:return a=Qn(13,u,o,y),a.elementType=T,a.lanes=w,a;case k:return a=Qn(19,u,o,y),a.elementType=k,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:E=10;break e;case O:E=9;break e;case A:E=11;break e;case R:E=14;break e;case L:E=16,p=null;break e}E=29,u=Error(r(130,a===null?"null":typeof a,"")),p=null}return o=Qn(E,u,o,y),o.elementType=a,o.type=p,o.lanes=w,o}function as(a,o,u,p){return a=Qn(7,a,p,o),a.lanes=u,a}function rp(a,o,u){return a=Qn(6,a,null,o),a.lanes=u,a}function S_(a){var o=Qn(18,null,null,0);return o.stateNode=a,o}function ap(a,o,u){return o=Qn(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var N_=new WeakMap;function yr(a,o){if(typeof a=="object"&&a!==null){var u=N_.get(a);return u!==void 0?u:(o={value:a,source:o,stack:ze(o)},N_.set(a,o),o)}return{value:a,source:o,stack:ze(o)}}var xo=[],wo=0,cd=null,ec=0,br=[],xr=0,oi=null,ea=1,ta="";function _a(a,o){xo[wo++]=ec,xo[wo++]=cd,cd=a,ec=o}function E_(a,o,u){br[xr++]=ea,br[xr++]=ta,br[xr++]=oi,oi=a;var p=ea;a=ta;var y=32-tt(p)-1;p&=~(1<<y),u+=1;var w=32-tt(o)+y;if(30<w){var E=y-y%5;w=(p&(1<<E)-1).toString(32),p>>=E,y-=E,ea=1<<32-tt(o)+y|u<<y|p,ta=w+a}else ea=1<<w|u<<y|p,ta=a}function ip(a){a.return!==null&&(_a(a,1),E_(a,1,0))}function sp(a){for(;a===cd;)cd=xo[--wo],xo[wo]=null,ec=xo[--wo],xo[wo]=null;for(;a===oi;)oi=br[--xr],br[xr]=null,ta=br[--xr],br[xr]=null,ea=br[--xr],br[xr]=null}function O_(a,o){br[xr++]=ea,br[xr++]=ta,br[xr++]=oi,ea=o.id,ta=o.overflow,oi=a}var bn=null,Et=null,Ze=!1,li=null,wr=!1,op=Error(r(519));function ci(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(yr(o,a)),op}function C_(a){var o=a.stateNode,u=a.type,p=a.memoizedProps;switch(o[yn]=a,o[Ln]=p,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<jc.length;u++)Xe(jc[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),qw(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Fw(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||Kj(o.textContent,u)?(p.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),p.onScroll!=null&&Xe("scroll",o),p.onScrollEnd!=null&&Xe("scrollend",o),p.onClick!=null&&(o.onclick=ba),o=!0):o=!1,o||ci(a,!0)}function A_(a){for(bn=a.return;bn;)switch(bn.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:bn=bn.return}}function _o(a){if(a!==bn)return!1;if(!Ze)return A_(a),Ze=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Ng(a.type,a.memoizedProps)),u=!u),u&&Et&&ci(a),A_(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Et=eS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Et=eS(a)}else o===27?(o=Et,ji(a.type)?(a=kg,kg=null,Et=a):Et=o):Et=bn?jr(a.stateNode.nextSibling):null;return!0}function is(){Et=bn=null,Ze=!1}function lp(){var a=li;return a!==null&&(Bn===null?Bn=a:Bn.push.apply(Bn,a),li=null),a}function tc(a){li===null?li=[a]:li.push(a)}var cp=P(null),ss=null,ja=null;function ui(a,o,u){G(cp,o._currentValue),o._currentValue=u}function Sa(a){a._currentValue=cp.current,M(cp)}function up(a,o,u){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===u)break;a=a.return}}function dp(a,o,u,p){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var w=y.dependencies;if(w!==null){var E=y.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=y;for(var q=0;q<o.length;q++)if(D.context===o[q]){w.lanes|=u,D=w.alternate,D!==null&&(D.lanes|=u),up(w.return,u,a),p||(E=null);break e}w=D.next}}else if(y.tag===18){if(E=y.return,E===null)throw Error(r(341));E.lanes|=u,w=E.alternate,w!==null&&(w.lanes|=u),up(E,u,a),E=null}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===a){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}}function jo(a,o,u,p){a=null;for(var y=o,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var E=y.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var D=y.type;Xn(y.pendingProps.value,E.value)||(a!==null?a.push(D):a=[D])}}else if(y===me.current){if(E=y.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(Cc):a=[Cc])}y=y.return}a!==null&&dp(o,a,u,p),o.flags|=262144}function ud(a){for(a=a.firstContext;a!==null;){if(!Xn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function os(a){ss=a,ja=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function xn(a){return k_(ss,a)}function dd(a,o){return ss===null&&os(a),k_(a,o)}function k_(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ja===null){if(a===null)throw Error(r(308));ja=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else ja=ja.next=o;return u}var uD=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},dD=e.unstable_scheduleCallback,fD=e.unstable_NormalPriority,Kt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fp(){return{controller:new uD,data:new Map,refCount:0}}function nc(a){a.refCount--,a.refCount===0&&dD(fD,function(){a.controller.abort()})}var rc=null,hp=0,So=0,No=null;function hD(a,o){if(rc===null){var u=rc=[];hp=0,So=gg(),No={status:"pending",value:void 0,then:function(p){u.push(p)}}}return hp++,o.then(T_,T_),o}function T_(){if(--hp===0&&rc!==null){No!==null&&(No.status="fulfilled");var a=rc;rc=null,So=0,No=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function mD(a,o){var u=[],p={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(p.status="rejected",p.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),p}var P_=I.S;I.S=function(a,o){pj=Nt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&hD(a,o),P_!==null&&P_(a,o)};var ls=P(null);function mp(){var a=ls.current;return a!==null?a:xt.pooledCache}function fd(a,o){o===null?G(ls,ls.current):G(ls,o.pool)}function M_(){var a=mp();return a===null?null:{parent:Kt._currentValue,pool:a}}var Eo=Error(r(460)),pp=Error(r(474)),hd=Error(r(542)),md={then:function(){}};function R_(a){return a=a.status,a==="fulfilled"||a==="rejected"}function D_(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(ba,ba),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,L_(a),a;default:if(typeof o.status=="string")o.then(ba,ba);else{if(a=xt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=p}},function(p){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,L_(a),a}throw us=o,Eo}}function cs(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(us=u,Eo):u}}var us=null;function I_(){if(us===null)throw Error(r(459));var a=us;return us=null,a}function L_(a){if(a===Eo||a===hd)throw Error(r(483))}var Oo=null,ac=0;function pd(a){var o=ac;return ac+=1,Oo===null&&(Oo=[]),D_(Oo,a,o)}function ic(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function gd(a,o){throw o.$$typeof===v?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function $_(a){function o(V,Y){if(a){var J=V.deletions;J===null?(V.deletions=[Y],V.flags|=16):J.push(Y)}}function u(V,Y){if(!a)return null;for(;Y!==null;)o(V,Y),Y=Y.sibling;return null}function p(V){for(var Y=new Map;V!==null;)V.key!==null?Y.set(V.key,V):Y.set(V.index,V),V=V.sibling;return Y}function y(V,Y){return V=wa(V,Y),V.index=0,V.sibling=null,V}function w(V,Y,J){return V.index=J,a?(J=V.alternate,J!==null?(J=J.index,J<Y?(V.flags|=67108866,Y):J):(V.flags|=67108866,Y)):(V.flags|=1048576,Y)}function E(V){return a&&V.alternate===null&&(V.flags|=67108866),V}function D(V,Y,J,ce){return Y===null||Y.tag!==6?(Y=rp(J,V.mode,ce),Y.return=V,Y):(Y=y(Y,J),Y.return=V,Y)}function q(V,Y,J,ce){var Me=J.type;return Me===j?oe(V,Y,J.props.children,ce,J.key):Y!==null&&(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===L&&cs(Me)===Y.type)?(Y=y(Y,J.props),ic(Y,J),Y.return=V,Y):(Y=ld(J.type,J.key,J.props,null,V.mode,ce),ic(Y,J),Y.return=V,Y)}function Z(V,Y,J,ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=ap(J,V.mode,ce),Y.return=V,Y):(Y=y(Y,J.children||[]),Y.return=V,Y)}function oe(V,Y,J,ce,Me){return Y===null||Y.tag!==7?(Y=as(J,V.mode,ce,Me),Y.return=V,Y):(Y=y(Y,J),Y.return=V,Y)}function ue(V,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=rp(""+Y,V.mode,J),Y.return=V,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return J=ld(Y.type,Y.key,Y.props,null,V.mode,J),ic(J,Y),J.return=V,J;case _:return Y=ap(Y,V.mode,J),Y.return=V,Y;case L:return Y=cs(Y),ue(V,Y,J)}if(X(Y)||z(Y))return Y=as(Y,V.mode,J,null),Y.return=V,Y;if(typeof Y.then=="function")return ue(V,pd(Y),J);if(Y.$$typeof===C)return ue(V,dd(V,Y),J);gd(V,Y)}return null}function te(V,Y,J,ce){var Me=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Me!==null?null:D(V,Y,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case x:return J.key===Me?q(V,Y,J,ce):null;case _:return J.key===Me?Z(V,Y,J,ce):null;case L:return J=cs(J),te(V,Y,J,ce)}if(X(J)||z(J))return Me!==null?null:oe(V,Y,J,ce,null);if(typeof J.then=="function")return te(V,Y,pd(J),ce);if(J.$$typeof===C)return te(V,Y,dd(V,J),ce);gd(V,J)}return null}function ae(V,Y,J,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return V=V.get(J)||null,D(Y,V,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:return V=V.get(ce.key===null?J:ce.key)||null,q(Y,V,ce,Me);case _:return V=V.get(ce.key===null?J:ce.key)||null,Z(Y,V,ce,Me);case L:return ce=cs(ce),ae(V,Y,J,ce,Me)}if(X(ce)||z(ce))return V=V.get(J)||null,oe(Y,V,ce,Me,null);if(typeof ce.then=="function")return ae(V,Y,J,pd(ce),Me);if(ce.$$typeof===C)return ae(V,Y,J,dd(Y,ce),Me);gd(Y,ce)}return null}function Ce(V,Y,J,ce){for(var Me=null,at=null,ke=Y,Fe=Y=0,Je=null;ke!==null&&Fe<J.length;Fe++){ke.index>Fe?(Je=ke,ke=null):Je=ke.sibling;var it=te(V,ke,J[Fe],ce);if(it===null){ke===null&&(ke=Je);break}a&&ke&&it.alternate===null&&o(V,ke),Y=w(it,Y,Fe),at===null?Me=it:at.sibling=it,at=it,ke=Je}if(Fe===J.length)return u(V,ke),Ze&&_a(V,Fe),Me;if(ke===null){for(;Fe<J.length;Fe++)ke=ue(V,J[Fe],ce),ke!==null&&(Y=w(ke,Y,Fe),at===null?Me=ke:at.sibling=ke,at=ke);return Ze&&_a(V,Fe),Me}for(ke=p(ke);Fe<J.length;Fe++)Je=ae(ke,V,Fe,J[Fe],ce),Je!==null&&(a&&Je.alternate!==null&&ke.delete(Je.key===null?Fe:Je.key),Y=w(Je,Y,Fe),at===null?Me=Je:at.sibling=Je,at=Je);return a&&ke.forEach(function(Ci){return o(V,Ci)}),Ze&&_a(V,Fe),Me}function Le(V,Y,J,ce){if(J==null)throw Error(r(151));for(var Me=null,at=null,ke=Y,Fe=Y=0,Je=null,it=J.next();ke!==null&&!it.done;Fe++,it=J.next()){ke.index>Fe?(Je=ke,ke=null):Je=ke.sibling;var Ci=te(V,ke,it.value,ce);if(Ci===null){ke===null&&(ke=Je);break}a&&ke&&Ci.alternate===null&&o(V,ke),Y=w(Ci,Y,Fe),at===null?Me=Ci:at.sibling=Ci,at=Ci,ke=Je}if(it.done)return u(V,ke),Ze&&_a(V,Fe),Me;if(ke===null){for(;!it.done;Fe++,it=J.next())it=ue(V,it.value,ce),it!==null&&(Y=w(it,Y,Fe),at===null?Me=it:at.sibling=it,at=it);return Ze&&_a(V,Fe),Me}for(ke=p(ke);!it.done;Fe++,it=J.next())it=ae(ke,V,Fe,it.value,ce),it!==null&&(a&&it.alternate!==null&&ke.delete(it.key===null?Fe:it.key),Y=w(it,Y,Fe),at===null?Me=it:at.sibling=it,at=it);return a&&ke.forEach(function(N5){return o(V,N5)}),Ze&&_a(V,Fe),Me}function gt(V,Y,J,ce){if(typeof J=="object"&&J!==null&&J.type===j&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case x:e:{for(var Me=J.key;Y!==null;){if(Y.key===Me){if(Me=J.type,Me===j){if(Y.tag===7){u(V,Y.sibling),ce=y(Y,J.props.children),ce.return=V,V=ce;break e}}else if(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===L&&cs(Me)===Y.type){u(V,Y.sibling),ce=y(Y,J.props),ic(ce,J),ce.return=V,V=ce;break e}u(V,Y);break}else o(V,Y);Y=Y.sibling}J.type===j?(ce=as(J.props.children,V.mode,ce,J.key),ce.return=V,V=ce):(ce=ld(J.type,J.key,J.props,null,V.mode,ce),ic(ce,J),ce.return=V,V=ce)}return E(V);case _:e:{for(Me=J.key;Y!==null;){if(Y.key===Me)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){u(V,Y.sibling),ce=y(Y,J.children||[]),ce.return=V,V=ce;break e}else{u(V,Y);break}else o(V,Y);Y=Y.sibling}ce=ap(J,V.mode,ce),ce.return=V,V=ce}return E(V);case L:return J=cs(J),gt(V,Y,J,ce)}if(X(J))return Ce(V,Y,J,ce);if(z(J)){if(Me=z(J),typeof Me!="function")throw Error(r(150));return J=Me.call(J),Le(V,Y,J,ce)}if(typeof J.then=="function")return gt(V,Y,pd(J),ce);if(J.$$typeof===C)return gt(V,Y,dd(V,J),ce);gd(V,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(u(V,Y.sibling),ce=y(Y,J),ce.return=V,V=ce):(u(V,Y),ce=rp(J,V.mode,ce),ce.return=V,V=ce),E(V)):u(V,Y)}return function(V,Y,J,ce){try{ac=0;var Me=gt(V,Y,J,ce);return Oo=null,Me}catch(ke){if(ke===Eo||ke===hd)throw ke;var at=Qn(29,ke,null,V.mode);return at.lanes=ce,at.return=V,at}finally{}}}var ds=$_(!0),z_=$_(!1),di=!1;function gp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function fi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function hi(a,o,u){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(lt&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,o=od(a),__(a,null,u),o}return sd(a,p,o,u),od(a)}function sc(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,kw(a,u)}}function yp(a,o){var u=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?y=w=E:w=w.next=E,u=u.next}while(u!==null);w===null?y=w=o:w=w.next=o}else y=w=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var bp=!1;function oc(){if(bp){var a=No;if(a!==null)throw a}}function lc(a,o,u,p){bp=!1;var y=a.updateQueue;di=!1;var w=y.firstBaseUpdate,E=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var q=D,Z=q.next;q.next=null,E===null?w=Z:E.next=Z,E=q;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,D=oe.lastBaseUpdate,D!==E&&(D===null?oe.firstBaseUpdate=Z:D.next=Z,oe.lastBaseUpdate=q))}if(w!==null){var ue=y.baseState;E=0,oe=Z=q=null,D=w;do{var te=D.lane&-536870913,ae=te!==D.lane;if(ae?(Qe&te)===te:(p&te)===te){te!==0&&te===So&&(bp=!0),oe!==null&&(oe=oe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ce=a,Le=D;te=o;var gt=u;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){ue=Ce.call(gt,ue,te);break e}ue=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(gt,ue,te):Ce,te==null)break e;ue=g({},ue,te);break e;case 2:di=!0}}te=D.callback,te!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},oe===null?(Z=oe=ae,q=ue):oe=oe.next=ae,E|=te;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;ae=D,D=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);oe===null&&(q=ue),y.baseState=q,y.firstBaseUpdate=Z,y.lastBaseUpdate=oe,w===null&&(y.shared.lanes=0),yi|=E,a.lanes=E,a.memoizedState=ue}}function U_(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function q_(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)U_(u[a],o)}var Co=P(null),vd=P(0);function B_(a,o){a=Ma,G(vd,a),G(Co,o),Ma=a|o.baseLanes}function xp(){G(vd,Ma),G(Co,Co.current)}function wp(){Ma=vd.current,M(Co),M(vd)}var Jn=P(null),_r=null;function mi(a){var o=a.alternate;G(Ut,Ut.current&1),G(Jn,a),_r===null&&(o===null||Co.current!==null||o.memoizedState!==null)&&(_r=a)}function _p(a){G(Ut,Ut.current),G(Jn,a),_r===null&&(_r=a)}function F_(a){a.tag===22?(G(Ut,Ut.current),G(Jn,a),_r===null&&(_r=a)):pi()}function pi(){G(Ut,Ut.current),G(Jn,Jn.current)}function Zn(a){M(Jn),_r===a&&(_r=null),M(Ut)}var Ut=P(0);function yd(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Cg(u)||Ag(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Na=0,Be=null,mt=null,Gt=null,bd=!1,Ao=!1,fs=!1,xd=0,cc=0,ko=null,pD=0;function $t(){throw Error(r(321))}function jp(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Xn(a[u],o[u]))return!1;return!0}function Sp(a,o,u,p,y,w){return Na=w,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=a===null||a.memoizedState===null?E1:zp,fs=!1,w=u(p,y),fs=!1,Ao&&(w=K_(o,u,p,y)),H_(a),w}function H_(a){I.H=fc;var o=mt!==null&&mt.next!==null;if(Na=0,Gt=mt=Be=null,bd=!1,cc=0,ko=null,o)throw Error(r(300));a===null||Yt||(a=a.dependencies,a!==null&&ud(a)&&(Yt=!0))}function K_(a,o,u,p){Be=a;var y=0;do{if(Ao&&(ko=null),cc=0,Ao=!1,25<=y)throw Error(r(301));if(y+=1,Gt=mt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}I.H=O1,w=o(u,p)}while(Ao);return w}function gD(){var a=I.H,o=a.useState()[0];return o=typeof o.then=="function"?uc(o):o,a=a.useState()[0],(mt!==null?mt.memoizedState:null)!==a&&(Be.flags|=1024),o}function Np(){var a=xd!==0;return xd=0,a}function Ep(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function Op(a){if(bd){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}bd=!1}Na=0,Gt=mt=Be=null,Ao=!1,cc=xd=0,ko=null}function Tn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Be.memoizedState=Gt=a:Gt=Gt.next=a,Gt}function qt(){if(mt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=mt.next;var o=Gt===null?Be.memoizedState:Gt.next;if(o!==null)Gt=o,mt=a;else{if(a===null)throw Be.alternate===null?Error(r(467)):Error(r(310));mt=a,a={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Gt===null?Be.memoizedState=Gt=a:Gt=Gt.next=a}return Gt}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(a){var o=cc;return cc+=1,ko===null&&(ko=[]),a=D_(ko,a,o),o=Be,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?E1:zp),a}function _d(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return uc(a);if(a.$$typeof===C)return xn(a)}throw Error(r(438,String(a)))}function Cp(a){var o=null,u=Be.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=Be.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=wd(),Be.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),p=0;p<a;p++)u[p]=B;return o.index++,u}function Ea(a,o){return typeof o=="function"?o(a):o}function jd(a){var o=qt();return Ap(o,mt,a)}function Ap(a,o,u){var p=a.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=u;var y=a.baseQueue,w=p.pending;if(w!==null){if(y!==null){var E=y.next;y.next=w.next,w.next=E}o.baseQueue=y=w,p.pending=null}if(w=a.baseState,y===null)a.memoizedState=w;else{o=y.next;var D=E=null,q=null,Z=o,oe=!1;do{var ue=Z.lane&-536870913;if(ue!==Z.lane?(Qe&ue)===ue:(Na&ue)===ue){var te=Z.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ue===So&&(oe=!0);else if((Na&te)===te){Z=Z.next,te===So&&(oe=!0);continue}else ue={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=ue,E=w):q=q.next=ue,Be.lanes|=te,yi|=te;ue=Z.action,fs&&u(w,ue),w=Z.hasEagerState?Z.eagerState:u(w,ue)}else te={lane:ue,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(D=q=te,E=w):q=q.next=te,Be.lanes|=ue,yi|=ue;Z=Z.next}while(Z!==null&&Z!==o);if(q===null?E=w:q.next=D,!Xn(w,a.memoizedState)&&(Yt=!0,oe&&(u=No,u!==null)))throw u;a.memoizedState=w,a.baseState=E,a.baseQueue=q,p.lastRenderedState=w}return y===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function kp(a){var o=qt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var p=u.dispatch,y=u.pending,w=o.memoizedState;if(y!==null){u.pending=null;var E=y=y.next;do w=a(w,E.action),E=E.next;while(E!==y);Xn(w,o.memoizedState)||(Yt=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function G_(a,o,u){var p=Be,y=qt(),w=Ze;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=o();var E=!Xn((mt||y).memoizedState,u);if(E&&(y.memoizedState=u,Yt=!0),y=y.queue,Mp(W_.bind(null,p,y,a),[a]),y.getSnapshot!==o||E||Gt!==null&&Gt.memoizedState.tag&1){if(p.flags|=2048,To(9,{destroy:void 0},V_.bind(null,p,y,u,o),null),xt===null)throw Error(r(349));w||(Na&127)!==0||Y_(p,o,u)}return u}function Y_(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Be.updateQueue,o===null?(o=wd(),Be.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function V_(a,o,u,p){o.value=u,o.getSnapshot=p,X_(o)&&Q_(a)}function W_(a,o,u){return u(function(){X_(o)&&Q_(a)})}function X_(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Xn(a,u)}catch{return!0}}function Q_(a){var o=rs(a,2);o!==null&&Fn(o,a,2)}function Tp(a){var o=Tn();if(typeof a=="function"){var u=a;if(a=u(),fs){Ge(!0);try{u()}finally{Ge(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:a},o}function J_(a,o,u,p){return a.baseState=u,Ap(a,mt,typeof p=="function"?p:Ea)}function vD(a,o,u,p,y){if(Ed(a))throw Error(r(485));if(a=o.action,a!==null){var w={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){w.listeners.push(E)}};I.T!==null?u(!0):w.isTransition=!1,p(w),u=o.pending,u===null?(w.next=o.pending=w,Z_(o,w)):(w.next=u.next,o.pending=u.next=w)}}function Z_(a,o){var u=o.action,p=o.payload,y=a.state;if(o.isTransition){var w=I.T,E={};I.T=E;try{var D=u(y,p),q=I.S;q!==null&&q(E,D),e1(a,o,D)}catch(Z){Pp(a,o,Z)}finally{w!==null&&E.types!==null&&(w.types=E.types),I.T=w}}else try{w=u(y,p),e1(a,o,w)}catch(Z){Pp(a,o,Z)}}function e1(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){t1(a,o,p)},function(p){return Pp(a,o,p)}):t1(a,o,u)}function t1(a,o,u){o.status="fulfilled",o.value=u,n1(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,Z_(a,u)))}function Pp(a,o,u){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,n1(o),o=o.next;while(o!==p)}a.action=null}function n1(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function r1(a,o){return o}function a1(a,o){if(Ze){var u=xt.formState;if(u!==null){e:{var p=Be;if(Ze){if(Et){t:{for(var y=Et,w=wr;y.nodeType!==8;){if(!w){y=null;break t}if(y=jr(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Et=jr(y.nextSibling),p=y.data==="F!";break e}}ci(p)}p=!1}p&&(o=u[0])}}return u=Tn(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r1,lastRenderedState:o},u.queue=p,u=j1.bind(null,Be,p),p.dispatch=u,p=Tp(!1),w=$p.bind(null,Be,!1,p.queue),p=Tn(),y={state:o,dispatch:null,action:a,pending:null},p.queue=y,u=vD.bind(null,Be,y,w,u),y.dispatch=u,p.memoizedState=a,[o,u,!1]}function i1(a){var o=qt();return s1(o,mt,a)}function s1(a,o,u){if(o=Ap(a,o,r1)[0],a=jd(Ea)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=uc(o)}catch(E){throw E===Eo?hd:E}else p=o;o=qt();var y=o.queue,w=y.dispatch;return u!==o.memoizedState&&(Be.flags|=2048,To(9,{destroy:void 0},yD.bind(null,y,u),null)),[p,w,a]}function yD(a,o){a.action=o}function o1(a){var o=qt(),u=mt;if(u!==null)return s1(o,u,a);qt(),o=o.memoizedState,u=qt();var p=u.queue.dispatch;return u.memoizedState=a,[o,p,!1]}function To(a,o,u,p){return a={tag:a,create:u,deps:p,inst:o,next:null},o=Be.updateQueue,o===null&&(o=wd(),Be.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(p=u.next,u.next=a,a.next=p,o.lastEffect=a),a}function l1(){return qt().memoizedState}function Sd(a,o,u,p){var y=Tn();Be.flags|=a,y.memoizedState=To(1|o,{destroy:void 0},u,p===void 0?null:p)}function Nd(a,o,u,p){var y=qt();p=p===void 0?null:p;var w=y.memoizedState.inst;mt!==null&&p!==null&&jp(p,mt.memoizedState.deps)?y.memoizedState=To(o,w,u,p):(Be.flags|=a,y.memoizedState=To(1|o,w,u,p))}function c1(a,o){Sd(8390656,8,a,o)}function Mp(a,o){Nd(2048,8,a,o)}function bD(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=wd(),Be.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function u1(a){var o=qt().memoizedState;return bD({ref:o,nextImpl:a}),function(){if((lt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function d1(a,o){return Nd(4,2,a,o)}function f1(a,o){return Nd(4,4,a,o)}function h1(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function m1(a,o,u){u=u!=null?u.concat([a]):null,Nd(4,4,h1.bind(null,o,a),u)}function Rp(){}function p1(a,o){var u=qt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&jp(o,p[1])?p[0]:(u.memoizedState=[a,o],a)}function g1(a,o){var u=qt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&jp(o,p[1]))return p[0];if(p=a(),fs){Ge(!0);try{a()}finally{Ge(!1)}}return u.memoizedState=[p,o],p}function Dp(a,o,u){return u===void 0||(Na&1073741824)!==0&&(Qe&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=vj(),Be.lanes|=a,yi|=a,u)}function v1(a,o,u,p){return Xn(u,o)?u:Co.current!==null?(a=Dp(a,u,p),Xn(a,o)||(Yt=!0),a):(Na&42)===0||(Na&1073741824)!==0&&(Qe&261930)===0?(Yt=!0,a.memoizedState=u):(a=vj(),Be.lanes|=a,yi|=a,o)}function y1(a,o,u,p,y){var w=$.p;$.p=w!==0&&8>w?w:8;var E=I.T,D={};I.T=D,$p(a,!1,o,u);try{var q=y(),Z=I.S;if(Z!==null&&Z(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var oe=mD(q,p);dc(a,o,oe,nr(a))}else dc(a,o,p,nr(a))}catch(ue){dc(a,o,{then:function(){},status:"rejected",reason:ue},nr())}finally{$.p=w,E!==null&&D.types!==null&&(E.types=D.types),I.T=E}}function xD(){}function Ip(a,o,u,p){if(a.tag!==5)throw Error(r(476));var y=b1(a).queue;y1(a,y,o,U,u===null?xD:function(){return x1(a),u(p)})}function b1(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:U},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function x1(a){var o=b1(a);o.next===null&&(o=a.alternate.memoizedState),dc(a,o.next.queue,{},nr())}function Lp(){return xn(Cc)}function w1(){return qt().memoizedState}function _1(){return qt().memoizedState}function wD(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=nr();a=fi(u);var p=hi(o,a,u);p!==null&&(Fn(p,o,u),sc(p,o,u)),o={cache:fp()},a.payload=o;return}o=o.return}}function _D(a,o,u){var p=nr();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ed(a)?S1(o,u):(u=tp(a,o,u,p),u!==null&&(Fn(u,a,p),N1(u,o,p)))}function j1(a,o,u){var p=nr();dc(a,o,u,p)}function dc(a,o,u,p){var y={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ed(a))S1(o,y);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var E=o.lastRenderedState,D=w(E,u);if(y.hasEagerState=!0,y.eagerState=D,Xn(D,E))return sd(a,o,y,0),xt===null&&id(),!1}catch{}finally{}if(u=tp(a,o,y,p),u!==null)return Fn(u,a,p),N1(u,o,p),!0}return!1}function $p(a,o,u,p){if(p={lane:2,revertLane:gg(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ed(a)){if(o)throw Error(r(479))}else o=tp(a,u,p,2),o!==null&&Fn(o,a,2)}function Ed(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function S1(a,o){Ao=bd=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function N1(a,o,u){if((u&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,kw(a,u)}}var fc={readContext:xn,use:_d,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};fc.useEffectEvent=$t;var E1={readContext:xn,use:_d,useCallback:function(a,o){return Tn().memoizedState=[a,o===void 0?null:o],a},useContext:xn,useEffect:c1,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,Sd(4194308,4,h1.bind(null,o,a),u)},useLayoutEffect:function(a,o){return Sd(4194308,4,a,o)},useInsertionEffect:function(a,o){Sd(4,2,a,o)},useMemo:function(a,o){var u=Tn();o=o===void 0?null:o;var p=a();if(fs){Ge(!0);try{a()}finally{Ge(!1)}}return u.memoizedState=[p,o],p},useReducer:function(a,o,u){var p=Tn();if(u!==void 0){var y=u(o);if(fs){Ge(!0);try{u(o)}finally{Ge(!1)}}}else y=o;return p.memoizedState=p.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},p.queue=a,a=a.dispatch=_D.bind(null,Be,a),[p.memoizedState,a]},useRef:function(a){var o=Tn();return a={current:a},o.memoizedState=a},useState:function(a){a=Tp(a);var o=a.queue,u=j1.bind(null,Be,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:Rp,useDeferredValue:function(a,o){var u=Tn();return Dp(u,a,o)},useTransition:function(){var a=Tp(!1);return a=y1.bind(null,Be,a.queue,!0,!1),Tn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var p=Be,y=Tn();if(Ze){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),xt===null)throw Error(r(349));(Qe&127)!==0||Y_(p,o,u)}y.memoizedState=u;var w={value:u,getSnapshot:o};return y.queue=w,c1(W_.bind(null,p,w,a),[a]),p.flags|=2048,To(9,{destroy:void 0},V_.bind(null,p,w,u,o),null),u},useId:function(){var a=Tn(),o=xt.identifierPrefix;if(Ze){var u=ta,p=ea;u=(p&~(1<<32-tt(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=xd++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=pD++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Lp,useFormState:a1,useActionState:a1,useOptimistic:function(a){var o=Tn();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=$p.bind(null,Be,!0,u),u.dispatch=o,[a,o]},useMemoCache:Cp,useCacheRefresh:function(){return Tn().memoizedState=wD.bind(null,Be)},useEffectEvent:function(a){var o=Tn(),u={impl:a};return o.memoizedState=u,function(){if((lt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},zp={readContext:xn,use:_d,useCallback:p1,useContext:xn,useEffect:Mp,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:g1,useReducer:jd,useRef:l1,useState:function(){return jd(Ea)},useDebugValue:Rp,useDeferredValue:function(a,o){var u=qt();return v1(u,mt.memoizedState,a,o)},useTransition:function(){var a=jd(Ea)[0],o=qt().memoizedState;return[typeof a=="boolean"?a:uc(a),o]},useSyncExternalStore:G_,useId:w1,useHostTransitionStatus:Lp,useFormState:i1,useActionState:i1,useOptimistic:function(a,o){var u=qt();return J_(u,mt,a,o)},useMemoCache:Cp,useCacheRefresh:_1};zp.useEffectEvent=u1;var O1={readContext:xn,use:_d,useCallback:p1,useContext:xn,useEffect:Mp,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:g1,useReducer:kp,useRef:l1,useState:function(){return kp(Ea)},useDebugValue:Rp,useDeferredValue:function(a,o){var u=qt();return mt===null?Dp(u,a,o):v1(u,mt.memoizedState,a,o)},useTransition:function(){var a=kp(Ea)[0],o=qt().memoizedState;return[typeof a=="boolean"?a:uc(a),o]},useSyncExternalStore:G_,useId:w1,useHostTransitionStatus:Lp,useFormState:o1,useActionState:o1,useOptimistic:function(a,o){var u=qt();return mt!==null?J_(u,mt,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:_1};O1.useEffectEvent=u1;function Up(a,o,u,p){o=a.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var qp={enqueueSetState:function(a,o,u){a=a._reactInternals;var p=nr(),y=fi(p);y.payload=o,u!=null&&(y.callback=u),o=hi(a,y,p),o!==null&&(Fn(o,a,p),sc(o,a,p))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var p=nr(),y=fi(p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=hi(a,y,p),o!==null&&(Fn(o,a,p),sc(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=nr(),p=fi(u);p.tag=2,o!=null&&(p.callback=o),o=hi(a,p,u),o!==null&&(Fn(o,a,u),sc(o,a,u))}};function C1(a,o,u,p,y,w,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,w,E):o.prototype&&o.prototype.isPureReactComponent?!Jl(u,p)||!Jl(y,w):!0}function A1(a,o,u,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==a&&qp.enqueueReplaceState(o,o.state,null)}function hs(a,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(a=a.defaultProps){u===o&&(u=g({},u));for(var y in a)u[y]===void 0&&(u[y]=a[y])}return u}function k1(a){ad(a)}function T1(a){console.error(a)}function P1(a){ad(a)}function Od(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function M1(a,o,u){try{var p=a.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Bp(a,o,u){return u=fi(u),u.tag=3,u.payload={element:null},u.callback=function(){Od(a,o)},u}function R1(a){return a=fi(a),a.tag=3,a}function D1(a,o,u,p){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var w=p.value;a.payload=function(){return y(w)},a.callback=function(){M1(o,u,p)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){M1(o,u,p),typeof y!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var D=p.stack;this.componentDidCatch(p.value,{componentStack:D!==null?D:""})})}function jD(a,o,u,p,y){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&jo(o,u,y,!0),u=Jn.current,u!==null){switch(u.tag){case 31:case 13:return _r===null?zd():u.alternate===null&&zt===0&&(zt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,p===md?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),hg(a,p,y)),!1;case 22:return u.flags|=65536,p===md?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),hg(a,p,y)),!1}throw Error(r(435,u.tag))}return hg(a,p,y),zd(),!1}if(Ze)return o=Jn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,p!==op&&(a=Error(r(422),{cause:p}),tc(yr(a,u)))):(p!==op&&(o=Error(r(423),{cause:p}),tc(yr(o,u))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,p=yr(p,u),y=Bp(a.stateNode,p,y),yp(a,y),zt!==4&&(zt=2)),!1;var w=Error(r(520),{cause:p});if(w=yr(w,u),xc===null?xc=[w]:xc.push(w),zt!==4&&(zt=2),o===null)return!0;p=yr(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=y&-y,u.lanes|=a,a=Bp(u.stateNode,p,a),yp(u,a),!1;case 1:if(o=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(bi===null||!bi.has(w))))return u.flags|=65536,y&=-y,u.lanes|=y,y=R1(y),D1(y,a,u,p),yp(u,y),!1}u=u.return}while(u!==null);return!1}var Fp=Error(r(461)),Yt=!1;function wn(a,o,u,p){o.child=a===null?z_(o,null,u,p):ds(o,a.child,u,p)}function I1(a,o,u,p,y){u=u.render;var w=o.ref;if("ref"in p){var E={};for(var D in p)D!=="ref"&&(E[D]=p[D])}else E=p;return os(o),p=Sp(a,o,u,E,w,y),D=Np(),a!==null&&!Yt?(Ep(a,o,y),Oa(a,o,y)):(Ze&&D&&ip(o),o.flags|=1,wn(a,o,p,y),o.child)}function L1(a,o,u,p,y){if(a===null){var w=u.type;return typeof w=="function"&&!np(w)&&w.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=w,$1(a,o,w,p,y)):(a=ld(u.type,null,p,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(w=a.child,!Qp(a,y)){var E=w.memoizedProps;if(u=u.compare,u=u!==null?u:Jl,u(E,p)&&a.ref===o.ref)return Oa(a,o,y)}return o.flags|=1,a=wa(w,p),a.ref=o.ref,a.return=o,o.child=a}function $1(a,o,u,p,y){if(a!==null){var w=a.memoizedProps;if(Jl(w,p)&&a.ref===o.ref)if(Yt=!1,o.pendingProps=p=w,Qp(a,y))(a.flags&131072)!==0&&(Yt=!0);else return o.lanes=a.lanes,Oa(a,o,y)}return Hp(a,o,u,p,y)}function z1(a,o,u,p){var y=p.children,w=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|u:u,a!==null){for(p=o.child=a.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~w}else p=0,o.child=null;return U1(a,o,w,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&fd(o,w!==null?w.cachePool:null),w!==null?B_(o,w):xp(),F_(o);else return p=o.lanes=536870912,U1(a,o,w!==null?w.baseLanes|u:u,u,p)}else w!==null?(fd(o,w.cachePool),B_(o,w),pi(),o.memoizedState=null):(a!==null&&fd(o,null),xp(),pi());return wn(a,o,y,u),o.child}function hc(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function U1(a,o,u,p,y){var w=mp();return w=w===null?null:{parent:Kt._currentValue,pool:w},o.memoizedState={baseLanes:u,cachePool:w},a!==null&&fd(o,null),xp(),F_(o),a!==null&&jo(a,o,p,!0),o.childLanes=y,null}function Cd(a,o){return o=kd({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function q1(a,o,u){return ds(o,a.child,null,u),a=Cd(o,o.pendingProps),a.flags|=2,Zn(o),o.memoizedState=null,a}function SD(a,o,u){var p=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Ze){if(p.mode==="hidden")return a=Cd(o,p),o.lanes=536870912,hc(null,a);if(_p(o),(a=Et)?(a=Zj(a,wr),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:oi!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},u=S_(a),u.return=o,o.child=u,bn=o,Et=null)):a=null,a===null)throw ci(o);return o.lanes=536870912,null}return Cd(o,p)}var w=a.memoizedState;if(w!==null){var E=w.dehydrated;if(_p(o),y)if(o.flags&256)o.flags&=-257,o=q1(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(Yt||jo(a,o,u,!1),y=(u&a.childLanes)!==0,Yt||y){if(p=xt,p!==null&&(E=Tw(p,u),E!==0&&E!==w.retryLane))throw w.retryLane=E,rs(a,E),Fn(p,a,E),Fp;zd(),o=q1(a,o,u)}else a=w.treeContext,Et=jr(E.nextSibling),bn=o,Ze=!0,li=null,wr=!1,a!==null&&O_(o,a),o=Cd(o,p),o.flags|=4096;return o}return a=wa(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Ad(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function Hp(a,o,u,p,y){return os(o),u=Sp(a,o,u,p,void 0,y),p=Np(),a!==null&&!Yt?(Ep(a,o,y),Oa(a,o,y)):(Ze&&p&&ip(o),o.flags|=1,wn(a,o,u,y),o.child)}function B1(a,o,u,p,y,w){return os(o),o.updateQueue=null,u=K_(o,p,u,y),H_(a),p=Np(),a!==null&&!Yt?(Ep(a,o,w),Oa(a,o,w)):(Ze&&p&&ip(o),o.flags|=1,wn(a,o,u,w),o.child)}function F1(a,o,u,p,y){if(os(o),o.stateNode===null){var w=bo,E=u.contextType;typeof E=="object"&&E!==null&&(w=xn(E)),w=new u(p,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=qp,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=p,w.state=o.memoizedState,w.refs={},gp(o),E=u.contextType,w.context=typeof E=="object"&&E!==null?xn(E):bo,w.state=o.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(Up(o,u,E,p),w.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(E=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),E!==w.state&&qp.enqueueReplaceState(w,w.state,null),lc(o,p,w,y),oc(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){w=o.stateNode;var D=o.memoizedProps,q=hs(u,D);w.props=q;var Z=w.context,oe=u.contextType;E=bo,typeof oe=="object"&&oe!==null&&(E=xn(oe));var ue=u.getDerivedStateFromProps;oe=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||Z!==E)&&A1(o,w,p,E),di=!1;var te=o.memoizedState;w.state=te,lc(o,p,w,y),oc(),Z=o.memoizedState,D||te!==Z||di?(typeof ue=="function"&&(Up(o,u,ue,p),Z=o.memoizedState),(q=di||C1(o,u,q,p,te,Z,E))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=Z),w.props=p,w.state=Z,w.context=E,p=q):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{w=o.stateNode,vp(a,o),E=o.memoizedProps,oe=hs(u,E),w.props=oe,ue=o.pendingProps,te=w.context,Z=u.contextType,q=bo,typeof Z=="object"&&Z!==null&&(q=xn(Z)),D=u.getDerivedStateFromProps,(Z=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==ue||te!==q)&&A1(o,w,p,q),di=!1,te=o.memoizedState,w.state=te,lc(o,p,w,y),oc();var ae=o.memoizedState;E!==ue||te!==ae||di||a!==null&&a.dependencies!==null&&ud(a.dependencies)?(typeof D=="function"&&(Up(o,u,D,p),ae=o.memoizedState),(oe=di||C1(o,u,oe,p,te,ae,q)||a!==null&&a.dependencies!==null&&ud(a.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,ae,q),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,ae,q)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===a.memoizedProps&&te===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&te===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ae),w.props=p,w.state=ae,w.context=q,p=oe):(typeof w.componentDidUpdate!="function"||E===a.memoizedProps&&te===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&te===a.memoizedState||(o.flags|=1024),p=!1)}return w=p,Ad(a,o),p=(o.flags&128)!==0,w||p?(w=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,a!==null&&p?(o.child=ds(o,a.child,null,y),o.child=ds(o,null,u,y)):wn(a,o,u,y),o.memoizedState=w.state,a=o.child):a=Oa(a,o,y),a}function H1(a,o,u,p){return is(),o.flags|=256,wn(a,o,u,p),o.child}var Kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gp(a){return{baseLanes:a,cachePool:M_()}}function Yp(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=tr),a}function K1(a,o,u){var p=o.pendingProps,y=!1,w=(o.flags&128)!==0,E;if((E=w)||(E=a!==null&&a.memoizedState===null?!1:(Ut.current&2)!==0),E&&(y=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ze){if(y?mi(o):pi(),(a=Et)?(a=Zj(a,wr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:oi!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},u=S_(a),u.return=o,o.child=u,bn=o,Et=null)):a=null,a===null)throw ci(o);return Ag(a)?o.lanes=32:o.lanes=536870912,null}var D=p.children;return p=p.fallback,y?(pi(),y=o.mode,D=kd({mode:"hidden",children:D},y),p=as(p,y,u,null),D.return=o,p.return=o,D.sibling=p,o.child=D,p=o.child,p.memoizedState=Gp(u),p.childLanes=Yp(a,E,u),o.memoizedState=Kp,hc(null,p)):(mi(o),Vp(o,D))}var q=a.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(w)o.flags&256?(mi(o),o.flags&=-257,o=Wp(a,o,u)):o.memoizedState!==null?(pi(),o.child=a.child,o.flags|=128,o=null):(pi(),D=p.fallback,y=o.mode,p=kd({mode:"visible",children:p.children},y),D=as(D,y,u,null),D.flags|=2,p.return=o,D.return=o,p.sibling=D,o.child=p,ds(o,a.child,null,u),p=o.child,p.memoizedState=Gp(u),p.childLanes=Yp(a,E,u),o.memoizedState=Kp,o=hc(null,p));else if(mi(o),Ag(D)){if(E=D.nextSibling&&D.nextSibling.dataset,E)var Z=E.dgst;E=Z,p=Error(r(419)),p.stack="",p.digest=E,tc({value:p,source:null,stack:null}),o=Wp(a,o,u)}else if(Yt||jo(a,o,u,!1),E=(u&a.childLanes)!==0,Yt||E){if(E=xt,E!==null&&(p=Tw(E,u),p!==0&&p!==q.retryLane))throw q.retryLane=p,rs(a,p),Fn(E,a,p),Fp;Cg(D)||zd(),o=Wp(a,o,u)}else Cg(D)?(o.flags|=192,o.child=a.child,o=null):(a=q.treeContext,Et=jr(D.nextSibling),bn=o,Ze=!0,li=null,wr=!1,a!==null&&O_(o,a),o=Vp(o,p.children),o.flags|=4096);return o}return y?(pi(),D=p.fallback,y=o.mode,q=a.child,Z=q.sibling,p=wa(q,{mode:"hidden",children:p.children}),p.subtreeFlags=q.subtreeFlags&65011712,Z!==null?D=wa(Z,D):(D=as(D,y,u,null),D.flags|=2),D.return=o,p.return=o,p.sibling=D,o.child=p,hc(null,p),p=o.child,D=a.child.memoizedState,D===null?D=Gp(u):(y=D.cachePool,y!==null?(q=Kt._currentValue,y=y.parent!==q?{parent:q,pool:q}:y):y=M_(),D={baseLanes:D.baseLanes|u,cachePool:y}),p.memoizedState=D,p.childLanes=Yp(a,E,u),o.memoizedState=Kp,hc(a.child,p)):(mi(o),u=a.child,a=u.sibling,u=wa(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=u,o.memoizedState=null,u)}function Vp(a,o){return o=kd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function kd(a,o){return a=Qn(22,a,null,o),a.lanes=0,a}function Wp(a,o,u){return ds(o,a.child,null,u),a=Vp(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function G1(a,o,u){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),up(a.return,o,u)}function Xp(a,o,u,p,y,w){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y,treeForkCount:w}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=u,E.tailMode=y,E.treeForkCount=w)}function Y1(a,o,u){var p=o.pendingProps,y=p.revealOrder,w=p.tail;p=p.children;var E=Ut.current,D=(E&2)!==0;if(D?(E=E&1|2,o.flags|=128):E&=1,G(Ut,E),wn(a,o,p,u),p=Ze?ec:0,!D&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&G1(a,u,o);else if(a.tag===19)G1(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)a=u.alternate,a!==null&&yd(a)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),Xp(o,!1,y,u,w,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&yd(a)===null){o.child=y;break}a=y.sibling,y.sibling=u,u=y,y=a}Xp(o,!0,u,null,w,p);break;case"together":Xp(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function Oa(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),yi|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(jo(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,u=wa(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=wa(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function Qp(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&ud(a)))}function ND(a,o,u){switch(o.tag){case 3:$e(o,o.stateNode.containerInfo),ui(o,Kt,a.memoizedState.cache),is();break;case 27:case 5:de(o);break;case 4:$e(o,o.stateNode.containerInfo);break;case 10:ui(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,_p(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(mi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?K1(a,o,u):(mi(o),a=Oa(a,o,u),a!==null?a.sibling:null);mi(o);break;case 19:var y=(a.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(jo(a,o,u,!1),p=(u&o.childLanes)!==0),y){if(p)return Y1(a,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),G(Ut,Ut.current),p)break;return null;case 22:return o.lanes=0,z1(a,o,u,o.pendingProps);case 24:ui(o,Kt,a.memoizedState.cache)}return Oa(a,o,u)}function V1(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)Yt=!0;else{if(!Qp(a,u)&&(o.flags&128)===0)return Yt=!1,ND(a,o,u);Yt=(a.flags&131072)!==0}else Yt=!1,Ze&&(o.flags&1048576)!==0&&E_(o,ec,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=cs(o.elementType),o.type=a,typeof a=="function")np(a)?(p=hs(a,p),o.tag=1,o=F1(null,o,a,p,u)):(o.tag=0,o=Hp(null,o,a,p,u));else{if(a!=null){var y=a.$$typeof;if(y===A){o.tag=11,o=I1(null,o,a,p,u);break e}else if(y===R){o.tag=14,o=L1(null,o,a,p,u);break e}}throw o=H(a)||a,Error(r(306,o,""))}}return o;case 0:return Hp(a,o,o.type,o.pendingProps,u);case 1:return p=o.type,y=hs(p,o.pendingProps),F1(a,o,p,y,u);case 3:e:{if($e(o,o.stateNode.containerInfo),a===null)throw Error(r(387));p=o.pendingProps;var w=o.memoizedState;y=w.element,vp(a,o),lc(o,p,null,u);var E=o.memoizedState;if(p=E.cache,ui(o,Kt,p),p!==w.cache&&dp(o,[Kt],u,!0),oc(),p=E.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=H1(a,o,p,u);break e}else if(p!==y){y=yr(Error(r(424)),o),tc(y),o=H1(a,o,p,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Et=jr(a.firstChild),bn=o,Ze=!0,li=null,wr=!0,u=z_(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(is(),p===y){o=Oa(a,o,u);break e}wn(a,o,p,u)}o=o.child}return o;case 26:return Ad(a,o),a===null?(u=iS(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ze||(u=o.type,a=o.pendingProps,p=Gd(he.current).createElement(u),p[yn]=o,p[Ln]=a,_n(p,u,a),cn(p),o.stateNode=p):o.memoizedState=iS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return de(o),a===null&&Ze&&(p=o.stateNode=nS(o.type,o.pendingProps,he.current),bn=o,wr=!0,y=Et,ji(o.type)?(kg=y,Et=jr(p.firstChild)):Et=y),wn(a,o,o.pendingProps.children,u),Ad(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ze&&((y=p=Et)&&(p=t5(p,o.type,o.pendingProps,wr),p!==null?(o.stateNode=p,bn=o,Et=jr(p.firstChild),wr=!1,y=!0):y=!1),y||ci(o)),de(o),y=o.type,w=o.pendingProps,E=a!==null?a.memoizedProps:null,p=w.children,Ng(y,w)?p=null:E!==null&&Ng(y,E)&&(o.flags|=32),o.memoizedState!==null&&(y=Sp(a,o,gD,null,null,u),Cc._currentValue=y),Ad(a,o),wn(a,o,p,u),o.child;case 6:return a===null&&Ze&&((a=u=Et)&&(u=n5(u,o.pendingProps,wr),u!==null?(o.stateNode=u,bn=o,Et=null,a=!0):a=!1),a||ci(o)),null;case 13:return K1(a,o,u);case 4:return $e(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=ds(o,null,p,u):wn(a,o,p,u),o.child;case 11:return I1(a,o,o.type,o.pendingProps,u);case 7:return wn(a,o,o.pendingProps,u),o.child;case 8:return wn(a,o,o.pendingProps.children,u),o.child;case 12:return wn(a,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,ui(o,o.type,p.value),wn(a,o,p.children,u),o.child;case 9:return y=o.type._context,p=o.pendingProps.children,os(o),y=xn(y),p=p(y),o.flags|=1,wn(a,o,p,u),o.child;case 14:return L1(a,o,o.type,o.pendingProps,u);case 15:return $1(a,o,o.type,o.pendingProps,u);case 19:return Y1(a,o,u);case 31:return SD(a,o,u);case 22:return z1(a,o,u,o.pendingProps);case 24:return os(o),p=xn(Kt),a===null?(y=mp(),y===null&&(y=xt,w=fp(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=u),y=w),o.memoizedState={parent:p,cache:y},gp(o),ui(o,Kt,y)):((a.lanes&u)!==0&&(vp(a,o),lc(o,null,null,u),oc()),y=a.memoizedState,w=o.memoizedState,y.parent!==p?(y={parent:p,cache:p},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ui(o,Kt,p)):(p=w.cache,ui(o,Kt,p),p!==y.cache&&dp(o,[Kt],u,!0))),wn(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ca(a){a.flags|=4}function Jp(a,o,u,p,y){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(wj())a.flags|=8192;else throw us=md,pp}else a.flags&=-16777217}function W1(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!uS(o))if(wj())a.flags|=8192;else throw us=md,pp}function Td(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ql():536870912,a.lanes|=o,Do|=o)}function mc(a,o){if(!Ze)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Ot(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,p=0;if(o)for(var y=a.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=p,a.childLanes=u,o}function ED(a,o,u){var p=o.pendingProps;switch(sp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(o),null;case 1:return Ot(o),null;case 3:return u=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),Sa(Kt),fe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(_o(o)?Ca(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,lp())),Ot(o),null;case 26:var y=o.type,w=o.memoizedState;return a===null?(Ca(o),w!==null?(Ot(o),W1(o,w)):(Ot(o),Jp(o,y,null,p,u))):w?w!==a.memoizedState?(Ca(o),Ot(o),W1(o,w)):(Ot(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&Ca(o),Ot(o),Jp(o,y,a,p,u)),null;case 27:if(we(o),u=he.current,y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Ca(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Ot(o),null}a=ne.current,_o(o)?C_(o):(a=nS(y,p,u),o.stateNode=a,Ca(o))}return Ot(o),null;case 5:if(we(o),y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Ca(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Ot(o),null}if(w=ne.current,_o(o))C_(o);else{var E=Gd(he.current);switch(w){case 1:w=E.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=E.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=E.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?E.createElement("select",{is:p.is}):E.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?E.createElement(y,{is:p.is}):E.createElement(y)}}w[yn]=o,w[Ln]=p;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)w.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=w;e:switch(_n(w,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ca(o)}}return Ot(o),Jp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&Ca(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(r(166));if(a=he.current,_o(o)){if(a=o.stateNode,u=o.memoizedProps,p=null,y=bn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}a[yn]=o,a=!!(a.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||Kj(a.nodeValue,u)),a||ci(o,!0)}else a=Gd(a).createTextNode(p),a[yn]=o,o.stateNode=a}return Ot(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(p=_o(o),u!==null){if(a===null){if(!p)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[yn]=o}else is(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ot(o),a=!1}else u=lp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(Zn(o),o):(Zn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Ot(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=_o(o),p!==null&&p.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[yn]=o}else is(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ot(o),y=!1}else y=lp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Zn(o),o):(Zn(o),null)}return Zn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,a=a!==null&&a.memoizedState!==null,u&&(p=o.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),Td(o,o.updateQueue),Ot(o),null);case 4:return fe(),a===null&&xg(o.stateNode.containerInfo),Ot(o),null;case 10:return Sa(o.type),Ot(o),null;case 19:if(M(Ut),p=o.memoizedState,p===null)return Ot(o),null;if(y=(o.flags&128)!==0,w=p.rendering,w===null)if(y)mc(p,!1);else{if(zt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(w=yd(a),w!==null){for(o.flags|=128,mc(p,!1),a=w.updateQueue,o.updateQueue=a,Td(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)j_(u,a),u=u.sibling;return G(Ut,Ut.current&1|2),Ze&&_a(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&Nt()>Id&&(o.flags|=128,y=!0,mc(p,!1),o.lanes=4194304)}else{if(!y)if(a=yd(w),a!==null){if(o.flags|=128,y=!0,a=a.updateQueue,o.updateQueue=a,Td(o,a),mc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Ze)return Ot(o),null}else 2*Nt()-p.renderingStartTime>Id&&u!==536870912&&(o.flags|=128,y=!0,mc(p,!1),o.lanes=4194304);p.isBackwards?(w.sibling=o.child,o.child=w):(a=p.last,a!==null?a.sibling=w:o.child=w,p.last=w)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Nt(),a.sibling=null,u=Ut.current,G(Ut,y?u&1|2:u&1),Ze&&_a(o,p.treeForkCount),a):(Ot(o),null);case 22:case 23:return Zn(o),wp(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Ot(o),o.subtreeFlags&6&&(o.flags|=8192)):Ot(o),u=o.updateQueue,u!==null&&Td(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),a!==null&&M(ls),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Sa(Kt),Ot(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function OD(a,o){switch(sp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Sa(Kt),fe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return we(o),null;case 31:if(o.memoizedState!==null){if(Zn(o),o.alternate===null)throw Error(r(340));is()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(Zn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));is()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return M(Ut),null;case 4:return fe(),null;case 10:return Sa(o.type),null;case 22:case 23:return Zn(o),wp(),a!==null&&M(ls),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Sa(Kt),null;case 25:return null;default:return null}}function X1(a,o){switch(sp(o),o.tag){case 3:Sa(Kt),fe();break;case 26:case 27:case 5:we(o);break;case 4:fe();break;case 31:o.memoizedState!==null&&Zn(o);break;case 13:Zn(o);break;case 19:M(Ut);break;case 10:Sa(o.type);break;case 22:case 23:Zn(o),wp(),a!==null&&M(ls);break;case 24:Sa(Kt)}}function pc(a,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&a)===a){p=void 0;var w=u.create,E=u.inst;p=w(),E.destroy=p}u=u.next}while(u!==y)}}catch(D){ut(o,o.return,D)}}function gi(a,o,u){try{var p=o.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&a)===a){var E=p.inst,D=E.destroy;if(D!==void 0){E.destroy=void 0,y=o;var q=u,Z=D;try{Z()}catch(oe){ut(y,q,oe)}}}p=p.next}while(p!==w)}}catch(oe){ut(o,o.return,oe)}}function Q1(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{q_(o,u)}catch(p){ut(a,a.return,p)}}}function J1(a,o,u){u.props=hs(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(p){ut(a,o,p)}}function gc(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof u=="function"?a.refCleanup=u(p):u.current=p}}catch(y){ut(a,o,y)}}function na(a,o){var u=a.ref,p=a.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(y){ut(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){ut(a,o,y)}else u.current=null}function Z1(a){var o=a.type,u=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(y){ut(a,a.return,y)}}function Zp(a,o,u){try{var p=a.stateNode;WD(p,a.type,u,o),p[Ln]=o}catch(y){ut(a,a.return,y)}}function ej(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ji(a.type)||a.tag===4}function eg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ej(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ji(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tg(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ba));else if(p!==4&&(p===27&&ji(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(tg(a,o,u),a=a.sibling;a!==null;)tg(a,o,u),a=a.sibling}function Pd(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(p!==4&&(p===27&&ji(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Pd(a,o,u),a=a.sibling;a!==null;)Pd(a,o,u),a=a.sibling}function tj(a){var o=a.stateNode,u=a.memoizedProps;try{for(var p=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);_n(o,p,u),o[yn]=a,o[Ln]=u}catch(w){ut(a,a.return,w)}}var Aa=!1,Vt=!1,ng=!1,nj=typeof WeakSet=="function"?WeakSet:Set,un=null;function CD(a,o){if(a=a.containerInfo,jg=Zd,a=m_(a),Wm(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var E=0,D=-1,q=-1,Z=0,oe=0,ue=a,te=null;t:for(;;){for(var ae;ue!==u||y!==0&&ue.nodeType!==3||(D=E+y),ue!==w||p!==0&&ue.nodeType!==3||(q=E+p),ue.nodeType===3&&(E+=ue.nodeValue.length),(ae=ue.firstChild)!==null;)te=ue,ue=ae;for(;;){if(ue===a)break t;if(te===u&&++Z===y&&(D=E),te===w&&++oe===p&&(q=E),(ae=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ae}u=D===-1||q===-1?null:{start:D,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Sg={focusedElem:a,selectionRange:u},Zd=!1,un=o;un!==null;)if(o=un,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,un=a;else for(;un!==null;){switch(o=un,w=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)y=a[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,u=o,y=w.memoizedProps,w=w.memoizedState,p=u.stateNode;try{var Ce=hs(u.type,y);a=p.getSnapshotBeforeUpdate(Ce,w),p.__reactInternalSnapshotBeforeUpdate=a}catch(Le){ut(u,u.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Og(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Og(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,un=a;break}un=o.return}}function rj(a,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Ta(a,u),p&4&&pc(5,u);break;case 1:if(Ta(a,u),p&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(E){ut(u,u.return,E)}else{var y=hs(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(u,u.return,E)}}p&64&&Q1(u),p&512&&gc(u,u.return);break;case 3:if(Ta(a,u),p&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{q_(a,o)}catch(E){ut(u,u.return,E)}}break;case 27:o===null&&p&4&&tj(u);case 26:case 5:Ta(a,u),o===null&&p&4&&Z1(u),p&512&&gc(u,u.return);break;case 12:Ta(a,u);break;case 31:Ta(a,u),p&4&&sj(a,u);break;case 13:Ta(a,u),p&4&&oj(a,u),p&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=LD.bind(null,u),r5(a,u))));break;case 22:if(p=u.memoizedState!==null||Aa,!p){o=o!==null&&o.memoizedState!==null||Vt,y=Aa;var w=Vt;Aa=p,(Vt=o)&&!w?Pa(a,u,(u.subtreeFlags&8772)!==0):Ta(a,u),Aa=y,Vt=w}break;case 30:break;default:Ta(a,u)}}function aj(a){var o=a.alternate;o!==null&&(a.alternate=null,aj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Pm(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var kt=null,zn=!1;function ka(a,o,u){for(u=u.child;u!==null;)ij(a,o,u),u=u.sibling}function ij(a,o,u){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(De,u)}catch{}switch(u.tag){case 26:Vt||na(u,o),ka(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Vt||na(u,o);var p=kt,y=zn;ji(u.type)&&(kt=u.stateNode,zn=!1),ka(a,o,u),Nc(u.stateNode),kt=p,zn=y;break;case 5:Vt||na(u,o);case 6:if(p=kt,y=zn,kt=null,ka(a,o,u),kt=p,zn=y,kt!==null)if(zn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(u.stateNode)}catch(w){ut(u,o,w)}else try{kt.removeChild(u.stateNode)}catch(w){ut(u,o,w)}break;case 18:kt!==null&&(zn?(a=kt,Qj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Fo(a)):Qj(kt,u.stateNode));break;case 4:p=kt,y=zn,kt=u.stateNode.containerInfo,zn=!0,ka(a,o,u),kt=p,zn=y;break;case 0:case 11:case 14:case 15:gi(2,u,o),Vt||gi(4,u,o),ka(a,o,u);break;case 1:Vt||(na(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&J1(u,o,p)),ka(a,o,u);break;case 21:ka(a,o,u);break;case 22:Vt=(p=Vt)||u.memoizedState!==null,ka(a,o,u),Vt=p;break;default:ka(a,o,u)}}function sj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Fo(a)}catch(u){ut(o,o.return,u)}}}function oj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Fo(a)}catch(u){ut(o,o.return,u)}}function AD(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new nj),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new nj),o;default:throw Error(r(435,a.tag))}}function Md(a,o){var u=AD(a);o.forEach(function(p){if(!u.has(p)){u.add(p);var y=$D.bind(null,a,p);p.then(y,y)}})}function Un(a,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p],w=a,E=o,D=E;e:for(;D!==null;){switch(D.tag){case 27:if(ji(D.type)){kt=D.stateNode,zn=!1;break e}break;case 5:kt=D.stateNode,zn=!1;break e;case 3:case 4:kt=D.stateNode.containerInfo,zn=!0;break e}D=D.return}if(kt===null)throw Error(r(160));ij(w,E,y),kt=null,zn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)lj(o,a),o=o.sibling}var Ur=null;function lj(a,o){var u=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Un(o,a),qn(a),p&4&&(gi(3,a,a.return),pc(3,a),gi(5,a,a.return));break;case 1:Un(o,a),qn(a),p&512&&(Vt||u===null||na(u,u.return)),p&64&&Aa&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var y=Ur;if(Un(o,a),qn(a),p&512&&(Vt||u===null||na(u,u.return)),p&4){var w=u!==null?u.memoizedState:null;if(p=a.memoizedState,u===null)if(p===null)if(a.stateNode===null){e:{p=a.type,u=a.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":w=y.getElementsByTagName("title")[0],(!w||w[Fl]||w[yn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(p),y.head.insertBefore(w,y.querySelector("head > title"))),_n(w,p,u),w[yn]=a,cn(w),p=w;break e;case"link":var E=lS("link","href",y).get(p+(u.href||""));if(E){for(var D=0;D<E.length;D++)if(w=E[D],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(D,1);break t}}w=y.createElement(p),_n(w,p,u),y.head.appendChild(w);break;case"meta":if(E=lS("meta","content",y).get(p+(u.content||""))){for(D=0;D<E.length;D++)if(w=E[D],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(D,1);break t}}w=y.createElement(p),_n(w,p,u),y.head.appendChild(w);break;default:throw Error(r(468,p))}w[yn]=a,cn(w),p=w}a.stateNode=p}else cS(y,a.type,a.stateNode);else a.stateNode=oS(y,p,a.memoizedProps);else w!==p?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,p===null?cS(y,a.type,a.stateNode):oS(y,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Zp(a,a.memoizedProps,u.memoizedProps)}break;case 27:Un(o,a),qn(a),p&512&&(Vt||u===null||na(u,u.return)),u!==null&&p&4&&Zp(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Un(o,a),qn(a),p&512&&(Vt||u===null||na(u,u.return)),a.flags&32){y=a.stateNode;try{fo(y,"")}catch(Ce){ut(a,a.return,Ce)}}p&4&&a.stateNode!=null&&(y=a.memoizedProps,Zp(a,y,u!==null?u.memoizedProps:y)),p&1024&&(ng=!0);break;case 6:if(Un(o,a),qn(a),p&4){if(a.stateNode===null)throw Error(r(162));p=a.memoizedProps,u=a.stateNode;try{u.nodeValue=p}catch(Ce){ut(a,a.return,Ce)}}break;case 3:if(Wd=null,y=Ur,Ur=Yd(o.containerInfo),Un(o,a),Ur=y,qn(a),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Fo(o.containerInfo)}catch(Ce){ut(a,a.return,Ce)}ng&&(ng=!1,cj(a));break;case 4:p=Ur,Ur=Yd(a.stateNode.containerInfo),Un(o,a),qn(a),Ur=p;break;case 12:Un(o,a),qn(a);break;case 31:Un(o,a),qn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Md(a,p)));break;case 13:Un(o,a),qn(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Dd=Nt()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Md(a,p)));break;case 22:y=a.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,Z=Aa,oe=Vt;if(Aa=Z||y,Vt=oe||q,Un(o,a),Vt=oe,Aa=Z,qn(a),p&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||q||Aa||Vt||ms(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(w=q.stateNode,y)E=w.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{D=q.stateNode;var ue=q.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;D.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){ut(q,q.return,Ce)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Ce){ut(q,q.return,Ce)}}}else if(o.tag===18){if(u===null){q=o;try{var ae=q.stateNode;y?Jj(ae,!0):Jj(q.stateNode,!1)}catch(Ce){ut(q,q.return,Ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Md(a,u))));break;case 19:Un(o,a),qn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Md(a,p)));break;case 30:break;case 21:break;default:Un(o,a),qn(a)}}function qn(a){var o=a.flags;if(o&2){try{for(var u,p=a.return;p!==null;){if(ej(p)){u=p;break}p=p.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,w=eg(a);Pd(a,w,y);break;case 5:var E=u.stateNode;u.flags&32&&(fo(E,""),u.flags&=-33);var D=eg(a);Pd(a,D,E);break;case 3:case 4:var q=u.stateNode.containerInfo,Z=eg(a);tg(a,Z,q);break;default:throw Error(r(161))}}catch(oe){ut(a,a.return,oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function cj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;cj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ta(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)rj(a,o.alternate,o),o=o.sibling}function ms(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:gi(4,o,o.return),ms(o);break;case 1:na(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&J1(o,o.return,u),ms(o);break;case 27:Nc(o.stateNode);case 26:case 5:na(o,o.return),ms(o);break;case 22:o.memoizedState===null&&ms(o);break;case 30:ms(o);break;default:ms(o)}a=a.sibling}}function Pa(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,y=a,w=o,E=w.flags;switch(w.tag){case 0:case 11:case 15:Pa(y,w,u),pc(4,w);break;case 1:if(Pa(y,w,u),p=w,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){ut(p,p.return,Z)}if(p=w,y=p.updateQueue,y!==null){var D=p.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)U_(q[y],D)}catch(Z){ut(p,p.return,Z)}}u&&E&64&&Q1(w),gc(w,w.return);break;case 27:tj(w);case 26:case 5:Pa(y,w,u),u&&p===null&&E&4&&Z1(w),gc(w,w.return);break;case 12:Pa(y,w,u);break;case 31:Pa(y,w,u),u&&E&4&&sj(y,w);break;case 13:Pa(y,w,u),u&&E&4&&oj(y,w);break;case 22:w.memoizedState===null&&Pa(y,w,u),gc(w,w.return);break;case 30:break;default:Pa(y,w,u)}o=o.sibling}}function rg(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&nc(u))}function ag(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&nc(a))}function qr(a,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)uj(a,o,u,p),o=o.sibling}function uj(a,o,u,p){var y=o.flags;switch(o.tag){case 0:case 11:case 15:qr(a,o,u,p),y&2048&&pc(9,o);break;case 1:qr(a,o,u,p);break;case 3:qr(a,o,u,p),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&nc(a)));break;case 12:if(y&2048){qr(a,o,u,p),a=o.stateNode;try{var w=o.memoizedProps,E=w.id,D=w.onPostCommit;typeof D=="function"&&D(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(q){ut(o,o.return,q)}}else qr(a,o,u,p);break;case 31:qr(a,o,u,p);break;case 13:qr(a,o,u,p);break;case 23:break;case 22:w=o.stateNode,E=o.alternate,o.memoizedState!==null?w._visibility&2?qr(a,o,u,p):vc(a,o):w._visibility&2?qr(a,o,u,p):(w._visibility|=2,Po(a,o,u,p,(o.subtreeFlags&10256)!==0||!1)),y&2048&&rg(E,o);break;case 24:qr(a,o,u,p),y&2048&&ag(o.alternate,o);break;default:qr(a,o,u,p)}}function Po(a,o,u,p,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=a,E=o,D=u,q=p,Z=E.flags;switch(E.tag){case 0:case 11:case 15:Po(w,E,D,q,y),pc(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?Po(w,E,D,q,y):vc(w,E):(oe._visibility|=2,Po(w,E,D,q,y)),y&&Z&2048&&rg(E.alternate,E);break;case 24:Po(w,E,D,q,y),y&&Z&2048&&ag(E.alternate,E);break;default:Po(w,E,D,q,y)}o=o.sibling}}function vc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,p=o,y=p.flags;switch(p.tag){case 22:vc(u,p),y&2048&&rg(p.alternate,p);break;case 24:vc(u,p),y&2048&&ag(p.alternate,p);break;default:vc(u,p)}o=o.sibling}}var yc=8192;function Mo(a,o,u){if(a.subtreeFlags&yc)for(a=a.child;a!==null;)dj(a,o,u),a=a.sibling}function dj(a,o,u){switch(a.tag){case 26:Mo(a,o,u),a.flags&yc&&a.memoizedState!==null&&p5(u,Ur,a.memoizedState,a.memoizedProps);break;case 5:Mo(a,o,u);break;case 3:case 4:var p=Ur;Ur=Yd(a.stateNode.containerInfo),Mo(a,o,u),Ur=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=yc,yc=16777216,Mo(a,o,u),yc=p):Mo(a,o,u));break;default:Mo(a,o,u)}}function fj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function bc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];un=p,mj(p,a)}fj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hj(a),a=a.sibling}function hj(a){switch(a.tag){case 0:case 11:case 15:bc(a),a.flags&2048&&gi(9,a,a.return);break;case 3:bc(a);break;case 12:bc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Rd(a)):bc(a);break;default:bc(a)}}function Rd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];un=p,mj(p,a)}fj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:gi(8,o,o.return),Rd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Rd(o));break;default:Rd(o)}a=a.sibling}}function mj(a,o){for(;un!==null;){var u=un;switch(u.tag){case 0:case 11:case 15:gi(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:nc(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,un=p;else e:for(u=a;un!==null;){p=un;var y=p.sibling,w=p.return;if(aj(p),p===u){un=null;break e}if(y!==null){y.return=w,un=y;break e}un=w}}}var kD={getCacheForType:function(a){var o=xn(Kt),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return xn(Kt).controller.signal}},TD=typeof WeakMap=="function"?WeakMap:Map,lt=0,xt=null,We=null,Qe=0,ct=0,er=null,vi=!1,Ro=!1,ig=!1,Ma=0,zt=0,yi=0,ps=0,sg=0,tr=0,Do=0,xc=null,Bn=null,og=!1,Dd=0,pj=0,Id=1/0,Ld=null,bi=null,en=0,xi=null,Io=null,Ra=0,lg=0,cg=null,gj=null,wc=0,ug=null;function nr(){return(lt&2)!==0&&Qe!==0?Qe&-Qe:I.T!==null?gg():Pw()}function vj(){if(tr===0)if((Qe&536870912)===0||Ze){var a=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),tr=a}else tr=536870912;return a=Jn.current,a!==null&&(a.flags|=32),tr}function Fn(a,o,u){(a===xt&&(ct===2||ct===9)||a.cancelPendingCommit!==null)&&(Lo(a,0),wi(a,Qe,tr,!1)),Bl(a,u),((lt&2)===0||a!==xt)&&(a===xt&&((lt&2)===0&&(ps|=u),zt===4&&wi(a,Qe,tr,!1)),ra(a))}function yj(a,o,u){if((lt&6)!==0)throw Error(r(327));var p=!u&&(o&127)===0&&(o&a.expiredLanes)===0||Ht(a,o),y=p?RD(a,o):fg(a,o,!0),w=p;do{if(y===0){Ro&&!p&&wi(a,o,0,!1);break}else{if(u=a.current.alternate,w&&!PD(u)){y=fg(a,o,!1),w=!1;continue}if(y===2){if(w=o,a.errorRecoveryDisabledLanes&w)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var D=a;y=xc;var q=D.current.memoizedState.isDehydrated;if(q&&(Lo(D,E).flags|=256),E=fg(D,E,!1),E!==2){if(ig&&!q){D.errorRecoveryDisabledLanes|=w,ps|=w,y=4;break e}w=Bn,Bn=y,w!==null&&(Bn===null?Bn=w:Bn.push.apply(Bn,w))}y=E}if(w=!1,y!==2)continue}}if(y===1){Lo(a,0),wi(a,o,0,!0);break}e:{switch(p=a,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:wi(p,o,tr,!vi);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Dd+300-Nt(),10<y)){if(wi(p,o,tr,!vi),nt(p,0,!0)!==0)break e;Ra=o,p.timeoutHandle=Wj(bj.bind(null,p,u,Bn,Ld,og,o,tr,ps,Do,vi,w,"Throttled",-0,0),y);break e}bj(p,u,Bn,Ld,og,o,tr,ps,Do,vi,w,null,-0,0)}}break}while(!0);ra(a)}function bj(a,o,u,p,y,w,E,D,q,Z,oe,ue,te,ae){if(a.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ba},dj(o,w,ue);var Ce=(w&62914560)===w?Dd-Nt():(w&4194048)===w?pj-Nt():0;if(Ce=g5(ue,Ce),Ce!==null){Ra=w,a.cancelPendingCommit=Ce(Oj.bind(null,a,o,w,u,p,y,E,D,q,oe,ue,null,te,ae)),wi(a,w,E,!Z);return}}Oj(a,o,w,u,p,y,E,D,q)}function PD(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var y=u[p],w=y.getSnapshot;y=y.value;try{if(!Xn(w(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wi(a,o,u,p){o&=~sg,o&=~ps,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var y=o;0<y;){var w=31-tt(y),E=1<<w;p[w]=-1,y&=~E}u!==0&&Aw(a,u,o)}function $d(){return(lt&6)===0?(_c(0),!1):!0}function dg(){if(We!==null){if(ct===0)var a=We.return;else a=We,ja=ss=null,Op(a),Oo=null,ac=0,a=We;for(;a!==null;)X1(a.alternate,a),a=a.return;We=null}}function Lo(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,JD(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Ra=0,dg(),xt=a,We=u=wa(a.current,null),Qe=o,ct=0,er=null,vi=!1,Ro=Ht(a,o),ig=!1,Do=tr=sg=ps=yi=zt=0,Bn=xc=null,og=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var y=31-tt(p),w=1<<y;o|=a[y],p&=~w}return Ma=o,id(),u}function xj(a,o){Be=null,I.H=fc,o===Eo||o===hd?(o=I_(),ct=3):o===pp?(o=I_(),ct=4):ct=o===Fp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,er=o,We===null&&(zt=1,Od(a,yr(o,a.current)))}function wj(){var a=Jn.current;return a===null?!0:(Qe&4194048)===Qe?_r===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?a===_r:!1}function _j(){var a=I.H;return I.H=fc,a===null?fc:a}function jj(){var a=I.A;return I.A=kD,a}function zd(){zt=4,vi||(Qe&4194048)!==Qe&&Jn.current!==null||(Ro=!0),(yi&134217727)===0&&(ps&134217727)===0||xt===null||wi(xt,Qe,tr,!1)}function fg(a,o,u){var p=lt;lt|=2;var y=_j(),w=jj();(xt!==a||Qe!==o)&&(Ld=null,Lo(a,o)),o=!1;var E=zt;e:do try{if(ct!==0&&We!==null){var D=We,q=er;switch(ct){case 8:dg(),E=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(o=!0);var Z=ct;if(ct=0,er=null,$o(a,D,q,Z),u&&Ro){E=0;break e}break;default:Z=ct,ct=0,er=null,$o(a,D,q,Z)}}MD(),E=zt;break}catch(oe){xj(a,oe)}while(!0);return o&&a.shellSuspendCounter++,ja=ss=null,lt=p,I.H=y,I.A=w,We===null&&(xt=null,Qe=0,id()),E}function MD(){for(;We!==null;)Sj(We)}function RD(a,o){var u=lt;lt|=2;var p=_j(),y=jj();xt!==a||Qe!==o?(Ld=null,Id=Nt()+500,Lo(a,o)):Ro=Ht(a,o);e:do try{if(ct!==0&&We!==null){o=We;var w=er;t:switch(ct){case 1:ct=0,er=null,$o(a,o,w,1);break;case 2:case 9:if(R_(w)){ct=0,er=null,Nj(o);break}o=function(){ct!==2&&ct!==9||xt!==a||(ct=7),ra(a)},w.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:R_(w)?(ct=0,er=null,Nj(o)):(ct=0,er=null,$o(a,o,w,7));break;case 5:var E=null;switch(We.tag){case 26:E=We.memoizedState;case 5:case 27:var D=We;if(E?uS(E):D.stateNode.complete){ct=0,er=null;var q=D.sibling;if(q!==null)We=q;else{var Z=D.return;Z!==null?(We=Z,Ud(Z)):We=null}break t}}ct=0,er=null,$o(a,o,w,5);break;case 6:ct=0,er=null,$o(a,o,w,6);break;case 8:dg(),zt=6;break e;default:throw Error(r(462))}}DD();break}catch(oe){xj(a,oe)}while(!0);return ja=ss=null,I.H=p,I.A=y,lt=u,We!==null?0:(xt=null,Qe=0,id(),zt)}function DD(){for(;We!==null&&!_t();)Sj(We)}function Sj(a){var o=V1(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,o===null?Ud(a):We=o}function Nj(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=B1(u,o,o.pendingProps,o.type,void 0,Qe);break;case 11:o=B1(u,o,o.pendingProps,o.type.render,o.ref,Qe);break;case 5:Op(o);default:X1(u,o),o=We=j_(o,Ma),o=V1(u,o,Ma)}a.memoizedProps=a.pendingProps,o===null?Ud(a):We=o}function $o(a,o,u,p){ja=ss=null,Op(o),Oo=null,ac=0;var y=o.return;try{if(jD(a,y,o,u,Qe)){zt=1,Od(a,yr(u,a.current)),We=null;return}}catch(w){if(y!==null)throw We=y,w;zt=1,Od(a,yr(u,a.current)),We=null;return}o.flags&32768?(Ze||p===1?a=!0:Ro||(Qe&536870912)!==0?a=!1:(vi=a=!0,(p===2||p===9||p===3||p===6)&&(p=Jn.current,p!==null&&p.tag===13&&(p.flags|=16384))),Ej(o,a)):Ud(o)}function Ud(a){var o=a;do{if((o.flags&32768)!==0){Ej(o,vi);return}a=o.return;var u=ED(o.alternate,o,Ma);if(u!==null){We=u;return}if(o=o.sibling,o!==null){We=o;return}We=o=a}while(o!==null);zt===0&&(zt=5)}function Ej(a,o){do{var u=OD(a.alternate,a);if(u!==null){u.flags&=32767,We=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){We=a;return}We=a=u}while(a!==null);zt=6,We=null}function Oj(a,o,u,p,y,w,E,D,q){a.cancelPendingCommit=null;do qd();while(en!==0);if((lt&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(w=o.lanes|o.childLanes,w|=ep,mR(a,u,w,E,D,q),a===xt&&(We=xt=null,Qe=0),Io=o,xi=a,Ra=u,lg=w,cg=y,gj=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,zD(pe,function(){return Pj(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=I.T,I.T=null,y=$.p,$.p=2,E=lt,lt|=4;try{CD(a,o,u)}finally{lt=E,$.p=y,I.T=p}}en=1,Cj(),Aj(),kj()}}function Cj(){if(en===1){en=0;var a=xi,o=Io,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=I.T,I.T=null;var p=$.p;$.p=2;var y=lt;lt|=4;try{lj(o,a);var w=Sg,E=m_(a.containerInfo),D=w.focusedElem,q=w.selectionRange;if(E!==D&&D&&D.ownerDocument&&h_(D.ownerDocument.documentElement,D)){if(q!==null&&Wm(D)){var Z=q.start,oe=q.end;if(oe===void 0&&(oe=Z),"selectionStart"in D)D.selectionStart=Z,D.selectionEnd=Math.min(oe,D.value.length);else{var ue=D.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Ce=D.textContent.length,Le=Math.min(q.start,Ce),gt=q.end===void 0?Le:Math.min(q.end,Ce);!ae.extend&&Le>gt&&(E=gt,gt=Le,Le=E);var V=f_(D,Le),Y=f_(D,gt);if(V&&Y&&(ae.rangeCount!==1||ae.anchorNode!==V.node||ae.anchorOffset!==V.offset||ae.focusNode!==Y.node||ae.focusOffset!==Y.offset)){var J=ue.createRange();J.setStart(V.node,V.offset),ae.removeAllRanges(),Le>gt?(ae.addRange(J),ae.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),ae.addRange(J))}}}}for(ue=[],ae=D;ae=ae.parentNode;)ae.nodeType===1&&ue.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ue.length;D++){var ce=ue[D];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Zd=!!jg,Sg=jg=null}finally{lt=y,$.p=p,I.T=u}}a.current=o,en=2}}function Aj(){if(en===2){en=0;var a=xi,o=Io,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=I.T,I.T=null;var p=$.p;$.p=2;var y=lt;lt|=4;try{rj(a,o.alternate,o)}finally{lt=y,$.p=p,I.T=u}}en=3}}function kj(){if(en===4||en===3){en=0,Dn();var a=xi,o=Io,u=Ra,p=gj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?en=5:(en=0,Io=xi=null,Tj(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(bi=null),km(u),o=o.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(De,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=I.T,y=$.p,$.p=2,I.T=null;try{for(var w=a.onRecoverableError,E=0;E<p.length;E++){var D=p[E];w(D.value,{componentStack:D.stack})}}finally{I.T=o,$.p=y}}(Ra&3)!==0&&qd(),ra(a),y=a.pendingLanes,(u&261930)!==0&&(y&42)!==0?a===ug?wc++:(wc=0,ug=a):wc=0,_c(0)}}function Tj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,nc(o)))}function qd(){return Cj(),Aj(),kj(),Pj()}function Pj(){if(en!==5)return!1;var a=xi,o=lg;lg=0;var u=km(Ra),p=I.T,y=$.p;try{$.p=32>u?32:u,I.T=null,u=cg,cg=null;var w=xi,E=Ra;if(en=0,Io=xi=null,Ra=0,(lt&6)!==0)throw Error(r(331));var D=lt;if(lt|=4,hj(w.current),uj(w,w.current,E,u),lt=D,_c(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(De,w)}catch{}return!0}finally{$.p=y,I.T=p,Tj(a,o)}}function Mj(a,o,u){o=yr(u,o),o=Bp(a.stateNode,o,2),a=hi(a,o,2),a!==null&&(Bl(a,2),ra(a))}function ut(a,o,u){if(a.tag===3)Mj(a,a,u);else for(;o!==null;){if(o.tag===3){Mj(o,a,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(bi===null||!bi.has(p))){a=yr(u,a),u=R1(2),p=hi(o,u,2),p!==null&&(D1(u,p,o,a),Bl(p,2),ra(p));break}}o=o.return}}function hg(a,o,u){var p=a.pingCache;if(p===null){p=a.pingCache=new TD;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(ig=!0,y.add(u),a=ID.bind(null,a,o,u),o.then(a,a))}function ID(a,o,u){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,xt===a&&(Qe&u)===u&&(zt===4||zt===3&&(Qe&62914560)===Qe&&300>Nt()-Dd?(lt&2)===0&&Lo(a,0):sg|=u,Do===Qe&&(Do=0)),ra(a)}function Rj(a,o){o===0&&(o=ql()),a=rs(a,o),a!==null&&(Bl(a,o),ra(a))}function LD(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),Rj(a,u)}function $D(a,o){var u=0;switch(a.tag){case 31:case 13:var p=a.stateNode,y=a.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(o),Rj(a,u)}function zD(a,o){return yt(a,o)}var Bd=null,zo=null,mg=!1,Fd=!1,pg=!1,_i=0;function ra(a){a!==zo&&a.next===null&&(zo===null?Bd=zo=a:zo=zo.next=a),Fd=!0,mg||(mg=!0,qD())}function _c(a,o){if(!pg&&Fd){pg=!0;do for(var u=!1,p=Bd;p!==null;){if(a!==0){var y=p.pendingLanes;if(y===0)var w=0;else{var E=p.suspendedLanes,D=p.pingedLanes;w=(1<<31-tt(42|a)+1)-1,w&=y&~(E&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,$j(p,w))}else w=Qe,w=nt(p,p===xt?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||Ht(p,w)||(u=!0,$j(p,w));p=p.next}while(u);pg=!1}}function UD(){Dj()}function Dj(){Fd=mg=!1;var a=0;_i!==0&&QD()&&(a=_i);for(var o=Nt(),u=null,p=Bd;p!==null;){var y=p.next,w=Ij(p,o);w===0?(p.next=null,u===null?Bd=y:u.next=y,y===null&&(zo=u)):(u=p,(a!==0||(w&3)!==0)&&(Fd=!0)),p=y}en!==0&&en!==5||_c(a),_i!==0&&(_i=0)}function Ij(a,o){for(var u=a.suspendedLanes,p=a.pingedLanes,y=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var E=31-tt(w),D=1<<E,q=y[E];q===-1?((D&u)===0||(D&p)!==0)&&(y[E]=va(D,o)):q<=o&&(a.expiredLanes|=D),w&=~D}if(o=xt,u=Qe,u=nt(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,u===0||a===o&&(ct===2||ct===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&bt(p),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Ht(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(p!==null&&bt(p),km(u)){case 2:case 8:u=Lr;break;case 32:u=pe;break;case 268435456:u=ie;break;default:u=pe}return p=Lj.bind(null,a),u=yt(u,p),a.callbackPriority=o,a.callbackNode=u,o}return p!==null&&p!==null&&bt(p),a.callbackPriority=2,a.callbackNode=null,2}function Lj(a,o){if(en!==0&&en!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(qd()&&a.callbackNode!==u)return null;var p=Qe;return p=nt(a,a===xt?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(yj(a,p,o),Ij(a,Nt()),a.callbackNode!=null&&a.callbackNode===u?Lj.bind(null,a):null)}function $j(a,o){if(qd())return null;yj(a,o,!0)}function qD(){ZD(function(){(lt&6)!==0?yt(In,UD):Dj()})}function gg(){if(_i===0){var a=So;a===0&&(a=$r,$r<<=1,($r&261888)===0&&($r=256)),_i=a}return _i}function zj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Qu(""+a)}function Uj(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function BD(a,o,u,p,y){if(o==="submit"&&u&&u.stateNode===y){var w=zj((y[Ln]||null).action),E=p.submitter;E&&(o=(o=E[Ln]||null)?zj(o.formAction):E.getAttribute("formAction"),o!==null&&(w=o,E=null));var D=new td("action","action",null,p,y);a.push({event:D,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(_i!==0){var q=E?Uj(y,E):new FormData(y);Ip(u,{pending:!0,data:q,method:y.method,action:w},null,q)}}else typeof w=="function"&&(D.preventDefault(),q=E?Uj(y,E):new FormData(y),Ip(u,{pending:!0,data:q,method:y.method,action:w},w,q))},currentTarget:y}]})}}for(var vg=0;vg<Zm.length;vg++){var yg=Zm[vg],FD=yg.toLowerCase(),HD=yg[0].toUpperCase()+yg.slice(1);zr(FD,"on"+HD)}zr(v_,"onAnimationEnd"),zr(y_,"onAnimationIteration"),zr(b_,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(sD,"onTransitionRun"),zr(oD,"onTransitionStart"),zr(lD,"onTransitionCancel"),zr(x_,"onTransitionEnd"),co("onMouseEnter",["mouseout","mouseover"]),co("onMouseLeave",["mouseout","mouseover"]),co("onPointerEnter",["pointerout","pointerover"]),co("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function qj(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var p=a[u],y=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var E=p.length-1;0<=E;E--){var D=p[E],q=D.instance,Z=D.currentTarget;if(D=D.listener,q!==w&&y.isPropagationStopped())break e;w=D,y.currentTarget=Z;try{w(y)}catch(oe){ad(oe)}y.currentTarget=null,w=q}else for(E=0;E<p.length;E++){if(D=p[E],q=D.instance,Z=D.currentTarget,D=D.listener,q!==w&&y.isPropagationStopped())break e;w=D,y.currentTarget=Z;try{w(y)}catch(oe){ad(oe)}y.currentTarget=null,w=q}}}}function Xe(a,o){var u=o[Tm];u===void 0&&(u=o[Tm]=new Set);var p=a+"__bubble";u.has(p)||(Bj(o,a,2,!1),u.add(p))}function bg(a,o,u){var p=0;o&&(p|=4),Bj(u,a,p,o)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function xg(a){if(!a[Hd]){a[Hd]=!0,Dw.forEach(function(u){u!=="selectionchange"&&(KD.has(u)||bg(u,!1,a),bg(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Hd]||(o[Hd]=!0,bg("selectionchange",!1,o))}}function Bj(a,o,u,p){switch(vS(o)){case 2:var y=b5;break;case 8:y=x5;break;default:y=Dg}u=y.bind(null,o,u,a),y=void 0,!Um||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?a.addEventListener(o,u,{capture:!0,passive:y}):a.addEventListener(o,u,!0):y!==void 0?a.addEventListener(o,u,{passive:y}):a.addEventListener(o,u,!1)}function wg(a,o,u,p,y){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var D=p.stateNode.containerInfo;if(D===y)break;if(E===4)for(E=p.return;E!==null;){var q=E.tag;if((q===3||q===4)&&E.stateNode.containerInfo===y)return;E=E.return}for(;D!==null;){if(E=so(D),E===null)return;if(q=E.tag,q===5||q===6||q===26||q===27){p=w=E;continue e}D=D.parentNode}}p=p.return}Yw(function(){var Z=w,oe=$m(u),ue=[];e:{var te=w_.get(a);if(te!==void 0){var ae=td,Ce=a;switch(a){case"keypress":if(Zu(u)===0)break e;case"keydown":case"keyup":ae=$R;break;case"focusin":Ce="focus",ae=Hm;break;case"focusout":Ce="blur",ae=Hm;break;case"beforeblur":case"afterblur":ae=Hm;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=ER;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=qR;break;case v_:case y_:case b_:ae=AR;break;case x_:ae=FR;break;case"scroll":case"scrollend":ae=SR;break;case"wheel":ae=KR;break;case"copy":case"cut":case"paste":ae=TR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Jw;break;case"toggle":case"beforetoggle":ae=YR}var Le=(o&4)!==0,gt=!Le&&(a==="scroll"||a==="scrollend"),V=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Z,J;Y!==null;){var ce=Y;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||V===null||(ce=Kl(Y,V),ce!=null&&Le.push(Sc(Y,ce,J))),gt)break;Y=Y.return}0<Le.length&&(te=new ae(te,Ce,null,u,oe),ue.push({event:te,listeners:Le}))}}if((o&7)===0){e:{if(te=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",te&&u!==Lm&&(Ce=u.relatedTarget||u.fromElement)&&(so(Ce)||Ce[io]))break e;if((ae||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Ce=u.relatedTarget||u.toElement,ae=Z,Ce=Ce?so(Ce):null,Ce!==null&&(gt=s(Ce),Le=Ce.tag,Ce!==gt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(ae=null,Ce=Z),ae!==Ce)){if(Le=Xw,ce="onMouseLeave",V="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Le=Jw,ce="onPointerLeave",V="onPointerEnter",Y="pointer"),gt=ae==null?te:Hl(ae),J=Ce==null?te:Hl(Ce),te=new Le(ce,Y+"leave",ae,u,oe),te.target=gt,te.relatedTarget=J,ce=null,so(oe)===Z&&(Le=new Le(V,Y+"enter",Ce,u,oe),Le.target=J,Le.relatedTarget=gt,ce=Le),gt=ce,ae&&Ce)t:{for(Le=GD,V=ae,Y=Ce,J=0,ce=V;ce;ce=Le(ce))J++;ce=0;for(var Me=Y;Me;Me=Le(Me))ce++;for(;0<J-ce;)V=Le(V),J--;for(;0<ce-J;)Y=Le(Y),ce--;for(;J--;){if(V===Y||Y!==null&&V===Y.alternate){Le=V;break t}V=Le(V),Y=Le(Y)}Le=null}else Le=null;ae!==null&&Fj(ue,te,ae,Le,!1),Ce!==null&&gt!==null&&Fj(ue,gt,Ce,Le,!0)}}e:{if(te=Z?Hl(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var at=s_;else if(a_(te))if(o_)at=rD;else{at=tD;var ke=eD}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Im(Z.elementType)&&(at=s_):at=nD;if(at&&(at=at(a,Z))){i_(ue,at,u,oe);break e}ke&&ke(a,te,Z),a==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Dm(te,"number",te.value)}switch(ke=Z?Hl(Z):window,a){case"focusin":(a_(ke)||ke.contentEditable==="true")&&(go=ke,Xm=Z,Zl=null);break;case"focusout":Zl=Xm=go=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,p_(ue,u,oe);break;case"selectionchange":if(iD)break;case"keydown":case"keyup":p_(ue,u,oe)}var Fe;if(Gm)e:{switch(a){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else po?n_(a,u)&&(Je="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(Zw&&u.locale!=="ko"&&(po||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&po&&(Fe=Vw()):(si=oe,qm="value"in si?si.value:si.textContent,po=!0)),ke=Kd(Z,Je),0<ke.length&&(Je=new Qw(Je,a,null,u,oe),ue.push({event:Je,listeners:ke}),Fe?Je.data=Fe:(Fe=r_(u),Fe!==null&&(Je.data=Fe)))),(Fe=WR?XR(a,u):QR(a,u))&&(Je=Kd(Z,"onBeforeInput"),0<Je.length&&(ke=new Qw("onBeforeInput","beforeinput",null,u,oe),ue.push({event:ke,listeners:Je}),ke.data=Fe)),BD(ue,a,Z,u,oe)}qj(ue,o)})}function Sc(a,o,u){return{instance:a,listener:o,currentTarget:u}}function Kd(a,o){for(var u=o+"Capture",p=[];a!==null;){var y=a,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Kl(a,u),y!=null&&p.unshift(Sc(a,y,w)),y=Kl(a,o),y!=null&&p.push(Sc(a,y,w))),a.tag===3)return p;a=a.return}return[]}function GD(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Fj(a,o,u,p,y){for(var w=o._reactName,E=[];u!==null&&u!==p;){var D=u,q=D.alternate,Z=D.stateNode;if(D=D.tag,q!==null&&q===p)break;D!==5&&D!==26&&D!==27||Z===null||(q=Z,y?(Z=Kl(u,w),Z!=null&&E.unshift(Sc(u,Z,q))):y||(Z=Kl(u,w),Z!=null&&E.push(Sc(u,Z,q)))),u=u.return}E.length!==0&&a.push({event:o,listeners:E})}var YD=/\r\n?/g,VD=/\u0000|\uFFFD/g;function Hj(a){return(typeof a=="string"?a:""+a).replace(YD,`
`).replace(VD,"")}function Kj(a,o){return o=Hj(o),Hj(a)===o}function pt(a,o,u,p,y,w){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||fo(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&fo(a,""+p);break;case"className":Wu(a,"class",p);break;case"tabIndex":Wu(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Wu(a,u,p);break;case"style":Kw(a,p,w);break;case"data":if(o!=="object"){Wu(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Qu(""+p),a.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(o!=="input"&&pt(a,o,"name",y.name,y,null),pt(a,o,"formEncType",y.formEncType,y,null),pt(a,o,"formMethod",y.formMethod,y,null),pt(a,o,"formTarget",y.formTarget,y,null)):(pt(a,o,"encType",y.encType,y,null),pt(a,o,"method",y.method,y,null),pt(a,o,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=Qu(""+p),a.setAttribute(u,p);break;case"onClick":p!=null&&(a.onclick=ba);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}u=Qu(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""+p):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":p===!0?a.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,p):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(u,p):a.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(u):a.setAttribute(u,p);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),Vu(a,"popover",p);break;case"xlinkActuate":ya(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ya(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ya(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ya(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ya(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ya(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ya(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ya(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ya(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Vu(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=_R.get(u)||u,Vu(a,u,p))}}function _g(a,o,u,p,y,w){switch(u){case"style":Kw(a,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof p=="string"?fo(a,p):(typeof p=="number"||typeof p=="bigint")&&fo(a,""+p);break;case"onScroll":p!=null&&Xe("scroll",a);break;case"onScrollEnd":p!=null&&Xe("scrollend",a);break;case"onClick":p!=null&&(a.onclick=ba);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iw.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),w=a[Ln]||null,w=w!=null?w[u]:null,typeof w=="function"&&a.removeEventListener(o,w,y),typeof p=="function")){typeof w!="function"&&w!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,p,y);break e}u in a?a[u]=p:p===!0?a.setAttribute(u,""):Vu(a,u,p)}}}function _n(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var p=!1,y=!1,w;for(w in u)if(u.hasOwnProperty(w)){var E=u[w];if(E!=null)switch(w){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(a,o,w,E,u,null)}}y&&pt(a,o,"srcSet",u.srcSet,u,null),p&&pt(a,o,"src",u.src,u,null);return;case"input":Xe("invalid",a);var D=w=E=y=null,q=null,Z=null;for(p in u)if(u.hasOwnProperty(p)){var oe=u[p];if(oe!=null)switch(p){case"name":y=oe;break;case"type":E=oe;break;case"checked":q=oe;break;case"defaultChecked":Z=oe;break;case"value":w=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:pt(a,o,p,oe,u,null)}}qw(a,w,D,q,Z,E,y,!1);return;case"select":Xe("invalid",a),p=E=w=null;for(y in u)if(u.hasOwnProperty(y)&&(D=u[y],D!=null))switch(y){case"value":w=D;break;case"defaultValue":E=D;break;case"multiple":p=D;default:pt(a,o,y,D,u,null)}o=w,u=E,a.multiple=!!p,o!=null?uo(a,!!p,o,!1):u!=null&&uo(a,!!p,u,!0);return;case"textarea":Xe("invalid",a),w=y=p=null;for(E in u)if(u.hasOwnProperty(E)&&(D=u[E],D!=null))switch(E){case"value":p=D;break;case"defaultValue":y=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:pt(a,o,E,D,u,null)}Fw(a,p,y,w);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(p=u[q],p!=null))switch(q){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:pt(a,o,q,p,u,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(p=0;p<jc.length;p++)Xe(jc[p],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in u)if(u.hasOwnProperty(Z)&&(p=u[Z],p!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:pt(a,o,Z,p,u,null)}return;default:if(Im(o)){for(oe in u)u.hasOwnProperty(oe)&&(p=u[oe],p!==void 0&&_g(a,o,oe,p,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(p=u[D],p!=null&&pt(a,o,D,p,u,null))}function WD(a,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,E=null,D=null,q=null,Z=null,oe=null;for(ae in u){var ue=u[ae];if(u.hasOwnProperty(ae)&&ue!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":q=ue;default:p.hasOwnProperty(ae)||pt(a,o,ae,null,p,ue)}}for(var te in p){var ae=p[te];if(ue=u[te],p.hasOwnProperty(te)&&(ae!=null||ue!=null))switch(te){case"type":w=ae;break;case"name":y=ae;break;case"checked":Z=ae;break;case"defaultChecked":oe=ae;break;case"value":E=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==ue&&pt(a,o,te,ae,p,ue)}}Rm(a,E,D,q,Z,oe,w,y);return;case"select":ae=E=D=te=null;for(w in u)if(q=u[w],u.hasOwnProperty(w)&&q!=null)switch(w){case"value":break;case"multiple":ae=q;default:p.hasOwnProperty(w)||pt(a,o,w,null,p,q)}for(y in p)if(w=p[y],q=u[y],p.hasOwnProperty(y)&&(w!=null||q!=null))switch(y){case"value":te=w;break;case"defaultValue":D=w;break;case"multiple":E=w;default:w!==q&&pt(a,o,y,w,p,q)}o=D,u=E,p=ae,te!=null?uo(a,!!u,te,!1):!!p!=!!u&&(o!=null?uo(a,!!u,o,!0):uo(a,!!u,u?[]:"",!1));return;case"textarea":ae=te=null;for(D in u)if(y=u[D],u.hasOwnProperty(D)&&y!=null&&!p.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:pt(a,o,D,null,p,y)}for(E in p)if(y=p[E],w=u[E],p.hasOwnProperty(E)&&(y!=null||w!=null))switch(E){case"value":te=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&pt(a,o,E,y,p,w)}Bw(a,te,ae);return;case"option":for(var Ce in u)if(te=u[Ce],u.hasOwnProperty(Ce)&&te!=null&&!p.hasOwnProperty(Ce))switch(Ce){case"selected":a.selected=!1;break;default:pt(a,o,Ce,null,p,te)}for(q in p)if(te=p[q],ae=u[q],p.hasOwnProperty(q)&&te!==ae&&(te!=null||ae!=null))switch(q){case"selected":a.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:pt(a,o,q,te,p,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!p.hasOwnProperty(Le)&&pt(a,o,Le,null,p,te);for(Z in p)if(te=p[Z],ae=u[Z],p.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,o));break;default:pt(a,o,Z,te,p,ae)}return;default:if(Im(o)){for(var gt in u)te=u[gt],u.hasOwnProperty(gt)&&te!==void 0&&!p.hasOwnProperty(gt)&&_g(a,o,gt,void 0,p,te);for(oe in p)te=p[oe],ae=u[oe],!p.hasOwnProperty(oe)||te===ae||te===void 0&&ae===void 0||_g(a,o,oe,te,p,ae);return}}for(var V in u)te=u[V],u.hasOwnProperty(V)&&te!=null&&!p.hasOwnProperty(V)&&pt(a,o,V,null,p,te);for(ue in p)te=p[ue],ae=u[ue],!p.hasOwnProperty(ue)||te===ae||te==null&&ae==null||pt(a,o,ue,te,p,ae)}function Gj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XD(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var y=u[p],w=y.transferSize,E=y.initiatorType,D=y.duration;if(w&&D&&Gj(E)){for(E=0,D=y.responseEnd,p+=1;p<u.length;p++){var q=u[p],Z=q.startTime;if(Z>D)break;var oe=q.transferSize,ue=q.initiatorType;oe&&Gj(ue)&&(q=q.responseEnd,E+=oe*(q<D?1:(D-Z)/(q-Z)))}if(--p,o+=8*(w+E)/(y.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var jg=null,Sg=null;function Gd(a){return a.nodeType===9?a:a.ownerDocument}function Yj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vj(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Ng(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Eg=null;function QD(){var a=window.event;return a&&a.type==="popstate"?a===Eg?!1:(Eg=a,!0):(Eg=null,!1)}var Wj=typeof setTimeout=="function"?setTimeout:void 0,JD=typeof clearTimeout=="function"?clearTimeout:void 0,Xj=typeof Promise=="function"?Promise:void 0,ZD=typeof queueMicrotask=="function"?queueMicrotask:typeof Xj<"u"?function(a){return Xj.resolve(null).then(a).catch(e5)}:Wj;function e5(a){setTimeout(function(){throw a})}function ji(a){return a==="head"}function Qj(a,o){var u=o,p=0;do{var y=u.nextSibling;if(a.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(p===0){a.removeChild(y),Fo(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")Nc(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,Nc(u);for(var w=u.firstChild;w;){var E=w.nextSibling,D=w.nodeName;w[Fl]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=E}}else u==="body"&&Nc(a.ownerDocument.body);u=y}while(u);Fo(o)}function Jj(a,o){var u=a;a=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=p}while(u)}function Og(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Og(u),Pm(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function t5(a,o,u,p){for(;a.nodeType===1;){var y=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Fl])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=jr(a.nextSibling),a===null)break}return null}function n5(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=jr(a.nextSibling),a===null))return null;return a}function Zj(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=jr(a.nextSibling),a===null))return null;return a}function Cg(a){return a.data==="$?"||a.data==="$~"}function Ag(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function r5(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function jr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var kg=null;function eS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return jr(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function tS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function nS(a,o,u){switch(o=Gd(u),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Nc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Pm(a)}var Sr=new Map,rS=new Set;function Yd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Da=$.d;$.d={f:a5,r:i5,D:s5,C:o5,L:l5,m:c5,X:d5,S:u5,M:f5};function a5(){var a=Da.f(),o=$d();return a||o}function i5(a){var o=oo(a);o!==null&&o.tag===5&&o.type==="form"?x1(o):Da.r(a)}var Uo=typeof document>"u"?null:document;function aS(a,o,u){var p=Uo;if(p&&typeof o=="string"&&o){var y=gr(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),rS.has(y)||(rS.add(y),a={rel:a,crossOrigin:u,href:o},p.querySelector(y)===null&&(o=p.createElement("link"),_n(o,"link",a),cn(o),p.head.appendChild(o)))}}function s5(a){Da.D(a),aS("dns-prefetch",a,null)}function o5(a,o){Da.C(a,o),aS("preconnect",a,o)}function l5(a,o,u){Da.L(a,o,u);var p=Uo;if(p&&a&&o){var y='link[rel="preload"][as="'+gr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+gr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+gr(u.imageSizes)+'"]')):y+='[href="'+gr(a)+'"]';var w=y;switch(o){case"style":w=qo(a);break;case"script":w=Bo(a)}Sr.has(w)||(a=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),Sr.set(w,a),p.querySelector(y)!==null||o==="style"&&p.querySelector(Ec(w))||o==="script"&&p.querySelector(Oc(w))||(o=p.createElement("link"),_n(o,"link",a),cn(o),p.head.appendChild(o)))}}function c5(a,o){Da.m(a,o);var u=Uo;if(u&&a){var p=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+gr(p)+'"][href="'+gr(a)+'"]',w=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Bo(a)}if(!Sr.has(w)&&(a=g({rel:"modulepreload",href:a},o),Sr.set(w,a),u.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Oc(w)))return}p=u.createElement("link"),_n(p,"link",a),cn(p),u.head.appendChild(p)}}}function u5(a,o,u){Da.S(a,o,u);var p=Uo;if(p&&a){var y=lo(p).hoistableStyles,w=qo(a);o=o||"default";var E=y.get(w);if(!E){var D={loading:0,preload:null};if(E=p.querySelector(Ec(w)))D.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},u),(u=Sr.get(w))&&Tg(a,u);var q=E=p.createElement("link");cn(q),_n(q,"link",a),q._p=new Promise(function(Z,oe){q.onload=Z,q.onerror=oe}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Vd(E,o,p)}E={type:"stylesheet",instance:E,count:1,state:D},y.set(w,E)}}}function d5(a,o){Da.X(a,o);var u=Uo;if(u&&a){var p=lo(u).hoistableScripts,y=Bo(a),w=p.get(y);w||(w=u.querySelector(Oc(y)),w||(a=g({src:a,async:!0},o),(o=Sr.get(y))&&Pg(a,o),w=u.createElement("script"),cn(w),_n(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function f5(a,o){Da.M(a,o);var u=Uo;if(u&&a){var p=lo(u).hoistableScripts,y=Bo(a),w=p.get(y);w||(w=u.querySelector(Oc(y)),w||(a=g({src:a,async:!0,type:"module"},o),(o=Sr.get(y))&&Pg(a,o),w=u.createElement("script"),cn(w),_n(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function iS(a,o,u,p){var y=(y=he.current)?Yd(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=qo(u.href),u=lo(y).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=qo(u.href);var w=lo(y).hoistableStyles,E=w.get(a);if(E||(y=y.ownerDocument||y,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,E),(w=y.querySelector(Ec(a)))&&!w._p&&(E.instance=w,E.state.loading=5),Sr.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Sr.set(a,u),w||h5(y,a,u,E.state))),o&&p===null)throw Error(r(528,""));return E}if(o&&p!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Bo(u),u=lo(y).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function qo(a){return'href="'+gr(a)+'"'}function Ec(a){return'link[rel="stylesheet"]['+a+"]"}function sS(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function h5(a,o,u,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),_n(o,"link",u),cn(o),a.head.appendChild(o))}function Bo(a){return'[src="'+gr(a)+'"]'}function Oc(a){return"script[async]"+a}function oS(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+gr(u.href)+'"]');if(p)return o.instance=p,cn(p),p;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),cn(p),_n(p,"style",y),Vd(p,u.precedence,a),o.instance=p;case"stylesheet":y=qo(u.href);var w=a.querySelector(Ec(y));if(w)return o.state.loading|=4,o.instance=w,cn(w),w;p=sS(u),(y=Sr.get(y))&&Tg(p,y),w=(a.ownerDocument||a).createElement("link"),cn(w);var E=w;return E._p=new Promise(function(D,q){E.onload=D,E.onerror=q}),_n(w,"link",p),o.state.loading|=4,Vd(w,u.precedence,a),o.instance=w;case"script":return w=Bo(u.src),(y=a.querySelector(Oc(w)))?(o.instance=y,cn(y),y):(p=u,(y=Sr.get(w))&&(p=g({},u),Pg(p,y)),a=a.ownerDocument||a,y=a.createElement("script"),cn(y),_n(y,"link",p),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Vd(p,u.precedence,a));return o.instance}function Vd(a,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,w=y,E=0;E<p.length;E++){var D=p[E];if(D.dataset.precedence===o)w=D;else if(w!==y)break}w?w.parentNode.insertBefore(a,w.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function Tg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Pg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Wd=null;function lS(a,o,u){if(Wd===null){var p=new Map,y=Wd=new Map;y.set(u,p)}else y=Wd,p=y.get(u),p||(p=new Map,y.set(u,p));if(p.has(a))return p;for(p.set(a,null),u=u.getElementsByTagName(a),y=0;y<u.length;y++){var w=u[y];if(!(w[Fl]||w[yn]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var E=w.getAttribute(o)||"";E=a+E;var D=p.get(E);D?D.push(w):p.set(E,[w])}}return p}function cS(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function m5(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function p5(a,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=qo(p.href),w=o.querySelector(Ec(y));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Xd.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=w,cn(w);return}w=o.ownerDocument||o,p=sS(p),(y=Sr.get(y))&&Tg(p,y),w=w.createElement("link"),cn(w);var E=w;E._p=new Promise(function(D,q){E.onload=D,E.onerror=q}),_n(w,"link",p),u.instance=w}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Xd.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var Mg=0;function g5(a,o){return a.stylesheets&&a.count===0&&Jd(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var p=setTimeout(function(){if(a.stylesheets&&Jd(a,a.stylesheets),a.unsuspend){var w=a.unsuspend;a.unsuspend=null,w()}},6e4+o);0<a.imgBytes&&Mg===0&&(Mg=62500*XD());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Jd(a,a.stylesheets),a.unsuspend)){var w=a.unsuspend;a.unsuspend=null,w()}},(a.imgBytes>Mg?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function Xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Qd=null;function Jd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Qd=new Map,o.forEach(v5,a),Qd=null,Xd.call(a))}function v5(a,o){if(!(o.state.loading&4)){var u=Qd.get(a);if(u)var p=u.get(null);else{u=new Map,Qd.set(a,u);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var E=y[w];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),p=E)}p&&u.set(null,p)}y=o.instance,E=y.getAttribute("data-precedence"),w=u.get(E)||p,w===p&&u.set(null,y),u.set(E,y),this.count++,p=Xd.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),w?w.parentNode.insertBefore(y,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var Cc={$$typeof:C,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function y5(a,o,u,p,y,w,E,D,q){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.hiddenUpdates=Cm(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function dS(a,o,u,p,y,w,E,D,q,Z,oe,ue){return a=new y5(a,o,u,E,q,Z,oe,ue,D),o=1,w===!0&&(o|=24),w=Qn(3,null,null,o),a.current=w,w.stateNode=a,o=fp(),o.refCount++,a.pooledCache=o,o.refCount++,w.memoizedState={element:p,isDehydrated:u,cache:o},gp(w),a}function fS(a){return a?(a=bo,a):bo}function hS(a,o,u,p,y,w){y=fS(y),p.context===null?p.context=y:p.pendingContext=y,p=fi(o),p.payload={element:u},w=w===void 0?null:w,w!==null&&(p.callback=w),u=hi(a,p,o),u!==null&&(Fn(u,a,o),sc(u,a,o))}function mS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function Rg(a,o){mS(a,o),(a=a.alternate)&&mS(a,o)}function pS(a){if(a.tag===13||a.tag===31){var o=rs(a,67108864);o!==null&&Fn(o,a,67108864),Rg(a,67108864)}}function gS(a){if(a.tag===13||a.tag===31){var o=nr();o=Am(o);var u=rs(a,o);u!==null&&Fn(u,a,o),Rg(a,o)}}var Zd=!0;function b5(a,o,u,p){var y=I.T;I.T=null;var w=$.p;try{$.p=2,Dg(a,o,u,p)}finally{$.p=w,I.T=y}}function x5(a,o,u,p){var y=I.T;I.T=null;var w=$.p;try{$.p=8,Dg(a,o,u,p)}finally{$.p=w,I.T=y}}function Dg(a,o,u,p){if(Zd){var y=Ig(p);if(y===null)wg(a,o,p,ef,u),yS(a,p);else if(_5(y,a,o,u,p))p.stopPropagation();else if(yS(a,p),o&4&&-1<w5.indexOf(a)){for(;y!==null;){var w=oo(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var E=Oe(w.pendingLanes);if(E!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;E;){var q=1<<31-tt(E);D.entanglements[1]|=q,E&=~q}ra(w),(lt&6)===0&&(Id=Nt()+500,_c(0))}}break;case 31:case 13:D=rs(w,2),D!==null&&Fn(D,w,2),$d(),Rg(w,2)}if(w=Ig(p),w===null&&wg(a,o,p,ef,u),w===y)break;y=w}y!==null&&p.stopPropagation()}else wg(a,o,p,null,u)}}function Ig(a){return a=$m(a),Lg(a)}var ef=null;function Lg(a){if(ef=null,a=so(a),a!==null){var o=s(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=l(o),a!==null)return a;a=null}else if(u===31){if(a=d(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return ef=a,null}function vS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wn()){case In:return 2;case Lr:return 8;case pe:case xe:return 32;case ie:return 268435456;default:return 32}default:return 32}}var $g=!1,Si=null,Ni=null,Ei=null,Ac=new Map,kc=new Map,Oi=[],w5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yS(a,o){switch(a){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":Ac.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(o.pointerId)}}function Tc(a,o,u,p,y,w){return a===null||a.nativeEvent!==w?(a={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},o!==null&&(o=oo(o),o!==null&&pS(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function _5(a,o,u,p,y){switch(o){case"focusin":return Si=Tc(Si,a,o,u,p,y),!0;case"dragenter":return Ni=Tc(Ni,a,o,u,p,y),!0;case"mouseover":return Ei=Tc(Ei,a,o,u,p,y),!0;case"pointerover":var w=y.pointerId;return Ac.set(w,Tc(Ac.get(w)||null,a,o,u,p,y)),!0;case"gotpointercapture":return w=y.pointerId,kc.set(w,Tc(kc.get(w)||null,a,o,u,p,y)),!0}return!1}function bS(a){var o=so(a.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){a.blockedOn=o,Mw(a.priority,function(){gS(u)});return}}else if(o===31){if(o=d(u),o!==null){a.blockedOn=o,Mw(a.priority,function(){gS(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function tf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=Ig(a.nativeEvent);if(u===null){u=a.nativeEvent;var p=new u.constructor(u.type,u);Lm=p,u.target.dispatchEvent(p),Lm=null}else return o=oo(u),o!==null&&pS(o),a.blockedOn=u,!1;o.shift()}return!0}function xS(a,o,u){tf(a)&&u.delete(o)}function j5(){$g=!1,Si!==null&&tf(Si)&&(Si=null),Ni!==null&&tf(Ni)&&(Ni=null),Ei!==null&&tf(Ei)&&(Ei=null),Ac.forEach(xS),kc.forEach(xS)}function nf(a,o){a.blockedOn===o&&(a.blockedOn=null,$g||($g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,j5)))}var rf=null;function wS(a){rf!==a&&(rf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){rf===a&&(rf=null);for(var o=0;o<a.length;o+=3){var u=a[o],p=a[o+1],y=a[o+2];if(typeof p!="function"){if(Lg(p||u)===null)continue;break}var w=oo(u);w!==null&&(a.splice(o,3),o-=3,Ip(w,{pending:!0,data:y,method:u.method,action:p},p,y))}}))}function Fo(a){function o(q){return nf(q,a)}Si!==null&&nf(Si,a),Ni!==null&&nf(Ni,a),Ei!==null&&nf(Ei,a),Ac.forEach(o),kc.forEach(o);for(var u=0;u<Oi.length;u++){var p=Oi[u];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Oi.length&&(u=Oi[0],u.blockedOn===null);)bS(u),u.blockedOn===null&&Oi.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var y=u[p],w=u[p+1],E=y[Ln]||null;if(typeof w=="function")E||wS(u);else if(E){var D=null;if(w&&w.hasAttribute("formAction")){if(y=w,E=w[Ln]||null)D=E.formAction;else if(Lg(y)!==null)continue}else D=E.action;typeof D=="function"?u[p+1]=D:(u.splice(p,3),p-=3),wS(u)}}}function _S(){function a(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(E){return y=E})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function zg(a){this._internalRoot=a}af.prototype.render=zg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,p=nr();hS(u,p,a,o,null,null)},af.prototype.unmount=zg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;hS(a.current,2,null,a,null,null),$d(),o[io]=null}};function af(a){this._internalRoot=a}af.prototype.unstable_scheduleHydration=function(a){if(a){var o=Pw();a={blockedOn:null,target:a,priority:o};for(var u=0;u<Oi.length&&o!==0&&o<Oi[u].priority;u++);Oi.splice(u,0,a),u===0&&bS(a)}};var jS=t.version;if(jS!=="19.2.0")throw Error(r(527,jS,"19.2.0"));$.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var S5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{De=sf.inject(S5),Ae=sf}catch{}}return Mc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var u=!1,p="",y=k1,w=T1,E=P1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=dS(a,1,!1,null,null,u,p,null,y,w,E,_S),a[io]=o.current,xg(a),new zg(o)},Mc.hydrateRoot=function(a,o,u){if(!i(a))throw Error(r(299));var p=!1,y="",w=k1,E=T1,D=P1,q=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(q=u.formState)),o=dS(a,1,!0,o,u??null,p,y,q,w,E,D,_S),o.context=fS(null),u=o.current,p=nr(),p=Am(p),y=fi(p),y.callback=null,hi(u,y,p),u=p,o.current.lanes=u,Bl(o,u),ra(o),a[io]=o.current,xg(a),new af(o)},Mc.version="19.2.0",Mc}var MS;function $5(){if(MS)return Fg.exports;MS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fg.exports=L5(),Fg.exports}var z5=$5();const U5=Qr(z5);/**
 */var RS="popstate";function q5(e={}){function t(r,i){let{pathname:s,search:l,hash:d}=r.location;return zy("",{pathname:s,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:au(i)}return F5(t,n,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function B5(){return Math.random().toString(36).substring(2,10)}function DS(e,t){return{usr:e.state,key:e.key,idx:t}}function zy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ol(t):t,state:n,key:t&&t.key||r||B5()}}function au({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ol(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function F5(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,d="POP",f=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){d="POP";let S=m(),N=S==null?null:S-h;h=S,f&&f({action:d,location:j.location,delta:N})}function v(S,N){d="PUSH";let O=zy(j.location,S,N);h=m()+1;let C=DS(O,h),A=j.createHref(O);try{l.pushState(C,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(A)}s&&f&&f({action:d,location:j.location,delta:1})}function x(S,N){d="REPLACE";let O=zy(j.location,S,N);h=m();let C=DS(O,h),A=j.createHref(O);l.replaceState(C,"",A),s&&f&&f({action:d,location:j.location,delta:0})}function _(S){return H5(S)}let j={get action(){return d},get location(){return e(i,l)},listen(S){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(RS,g),f=S,()=>{i.removeEventListener(RS,g),f=null}},createHref(S){return t(i,S)},createURL:_,encodeLocation(S){let N=_(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:x,go(S){return l.go(S)}};return j}function H5(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:au(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function GC(e,t,n="/"){return K5(e,t,n,!1)}function K5(e,t,n,r){let i=typeof t=="string"?Ol(t):t,s=Ga(i.pathname||"/",n);if(s==null)return null;let l=YC(e);G5(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let h=r4(s);d=t4(l[f],h,r)}return d}function YC(e,t=[],n=[],r="",i=!1){let s=(l,d,f=i,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&f)return;Mt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Ba([r,m.relativePath]),v=n.concat(m);l.children&&l.children.length>0&&(Mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),YC(l.children,t,v,g,f)),!(l.path==null&&!l.index)&&t.push({path:g,score:Z5(g,l.index),routesMeta:v})};return e.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,d);else for(let h of VC(l.path))s(l,d,!0,h)}),t}function VC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=VC(r.join("/")),d=[];return d.push(...l.map(f=>f===""?s:[s,f].join("/"))),i&&d.push(...l),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function G5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:e4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Y5=/^:[\w-]+$/,V5=3,W5=2,X5=1,Q5=10,J5=-2,IS=e=>e==="*";function Z5(e,t){let n=e.split("/"),r=n.length;return n.some(IS)&&(r+=J5),t&&(r+=W5),n.filter(i=>!IS(i)).reduce((i,s)=>i+(Y5.test(s)?V5:s===""?X5:Q5),r)}function e4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function t4(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],h=d===r.length-1,m=s==="/"?t:t.slice(s.length)||"/",g=Wf({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),v=f.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=Wf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Ba([s,g.pathname]),pathnameBase:o4(Ba([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Ba([s,g.pathnameBase]))}return l}function Wf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=n4(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},v)=>{if(m==="*"){let _=d[v]||"";l=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const x=d[v];return g&&!x?h[m]=void 0:h[m]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function n4(e,t=!1,n=!0){Xr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function r4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ga(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function a4(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ol(e):e;return{pathname:n?n.startsWith("/")?n:i4(n,t):t,search:l4(r),hash:c4(i)}}function i4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Yg(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function s4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rb(e){let t=s4(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function ab(e,t,n,r=!1){let i;typeof e=="string"?i=Ol(e):(i={...e},Mt(!i.pathname||!i.pathname.includes("?"),Yg("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),Yg("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),Yg("#","search","hash",i)));let s=e===""||i.pathname==="",l=s?"/":i.pathname,d;if(l==null)d=n;else{let g=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?t[g]:"/"}let f=a4(i,d),h=l&&l!=="/"&&l.endsWith("/"),m=(s||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}var Ba=e=>e.join("/").replace(/\/\/+/g,"/"),o4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var WC=["POST","PUT","PATCH","DELETE"];new Set(WC);var d4=["GET",...WC];new Set(d4);var Cl=b.createContext(null);Cl.displayName="DataRouter";var Fh=b.createContext(null);Fh.displayName="DataRouterState";b.createContext(!1);var XC=b.createContext({isTransitioning:!1});XC.displayName="ViewTransition";var f4=b.createContext(new Map);f4.displayName="Fetchers";var h4=b.createContext(null);h4.displayName="Await";var Jr=b.createContext(null);Jr.displayName="Navigation";var _u=b.createContext(null);_u.displayName="Location";var Rr=b.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var ib=b.createContext(null);ib.displayName="RouteError";function m4(e,{relative:t}={}){Mt(Al(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(Jr),{hash:i,pathname:s,search:l}=ju(e,{relative:t}),d=s;return n!=="/"&&(d=s==="/"?n:Ba([n,s])),r.createHref({pathname:d,search:l,hash:i})}function Al(){return b.useContext(_u)!=null}function Gi(){return Mt(Al(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(_u).location}var QC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JC(e){b.useContext(Jr).static||b.useLayoutEffect(e)}function pa(){let{isDataRoute:e}=b.useContext(Rr);return e?k4():p4()}function p4(){Mt(Al(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Cl),{basename:t,navigator:n}=b.useContext(Jr),{matches:r}=b.useContext(Rr),{pathname:i}=Gi(),s=JSON.stringify(rb(r)),l=b.useRef(!1);return JC(()=>{l.current=!0}),b.useCallback((f,h={})=>{if(Xr(l.current,QC),!l.current)return;if(typeof f=="number"){n.go(f);return}let m=ab(f,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ba([t,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[t,n,s,i,e])}var g4=b.createContext(null);function v4(e){let t=b.useContext(Rr).outlet;return b.useMemo(()=>t&&b.createElement(g4.Provider,{value:e},t),[t,e])}function y4(){let{matches:e}=b.useContext(Rr),t=e[e.length-1];return t?t.params:{}}function ju(e,{relative:t}={}){let{matches:n}=b.useContext(Rr),{pathname:r}=Gi(),i=JSON.stringify(rb(n));return b.useMemo(()=>ab(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function b4(e,t){return ZC(e,t)}function ZC(e,t,n,r,i){var O;Mt(Al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=b.useContext(Jr),{matches:l}=b.useContext(Rr),d=l[l.length-1],f=d?d.params:{},h=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let C=g&&g.path||"";eA(h,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.
Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=Gi(),x;if(t){let C=typeof t=="string"?Ol(t):t;Mt(m==="/"||((O=C.pathname)==null?void 0:O.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=v;let _=x.pathname||"/",j=_;if(m!=="/"){let C=m.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=GC(e,{pathname:j});Xr(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Xr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=S4(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Ba([m,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:Ba([m,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,n,r,i);return t&&N?b.createElement(_u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function x4(){let e=A4(),t=u4(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,l)}var w4=b.createElement(x4,null),_4=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(Rr.Provider,{value:this.props.routeContext},b.createElement(ib.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j4({routeContext:e,match:t,children:n}){let r=b.useContext(Cl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Rr.Provider,{value:e},n)}function S4(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=n==null?void 0:n.errors;if(l!=null){let h=s.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:g,errors:v}=n,x=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||x){d=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((h,m,g)=>{let v,x=!1,_=null,j=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,_=m.route.errorElement||w4,d&&(f<0&&g===0?(eA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):f===g&&(x=!0,j=m.route.hydrateFallbackElement||null)));let S=t.concat(s.slice(0,g+1)),N=()=>{let O;return v?O=_:x?O=j:m.route.Component?O=b.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=h,b.createElement(j4,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:O})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(_4,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):N()},null)}function sb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N4(e){let t=b.useContext(Cl);return Mt(t,sb(e)),t}function E4(e){let t=b.useContext(Fh);return Mt(t,sb(e)),t}function O4(e){let t=b.useContext(Rr);return Mt(t,sb(e)),t}function ob(e){let t=O4(e),n=t.matches[t.matches.length-1];return Mt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function C4(){return ob("useRouteId")}function A4(){var r;let e=b.useContext(ib),t=E4("useRouteError"),n=ob("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function k4(){let{router:e}=N4("useNavigate"),t=ob("useNavigate"),n=b.useRef(!1);return JC(()=>{n.current=!0}),b.useCallback(async(i,s={})=>{Xr(n.current,QC),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var LS={};function eA(e,t,n){!t&&!LS[e]&&(LS[e]=!0,Xr(!1,n))}b.memo(T4);function T4({routes:e,future:t,state:n,unstable_onError:r}){return ZC(e,void 0,n,r,t)}function Xf({to:e,replace:t,state:n,relative:r}){Mt(Al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=b.useContext(Jr);Xr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(Rr),{pathname:l}=Gi(),d=pa(),f=ab(e,rb(s),l,r==="path"),h=JSON.stringify(f);return b.useEffect(()=>{d(JSON.parse(h),{replace:t,state:n,relative:r})},[d,h,r,t,n]),null}function P4(e){return v4(e.context)}function _s(e){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M4({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Mt(!Al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:l,navigator:i,static:s,future:{}}),[l,i,s]);typeof n=="string"&&(n=Ol(n));let{pathname:f="/",search:h="",hash:m="",state:g=null,key:v="default"}=n,x=b.useMemo(()=>{let _=Ga(f,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:g,key:v},navigationType:r}},[l,f,h,m,g,v,r]);return Xr(x!=null,`<Router basename="${l}"> is not able to match the URL "${f}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:b.createElement(Jr.Provider,{value:d},b.createElement(_u.Provider,{children:t,value:x}))}function R4({children:e,location:t}){return b4(Uy(e),t)}function Uy(e,t=[]){let n=[];return b.Children.forEach(e,(r,i)=>{if(!b.isValidElement(r))return;let s=[...t,i];if(r.type===b.Fragment){n.push.apply(n,Uy(r.props.children,s));return}Mt(r.type===_s,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Uy(r.props.children,s)),n.push(l)}),n}var zf="get",Uf="application/x-www-form-urlencoded";function Hh(e){return e!=null&&typeof e.tagName=="string"}function D4(e){return Hh(e)&&e.tagName.toLowerCase()==="button"}function I4(e){return Hh(e)&&e.tagName.toLowerCase()==="form"}function L4(e){return Hh(e)&&e.tagName.toLowerCase()==="input"}function $4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function z4(e,t){return e.button===0&&(!t||t==="_self")&&!$4(e)}var of=null;function U4(){if(of===null)try{new FormData(document.createElement("form"),0),of=!1}catch{of=!0}return of}var q4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vg(e){return e!=null&&!q4.has(e)?(Xr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uf}"`),null):e}function B4(e,t){let n,r,i,s,l;if(I4(e)){let d=e.getAttribute("action");r=d?Ga(d,t):null,n=e.getAttribute("method")||zf,i=Vg(e.getAttribute("enctype"))||Uf,s=new FormData(e)}else if(D4(e)||L4(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||d.getAttribute("action");if(r=f?Ga(f,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||zf,i=Vg(e.getAttribute("formenctype"))||Vg(d.getAttribute("enctype"))||Uf,s=new FormData(d,e),!U4()){let{name:h,type:m,value:g}=e;if(m==="image"){let v=h?`${h}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else h&&s.append(h,g)}}else{if(Hh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zf,r=null,i=Uf,l=e}return s&&i==="text/plain"&&(l=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F4(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Ga(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function H4(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K4(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function G4(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let l=await H4(s,n);return l.links?l.links():[]}return[]}));return X4(r.flat(1).filter(K4).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function $S(e,t,n,r,i,s){let l=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>{var m;return n[h].pathname!==f.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return s==="assets"?t.filter((f,h)=>l(f,h)||d(f,h)):s==="data"?t.filter((f,h)=>{var g;let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(l(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Y4(e,t,{includeHydrateFallback:n}={}){return V4(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function V4(e){return[...new Set(e)]}function W4(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function X4(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(W4(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function tA(){let e=b.useContext(Cl);return lb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Q4(){let e=b.useContext(Fh);return lb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var cb=b.createContext(void 0);cb.displayName="FrameworkContext";function nA(){let e=b.useContext(cb);return lb(e,"You must render this element inside a <HydratedRouter> element"),e}function J4(e,t){let n=b.useContext(cb),[r,i]=b.useState(!1),[s,l]=b.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=t,v=b.useRef(null);b.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let j=N=>{N.forEach(O=>{l(O.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),b.useEffect(()=>{if(r){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[r]);let x=()=>{i(!0)},_=()=>{i(!1),l(!1)};return n?e!=="intent"?[s,v,{}]:[s,v,{onFocus:Rc(d,x),onBlur:Rc(f,_),onMouseEnter:Rc(h,x),onMouseLeave:Rc(m,_),onTouchStart:Rc(g,x)}]:[!1,v,{}]}function Rc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Z4({page:e,...t}){let{router:n}=tA(),r=b.useMemo(()=>GC(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(tI,{page:e,matches:r,...t}):null}function eI(e){let{manifest:t,routeModules:n}=nA(),[r,i]=b.useState([]);return b.useEffect(()=>{let s=!1;return G4(e,t,n).then(l=>{s||i(l)}),()=>{s=!0}},[e,t,n]),r}function tI({page:e,matches:t,...n}){let r=Gi(),{manifest:i,routeModules:s}=nA(),{basename:l}=tA(),{loaderData:d,matches:f}=Q4(),h=b.useMemo(()=>$S(e,t,f,i,r,"data"),[e,t,f,i,r]),m=b.useMemo(()=>$S(e,t,f,i,r,"assets"),[e,t,f,i,r]),g=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,j=!1;if(t.forEach(N=>{var C;let O=i.routes[N.route.id];!O||!O.hasLoader||(!h.some(A=>A.route.id===N.route.id)&&N.route.id in d&&((C=s[N.route.id])!=null&&C.shouldRevalidate)||O.hasClientLoader?j=!0:_.add(N.route.id))}),_.size===0)return[];let S=F4(e,l,"data");return j&&_.size>0&&S.searchParams.set("_routes",t.filter(N=>_.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[l,d,r,i,h,t,e,s]),v=b.useMemo(()=>Y4(m,i),[m,i]),x=eI(m);return b.createElement(b.Fragment,null,g.map(_=>b.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),v.map(_=>b.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),x.map(({key:_,link:j})=>b.createElement("link",{key:_,nonce:n.nonce,...j})))}function nI(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var rA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rA&&(window.__reactRouterVersion="7.9.4")}catch{}function rI({basename:e,children:t,window:n}){let r=b.useRef();r.current==null&&(r.current=q5({window:n,v5Compat:!0}));let i=r.current,[s,l]=b.useState({action:i.action,location:i.location}),d=b.useCallback(f=>{b.startTransition(()=>l(f))},[l]);return b.useLayoutEffect(()=>i.listen(d),[i,d]),b.createElement(M4,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var aA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ub=b.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:l,state:d,target:f,to:h,preventScrollReset:m,viewTransition:g,...v},x){let{basename:_}=b.useContext(Jr),j=typeof h=="string"&&aA.test(h),S,N=!1;if(typeof h=="string"&&j&&(S=h,rA))try{let K=new URL(window.location.href),B=h.startsWith("//")?new URL(K.protocol+h):new URL(h),F=Ga(B.pathname,_);B.origin===K.origin&&F!=null?h=F+B.search+B.hash:N=!0}catch{Xr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=m4(h,{relative:i}),[C,A,T]=J4(r,v),k=sI(h,{replace:l,state:d,target:f,preventScrollReset:m,relative:i,viewTransition:g});function R(K){t&&t(K),K.defaultPrevented||k(K)}let L=b.createElement("a",{...v,...T,href:S||O,onClick:N||s?t:R,ref:nI(x,A),target:f,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?b.createElement(b.Fragment,null,L,b.createElement(Z4,{page:O})):L});ub.displayName="Link";var qy=b.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:l,viewTransition:d,children:f,...h},m){let g=ju(l,{relative:h.relative}),v=Gi(),x=b.useContext(Fh),{navigator:_,basename:j}=b.useContext(Jr),S=x!=null&&dI(g)&&d===!0,N=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,O=v.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(O=O.toLowerCase(),C=C?C.toLowerCase():null,N=N.toLowerCase()),C&&j&&(C=Ga(C,j)||C);const A=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=O===N||!i&&O.startsWith(N)&&O.charAt(A)==="/",k=C!=null&&(C===N||!i&&C.startsWith(N)&&C.charAt(N.length)==="/"),R={isActive:T,isPending:k,isTransitioning:S},L=T?t:void 0,K;typeof r=="function"?K=r(R):K=[r,T?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(R):s;return b.createElement(ub,{...h,"aria-current":L,className:K,ref:m,style:B,to:l,viewTransition:d},typeof f=="function"?f(R):f)});qy.displayName="NavLink";var aI=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:l=zf,action:d,onSubmit:f,relative:h,preventScrollReset:m,viewTransition:g,...v},x)=>{let _=cI(),j=uI(d,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",N=typeof d=="string"&&aA.test(d),O=C=>{if(f&&f(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||l;_(A||C.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:h,preventScrollReset:m,viewTransition:g})};return b.createElement("form",{ref:x,method:S,action:j,onSubmit:r?f:O,...v,"data-discover":!N&&e==="render"?"true":void 0})});aI.displayName="Form";function iI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iA(e){let t=b.useContext(Cl);return Mt(t,iI(e)),t}function sI(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:l}={}){let d=pa(),f=Gi(),h=ju(e,{relative:s});return b.useCallback(m=>{if(z4(m,t)){m.preventDefault();let g=n!==void 0?n:au(f)===au(h);d(e,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:l})}},[f,d,h,n,r,t,e,i,s,l])}var oI=0,lI=()=>`__${String(++oI)}__`;function cI(){let{router:e}=iA("useSubmit"),{basename:t}=b.useContext(Jr),n=C4();return b.useCallback(async(r,i={})=>{let{action:s,method:l,encType:d,formData:f,body:h}=B4(r,t);if(i.navigate===!1){let m=i.fetcherKey||lI();await e.fetch(m,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function uI(e,{relative:t}={}){let{basename:n}=b.useContext(Jr),r=b.useContext(Rr);Mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ju(e||".",{relative:t})},l=Gi();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),f=d.getAll("index");if(f.some(m=>m==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();s.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ba([n,s.pathname])),au(s)}function dI(e,{relative:t}={}){let n=b.useContext(XC);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iA("useViewTransitionState"),i=ju(e,{relative:t});if(!n.isTransitioning)return!1;let s=Ga(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ga(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wf(i.pathname,l)!=null||Wf(i.pathname,s)!=null}var db=KC();const By="active-customer-order",Fy="active-customer-order-id",sA=1440*60*1e3,fI=e=>{if(!e)return null;try{const t=JSON.parse(e);if(t&&typeof t.orderId=="string"&&t.orderId.trim().length>0)return t}catch(t){console.error("Failed to parse stored active order",t)}return null},iu=e=>{if(!(typeof window>"u"))try{if(!e){window.localStorage.removeItem(By),window.localStorage.removeItem(Fy);return}window.localStorage.setItem(By,JSON.stringify(e)),window.localStorage.removeItem(Fy)}catch(t){console.error("Failed to persist active order",t)}},Qf=()=>{if(typeof window>"u")return null;const e=fI(window.localStorage.getItem(By));if(e)return e.expiresAt&&e.expiresAt<=Date.now()?(iu(null),null):e;const t=window.localStorage.getItem(Fy);if(t&&t.trim().length>0){const n={orderId:t};return iu(n),n}return null},oA=(e,t)=>{if(!e){iu(null);return}iu(t?{orderId:e,expiresAt:t}:{orderId:e})},lA=()=>{iu(null)},hI="modulepreload",mI=function(e){return"/"+e},zS={},Su=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(n.map(h=>{if(h=mI(h),h in zS)return;zS[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":hI,m||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((x,_)=>{v.addEventListener("load",x),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})},pI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Su(async()=>{const{default:r}=await Promise.resolve().then(()=>kl);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class fb extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class US extends fb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qS extends fb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class BS extends fb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hy;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hy||(Hy={}));var gI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class vI{constructor(t,{headers:n={},customFetch:r,region:i=Hy.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=pI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return gI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:l,body:d,signal:f}=r;let h={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let v;d&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(h["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(h["Content-Type"]="application/json",v=JSON.stringify(d)));const x=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:f}).catch(N=>{throw N.name==="AbortError"?N:new US(N)}),_=x.headers.get("x-relay-error");if(_&&_==="true")throw new qS(x);if(!x.ok)throw new BS(x);let j=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return j==="application/json"?S=yield x.json():j==="application/octet-stream"?S=yield x.blob():j==="text/event-stream"?S=x:j==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new US(s)}:{data:null,error:s,response:s instanceof BS||s instanceof qS?s.context:void 0}}})}}var dn={},Ho={},Ko={},Go={},Yo={},Vo={},yI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ml=yI();const bI=ml.fetch,cA=ml.fetch.bind(ml),uA=ml.Headers,xI=ml.Request,wI=ml.Response,kl=Object.freeze(Object.defineProperty({__proto__:null,Headers:uA,Request:xI,Response:wI,default:cA,fetch:bI},Symbol.toStringTag,{value:"Module"})),_I=A5(kl);var lf={},FS;function dA(){if(FS)return lf;FS=1,Object.defineProperty(lf,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return lf.default=e,lf}var HS;function fA(){if(HS)return Vo;HS=1;var e=Vo&&Vo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vo,"__esModule",{value:!0});const t=e(_I),n=e(dA());class r{constructor(s){var l,d;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(l=s.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=s.signal,this.isMaybeSingle=(d=s.isMaybeSingle)!==null&&d!==void 0?d:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,l){return this.headers=new Headers(this.headers),this.headers.set(s,l),this}then(s,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,g,v,x;let _=null,j=null,S=null,N=h.status,O=h.statusText;if(h.ok){if(this.method!=="HEAD"){const k=await h.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?j=k:j=JSON.parse(k))}const A=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),T=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");A&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(_={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,S=null,N=406,O="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const A=await h.text();try{_=JSON.parse(A),Array.isArray(_)&&h.status===404&&(j=[],_=null,N=200,O="OK")}catch{h.status===404&&A===""?(N=204,O="No Content"):_={message:A}}if(_&&this.isMaybeSingle&&(!((x=_==null?void 0:_.details)===null||x===void 0)&&x.includes("0 rows"))&&(_=null,N=200,O="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:j,count:S,status:N,statusText:O}});return this.shouldThrowOnError||(f=f.catch(h=>{var m,g,v;return{error:{message:`${(m=h==null?void 0:h.name)!==null&&m!==void 0?m:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h==null?void 0:h.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(s,l)}returns(){return this}overrideTypes(){return this}}return Vo.default=r,Vo}var KS;function hA(){if(KS)return Yo;KS=1;var e=Yo&&Yo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yo,"__esModule",{value:!0});const t=e(fA());class n extends t.default{select(i){let s=!1;const l=(i??"*").split("").map(d=>/\s/.test(d)&&!s?"":(d==='"'&&(s=!s),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:l,foreignTable:d,referencedTable:f=d}={}){const h=f?`${f}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${i}.${s?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:l=s}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,s,{foreignTable:l,referencedTable:d=l}={}){const f=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:l=!1,buffers:d=!1,wal:f=!1,format:h="text"}={}){var m;const g=[i?"analyze":null,s?"verbose":null,l?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Yo.default=n,Yo}var GS;function hb(){if(GS)return Go;GS=1;var e=Go&&Go.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Go,"__esModule",{value:!0});const t=e(hA());class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${f}fts${h}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return Go.default=n,Go}var YS;function mA(){if(YS)return Ko;YS=1;var e=Ko&&Ko.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ko,"__esModule",{value:!0});const t=e(hb());class n{constructor(i,{headers:s={},schema:l,fetch:d}){this.url=i,this.headers=new Headers(s),this.schema=l,this.fetch=d}select(i,s){const{head:l=!1,count:d}=s??{},f=l?"HEAD":"GET";let h=!1;const m=(i??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:l=!0}={}){var d;const f="POST";if(s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:l=!1,count:d,defaultToNull:f=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(g.length>0){const v=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:s}={}){var l;const d="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var s;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Ko.default=n,Ko}var VS;function jI(){if(VS)return Ho;VS=1;var e=Ho&&Ho.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ho,"__esModule",{value:!0});const t=e(mA()),n=e(hb());class r{constructor(s,{headers:l={},schema:d,fetch:f}={}){this.url=s,this.headers=new Headers(l),this.schemaName=d,this.fetch=f}from(s){const l=new URL(`${this.url}/${s}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,l={},{head:d=!1,get:f=!1,count:h}={}){var m;let g;const v=new URL(`${this.url}/rpc/${s}`);let x;d||f?(g=d?"HEAD":"GET",Object.entries(l).filter(([j,S])=>S!==void 0).map(([j,S])=>[j,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([j,S])=>{v.searchParams.append(j,S)})):(g="POST",x=l);const _=new Headers(this.headers);return h&&_.set("Prefer",`count=${h}`),new n.default({method:g,url:v,headers:_,schema:this.schemaName,body:x,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Ho.default=r,Ho}var WS;function SI(){if(WS)return dn;WS=1;var e=dn&&dn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(dn,"__esModule",{value:!0}),dn.PostgrestError=dn.PostgrestBuilder=dn.PostgrestTransformBuilder=dn.PostgrestFilterBuilder=dn.PostgrestQueryBuilder=dn.PostgrestClient=void 0;const t=e(jI());dn.PostgrestClient=t.default;const n=e(mA());dn.PostgrestQueryBuilder=n.default;const r=e(hb());dn.PostgrestFilterBuilder=r.default;const i=e(hA());dn.PostgrestTransformBuilder=i.default;const s=e(fA());dn.PostgrestBuilder=s.default;const l=e(dA());return dn.PostgrestError=l.default,dn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:l.default},dn}var NI=SI();const EI=Qr(NI),{PostgrestClient:OI,PostgrestQueryBuilder:$re,PostgrestFilterBuilder:zre,PostgrestTransformBuilder:Ure,PostgrestBuilder:qre,PostgrestError:Bre}=EI;class CI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const AI="2.75.0",kI=`realtime-js/${AI}`,TI="1.0.0",Ky=1e4,PI=1e3,MI=100;var Wc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wc||(Wc={}));var tn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tn||(tn={}));var Fr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fr||(Fr={}));var Gy;(function(e){e.websocket="websocket"})(Gy||(Gy={}));var Ts;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ts||(Ts={}));class RI{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let l=this.HEADER_LENGTH+2;const d=r.decode(t.slice(l,l+i));l=l+i;const f=r.decode(t.slice(l,l+s));l=l+s;const h=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:d,event:f,payload:h}}}class pA{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jt||(jt={}));const XS=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=DI(l,e,t,i),s),{}):{}},DI=(e,t,n,r)=>{const i=t.find(d=>d.name===e),s=i==null?void 0:i.type,l=n[e];return s&&!r.includes(s)?gA(s,l):Yy(l)},gA=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return zI(t,n)}switch(e){case jt.bool:return II(t);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return LI(t);case jt.json:case jt.jsonb:return $I(t);case jt.timestamp:return UI(t);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return Yy(t);default:return Yy(t)}},Yy=e=>e,II=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},LI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$I=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},zI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const l=e.slice(1,n);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(d=>gA(t,d))}return e},UI=e=>typeof e=="string"?e.replace(" ","T"):e,vA=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Wg{constructor(t,n,r={},i=Ky){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var QS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(QS||(QS={}));class Xc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xc.syncState(this.state,i,s,l),this.pendingDiffs.forEach(f=>{this.state=Xc.syncDiff(this.state,f,s,l)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xc.syncDiff(this.state,i,s,l),d())}),this.onJoin((i,s,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:l})}),this.onLeave((i,s,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),l=this.transformState(n),d={},f={};return this.map(s,(h,m)=>{l[h]||(f[h]=m)}),this.map(l,(h,m)=>{const g=s[h];if(g){const v=m.map(S=>S.presence_ref),x=g.map(S=>S.presence_ref),_=m.filter(S=>x.indexOf(S.presence_ref)<0),j=g.filter(S=>v.indexOf(S.presence_ref)<0);_.length>0&&(d[h]=_),j.length>0&&(f[h]=j)}else d[h]=m}),this.syncDiff(s,{joins:d,leaves:f},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(d,f)=>{var h;const m=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(f),m.length>0){const g=t[d].map(x=>x.presence_ref),v=m.filter(x=>g.indexOf(x.presence_ref)<0);t[d].unshift(...v)}r(d,m,f)}),this.map(l,(d,f)=>{let h=t[d];if(!h)return;const m=f.map(g=>g.presence_ref);h=h.filter(g=>m.indexOf(g.presence_ref)<0),t[d]=h,i(d,h,f),h.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var JS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(JS||(JS={}));var Qc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qc||(Qc={}));var La;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(La||(La={}));class mb{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wg(this,Fr.join,this.params,this.timeout),this.rejoinTimer=new pA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fr.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new Xc(this),this.broadcastEndpointURL=vA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:l,presence:d,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[Qc.PRESENCE]&&this.bindings[Qc.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},v={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(La.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(La.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket.setAuth(),x===void 0){t==null||t(La.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(_=j==null?void 0:j.length)!==null&&_!==void 0?_:0,N=[];for(let O=0;O<S;O++){const C=j[O],{filter:{event:A,schema:T,table:k,filter:R}}=C,L=x&&x[O];if(L&&L.event===A&&L.schema===T&&L.table===k&&L.filter===R)N.push(Object.assign(Object.assign({},C),{id:L.id}));else{this.unsubscribe(),this.state=tn.errored,t==null||t(La.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(La.SUBSCRIBED);return}}).receive("error",x=>{this.state=tn.errored,t==null||t(La.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(La.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===tn.joined&&t===Qc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:l}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,d,f;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Wg(this,Fr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Wg(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>MI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const l=t.toLocaleLowerCase(),{close:d,error:f,leave:h,join:m}=Fr;if(r&&[d,f,h,m].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var _,j,S;return((_=x.filter)===null||_===void 0?void 0:_.event)==="*"||((S=(j=x.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(v,r)):(s=this.bindings[l])===null||s===void 0||s.filter(x=>{var _,j,S,N,O,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const A=x.id,T=(_=x.filter)===null||_===void 0?void 0:_.event;return A&&((j=n.ids)===null||j===void 0?void 0:j.includes(A))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const A=(O=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return A==="*"||A===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:j,table:S,commit_timestamp:N,type:O,errors:C}=_;v=Object.assign(Object.assign({},{schema:j,table:S,commit_timestamp:N,eventType:O,new:{},old:{},errors:C}),this._getPayloadRecords(_))}x.callback(v,r)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&mb.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fr.close,{},t)}_onError(t){this._on(Fr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=XS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=XS(t.columns,t.old_record)),n}}const Xg=()=>{},cf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qI=[1e3,2e3,5e3,1e4],BI=1e4,FI=`
\r=`.split(""),TL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<n2.length;t+=1)e[n2[t].charCodeAt(0)]=-2;for(let t=0;t<Zf.length;t+=1)e[Zf[t].charCodeAt(0)]=t;return e})();function r2(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zf[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Zf[r]),t.queuedBits-=6}}function _A(e,t,n){const r=TL[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function a2(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=l=>{RL(l,r,n)};for(let l=0;l<e.length;l+=1)_A(e.charCodeAt(l),i,s);return t.join("")}function PL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ML(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}PL(r,t)}}function RL(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function cl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)_A(e.charCodeAt(i),n,r);return new Uint8Array(t)}function DL(e){const t=[];return ML(e,n=>t.push(n)),new Uint8Array(t)}function Is(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>r2(i,n,r)),r2(null,n,r),t.join("")}function IL(e){return Math.round(Date.now()/1e3)+e}function LL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const rr=()=>typeof window<"u"&&typeof document<"u",gs={tested:!1,writable:!1},jA=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gs.tested)return gs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gs.tested=!0,gs.writable=!0}catch{gs.tested=!0,gs.writable=!1}return gs.writable};function $L(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const SA=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Su(async()=>{const{default:r}=await Promise.resolve().then(()=>kl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},zL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",il=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},vs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ai=async(e,t)=>{await e.removeItem(t)};class Kh{constructor(){this.promise=new Kh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Kh.promiseConstructor=Promise;function ev(e){const t=e.split(".");if(t.length!==3)throw new e0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!NL.test(t[r]))throw new e0("JWT not in base64url format");return{header:JSON.parse(a2(t[0])),payload:JSON.parse(a2(t[1])),signature:cl(t[2]),raw:{header:t[0],payload:t[1]}}}async function UL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qL(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){r(l);return}}catch(l){if(!t(s,l)){i(l);return}}})()})}function BL(e){return("0"+e.toString(16)).substr(-2)}function FL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,BL).join("")}async function HL(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function KL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await HL(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qo(e,t,n=!1){const r=FL();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await il(e,`${t}-code-verifier`,i);const s=await KL(r);return[s,r===s?"plain":"s256"]}const GL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YL(e){const t=e.headers.get(Jy);if(!t||!t.match(GL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jo(e){if(!XL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tv(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function i2(e){return JSON.parse(JSON.stringify(e))}var QL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const js=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JL=[502,503,504];async function s2(e){var t;if(!zL(e))throw new Zy(js(e),0);if(JL.includes(e.status))throw new Zy(js(e),e.status);let n;try{n=await e.json()}catch(s){throw new Ps(js(s),s)}let r;const i=YL(e);if(i&&i.getTime()>=wA["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new t2(js(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Mi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new t2(js(n),e.status,n.weak_password.reasons);throw new OL(js(n),e.status||500,r)}const ZL=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function qe(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Jy]||(s[Jy]=wA["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await e6(e,t,n+d,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function e6(e,t,n,r,i,s){const l=ZL(t,r,i,s);let d;try{d=await e(n,Object.assign({},l))}catch(f){throw console.error(f),new Zy(js(f),0)}if(d.ok||await s2(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(f){await s2(f)}}function Br(e){var t;let n=null;r6(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=IL(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function o2(e){const t=Br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function t6(e){return{data:e,error:null}}function n6(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,l=QL(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},f=Object.assign({},l);return{data:{properties:d,user:f},error:null}}function l2(e){return e}function r6(e){return e.access_token&&e.refresh_token&&e.expires_in}const nv=["global","local","others"];var a6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class i6{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=SA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=nv[0]){if(nv.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nv.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=a6(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:n6,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},m=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:l2});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(f=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(_.split(";")[1].split("=")[1]);h[`${S}Page`]=j}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ie(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Jo(t);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Jo(t);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:zi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Jo(t);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:zi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Jo(t.userId);try{const{data:n,error:r}=await qe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Jo(t.userId),Jo(t.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},m=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:l2});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(f=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(_.split(";")[1].split("=")[1]);h[`${S}Page`]=j}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ie(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}function c2(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Zo={debug:!!(globalThis&&jA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class s6 extends NA{}async function o6(e,t,n){Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Zo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new s6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function l6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function EA(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function c6(e){return parseInt(e,16)}function u6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function d6(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:l,notBefore:d,requestId:f,resources:h,scheme:m,uri:g,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
${N}`}class Xt extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class eh extends Xt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function f6({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Xt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(CA(l)){if(s.rp.id!==l)return new Xt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function h6({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Xt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(CA(r)){if(n.rpId!==r)return new Xt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var OA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class m6{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const p6=new m6;function g6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=OA(e,["challenge","user","excludeCredentials"]),s=cl(t).buffer,l=Object.assign(Object.assign({},n),{id:cl(n.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:s,user:l});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:cl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function v6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=OA(e,["challenge","allowCredentials"]),i=cl(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const d=n[l];s.allowCredentials[l]=Object.assign(Object.assign({},d),{id:cl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function y6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Is(new Uint8Array(e.response.attestationObject)),clientDataJSON:Is(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function b6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Is(new Uint8Array(i.authenticatorData)),clientDataJSON:Is(new Uint8Array(i.clientDataJSON)),signature:Is(new Uint8Array(i.signature)),userHandle:i.userHandle?Is(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function CA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function u2(){var e,t;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function x6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eh("Browser returned unexpected credential type",t)}:{data:null,error:new eh("Empty credential response",t)}}catch(t){return{data:null,error:f6({error:t,options:e})}}}async function w6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new eh("Browser returned unexpected credential type",t)}:{data:null,error:new eh("Empty credential response",t)}}catch(t){return{data:null,error:h6({error:t,options:e})}}}const _6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},j6={userVerification:"preferred",hints:["security-key"]};function th(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const l=i[s];if(l!==void 0)if(Array.isArray(l))r[s]=l;else if(n(l))r[s]=l;else if(t(l)){const d=r[s];t(d)?r[s]=th(d,l):r[s]=th(l)}else r[s]=l}return r}function S6(e,t){return th(_6,e,t||{})}function N6(e,t){return th(j6,e,t||{})}class E6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:d};const f=i??p6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=S6(l.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:m,error:g}=await x6({publicKey:h,signal:f});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const h=N6(l.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:m,error:g}=await w6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:f}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ps("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new su("rpId is required for WebAuthn authentication")};try{if(!u2())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!l)return{data:null,error:d};const{webauthn:f}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ps("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new su("rpId is required for WebAuthn registration")};try{if(!u2())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Ps("Unexpected error in register",l)}}}}l6();const O6={url:_L,storageKey:jL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function d2(e,t,n){return await n()}const el={};class ou{get jwks(){var t,n;return(n=(t=el[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){el[this.storageKey]=Object.assign(Object.assign({},el[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=el[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){el[this.storageKey]=Object.assign(Object.assign({},el[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ou.nextInstanceID,ou.nextInstanceID+=1,this.instanceID>0&&rr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},O6),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new i6({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=SA(i.fetch),this.lock=i.lock||d2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:rr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=o6:this.lock=d2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new E6(this)},this.persistSession?(i.storage?this.storage=i.storage:jA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=c2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=c2(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xA}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=$L(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),rr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),kL(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:l,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new Ps("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Br}),{data:l,error:d}=s;if(d||!l)return{data:{user:null,session:null},error:d};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:m,password:g,options:v}=t;let x=null,_=null;this.flowType==="pkce"&&([x,_]=await Qo(this.storage,this.storageKey)),s=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:g,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:_},xform:Br})}else if("phone"in t){const{phone:m,password:g,options:v}=t;s=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Br})}else throw new uf("You must provide either an email or phone number and a password");const{data:l,error:d}=s;if(d||!l)return{data:{user:null,session:null},error:d};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:l,options:d}=t;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:o2})}else if("phone"in t){const{phone:s,password:l,options:d}=t;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:o2})}else throw new uf("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,l,d,f,h,m,g,v;let x,_;if("message"in t)x=t.message,_=t.signature;else{const{chain:j,wallet:S,statement:N,options:O}=t;let C;if(rr())if(typeof S=="object")C=S;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")C=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const A=new URL((n=O==null?void 0:O.url)!==null&&n!==void 0?n:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=EA(T[0]);let R=(r=O==null?void 0:O.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const K=await C.request({method:"eth_chainId"});R=c6(K)}const L={domain:A.host,address:k,statement:N,uri:A.href,version:"1",chainId:R,nonce:(i=O==null?void 0:O.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(s=O==null?void 0:O.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=O==null?void 0:O.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=O==null?void 0:O.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.resources};x=d6(L),_=await C.request({method:"personal_sign",params:[u6(x),k]})}try{const{data:j,error:S}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:_},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Br});if(S)throw S;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Xo}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:S})}catch(j){if(Ie(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(t){var n,r,i,s,l,d,f,h,m,g,v,x;let _,j;if("message"in t)_=t.message,j=t.signature;else{const{chain:S,wallet:N,statement:O,options:C}=t;let A;if(rr())if(typeof N=="object")A=N;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))A=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const T=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const k=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),O?{statement:O}:null));let R;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")R=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)R=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)_=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),j=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${T.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=C==null?void 0:C.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(m=C==null?void 0:C.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const k=await A.signMessage(new TextEncoder().encode(_),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=k}}try{const{data:S,error:N}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Is(j)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Br});if(N)throw N;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Xo}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:N})}catch(S){if(Ie(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const n=await vs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:l}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Br});if(await Ai(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Xo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:l})}catch(s){if(Ie(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:l}=t,d=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Br}),{data:f,error:h}=d;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Xo}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,l;try{if("email"in t){const{email:d,options:f}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Qo(this.storage,this.storageKey));const{error:g}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:d,options:f}=t,{data:h,error:m}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m}}throw new uf("You must provide either an email or phone number.")}catch(d){if(Ie(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:d}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Br});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,l=null;return this.flowType==="pkce"&&([s,l]=await Qo(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:t6})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Mi;const{error:i}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:l}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:l,error:d}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d}}throw new uf("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await vs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Jg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await vs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=tv()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,h,m)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,m))})}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zi}):await this._useSession(async n=>{var r,i,s;const{data:l,error:d}=n;if(d)throw d;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mi}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:zi})})}catch(n){if(Ie(n))return AL(n)&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Mi;const l=i.session;let d=null,f=null;this.flowType==="pkce"&&t.email!=null&&([d,f]=await Qo(this.storage,this.storageKey));const{data:h,error:m}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:f}),jwt:l.access_token,xform:zi});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Mi;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:l}=ev(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:d,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};s=d}else{const{data:d,error:f}=await this._getUser(t.access_token);if(f)throw f;s={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:d}=n;if(d)throw d;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Mi;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!rr())throw new df("No browser detected.");if(t.error||t.error_description||t.error_code)throw new df(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new e2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new df("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new e2("No code detected.");const{data:O,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:l,expires_in:d,expires_at:f,token_type:h}=t;if(!s||!d||!l||!h)throw new df("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let v=m+g;f&&(v=parseInt(f));const x=v-m;x*1e3<=al&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const _=v-g;m-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,m):m-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,m);const{data:j,error:S}=await this._getUser(s);if(S)throw S;const N={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:v,refresh_token:l,token_type:h,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await vs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(CL(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=LL(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Qo(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var l,d,f,h,m;const{data:g,error:v}=s;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return rr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:l,provider:d,token:f,access_token:h,nonce:m}=t,g=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:f,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Br}),{data:v,error:x}=g;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Xo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)throw l;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qL(async i=>(i>0&&await UL(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Br})),(i,s)=>{const l=200*Math.pow(2,i);return s&&Zg(s)&&Date.now()+l-r<al})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),rr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await vs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await vs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await il(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:tv()}else if(i&&!i.user&&!i.user){const l=await vs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Ai(this.storage,this.storageKey+"-user"),await il(this.storage,this.storageKey,i)):i.user=tv()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Jg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Jg}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Zg(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(i.access_token);!d&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Kh;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Mi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const d={data:s.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(s){if(this._debug(i,"error",s),Ie(s)){const l={data:null,error:s};return Zg(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(f){s.push(f)}});if(await Promise.all(l),s.length>0){for(let d=0;d<s.length;d+=1)console.error(s[d]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await il(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=i2(i);await il(this.storage,this.storageKey,s)}else{const i=i2(n);await il(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ai(this.storage,this.storageKey),await Ai(this.storage,this.storageKey+"-code-verifier"),await Ai(this.storage,this.storageKey+"-user"),this.userStorage&&await Ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),al);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/al);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${al}ms, refresh threshold is ${Qy} ticks`),i<=Qy&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,l]=await Qo(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(d.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await qe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:h}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?y6(t.webauthn.credential_response):b6(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:f}=await qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=await qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g6(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:v6(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ev(i.access_token);let d=null;l.aal&&(d=l.aal);let f=d;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const m=l.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(d=>d.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(d=>d.kid===t),r&&this.jwks_cached_at+EL>i)return r;const{data:s,error:l}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(d=>d.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:x,error:_}=await this.getSession();if(_||!x.session)return{data:null,error:_};r=x.session.access_token}const{header:i,payload:s,signature:l,raw:{header:d,payload:f}}=ev(r);n!=null&&n.allowExpired||VL(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:s,header:i,signature:l},error:null}}const m=WL(i.alg),g=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,DL(`${d}.${f}`)))throw new e0("Invalid JWT signature");return{data:{claims:s,header:i,signature:l},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}ou.nextInstanceID=0;const C6=ou;class A6 extends C6{constructor(t){super(t)}}var k6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class T6{constructor(t,n,r){var i,s,l;this.supabaseUrl=t,this.supabaseKey=n;const d=wL(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,h={db:dL,realtime:hL,auth:Object.assign(Object.assign({},fL),{storageKey:f}),global:uL},m=xL(r??{},h);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=vL(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new OI(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new oL(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new vI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return k6(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:l,flowType:d,lock:f,debug:h},m,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A6({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),m),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:d,lock:f,debug:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new HI(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const P6=(e,t,n)=>new T6(e,t,n);function M6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}M6()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const AA="Supabase client is not available in this offline build. Install @supabase/supabase-js in production.",kA=()=>{const e=Promise.reject(new Error(AA));return new Proxy({},{get(t,n){return n==="then"||n==="catch"||n==="finally"?e[n].bind(e):()=>kA()}})},R6=()=>{const e=kA(),t=async()=>{throw new Error(AA)};return{from(){return e},functions:{invoke:t},auth:{signInWithPassword:t,signOut:t,getSession:t}}},D6=e=>{try{const t=new URL(e),n=t.pathname.replace(/\/+$/,"");if(n&&n!=="/"){const r=n===""?"/":n;throw new Error(`VITE_SUPABASE_URL must point to the project root (e.g. https://xxxx.supabase.co). Remove the path "${r}" to avoid cross-origin errors.`)}return t.origin}catch(t){const n=t instanceof Error?` ${t.message}`:"";throw new Error(`Invalid VITE_SUPABASE_URL provided.${n}`.trim())}},I6=()=>R6();let t0;try{{const r=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(Boolean);throw new Error(`Missing Supabase environment variables: ${r.join(", ")}`)}const n=D6(void 0);t0=P6(n,void 0,{auth:{persistSession:!1}})}catch(e){const t=e instanceof Error?e.message:"Unknown error while creating the Supabase client.";console.warn("Supabase client disabled. Falling back to the offline stub. Operations depending on Supabase will fail until the environment is configured.",t),t0=I6()}const ye=t0,L6={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},$6=L6,z6="https://api.cloudinary.com/v1_1",U6="cloudinary.com",q6=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"),gb=e=>q6(e).toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,""),TA=()=>Math.random().toString(36).slice(2,10),Jc=(e,t)=>e&&gb(e)||t,Wr=e=>{const t=$6[e];if(typeof t!="string")return;const n=t.trim();return n.length>0?n:void 0},f2=(e,t)=>{const n=Wr(e);if(!n)throw new Error(`Configuration Cloudinary manquante: définissez la variable d'environnement ${e} pour ${t}.`);return n},vb=async(e,{folder:t,uploadPreset:n,publicId:r,tags:i})=>{var g;const s=f2("VITE_CLOUDINARY_CLOUD_NAME","les téléversements de médias"),l=n??f2("VITE_CLOUDINARY_UPLOAD_PRESET","les téléversements de médias"),d=l,f=new FormData;f.append("file",e),f.append("upload_preset",l),t&&f.append("folder",t),r&&f.append("public_id",r),i!=null&&i.length&&f.append("tags",i.join(","));const h=await fetch(`${z6}/${s}/auto/upload`,{method:"POST",body:f}),m=await h.json();if(!h.ok||m.error){const v=(g=m.error)==null?void 0:g.message;throw v&&/upload preset/i.test(v)?new Error(`Le preset Cloudinary "${d}" est introuvable ou ne permet pas les téléversements non signés. Vérifiez sa configuration dans votre console Cloudinary (Settings → Upload → Upload presets).`):new Error(v??`Échec du téléversement Cloudinary (statut ${h.status}).`)}if(!m.secure_url&&!m.url)throw new Error("Cloudinary n'a pas renvoyé d'URL sécurisée pour le fichier téléversé.");return m.secure_url??m.url},Ya=e=>{const t=e==null?void 0:e.trim();if(!t)return null;try{const n=new URL(t);return n.protocol!=="https:"||!n.hostname.endsWith(U6)?null:t}catch{return null}},B6=Wr("VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE")??"",h2=B6,PA=e=>{const t=Ya(e);return t||h2||""},F6=async(e,t)=>{const n=Wr("VITE_CLOUDINARY_PRODUCTS_FOLDER")??"products",r=Wr("VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS")??Wr("VITE_CLOUDINARY_UPLOAD_PRESET"),i=t?gb(t):void 0,s=i?`${i}-${TA()}`:void 0;return vb(e,{folder:Jc(n,"products"),uploadPreset:r,publicId:s,tags:["product"]})},H6=()=>Jc(Wr("VITE_CLOUDINARY_CUSTOM_FOLDER")??"Custom","Custom"),lu=async(e,t)=>{const n=H6(),r=Wr("VITE_CLOUDINARY_UPLOAD_PRESET_CUSTOM")??Wr("VITE_CLOUDINARY_UPLOAD_PRESET"),i=(t==null?void 0:t.publicId)??(e instanceof File&&e.name?gb(e.name.replace(/\.[^/.]+$/,"")):void 0),s=i?`${i}-${TA()}`:void 0,l=Array.from(new Set(["customization","custom-folder",...(t==null?void 0:t.tags)??[]]));return vb(e,{folder:n,uploadPreset:r,publicId:s,tags:l})},MA=async(e,t)=>{const n=Wr("VITE_CLOUDINARY_RECEIPTS_FOLDER")??"receipts",r=Wr("VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS")??Wr("VITE_CLOUDINARY_UPLOAD_PRESET"),i=[Jc(n,"receipts")];return t!=null&&t.orderId?i.push(`order-${Jc(t.orderId,"commande")}`):t!=null&&t.customerReference&&i.push(`customer-${Jc(t.customerReference,"client")}`),vb(e,{folder:i.join("/"),uploadPreset:r,tags:["payment","receipt"]})},RA="ouiouipos:role-logins",DA=()=>{if(typeof window>"u"||!window.localStorage)throw new Error("Local storage is not available for role login tracking.");return window.localStorage},K6=e=>{if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>{if(!n||typeof n!="object")return null;const{roleId:r,roleName:i,loginAt:s}=n;if(typeof r!="string"||typeof i!="string"||typeof s!="string")return null;const l=Date.parse(s);return Number.isNaN(l)?null:{roleId:r,roleName:i,loginAt:new Date(l).toISOString()}}).filter(n=>!!n).sort((n,r)=>Date.parse(n.loginAt)-Date.parse(r.loginAt)):[]}catch(t){return console.warn("Unable to parse stored role logins, clearing history.",t),[]}},yb=()=>{const t=DA().getItem(RA);return K6(t)},IA=e=>{DA().setItem(RA,JSON.stringify(e.slice(-500)))},m2=async(e,t,n)=>{const r=n??new Date().toISOString(),i={roleId:e,roleName:t,loginAt:r};try{const s=yb();s.push(i),IA(s)}catch(s){console.warn("Unable to persist role login locally.",s)}return i},p2=async e=>{const t=Date.parse(e);if(Number.isNaN(t))throw new Error("Invalid start date provided when fetching role logins.");return yb().filter(r=>Date.parse(r.loginAt)>=t)},g2=e=>{try{const t=Date.parse(e);if(Number.isNaN(t))return;const n=yb().filter(r=>Date.parse(r.loginAt)>=t);IA(n)}catch(t){console.warn("Unable to prune stored role logins.",t)}};/**
`),jb=e=>{if(!e)return null;const t=jz(e.html??""),n=x2(e.plainText??""),r=x2(Sz(t)),i=n.trim().length>0?n:r;return t.trim().length===0&&i.trim().length===0?null:{html:t,plainText:i}},Nz={review1:{name:"Laura Méndez",handle:"@laurita.eats",timeAgo:"hace 2 días",message:"No puedo con la originalidad de estos tacos al pastor: cada mordisco tiene un giro gourmet brutal. La salsa cheddar queda cremosa sin empalagar y el toque crujiente lo es todo.",highlight:"Story « Taco Tuesday »",highlightCaption:"Guardado en Destacadas",location:"Bogotá · Servicio nocturno",badgeLabel:"Instagram",postImageAlt:"Assiette de tacos colorés garnis d'herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=640&q=80"},review2:{name:"Camila Torres",handle:"@camigoesout",timeAgo:"hace 5 días",message:"Estas arepas son lo más: combinan ingredientes súper frescos con un toque gourmet creativo. La mezcla dulce-salado y esa salsa cheddar para remojar me tuvieron feliz todo el brunch.",highlight:"Reel « Brunch entre amigas »",highlightCaption:"Comentarios llenos de antojos",location:"Medellín · Brunch de domingo",badgeLabel:"Instagram",postImageAlt:"Gros plan sur des arepas dorées et une sauce maison.",avatarUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=640&q=80"},review3:{name:"Sebastián Ruiz",handle:"@ruizhungry",timeAgo:"hace 1 semana",message:"Armamos un afterwork aquí y fue un hit: combos originales, porciones generosas y un crunch brutal en cada bocado. La salsa cheddar se volvió tema de conversación.",highlight:"Post « Team Afterwork »",highlightCaption:"Reacciones de la oficina",location:"Barranquilla · Terraza privada",badgeLabel:"Instagram",postImageAlt:"Table conviviale avec plusieurs plats mexicains et des boissons fraîches.",avatarUrl:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=640&q=80"},review4:{name:"Valentina Ríos",handle:"@valen.foodnotes",timeAgo:"hace 2 semanas",message:"El menú tiene un mood gourmet sin perder lo reconfortante: masa crocante, cheddar fundido y combinaciones de ingredientes que se sienten pensadas con cariño. Increíble experiencia.",highlight:"Carousel « Night Out »",highlightCaption:"Comentarios fijados",location:"Cali · Cena casual",badgeLabel:"Instagram",postImageAlt:"Pizza gourmande avec fromage coulant et herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=640&q=80"},review5:{name:"Alejandro Pérez",handle:"@alexlovesfood",timeAgo:"hace 3 semanas",message:"Vine por curiosidad y me quedé por la originalidad del menú: el cheddar baña la burger justo como me gusta y el pan crujiente aguanta toda la salsa. Asociaciones de sabores top.",highlight:"Live « Burger Night »",highlightCaption:"Chat lleno de elogios",location:"Bogotá · Servicio takeout",badgeLabel:"Instagram",postImageAlt:"Burger gourmet avec sauce et frites croustillantes.",avatarUrl:"https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=640&q=80"},review6:{name:"Juliana Gómez",handle:"@julie.foodstories",timeAgo:"hace 1 mes",message:"Pedimos catering para un cumpleaños y fue éxito total: tacos mini, dips calientes y una mesa que se veía divina para fotos. Todo llegó puntual y con instrucciones claras.",highlight:"Story « Fiesta privada »",highlightCaption:"Reseñas con confeti",location:"Cartagena · Evento privado",badgeLabel:"Instagram",postImageAlt:"Buffet coloré avec tacos, dips et accompagnements.",avatarUrl:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=640&q=80"},review7:{name:"Manuela Herrera",handle:"@manuelatryit",timeAgo:"hace 6 semanas",message:"Amo que tengan opciones veggies sin perder el toque cheddar: las quesadillas con hongos y maíz dulce son mi nueva obsesión. Además, la atención es rapidísima.",highlight:"Reel « Veggie Lovers »",highlightCaption:"Comentarios verdes y felices",location:"Bogotá · Servicio para llevar",badgeLabel:"Instagram",postImageAlt:"Quesadillas dorées servies avec salsa verde.",avatarUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=640&q=80"}},He=e=>e.trim(),Sb=e=>typeof e=="string"&&e.trim().length>0,ek=(e,t)=>Sb(e)?e.trim():t,tk=(e,t)=>Sb(e)?e.trim():t,eu=(e,t)=>Sb(e)?e.trim():t,Ke=(e,t)=>{if(typeof e!="string")return t;const n=e.trim();return n.length>0?n:t},Ez=(e,t)=>typeof e=="boolean"?e:t,oa=(e,t)=>e===void 0?t??null:e===null?null:Ya(e)??t??null,la=e=>Ya(e)??null,Oz=(e,t)=>{const n={};return Vh.forEach(r=>{const i=t[r],s=(e==null?void 0:e[r])??{};n[r]={name:Ke(s==null?void 0:s.name,i.name),handle:Ke(s==null?void 0:s.handle,i.handle),timeAgo:Ke(s==null?void 0:s.timeAgo,i.timeAgo),message:Ke(s==null?void 0:s.message,i.message),highlight:Ke(s==null?void 0:s.highlight,i.highlight),highlightCaption:Ke(s==null?void 0:s.highlightCaption,i.highlightCaption),location:Ke(s==null?void 0:s.location,i.location),badgeLabel:Ke(s==null?void 0:s.badgeLabel,i.badgeLabel),postImageAlt:Ke(s==null?void 0:s.postImageAlt,i.postImageAlt),avatarUrl:oa(s==null?void 0:s.avatarUrl,i.avatarUrl),highlightImageUrl:oa(s==null?void 0:s.highlightImageUrl,i.highlightImageUrl),postImageUrl:oa(s==null?void 0:s.postImageUrl,i.postImageUrl)}}),n},Cz=e=>{const t={};return Vh.forEach(n=>{const r=(e==null?void 0:e[n])??{};t[n]={name:He((r==null?void 0:r.name)??""),handle:He((r==null?void 0:r.handle)??""),timeAgo:He((r==null?void 0:r.timeAgo)??""),message:He((r==null?void 0:r.message)??""),highlight:He((r==null?void 0:r.highlight)??""),highlightCaption:He((r==null?void 0:r.highlightCaption)??""),location:He((r==null?void 0:r.location)??""),badgeLabel:He((r==null?void 0:r.badgeLabel)??""),postImageAlt:He((r==null?void 0:r.postImageAlt)??""),avatarUrl:la(r==null?void 0:r.avatarUrl),highlightImageUrl:la(r==null?void 0:r.highlightImageUrl),postImageUrl:la(r==null?void 0:r.postImageUrl)}}),t},ff=e=>{if(typeof e!="string")return;const t=e.trim();return t.length>0?t:void 0},nk=e=>{if(!e)return null;const t=ff(e.textColor??null),n=ff(e.fontFamily??null),r=ff(e.fontSize??null),i=ff(e.backgroundColor??null),s={};return t&&(s.textColor=t),n&&(s.fontFamily=n),r&&(s.fontSize=r),i&&(s.backgroundColor=i),Object.keys(s).length>0?s:null},Az=(e,t)=>{const n=e??t,r={};return Cu.forEach(i=>{const s=nk(n[i]??null);s&&(r[i]=s)}),r},kz=(e,t)=>{const n=e??t,r={};return Cu.forEach(i=>{const s=nk(n[i]??null);s&&(r[i]=s)}),r},Tz=(e,t)=>{const n=e??t,r={};return Cu.forEach(i=>{const s=n[i],l=jb(s??null);l&&(r[i]=l)}),r},Pz=(e,t)=>{const n=e??t,r={};return Cu.forEach(i=>{const s=n[i],l=jb(s??null);l&&(r[i]=l)}),r},Mz=["image","video","audio","font","raw"],Rz=()=>`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Dz=e=>Mz.includes(e)?e:"raw",Iz=e=>{if(typeof e=="string"){const t=Date.parse(e);if(!Number.isNaN(t))return new Date(t).toISOString()}return new Date().toISOString()},Lz=e=>{const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<0?0:Math.round(t)},rk=e=>{if(!e)return null;const t=Ya(e.url??void 0);if(!t)return null;const n=typeof e.id=="string"&&e.id.trim().length>0?e.id.trim():Rz(),r=typeof e.name=="string"&&e.name.trim().length>0?e.name.trim():n,i=typeof e.format=="string"&&e.format.trim().length>0?e.format.trim():"application/octet-stream",s=Dz(e.type),l=Lz(e.bytes),d=Iz(e.createdAt);return{id:n,name:r,url:t,format:i,bytes:l,type:s,createdAt:d}},$z=(e,t)=>e?{library:Array.isArray(e.library)?e.library.map(r=>rk(r)).filter(Boolean):t.library}:t,zz=(e,t)=>{const n=e??t;return{library:Array.isArray(n.library)?n.library.map(i=>rk(i)).filter(Boolean):t.library}},ak={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#f1f5f9"},ik={background:{type:"image",color:"#0f172a",image:"https://picsum.photos/seed/tacosbg/1920/1080"},fontFamily:"Inter",fontSize:"18px",textColor:"#f8fafc"},sk={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},ok={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},lk={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},ck={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},uk={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"14px",textColor:"#e2e8f0"},Nb={library:[]},dk={},fk={},ys=(e,t)=>{var s,l,d,f;const n=((s=e==null?void 0:e.background)==null?void 0:s.type)==="image"?"image":"color",r=eu((l=e==null?void 0:e.background)==null?void 0:l.color,t.background.color),i=n==="image"?oa(((d=e==null?void 0:e.background)==null?void 0:d.image)??void 0,t.background.image):null;return{background:{type:n,color:n==="color"?r:eu((f=e==null?void 0:e.background)==null?void 0:f.color,t.background.color),image:n==="image"?i:null},fontFamily:ek((e==null?void 0:e.fontFamily)??null,t.fontFamily),fontSize:tk((e==null?void 0:e.fontSize)??null,t.fontSize),textColor:eu((e==null?void 0:e.textColor)??null,t.textColor)}},bs=(e,t)=>{var s,l,d;const n=((s=e==null?void 0:e.background)==null?void 0:s.type)==="image"?"image":"color",r=eu(((l=e==null?void 0:e.background)==null?void 0:l.color)??null,t.background.color),i=n==="image"?la(((d=e==null?void 0:e.background)==null?void 0:d.image)??null):null;return{background:{type:n,color:r,image:n==="image"?i:null},fontFamily:ek((e==null?void 0:e.fontFamily)??null,t.fontFamily),fontSize:tk((e==null?void 0:e.fontSize)??null,t.fontSize),textColor:eu((e==null?void 0:e.textColor)??null,t.textColor)}},uu={navigation:{brand:"OUIOUITACOS",brandLogo:"/logo-brand.svg",staffLogo:"/logo-staff.svg",links:{home:"Accueil",about:"À propos",menu:"Menu",contact:"Contact",loginCta:"Staff Login"},style:ak},hero:{title:"Le Goût Authentique du Mexique",subtitle:"Des tacos préparés avec passion, des ingrédients frais et une touche de tradition pour un voyage gustatif inoubliable.",ctaLabel:"Commander en ligne",backgroundImage:"https://picsum.photos/seed/tacosbg/1920/1080",historyTitle:"Vos dernières commandes",reorderCtaLabel:"Commander à nouveau",style:ik},about:{title:"Notre Histoire",description:"Fondé par des passionnés de la cuisine mexicaine, OUIOUITACOS est né d'un désir simple : partager le goût authentique des tacos faits maison. Chaque recette est un héritage familial, chaque ingrédient est choisi avec soin, et chaque plat est préparé avec le cœur. Venez découvrir une explosion de saveurs qui vous transportera directement dans les rues de Mexico.",image:null,style:sk},menu:{title:"Nos Best-sellers",ctaLabel:"Voir le menu complet & Commander",loadingLabel:"Chargement du menu...",image:null,style:ok},instagramReviews:{title:"Ils nous adorent sur Instagram",subtitle:"Des foodies de toute la Colombie partagent leur coup de cœur pour notre cuisine : ambiance solaire, service attentionné et assiettes qui brillent autant que leurs stories.",image:"https://picsum.photos/seed/instagramreviews/600/600",style:lk,reviews:Vh.reduce((e,t)=>(e[t]={...Nz[t]},e),{})},findUs:{title:"Encuéntranos",addressLabel:"Dirección",address:`Cra. 53 #75-98
Colombie`,cityLabel:"Email",city:"hola@ouiouipos.co",hoursLabel:"Horarios",hours:"Lunes a domingo · 11h00 - 23h00",mapLabel:"Ver en Google Maps",mapUrl:"https://www.google.com/maps?q=OUIOUITACOS%2C%20Cra%2053%20%2375-98%2C%20Barranquilla%2C%20Atl%C3%A1ntico%2C%20Colombie",style:ck},footer:{text:"Tous droits réservés.",style:uk},ordering:{onlineEnabled:!0,activeHoursLabel:"Pedidos en línea disponibles todos los días · 11h00 - 23h00",onlineHighlight:"Pedidos en línea activos",offlineTitle:"Volvemos en breve",offlineSubtitle:"Nuestro servicio en línea está fuera de horario. Consulta el menú y prepara tu próximo pedido."},elementStyles:dk,elementRichText:fk,assets:Nb},a0=e=>{var n,r,i,s,l,d,f,h,m,g,v,x,_,j,S,N,O,C,A,T,k,R,L,K,B,F,z,Q,H,X,I,$,U,ee,W,P,M,G,ne,se,he,me,$e,fe,de,we,le,Ve,be,rt,ve,je;const t=uu;return{navigation:{brand:Ke((n=e==null?void 0:e.navigation)==null?void 0:n.brand,t.navigation.brand),brandLogo:oa((r=e==null?void 0:e.navigation)==null?void 0:r.brandLogo,t.navigation.brandLogo),staffLogo:oa((i=e==null?void 0:e.navigation)==null?void 0:i.staffLogo,t.navigation.staffLogo),links:{home:Ke((l=(s=e==null?void 0:e.navigation)==null?void 0:s.links)==null?void 0:l.home,t.navigation.links.home),about:Ke((f=(d=e==null?void 0:e.navigation)==null?void 0:d.links)==null?void 0:f.about,t.navigation.links.about),menu:Ke((m=(h=e==null?void 0:e.navigation)==null?void 0:h.links)==null?void 0:m.menu,t.navigation.links.menu),contact:Ke((v=(g=e==null?void 0:e.navigation)==null?void 0:g.links)==null?void 0:v.contact,t.navigation.links.contact),loginCta:Ke((_=(x=e==null?void 0:e.navigation)==null?void 0:x.links)==null?void 0:_.loginCta,t.navigation.links.loginCta)},style:ys((j=e==null?void 0:e.navigation)==null?void 0:j.style,t.navigation.style)},hero:{title:Ke((S=e==null?void 0:e.hero)==null?void 0:S.title,t.hero.title),subtitle:Ke((N=e==null?void 0:e.hero)==null?void 0:N.subtitle,t.hero.subtitle),ctaLabel:Ke((O=e==null?void 0:e.hero)==null?void 0:O.ctaLabel,t.hero.ctaLabel),backgroundImage:oa((C=e==null?void 0:e.hero)==null?void 0:C.backgroundImage,t.hero.backgroundImage),historyTitle:Ke((A=e==null?void 0:e.hero)==null?void 0:A.historyTitle,t.hero.historyTitle),reorderCtaLabel:Ke((T=e==null?void 0:e.hero)==null?void 0:T.reorderCtaLabel,t.hero.reorderCtaLabel),style:ys((k=e==null?void 0:e.hero)==null?void 0:k.style,t.hero.style)},about:{title:Ke((R=e==null?void 0:e.about)==null?void 0:R.title,t.about.title),description:Ke((L=e==null?void 0:e.about)==null?void 0:L.description,t.about.description),image:oa((K=e==null?void 0:e.about)==null?void 0:K.image,t.about.image),style:ys((B=e==null?void 0:e.about)==null?void 0:B.style,t.about.style)},menu:{title:Ke((F=e==null?void 0:e.menu)==null?void 0:F.title,t.menu.title),ctaLabel:Ke((z=e==null?void 0:e.menu)==null?void 0:z.ctaLabel,t.menu.ctaLabel),loadingLabel:Ke((Q=e==null?void 0:e.menu)==null?void 0:Q.loadingLabel,t.menu.loadingLabel),image:oa((H=e==null?void 0:e.menu)==null?void 0:H.image,t.menu.image),style:ys((X=e==null?void 0:e.menu)==null?void 0:X.style,t.menu.style)},instagramReviews:{title:Ke((I=e==null?void 0:e.instagramReviews)==null?void 0:I.title,t.instagramReviews.title),subtitle:Ke(($=e==null?void 0:e.instagramReviews)==null?void 0:$.subtitle,t.instagramReviews.subtitle),image:oa((U=e==null?void 0:e.instagramReviews)==null?void 0:U.image,t.instagramReviews.image),style:ys((ee=e==null?void 0:e.instagramReviews)==null?void 0:ee.style,t.instagramReviews.style),reviews:Oz(((W=e==null?void 0:e.instagramReviews)==null?void 0:W.reviews)??null,t.instagramReviews.reviews)},findUs:{title:Ke((P=e==null?void 0:e.findUs)==null?void 0:P.title,t.findUs.title),addressLabel:Ke((M=e==null?void 0:e.findUs)==null?void 0:M.addressLabel,t.findUs.addressLabel),address:Ke((G=e==null?void 0:e.findUs)==null?void 0:G.address,t.findUs.address),cityLabel:Ke((ne=e==null?void 0:e.findUs)==null?void 0:ne.cityLabel,t.findUs.cityLabel),city:Ke((se=e==null?void 0:e.findUs)==null?void 0:se.city,t.findUs.city),hoursLabel:Ke((he=e==null?void 0:e.findUs)==null?void 0:he.hoursLabel,t.findUs.hoursLabel),hours:Ke((me=e==null?void 0:e.findUs)==null?void 0:me.hours,t.findUs.hours),mapLabel:Ke(($e=e==null?void 0:e.findUs)==null?void 0:$e.mapLabel,t.findUs.mapLabel),mapUrl:Ke((fe=e==null?void 0:e.findUs)==null?void 0:fe.mapUrl,t.findUs.mapUrl),style:ys((de=e==null?void 0:e.findUs)==null?void 0:de.style,t.findUs.style)},footer:{text:Ke((we=e==null?void 0:e.footer)==null?void 0:we.text,t.footer.text),style:ys((le=e==null?void 0:e.footer)==null?void 0:le.style,t.footer.style)},ordering:{onlineEnabled:Ez((Ve=e==null?void 0:e.ordering)==null?void 0:Ve.onlineEnabled,t.ordering.onlineEnabled),activeHoursLabel:Ke((be=e==null?void 0:e.ordering)==null?void 0:be.activeHoursLabel,t.ordering.activeHoursLabel),onlineHighlight:Ke((rt=e==null?void 0:e.ordering)==null?void 0:rt.onlineHighlight,t.ordering.onlineHighlight),offlineTitle:Ke((ve=e==null?void 0:e.ordering)==null?void 0:ve.offlineTitle,t.ordering.offlineTitle),offlineSubtitle:Ke((je=e==null?void 0:e.ordering)==null?void 0:je.offlineSubtitle,t.ordering.offlineSubtitle)},elementStyles:Az((e==null?void 0:e.elementStyles)??null,t.elementStyles),elementRichText:Tz((e==null?void 0:e.elementRichText)??null,t.elementRichText),assets:$z((e==null?void 0:e.assets)??null,Nb)}},Uz=e=>({navigation:{brand:He(e.navigation.brand),brandLogo:la(e.navigation.brandLogo)??null,staffLogo:la(e.navigation.staffLogo)??null,links:{home:He(e.navigation.links.home),about:He(e.navigation.links.about),menu:He(e.navigation.links.menu),contact:He(e.navigation.links.contact),loginCta:He(e.navigation.links.loginCta)},style:bs(e.navigation.style,ak)},hero:{title:He(e.hero.title),subtitle:He(e.hero.subtitle),ctaLabel:He(e.hero.ctaLabel),backgroundImage:la(e.hero.backgroundImage),historyTitle:He(e.hero.historyTitle),reorderCtaLabel:He(e.hero.reorderCtaLabel),style:bs(e.hero.style,ik)},about:{title:He(e.about.title),description:He(e.about.description),image:la(e.about.image),style:bs(e.about.style,sk)},menu:{title:He(e.menu.title),ctaLabel:He(e.menu.ctaLabel),loadingLabel:He(e.menu.loadingLabel),image:la(e.menu.image),style:bs(e.menu.style,ok)},instagramReviews:{title:He(e.instagramReviews.title),subtitle:He(e.instagramReviews.subtitle),image:la(e.instagramReviews.image),style:bs(e.instagramReviews.style,lk),reviews:Cz(e.instagramReviews.reviews??null)},findUs:{title:He(e.findUs.title),addressLabel:He(e.findUs.addressLabel),address:He(e.findUs.address),cityLabel:He(e.findUs.cityLabel),city:He(e.findUs.city),hoursLabel:He(e.findUs.hoursLabel),hours:He(e.findUs.hours),mapLabel:He(e.findUs.mapLabel),mapUrl:He(e.findUs.mapUrl),style:bs(e.findUs.style,ck)},footer:{text:He(e.footer.text),style:bs(e.footer.style,uk)},ordering:{onlineEnabled:!!e.ordering.onlineEnabled,activeHoursLabel:He(e.ordering.activeHoursLabel),onlineHighlight:He(e.ordering.onlineHighlight),offlineTitle:He(e.ordering.offlineTitle),offlineSubtitle:He(e.ordering.offlineSubtitle)},elementStyles:kz(e.elementStyles,dk),elementRichText:Pz(e.elementRichText,fk),assets:zz(e.assets,Nb)}),Ii={},Ff=e=>{Ii[e]&&Ii[e].forEach(t=>t())};let dl=null;const w2="site_content",qz="default",Bz=()=>{if(!(dl||typeof ye.channel!="function"))try{dl=ye.channel("orders-updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>Ff("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},()=>Ff("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"restaurant_tables"},()=>Ff("orders_updated")).subscribe(e=>{(e==="CHANNEL_ERROR"||e==="CLOSED"||e==="TIMED_OUT")&&(dl=null)})}catch(e){console.warn("Failed to subscribe to real-time order updates",e)}},Ye=e=>{if(e.error)throw new Error(e.error.message);return e.data},Rs=e=>{if(e.error&&e.status!==406)throw new Error(e.error.message);return e.data??null},kr=e=>{if(e)return new Date(e).getTime()},Hr=e=>{if(e==null)return;if(typeof e=="number")return e;const t=Number(e);return Number.isFinite(t)?t:void 0},sl=e=>{if(e!==void 0)return e===null?null:new Date(e).toISOString()},rh=(e,t)=>e.reduce((n,r)=>{const i=t.get(r.ingredient_id);if(!i)return n;let s=i.prix_unitaire;return(i.unite==="kg"||i.unite==="L")&&(s=s/1e3),n+s*r.qte_utilisee},0),Fz=e=>{if(!e)return{permissions:{},homePage:void 0};const{[qs]:t,...n}=e;return{permissions:n,homePage:typeof t=="string"?t:void 0}},_2=(e,t)=>{const n={...e};return t?n[qs]=t:delete n[qs],n},Hz=e=>{if(!e)return!1;const t=e.trim().toLowerCase();return t===QA.ADMIN||t==="administrateur"},Kz=(e,t)=>{const n={...e};return Va in n||(n[Va]=Hz(t)?"editor":"none"),n},Dc=(e,t)=>{const{permissions:n,homePage:r}=Fz(e.permissions),i=Kz(n,e.name),s={id:e.id,name:e.name,homePage:r,permissions:i};return t&&e.pin&&(s.pin=e.pin),s},j2=e=>e!=null&&e.content?a0(e.content):null,Hf=e=>({id:e.id,nom:e.nom,unite:e.unite,stock_minimum:e.stock_minimum,stock_actuel:e.stock_actuel,prix_unitaire:e.prix_unitaire}),i0=e=>({id:e.id,nom:e.nom}),Gz=e=>({ingredient_id:e.ingredient_id,qte_utilisee:e.qte_utilisee}),Ri=(e,t)=>{const n=(e.product_recipes??[]).map(Gz),r={id:e.id,nom_produit:e.nom_produit,description:e.description??void 0,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:PA(e.image),recipe:n,is_best_seller:e.is_best_seller??!1,best_seller_rank:e.best_seller_rank??null};return t&&(r.cout_revient=rh(n,t)),r},Ss=e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),hk=e=>({id:e.id,produitRef:e.produit_id,nom_produit:e.nom_produit,prix_unitaire:Hr(e.prix_unitaire)??0,quantite:e.quantite,excluded_ingredients:e.excluded_ingredients??[],commentaire:e.commentaire??"",estado:e.estado,date_envoi:kr(e.date_envoi)}),Yz=(e,t)=>e.length!==t.length?!1:e.every((n,r)=>n===t[r]),Vz=(e,t)=>{if(e.produitRef!==t.produitRef||e.nom_produit!==t.nom_produit||e.prix_unitaire!==t.prix_unitaire||e.quantite!==t.quantite||e.commentaire!==t.commentaire||e.estado!==t.estado)return!1;const n=[...e.excluded_ingredients].sort(),r=[...t.excluded_ingredients].sort();return Yz(n,r)},Wz=(e,t)=>{const n=[...t],r=[];return e.forEach(i=>{const s=n.findIndex(l=>Vz(l,i));s!==-1&&r.push(n.splice(s,1)[0])}),[...r,...n]},Ia=e=>{const t=(e.order_items??[]).map(hk),n=Hr(e.total),r=Hr(e.profit),i={id:e.id,type:e.type,table_id:e.table_id??void 0,table_nom:e.table_nom??void 0,couverts:e.couverts??0,statut:e.statut,estado_cocina:e.estado_cocina,date_creation:kr(e.date_creation)??Date.now(),date_envoi_cuisine:kr(e.date_envoi_cuisine),date_listo_cuisine:kr(e.date_listo_cuisine),date_servido:kr(e.date_servido),payment_status:e.payment_status,items:t,total:n??0,profit:r,payment_method:e.payment_method??void 0,payment_receipt_url:e.payment_receipt_url??void 0,receipt_url:e.receipt_url??void 0};return(e.client_nom||e.client_telephone||e.client_adresse)&&(i.clientInfo={nom:e.client_nom??"",telephone:e.client_telephone??"",adresse:e.client_adresse??void 0}),i.subtotal=Hr(e.subtotal)??0,i.total_discount=Hr(e.total_discount)??0,i.promo_code=e.promo_code??void 0,i.applied_promotions=e.applied_promotions?typeof e.applied_promotions=="string"?JSON.parse(e.applied_promotions):e.applied_promotions:[],i},s0=e=>{const t=e.items.map(_=>Math.max(0,_.prix_unitaire)*Math.max(0,_.quantite)),n=t.reduce((_,j)=>_+j,0),r=Math.max(e.subtotal??0,0),i=n>0?n:r,s=Math.max(e.total_discount??0,0),l=i>0?Math.min(s,i):0,d=t.map(_=>{if(i<=0||_<=0||l<=0)return 0;const j=_/i*l;return Math.min(_,j)}),f=d.reduce((_,j)=>_+j,0),h=l-f;if(Math.abs(h)>1e-6&&d.length>0){const _=d.length-1,j=t[_],S=Math.min(j,Math.max(0,d[_]+h));d[_]=S}const m=d.map((_,j)=>{const S=t[j]-_;return S>0?S:0}),g=m.reduce((_,j)=>_+j,0),v=typeof e.shipping_cost=="number"?e.shipping_cost:0,x=e.total??Math.max(g+v,0);return{grossPerItem:t,discountPerItem:d,netPerItem:m,subtotalBeforeDiscount:i,totalDiscount:l,netRevenueFromItems:g,totalRevenue:x}},Xz=e=>({id:e.id,orderId:e.order_id,productId:e.product_id,productName:e.product_name,categoryId:e.category_id,categoryName:e.category_name,quantity:e.quantity,unitPrice:e.unit_price,totalPrice:e.total_price,unitCost:e.unit_cost,totalCost:e.total_cost,profit:e.profit,paymentMethod:e.payment_method??void 0,saleDate:kr(e.sale_date)??Date.now()}),Qz=(e,t)=>{if(!e.commande_id)return"libre";const n=t==null?void 0:t.estado_cocina;return!n||n==="no_enviado"?"libre":n==="listo"?"para_entregar":n==="servido"||n==="entregada"?"para_pagar":e.statut==="para_entregar"||e.statut==="para_pagar"?e.statut:"en_cuisine"},o0=(e,t)=>{const n=e.commande_id?t.get(e.commande_id):void 0,r={id:e.id,nom:e.nom,capacite:e.capacite,statut:Qz(e,n),commandeId:e.commande_id??void 0,couverts:e.commande_id?e.couverts??void 0:void 0};return r.commandeId&&n&&(r.estado_cocina=n.estado_cocina,r.date_envoi_cuisine=n.date_envoi_cuisine),r},S2=async e=>{if(!e.commande_id)return o0(e,new Map);const t=await ye.from("orders").select("id, estado_cocina, date_envoi_cuisine").eq("id",e.commande_id).maybeSingle(),n=Rs(t),r=n?new Map([[n.id,{estado_cocina:n.estado_cocina,date_envoi_cuisine:kr(n.date_envoi_cuisine)}]]):new Map;return o0(e,r)},Di=()=>ye.from("orders").select(`
      `,N2=e=>{const t=(e==null?void 0:e.includeBestSellerColumns)!==!1,n=(e==null?void 0:e.includeRecipes)!==!1;let r=ye.from("products").select(Jz(t,n));return e!=null&&e.orderBy?r=r.order(e.orderBy.column,{ascending:e.orderBy.ascending??!0,nullsFirst:e.orderBy.nullsFirst}):r=r.order("nom_produit"),r},Zz=e=>{if(!(e!=null&&e.message))return!1;const t=e.message.toLowerCase();return t.includes("does not exist")&&t.includes("column")&&(t.includes("is_best_seller")||t.includes("best_seller_rank"))},Ds=async(e,t)=>{let r=await e(N2({...t,includeBestSellerColumns:!0}),!0);return Zz(r.error)&&(r=await e(N2({...t,includeBestSellerColumns:!1}),!1)),r},eU=e=>e==="sur_place"||e==="a_emporter"||e==="pedir_en_linea"?e:"a_emporter",tU=e=>e==="en_cours"||e==="finalisee"||e==="pendiente_validacion"?e:"pendiente_validacion",nU=e=>e==="paid"||e==="unpaid"?e:"unpaid",rU=e=>{if(!e)return null;const t=e.trim().toLowerCase();return t==="tarjeta"||t==="card"||t==="credit_card"||t==="debit_card"||t==="carte"||t==="carte_bancaire"||t==="pago_online"||t==="online"?"tarjeta":t==="efectivo"||t==="cash"||t==="liquide"||t==="contado"?"efectivo":t==="transferencia"||t==="transfer"||t==="bank_transfer"||t==="transfert"?"transferencia":null},Wt=async e=>{const t=await Di().eq("id",e).maybeSingle(),n=Rs(t);return n?Ia(n):null},ol=async()=>{const e=await ye.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").order("nom");return Ye(e).map(Hf)},aU=e=>e?typeof e=="string"?e.toLowerCase().includes("permission"):e instanceof Error?e.message.toLowerCase().includes("permission"):typeof e=="object"&&"message"in e?String(e.message??"").toLowerCase().includes("permission"):!1:!1,rv=async e=>{try{return await ol()}catch(t){if(aU(t))return console.warn(`[api.${e}] Impossible de récupérer les ingrédients (permissions insuffisantes). Poursuite avec une liste vide.`,t),[];throw t}},Kf=async()=>{const e=await ye.from("categories").select("id, nom").order("nom");return Ye(e).map(i0)},E2=async()=>{const e=await ye.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").order("nom"),t=Ye(e),n=t.map(i=>i.commande_id).filter(i=>!!i);let r=new Map;if(n.length>0){const i=await ye.from("orders").select("id, estado_cocina, date_envoi_cuisine").in("id",n),s=Ye(i);r=new Map(s.map(l=>[l.id,{estado_cocina:l.estado_cocina,date_envoi_cuisine:kr(l.date_envoi_cuisine)}]))}return t.map(i=>o0(i,r))},tu=(e=new Date)=>{const t=new Date(e);return t.setHours(5,0,0,0),e<t&&t.setDate(t.getDate()-1),t},iU={week:{days:7,label:"7 derniers jours"},month:{days:30,label:"30 derniers jours"}},sU=e=>{const t=iU[e],n=new Date(tu());n.setDate(n.getDate()+1);const r=new Date(n);return r.setDate(r.getDate()-t.days),{config:t,start:r,end:n}},O2=async e=>{if(!e.items.length)return await ye.from("sales").delete().eq("order_id",e.id),await ye.from("orders").update({profit:0}).eq("id",e.id),0;const t=Array.from(new Set(e.items.map(_=>_.produitRef))),n=t.length>0?Ds(_=>_.in("id",t)):Ds(_=>_.limit(0)),[r,i,s]=await Promise.all([Kf(),ol(),n]),l=new Map(i.map(_=>[_.id,_])),d=new Map(r.map(_=>[_.id,_.nom]));let f=[];t.length>0&&(f=Ye(s));const h=new Map(f.map(_=>{const j=Ri(_,l);return[j.id,j]})),m=sl(e.date_servido)??new Date().toISOString(),g=s0(e),v=e.items.map((_,j)=>({item:_,index:j})).filter(({item:_})=>Ss(_.produitRef)).map(({item:_,index:j})=>{const S=h.get(_.produitRef),N=S?rh(S.recipe,l):0,O=(S==null?void 0:S.categoria_id)??"unknown",C=S?d.get(O)??"Sans catégorie":"Sans catégorie",A=g.netPerItem[j]??_.prix_unitaire*_.quantite,T=_.quantite>0?A/_.quantite:0,k=N*_.quantite,R=A-k;return{order_id:e.id,product_id:_.produitRef,product_name:_.nom_produit,category_id:O,category_name:C,quantity:_.quantite,unit_price:T,total_price:A,unit_cost:N,total_cost:k,profit:R,payment_method:e.payment_method??null,sale_date:m}}),x=v.reduce((_,j)=>_+j.profit,0);return await ye.from("sales").delete().eq("order_id",e.id),await ye.from("sales").insert(v),await ye.from("orders").update({profit:x}).eq("id",e.id),x},sa={subscribe:(e,t)=>(Ii[e]||(Ii[e]=[]),Ii[e].push(t),e==="orders_updated"&&Bz(),()=>{var n;Ii[e]=(Ii[e]??[]).filter(r=>r!==t),e==="orders_updated"&&((n=Ii[e])==null?void 0:n.length)===0&&dl&&(typeof ye.removeChannel=="function"&&ye.removeChannel(dl),dl=null)}),publish:e=>{Ff(e)}},Dt=e=>{(e==null?void 0:e.includeNotifications)!==!1&&sa.publish("notifications_updated"),sa.publish("orders_updated")},Ne={notifications:sa,getSiteContent:async()=>{const e=await ye.from(w2).select("id, content, updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle(),t=Rs(e);return j2(t)},updateSiteContent:async e=>{const t=Uz(e),n=await ye.from(w2).upsert({id:qz,content:t},{onConflict:"id"}).select("id, content, updated_at").single(),r=Ye(n),i=j2(r);if(!i)throw new Error("Contenu du site introuvable après la mise à jour.");return i},getRoles:async()=>{const e=await ye.from("roles").select("id, name, pin, permissions").order("name");return Ye(e).map(n=>Dc(n,!0))},getRoleById:async e=>{const t=await ye.from("roles").select("id, name, permissions").eq("id",e).maybeSingle(),n=Rs(t);return n?Dc(n,!1):null},createRole:async e=>{const t=await ye.from("roles").insert({name:e.name,pin:e.pin,permissions:_2(e.permissions,e.homePage)}).select("id, name, pin, permissions").single(),n=Ye(t);return sa.publish("notifications_updated"),Dc(n,!0)},updateRole:async(e,t)=>{const n=await ye.from("roles").update({name:t.name,pin:t.pin,permissions:_2(t.permissions,t.homePage)}).eq("id",e).select("id, name, pin, permissions").single(),r=Ye(n);return sa.publish("notifications_updated"),Dc(r,!0)},deleteRole:async e=>{const t=await ye.from("roles").delete().eq("id",e);Ye(t),sa.publish("notifications_updated")},loginWithPin:async e=>{const t=await ye.from("roles").select("id, name, permissions").eq("pin",e).maybeSingle(),n=Rs(t);if(!n)return null;const r=Dc(n,!1);try{await m2(r.id,r.name)}catch(i){console.warn("Failed to enregistrer la connexion du rôle",i)}return r},getDashboardStats:async(e="week")=>{var rt;const{config:t,start:n,end:r}=sU(e),i=n.toISOString(),s=r.toISOString(),l=new Date(n);l.setDate(l.getDate()-t.days);const d=l.toISOString(),h=tu().toISOString(),[m,g,v,x,_,j]=await Promise.all([E2(),ol(),Kf(),Ds(ve=>ve),Di().eq("statut","finalisee").gte("date_creation",h),Di().eq("statut","finalisee").gte("date_creation",d).lt("date_creation",s)]),N=Ye(_).map(Ia),C=Ye(j).map(Ia),A=C.filter(ve=>ve.date_creation>=n.getTime()),T=C.filter(ve=>ve.date_creation<n.getTime()),k=new Map(g.map(ve=>[ve.id,ve])),R=Ye(x),L=new Map(R.map(ve=>{const je=Ri(ve,k);return[je.id,je]})),K=new Map(v.map(ve=>[ve.id,ve.nom])),B=new Map,F=ve=>{const je=B.get(ve.id);if(je)return je;const ze=s0(ve);return B.set(ve.id,ze),ze},z=ve=>ve.reduce((je,ze)=>{const At=F(ze);return je+ze.items.reduce((yt,bt,_t)=>{const Dn=L.get(bt.produitRef),Nt=Dn?rh(Dn.recipe,k):0,Wn=At.netPerItem[_t]??bt.prix_unitaire*bt.quantite;return yt+(Wn-Nt*bt.quantite)},0)},0),Q=sl((rt=N[0])==null?void 0:rt.date_servido)??new Date().toISOString(),H=N.flatMap(ve=>{const je=F(ve);return ve.items.map((ze,At)=>{const yt=L.get(ze.produitRef),bt=yt?rh(yt.recipe,k):0,_t=(yt==null?void 0:yt.categoria_id)??"unknown",Dn=yt?K.get(_t)??"Sans catégorie":"Sans catégorie",Nt=je.netPerItem[At]??ze.prix_unitaire*ze.quantite,Wn=ze.quantite>0?Nt/ze.quantite:0,In=bt*ze.quantite,Lr=Nt-In;return{order_id:ve.id,product_id:ze.produitRef,product_name:ze.nom_produit,category_id:_t,category_name:Dn,quantity:ze.quantite,unit_price:Wn,total_price:Nt,unit_cost:bt,total_cost:In,profit:Lr,payment_method:ve.payment_method??null,sale_date:Q}})}),X=N.reduce((ve,je)=>ve+F(je).totalRevenue,0);H.reduce((ve,je)=>ve+je.profit,0),N.reduce((ve,je)=>ve+(je.couverts??0),0),N.length>0&&X/N.length;const I=A.reduce((ve,je)=>ve+F(je).totalRevenue,0),$=T.reduce((ve,je)=>ve+F(je).totalRevenue,0),U=z(A),ee=z(T),W=A.reduce((ve,je)=>ve+(je.couverts??0),0),P=T.reduce((ve,je)=>ve+(je.couverts??0),0),M=A.length>0?I/A.length:0,G=A.length,ne=T.length,se=new Map;A.forEach(ve=>{const je=F(ve);ve.items.forEach((ze,At)=>{const yt=L.get(ze.produitRef),bt=yt?K.get(yt.categoria_id)??"Sans catégorie":"Sans catégorie",_t=je.netPerItem[At]??ze.prix_unitaire*ze.quantite;se.set(bt,(se.get(bt)??0)+_t)})});const he=Array.from(se.entries()).map(([ve,je])=>({name:ve,value:je})),me=[...A].sort((ve,je)=>je.date_creation-ve.date_creation).slice(0,5),$e=Array.from(L.values()).filter(ve=>ve.is_best_seller).sort((ve,je)=>{const ze=ve.best_seller_rank??Number.POSITIVE_INFINITY,At=je.best_seller_rank??Number.POSITIVE_INFINITY;return ze===At?ve.nom_produit.localeCompare(je.nom_produit):ze-At}).slice(0,6),fe=m.filter(ve=>ve.statut!=="libre").length,de=m.reduce((ve,je)=>ve+(je.couverts??0),0),we=N.filter(ve=>ve.estado_cocina==="recibido").length,le=g.filter(ve=>ve.stock_actuel<=ve.stock_minimum),Ve=(ve,je,ze)=>{const At=je.getTime(),yt=ze.getTime();return ve.reduce((bt,_t)=>_t.date_creation>=At&&_t.date_creation<yt?bt+F(_t).totalRevenue:bt,0)},be=Array.from({length:t.days}).map((ve,je)=>{const ze=new Date(n);ze.setDate(ze.getDate()+je);const At=new Date(ze);At.setDate(At.getDate()+1);const yt=new Date(l);yt.setDate(yt.getDate()+je);const bt=new Date(yt);return bt.setDate(bt.getDate()+1),{name:t.days===7?je===t.days-1?"Auj":`J-${t.days-1-je}`:ze.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),ventes:Ve(A,ze,At),ventesPeriodePrecedente:Ve(T,yt,bt)}});return{period:e,periodLabel:t.label,periodStart:i,periodEnd:s,ventesPeriode:I,ventesPeriodePrecedente:$,beneficePeriode:U,beneficePeriodePrecedente:ee,clientsPeriode:W,clientsPeriodePrecedente:P,panierMoyen:M,commandesPeriode:G,commandesPeriodePrecedente:ne,tablesOccupees:fe,clientsActuels:de,commandesEnCuisine:we,ingredientsStockBas:le,ventesPeriodeSeries:be,ventesParCategorie:he,recentOrders:me,bestSellerProducts:$e}},getSalesByProduct:async e=>{const t=h=>{if(h)return typeof h=="string"?h:h.toISOString()},n=t(e==null?void 0:e.start)??tu().toISOString(),r=t(e==null?void 0:e.end);let i=ye.from("sales").select("product_id, product_name, total_price").gte("sale_date",n);r&&(i=i.lt("sale_date",r));const s=await i,l=Ye(s),d=new Map;l.forEach(h=>{const m=d.get(h.product_id)??{name:h.product_name,value:0};m.value+=h.total_price,d.set(h.product_id,m)});const f=Array.from(d.values()).sort((h,m)=>m.value-h.value);if(f.length>6){const h=f.slice(0,6),m=f.slice(6).reduce((g,v)=>g+v.value,0);return[...h,{name:"Autres",value:m}]}return f},getTables:async()=>E2(),createTable:async e=>{const t=await ye.from("restaurant_tables").insert({nom:e.nom,capacite:e.capacite,couverts:e.couverts??null}).select("id, nom, capacite, statut, commande_id, couverts").single(),n=Ye(t);return Dt(),S2(n)},updateTable:async(e,t)=>{const n={};t.nom!==void 0&&(n.nom=t.nom),t.capacite!==void 0&&(n.capacite=t.capacite),t.couverts!==void 0&&(n.couverts=t.couverts??null);const r=await ye.from("restaurant_tables").update(n).eq("id",e).select("id, nom, capacite, statut, commande_id, couverts").single(),i=Ye(r);return Dt(),S2(i)},deleteTable:async e=>{const t=await ye.from("restaurant_tables").delete().eq("id",e);Ye(t),Dt()},getIngredients:async()=>ol(),getProducts:async()=>{const[e,t]=await Promise.all([Ds(i=>i.neq("estado","archive")),rv("getProducts")]),n=Ye(e),r=t.length>0?new Map(t.map(i=>[i.id,i])):void 0;return n.map(i=>Ri(i,r))},getProductById:async e=>{const[t,n]=await Promise.all([Ds(s=>s.eq("id",e).maybeSingle()),rv("getProductById")]),r=Rs(t);if(!r)return null;const i=n.length>0?new Map(n.map(s=>[s.id,s])):void 0;return Ri(r,i)},getBestSellerProducts:async()=>{const[e,t]=await Promise.all([Ds((i,s)=>s?i.eq("is_best_seller",!0).order("best_seller_rank",{ascending:!0,nullsFirst:!1}).limit(6):i.limit(0),{includeRecipes:!1}),rv("getBestSellerProducts")]),n=Ye(e),r=t.length>0?new Map(t.map(i=>[i.id,i])):void 0;return n.filter(i=>i.estado!=="archive").sort((i,s)=>{const l=i.best_seller_rank??Number.POSITIVE_INFINITY,d=s.best_seller_rank??Number.POSITIVE_INFINITY;return l-d}).map(i=>Ri(i,r)).filter(i=>i.is_best_seller).slice(0,6)},getCategories:async()=>Kf(),addProduct:async e=>{const t=Ya(e.image),n=await ye.from("products").insert({nom_produit:e.nom_produit,description:e.description??null,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:t,is_best_seller:e.is_best_seller??!1,best_seller_rank:e.is_best_seller?e.best_seller_rank:null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image, is_best_seller, best_seller_rank").single(),r=Ye(n);return e.recipe.length>0&&await ye.from("product_recipes").insert(e.recipe.map(i=>({product_id:r.id,ingredient_id:i.ingredient_id,qte_utilisee:i.qte_utilisee}))),Dt(),Ri({...r,product_recipes:e.recipe.map(i=>({ingredient_id:i.ingredient_id,qte_utilisee:i.qte_utilisee}))})},createProduct:async(e,t)=>{let n;t&&(n=await ye.storage.from("product-images").upload(`${e.nom_produit}-${Date.now()}`,t).then(s=>{var l;if(s.error)throw s.error;return(l=s.data)==null?void 0:l.path}));const r=await ye.from("products").insert({nom_produit:e.nom_produit,description:e.description??null,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:n??null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image").single(),i=Ye(r);return e.recipe.length>0&&await ye.from("product_recipes").insert(e.recipe.map(s=>({product_id:i.id,ingredient_id:s.ingredient_id,qte_utilisee:s.qte_utilisee}))),Dt(),Ri({...i,product_recipes:e.recipe.map(s=>({...s,product_id:i.id}))})},updateProduct:async(e,t,n)=>{let r;n?r=await ye.storage.from("product-images").upload(`${t.nom_produit??e}-${Date.now()}`,n).then(l=>{var d;if(l.error)throw l.error;return(d=l.data)==null?void 0:d.path}):"image"in t&&t.image===null&&(r=null);const i={};t.nom_produit!==void 0&&(i.nom_produit=t.nom_produit),t.description!==void 0&&(i.description=t.description),t.prix_vente!==void 0&&(i.prix_vente=t.prix_vente),t.categoria_id!==void 0&&(i.categoria_id=t.categoria_id),t.estado!==void 0&&(i.estado=t.estado),r!==void 0&&(i.image=r),Object.keys(i).length>0&&await ye.from("products").update(i).eq("id",e),t.recipe&&(await ye.from("product_recipes").delete().eq("product_id",e),t.recipe.length>0&&await ye.from("product_recipes").insert(t.recipe.map(l=>({product_id:e,ingredient_id:l.ingredient_id,qte_utilisee:l.qte_utilisee})))),Dt();const s=await Ne.getProductById(e);if(!s)throw new Error("Product not found after update");return s},deleteProduct:async e=>{const t=await Ne.getProductById(e);if(t!=null&&t.image){const n=t.image.split("/").pop();n&&await ye.storage.from("product-images").remove([n])}await ye.from("product_recipes").delete().eq("product_id",e),await ye.from("products").delete().eq("id",e),Dt()},createCategory:async e=>{const t=await ye.from("categories").insert(e).select("id, nom").single(),n=Ye(t);return Dt(),i0(n)},updateCategory:async(e,t)=>{const n=await ye.from("categories").update(t).eq("id",e).select("id, nom").single(),r=Ye(n);return Dt(),i0(r)},deleteCategory:async e=>{await ye.from("categories").delete().eq("id",e),Dt()},createIngredient:async e=>{const t=await ye.from("ingredients").insert({nom:e.nom,unite:e.unite,stock_minimum:e.stock_minimum,stock_actuel:0,prix_unitaire:0}).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),n=Ye(t);return sa.publish("notifications_updated"),Hf(n)},updateIngredient:async(e,t)=>{const n=await ye.from("ingredients").update(t).eq("id",e).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),r=Ye(n);return sa.publish("notifications_updated"),Hf(r)},resupplyIngredient:async(e,t,n)=>{if(!Number.isFinite(t)||t<=0)throw new Error("Quantity must be a positive number");if(!Number.isFinite(n)||n<0)throw new Error("Unit price must be a non-negative number");const r=await ye.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").eq("id",e).single(),i=Ye(r),s=Hr(i.stock_actuel)??0,l=Hr(i.prix_unitaire)??0,d=Number(t),f=s+d,h=s*l+d*n,m=f>0?h/f:0,g=await ye.from("ingredients").update({stock_actuel:f,prix_unitaire:m}).eq("id",e).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),v=Ye(g),x=await ye.from("purchases").insert({ingredient_id:e,quantite_achetee:d,prix_total:d*n,date_achat:new Date().toISOString()});if(x.error)throw new Error(x.error.message);return sa.publish("notifications_updated"),Hf(v)},deleteIngredient:async e=>{const t=await ye.from("product_recipes").select("ingredient_id, product_id, qte_utilisee").eq("ingredient_id",e).limit(1),{data:n}=t;return n&&n.length>0?{success:!1}:(await ye.from("ingredients").delete().eq("id",e),sa.publish("notifications_updated"),{success:!0})},getKitchenOrders:async()=>{const e=await Di().eq("estado_cocina","recibido"),n=Ye(e).map(Ia),r=[];return n.forEach(i=>{const s=i.items.filter(d=>d.estado==="enviado");if(s.length===0)return;s.reduce((d,f)=>{const h=f.date_envoi??i.date_envoi_cuisine??i.date_creation,m=d.get(h)??[];return m.push(f),d.set(h,m),d},new Map).forEach((d,f)=>{r.push({...i,items:d,date_envoi_cuisine:f,ticketKey:`${i.id}-${f}`})})}),r.sort((i,s)=>{const l=i.date_envoi_cuisine??i.date_creation,d=s.date_envoi_cuisine??s.date_creation;return l-d})},getTakeawayOrders:async()=>{const e=await Di().in("type",["a_emporter","pedir_en_linea"]),n=Ye(e).map(Ia);return{pending:n.filter(r=>r.statut==="pendiente_validacion"&&r.estado_cocina==="no_enviado"),ready:n.filter(r=>r.estado_cocina==="listo")}},getOrderById:async e=>await Wt(e)??void 0,createOrGetOrderByTableId:async(e,t)=>{const n=await ye.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").eq("id",e).maybeSingle(),r=Rs(n);if(!r)throw new Error("Table not found");if(r.commande_id){const h=await Wt(r.commande_id);if(h)return h}const i=(t==null?void 0:t.couverts)??r.couverts??null;if(!Number.isInteger(i)||i<=0)throw new Error("Le nombre de couverts sélectionné est requis pour ouvrir la table.");const s=i,l=new Date().toISOString(),d=await ye.from("orders").insert({type:"sur_place",table_id:r.id,table_nom:r.nom,couverts:s,statut:"en_cours",estado_cocina:"no_enviado",date_creation:l,payment_status:"unpaid",total:0}).select("*").single(),f=Ye(d);return await ye.from("restaurant_tables").update({statut:"en_cuisine",commande_id:f.id,couverts:s}).eq("id",e),Dt(),Ia(f)},cancelUnsentTableOrder:async e=>{const t=await Wt(e);!t||t.estado_cocina!=="no_enviado"||t.items.some(r=>r.estado!=="en_attente")||(await ye.from("order_items").delete().eq("order_id",e),await ye.from("orders").delete().eq("id",e),t.table_id&&await ye.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",t.table_id),Dt())},addOrderItems:async(e,t)=>{const n=new Date().toISOString(),r=t.map(s=>({...s,order_id:e,estado:"en_attente",date_envoi:n}));await ye.from("order_items").insert(r),Dt();const i=await Wt(e);if(!i)throw new Error("Order not found after adding items");return i},updateOrderItems:async(e,t)=>{const n=await Wt(e);if(!n)throw new Error("Order not found");const r=new Set(n.items.map(m=>m.id)),i=new Set(t.map(m=>m.id)),s=t.filter(m=>!r.has(m.id)),l=t.filter(m=>r.has(m.id)),d=n.items.filter(m=>!i.has(m.id)),f=new Date().toISOString();s.length>0&&await ye.from("order_items").insert(s.map(m=>({...m,order_id:e,estado:"en_attente",date_envoi:f}))),l.length>0&&await Promise.all(l.map(m=>ye.from("order_items").update({produit_id:m.produitRef,nom_produit:m.nom_produit,prix_unitaire:m.prix_unitaire,quantite:m.quantite,excluded_ingredients:m.excluded_ingredients??[],commentaire:m.commentaire,estado:m.estado??"en_attente",date_envoi:m.date_envoi?new Date(m.date_envoi).toISOString():f}).eq("id",m.id))),d.length>0&&await ye.from("order_items").delete().in("id",d.map(m=>m.id)),Dt();const h=await Wt(e);if(!h)throw new Error("Order not found after item update");return h},updateOrder:async(e,t,n)=>{const{items:r,clientInfo:i,removedItemIds:s=[],...l}=t;let d=[];if(r){const v=await Wt(e);if(!v)throw new Error("Order not found");d=v.items;const x=new Set(d.map(S=>S.id)),_=r.filter(S=>!Ss(S.id)||!x.has(S.id)),j=r.filter(S=>Ss(S.id)&&x.has(S.id));_.length>0&&await ye.from("order_items").insert(_.map(S=>({...Ss(S.id)?{id:S.id}:{},order_id:e,produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients??[],commentaire:S.commentaire??null,estado:S.estado??"en_attente",date_envoi:S.date_envoi?new Date(S.date_envoi).toISOString():null}))),j.length>0&&await Promise.all(j.map(S=>ye.from("order_items").update({produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients??[],commentaire:S.commentaire??null,estado:S.estado??"en_attente",date_envoi:S.date_envoi?new Date(S.date_envoi).toISOString():null}).eq("id",S.id)))}const f={};l.type&&(f.type=l.type),l.table_id!==void 0&&(f.table_id=l.table_id),l.table_nom!==void 0&&(f.table_nom=l.table_nom),l.couverts!==void 0&&(f.couverts=l.couverts),l.statut&&(f.statut=l.statut),l.estado_cocina&&(f.estado_cocina=l.estado_cocina),l.payment_status&&(f.payment_status=l.payment_status),l.payment_method!==void 0&&(f.payment_method=l.payment_method),l.payment_receipt_url!==void 0&&(f.payment_receipt_url=l.payment_receipt_url),l.receipt_url!==void 0&&(f.receipt_url=l.receipt_url),l.total!==void 0&&(f.total=l.total),l.profit!==void 0&&(f.profit=l.profit),l.date_creation!==void 0&&(f.date_creation=sl(l.date_creation)),l.date_envoi_cuisine!==void 0&&(f.date_envoi_cuisine=sl(l.date_envoi_cuisine)),l.date_listo_cuisine!==void 0&&(f.date_listo_cuisine=sl(l.date_listo_cuisine)),l.date_servido!==void 0&&(f.date_servido=sl(l.date_servido)),r&&(f.total=r.reduce((v,x)=>v+x.prix_unitaire*x.quantite,0));const h=new Set((r??[]).map(v=>v.id)),m=new Set;s.filter(v=>Ss(v)).forEach(v=>m.add(v)),d.filter(v=>Ss(v.id)&&!h.has(v.id)).forEach(v=>m.add(v.id)),m.size>0&&await ye.from("order_items").delete().in("id",Array.from(m)),i&&(f.client_nom=(i==null?void 0:i.nom)??null,f.client_telephone=(i==null?void 0:i.telephone)??null,f.client_adresse=(i==null?void 0:i.adresse)??null),Object.keys(f).length>0&&await ye.from("orders").update(f).eq("id",e),Dt({includeNotifications:(n==null?void 0:n.includeNotifications)??!0});const g=await Wt(e);if(!g)throw new Error("Order not found after update");return r?{...g,items:Wz(r,g.items)}:g},sendOrderToKitchen:async(e,t)=>{const n=await Wt(e);if(!n)throw new Error("Order not found");const r=n.items.filter(f=>f.estado==="en_attente"),i=(()=>{if(!t||t.length===0)return r;const f=new Set(t);return r.filter(h=>f.has(h.id))})();if(i.length===0)return n;const s=i.filter(f=>Ss(f.id)).map(f=>f.id);if(s.length===0)return n;const l=new Date().toISOString();await ye.from("order_items").update({estado:"enviado",date_envoi:l}).in("id",s),await ye.from("orders").update({estado_cocina:"recibido",date_envoi_cuisine:l}).eq("id",e),n.table_id&&await ye.from("restaurant_tables").update({statut:"en_cuisine"}).eq("id",n.table_id),Dt();const d=await Wt(e);if(!d)throw new Error("Order not found after sending to kitchen");return d},markOrderAsReady:async e=>{const t=new Date().toISOString();await ye.from("orders").update({estado_cocina:"listo",date_listo_cuisine:t}).eq("id",e);const n=await Wt(e);n!=null&&n.table_id&&await ye.from("restaurant_tables").update({statut:"para_entregar"}).eq("id",n.table_id),Dt();const r=await Wt(e);if(!r)throw new Error("Order not found after ready update");return r},markOrderAsServed:async e=>{const t=await Wt(e);if(!t)throw new Error("Order not found");const n=new Date().toISOString();await ye.from("orders").update({estado_cocina:"servido",date_servido:n}).eq("id",e),t.table_id&&await ye.from("restaurant_tables").update({statut:"para_pagar"}).eq("id",t.table_id),Dt();const r=await Wt(e);if(!r)throw new Error("Order not found after serve update");return r},finalizeOrder:async(e,t,n)=>{const r=await Wt(e);if(!r)throw new Error("Order not found");const i=new Date().toISOString();await ye.from("orders").update({statut:"finalisee",payment_status:"paid",payment_method:t,payment_receipt_url:n??null,date_servido:i,total:r.total,subtotal:r.subtotal,total_discount:r.total_discount,promo_code:r.promo_code,applied_promotions:r.applied_promotions?JSON.stringify(r.applied_promotions):null}).eq("id",e),r.table_id&&await ye.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",r.table_id),Dt();const s=await Wt(e);if(!s)throw new Error("Order not found after finalization");const l=await O2(s);return{...s,profit:l}},submitCustomerOrder:async e=>{var l,d,f;const n=new Date().toISOString(),r=await ye.from("orders").insert({type:"a_emporter",couverts:1,statut:"pendiente_validacion",estado_cocina:"no_enviado",date_creation:n,payment_status:"unpaid",total:e.total??e.items.reduce((h,m)=>h+m.prix_unitaire*m.quantite,0),client_nom:((l=e.clientInfo)==null?void 0:l.nom)??null,client_telephone:((d=e.clientInfo)==null?void 0:d.telephone)??null,client_adresse:((f=e.clientInfo)==null?void 0:f.adresse)??null,receipt_url:e.receipt_url??null,subtotal:e.subtotal??null,total_discount:e.total_discount??null,promo_code:e.promo_code??null,applied_promotions:e.applied_promotions?JSON.stringify(e.applied_promotions):null}).select("*").single(),i=Ye(r);if(e.items.length>0){const h=e.items.map(g=>{const v=g.produitRef&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(g.produitRef);return{order_id:i.id,produit_id:v?g.produitRef:null,nom_produit:g.nom_produit,prix_unitaire:g.prix_unitaire,quantite:g.quantite,excluded_ingredients:g.excluded_ingredients??[],commentaire:g.commentaire,estado:g.estado??"en_attente",date_envoi:g.date_envoi?new Date(g.date_envoi).toISOString():null}}),m=await ye.from("order_items").insert(h);if(m.error)throw console.error("Error inserting order items:",m.error),new Error(`Failed to insert order items: ${m.error.message}`)}Dt();const s=await Wt(i.id);if(!s)throw new Error("Order not found after creation");return s},getCustomerOrderStatus:async e=>Wt(e),validateTakeawayOrder:async e=>{const t=new Date().toISOString(),n=await ye.from("orders").update({statut:"en_cours",estado_cocina:"recibido",payment_status:"paid",payment_method:"tarjeta",date_envoi_cuisine:t}).eq("id",e);if(n.error)throw console.error("Failed to update takeaway order status",n.error),new Error(`Failed to update takeaway order status: ${n.error.message}`);const r=await ye.from("order_items").update({estado:"enviado",date_envoi:t}).eq("order_id",e);if(r.error)throw console.error("Failed to mark takeaway order items as sent",r.error),new Error(`Failed to mark takeaway order items as sent: ${r.error.message}`);Dt();const i=await Wt(e);if(!i)throw new Error("Order not found after validation");return i},markTakeawayAsDelivered:async e=>{await ye.from("orders").update({statut:"finalisee",estado_cocina:"entregada",payment_method:"transferencia"}).eq("id",e),Dt();const t=await Wt(e);if(!t)throw new Error("Order not found after delivery");const n=await O2(t);return{...t,profit:n}},getNotificationCounts:async()=>{const e=await Di(),n=Ye(e).map(Ia),r=i=>i.type==="a_emporter"||i.type==="pedir_en_linea";return{pendingTakeaway:n.filter(i=>r(i)&&i.statut==="pendiente_validacion"&&i.estado_cocina==="no_enviado").length,readyTakeaway:n.filter(i=>r(i)&&i.estado_cocina==="listo").length,kitchenOrders:n.filter(i=>i.estado_cocina==="recibido").length,lowStockIngredients:(await ol()).filter(i=>i.stock_actuel<=i.stock_minimum).length,readyForService:n.filter(i=>i.type==="sur_place"&&i.estado_cocina==="listo").length}},generateDailyReport:async()=>{const e=new Date,t=tu(e),n=t.toISOString();g2(n);const[r,i,s,l]=await Promise.all([Di().eq("statut","finalisee"),Kf(),ol(),Ds(z=>z)]);let d=[],f=!1;try{d=await p2(n)}catch(z){console.warn("Failed to fetch role logins for daily report",z),f=!0}const m=Ye(r).map(Ia),g=t.getTime(),v=e.getTime(),x=m.filter(z=>{const Q=z.date_servido??z.date_listo_cuisine??z.date_creation;return Q>=g&&Q<=v}),_=new Map,j=z=>{const Q=_.get(z.id);if(Q)return Q;const H=s0(z);return _.set(z.id,H),H},S=x.reduce((z,Q)=>z+(Q.type==="sur_place"?Math.max(Q.couverts??0,0):0),0),N=x.filter(z=>z.type==="pedir_en_linea").length,O=S+N;let C=0,A=0;const T=new Map(s.map(z=>[z.id,z])),k=Ye(l),R=new Map(k.map(z=>{const Q=Ri(z,T);return[Q.id,Q]})),L=new Map(i.map(z=>[z.id,z.nom])),K=new Map;x.forEach(z=>{const Q=j(z);C+=Q.totalRevenue,A+=Q.totalDiscount,z.items.forEach((H,X)=>{const I=R.get(H.produitRef),$=I?L.get(I.categoria_id)??"Sans catégorie":"Sans catégorie",U=I?I.categoria_id:"unknown",ee=K.get(U)??{categoryName:$,products:[]},W=ee.products.find(M=>M.id===H.produitRef),P=Q.netPerItem[X]??H.prix_unitaire*H.quantite;W?(W.quantity+=H.quantite,W.totalSales+=P):ee.products.push({id:H.produitRef,name:H.nom_produit,quantity:H.quantite,totalSales:P}),K.set(U,ee)})}),K.forEach(z=>{z.products.sort((Q,H)=>H.quantity-Q.quantity)});const B=s.filter(z=>z.stock_actuel<=z.stock_minimum),F=x.length>0?C/x.length:0;return{generatedAt:e.toISOString(),startDate:t.toISOString(),clientsDuJour:O,clientsSurPlace:S,clientsEnLigne:N,panierMoyen:F,ventesDuJour:C,totalPromotionsApplied:A,soldProducts:Array.from(K.values()),lowStockIngredients:B,roleLogins:d,roleLoginsUnavailable:f}},getSalesHistory:async()=>{const e=await ye.from("sales").select("*").order("sale_date",{ascending:!1});return Ye(e).map(Xz)},getFinalizedOrders:async()=>{const e=await Di().eq("statut","finalisee");return Ye(e).map(Ia)},createOrder:async e=>{var m,g,v;const t=eU(e.order_type??e.type),n=tU(e.status??e.statut),r=nU(e.payment_status),i=rU(e.payment_method),s={type:t,statut:n,estado_cocina:"no_enviado",payment_status:r,date_creation:new Date().toISOString(),total:e.total??0,subtotal:e.subtotal??0,total_discount:e.total_discount??0,promo_code:e.promo_code||null,applied_promotions:e.applied_promotions?JSON.stringify(e.applied_promotions):null,payment_method:i,payment_receipt_url:e.receipt_url||null,receipt_url:e.receipt_url||null,client_nom:e.client_name||((m=e.clientInfo)==null?void 0:m.nom)||null,client_telephone:e.client_phone||((g=e.clientInfo)==null?void 0:g.telephone)||null,client_adresse:e.client_address||((v=e.clientInfo)==null?void 0:v.adresse)||null},l=await ye.from("orders").insert(s).select(`
      `).single(),d=Ye(l),f=[];if(e.items&&e.items.length>0){const x=e.items.map(S=>({order_id:d.id,produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients||[],commentaire:S.commentaire||null,estado:"en_attente"})),_=await ye.from("order_items").insert(x).select("*"),j=Ye(_);f.push(...j.map(hk))}const h={id:d.id,type:d.type,table_id:d.table_id??void 0,table_nom:d.table_nom??void 0,couverts:d.couverts??0,statut:d.statut,estado_cocina:d.estado_cocina,date_creation:kr(d.date_creation)??Date.now(),date_envoi_cuisine:kr(d.date_envoi_cuisine),date_listo_cuisine:kr(d.date_listo_cuisine),date_servido:kr(d.date_servido),payment_status:d.payment_status,items:f,total:Hr(d.total)??0,profit:Hr(d.profit),payment_method:d.payment_method??void 0,payment_receipt_url:d.payment_receipt_url??void 0,receipt_url:d.receipt_url??void 0,subtotal:Hr(d.subtotal),total_discount:Hr(d.total_discount),promo_code:d.promo_code??void 0,applied_promotions:d.applied_promotions?typeof d.applied_promotions=="string"?JSON.parse(d.applied_promotions):d.applied_promotions:void 0};return(d.client_nom||d.client_telephone||d.client_adresse)&&(h.clientInfo={nom:d.client_nom??"",telephone:d.client_telephone??"",adresse:d.client_adresse??void 0}),Dt({includeNotifications:!0}),h},logins:{fetchSince:p2,clearBefore:g2,log:m2}};let hf=null;const Au=()=>{const[e,t]=b.useState(hf),[n,r]=b.useState(!0),[i,s]=b.useState(null),l=b.useCallback(async()=>{r(!0);try{const f=await Ne.getSiteContent(),h=a0(f??void 0);hf=h,t(h),s(null)}catch(f){console.error("Failed to fetch site content",f),hf=uu,t(uu),s(f instanceof Error?f.message:"Impossible de charger le contenu du site.")}finally{r(!1)}},[]),d=b.useCallback(async f=>{const h=await Ne.updateSiteContent(f),m=a0(h);return t(m),hf=m,m},[]);return b.useEffect(()=>{l()},[l]),{content:e,loading:n,error:i,refresh:l,updateContent:d}},mk=b.createContext(void 0),oU=({children:e})=>{const[t,n]=b.useState(null),[r,i]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("oui-oui-tacos-role"),m=localStorage.getItem("oui-oui-tacos-session");if(!h||!m){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session");return}const g=JSON.parse(h),v=JSON.parse(m);if(!(g!=null&&g.id)||v.roleId!==g.id){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null);return}const x=await Ne.getRoleById(g.id);x?(n(x),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(x)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:x.id,authenticatedAt:Date.now()}))):(localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null))}catch(h){console.error("Failed to restore role:",h),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null)}finally{i(!1)}})()},[]);const s=b.useCallback(async f=>{i(!0);try{const h=await Ne.loginWithPin(f);if(!h)throw new Error("PIN invalide");return n(h),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(h)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:h.id,authenticatedAt:Date.now()})),h}finally{i(!1)}},[]),l=b.useCallback(()=>{n(null),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session")},[]),d=b.useCallback(async()=>{if(t!=null&&t.id)try{const f=await Ne.getRoleById(t.id);f?(n(f),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(f)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:f.id,authenticatedAt:Date.now()}))):l()}catch(f){console.error("Failed to refresh role:",f)}},[l,t==null?void 0:t.id]);return c.jsx(mk.Provider,{value:{role:t,loading:r,login:s,logout:l,refreshRole:d},children:e})},ga=()=>{const e=b.useContext(mk);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},ah=e=>e==="editor"||e==="readonly",Eb=e=>{if(!e)return null;const{homePage:t,permissions:n}=e;if(t&&ah(n==null?void 0:n[t]))return t;const r=Gn.find(i=>ah(n==null?void 0:n[i.permissionKey]));return r?r.href:null},lU=["a[href]","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),cU=({isOpen:e,onClose:t,notifications:n,onReportClick:r})=>{const{role:i,logout:s}=ga(),l=pa(),d=b.useRef(null),f=b.useRef(null),h=()=>{s(),l("/")},m=i==null?void 0:i.permissions,g=b.useMemo(()=>Gn.filter(j=>{const S=m==null?void 0:m[j.permissionKey];return ah(S)}),[m]),v=b.useMemo(()=>g.find(j=>j.permissionKey===Va),[g]),x=b.useMemo(()=>g.filter(j=>j.permissionKey!==Va),[g]);b.useEffect(()=>{var C;if(!e||typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches)return;f.current=document.activeElement;const S=d.current,N=S==null?void 0:S.querySelectorAll(lU);(C=N==null?void 0:N[0])==null||C.focus();const O=A=>{if(A.key==="Escape"&&(A.preventDefault(),t()),A.key==="Tab"&&N&&N.length>0){const T=N[0],k=N[N.length-1];A.shiftKey?document.activeElement===T&&(A.preventDefault(),k.focus()):document.activeElement===k&&(A.preventDefault(),T.focus())}};return document.addEventListener("keydown",O),()=>{var A,T;document.removeEventListener("keydown",O),(T=(A=f.current)==null?void 0:A.focus)==null||T.call(A)}},[e,t]);const _=()=>{typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches||t()};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 md:hidden ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!e,onClick:t}),c.jsxs("aside",{ref:d,className:`app-sidebar fixed inset-y-0 left-0 z-50 flex w-72 flex-col transition-transform duration-300 ease-in-out md:static md:z-auto md:w-64 md:translate-x-0 ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}`,"aria-label":"Navegación principal",children:[c.jsxs("div",{className:"app-sidebar__header",children:[c.jsx("span",{className:"app-sidebar__brand",children:"OUIOUI"}),c.jsx("button",{onClick:t,className:"app-sidebar__close md:hidden","aria-label":"Cerrar el menú",children:c.jsx(da,{size:20})})]}),c.jsxs("div",{className:"app-sidebar__content",children:[c.jsx("div",{className:"app-sidebar__scroll-region",children:c.jsx("nav",{className:"app-sidebar__nav",children:x.map(j=>{let S=null;return n&&(j.href==="/para-llevar"&&(n.pendingTakeaway>0||n.readyTakeaway>0)?S=c.jsxs("span",{className:"app-sidebar__badge-group",children:[n.pendingTakeaway>0&&c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${n.pendingTakeaway} por validar`,children:n.pendingTakeaway}),n.readyTakeaway>0&&c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--success",title:`${n.readyTakeaway} listo(s)`,children:n.readyTakeaway})]}):j.href==="/ventes"&&n.readyForService>0?S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${n.readyForService} pedido(s) listo(s)`,children:n.readyForService})}):j.href==="/cocina"&&n.kitchenOrders>0?S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:n.kitchenOrders})}):j.href==="/ingredients"&&n.lowStockIngredients>0&&(S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:n.lowStockIngredients})}))),c.jsxs(qy,{to:j.href,onClick:_,className:({isActive:N})=>`app-sidebar__nav-link${N?" is-active":""}`,children:[c.jsx(j.icon,{size:22}),c.jsx("span",{children:j.name}),S]},j.name)})})}),c.jsxs("div",{className:"app-sidebar__section",children:[v&&c.jsxs(qy,{to:v.href,onClick:_,className:({isActive:j})=>`app-sidebar__action${j?" is-active":""}`,children:[c.jsx(v.icon,{size:22}),c.jsx("span",{className:"font-semibold",children:v.name})]}),c.jsxs("button",{onClick:()=>{r(),_()},className:"app-sidebar__action",children:[c.jsx(FA,{size:22}),c.jsx("span",{className:"font-semibold",children:"Reporte"})]}),c.jsxs("button",{onClick:h,className:"app-sidebar__action app-sidebar__action--logout",children:[c.jsx(r$,{size:22}),c.jsx("span",{className:"font-semibold",children:"Cerrar sesión"})]})]})]})]})]})},mn=({isOpen:e,onClose:t,title:n,children:r,size:i="md"})=>{const s={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},l=b.useId();return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&(f.preventDefault(),t())};return window.addEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}},[e,t]),e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4 py-4 sm:px-6 sm:py-8",onClick:t,children:c.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":l,className:`relative flex w-full flex-col overflow-hidden rounded-2xl bg-white shadow-2xl ${s[i]} max-h-[calc(100vh-2rem)] sm:max-h-[90vh] focus:outline-none`,onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/80 px-4 py-3 sm:px-6",children:[c.jsx("h3",{id:l,className:"text-[clamp(1.05rem,2.2vw,1.4rem)] font-semibold leading-snug text-slate-900 break-words text-balance whitespace-normal [hyphens:auto]",children:n}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500","aria-label":"Fermer la fenêtre modale",children:c.jsx(da,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-5 sm:px-6 sm:py-6",children:r})]})}):null},uU=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),dU=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});function pk(e){return Number.isFinite(e)?Math.round(e):0}function Kc(e){return uU.format(pk(e))}function ge(e){return dU.format(pk(e))}const av=({icon:e,label:t,value:n})=>c.jsxs("div",{className:"flex flex-col items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 p-4 shadow-sm sm:flex-row sm:items-center",children:[c.jsx("div",{className:"rounded-full bg-brand-primary/20 p-2 text-brand-primary sm:p-3",children:e}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 sm:text-sm",children:t}),c.jsx("div",{className:"text-[clamp(1.1rem,2.5vw,1.6rem)] font-bold text-slate-800",children:n})]})]}),fU=({isOpen:e,onClose:t})=>{const[n,r]=b.useState(null),[i,s]=b.useState(!0),[l,d]=b.useState(null);b.useEffect(()=>{e&&(async()=>{s(!0),d(null);try{const x=await Ne.generateDailyReport();r(x)}catch(x){console.error("Error al generar el informe diario",x),r(null),d("No fue posible generar el informe diario. Intenta nuevamente más tarde.")}finally{s(!1)}})()},[e]);const f=v=>{const x=new Map;return v.forEach(_=>{const j=new Date(_.loginAt).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"}),S=x.get(_.roleName)??[];S.push(j),x.set(_.roleName,S)}),x},h=v=>{const x=[];x.push("*REPORTE OUIOUITACOS*"),x.push(`Generado el: ${new Date(v.generatedAt).toLocaleString("es-CO")}`),x.push(`Periodo: desde ${new Date(v.startDate).toLocaleString("es-CO")}`),x.push("---"),x.push("*Estadísticas del día*");const _=v.ventesDuJour+(v.totalPromotionsApplied??0);if(x.push(`- Ventas: *${ge(v.ventesDuJour)}*`),x.push(`- Total facturado: *${ge(_)}*`),x.push(`- Clientes: *${v.clientsDuJour}* (Sala: ${v.clientsSurPlace??0} | En línea: ${v.clientsEnLigne??0})`),x.push(`- Ticket promedio: *${ge(v.panierMoyen)}*`),x.push(`- Total promociones aplicadas: *${ge(v.totalPromotionsApplied??0)}*`),x.push("---"),x.push("*Productos vendidos*"),v.soldProducts.length===0?x.push("Ningún producto vendido."):v.soldProducts.forEach(j=>{x.push(`
_${j.categoryName}_`),j.products.forEach(S=>{x.push(`  - ${S.quantity}x ${S.name} (${ge(S.totalSales)})`)})}),x.push("---"),x.push("*Inicios de sesión desde las 05:00*"),v.roleLoginsUnavailable)x.push("Inicios de sesión no disponibles en este dispositivo.");else{const j=f(v.roleLogins);j.size===0?x.push("No hay inicios de sesión registrados."):j.forEach((S,N)=>{x.push(`- ${N}: ${S.join(", ")}`)})}return x.push("---"),x.push("*Inventario bajo*"),v.lowStockIngredients.length===0?x.push("No hay ingredientes con inventario bajo."):v.lowStockIngredients.forEach(j=>{x.push(`- ${j.nom} (${j.stock_actuel} / ${j.stock_minimum} ${j.unite})`)}),encodeURIComponent(x.join(`
`))},m=()=>{if(!n)return;const x=`https://wa.me/?text=${h(n)}`;window.open(x,"_blank"),t()},g=n?n.ventesDuJour+(n.totalPromotionsApplied??0):0;return c.jsx(mn,{isOpen:e,onClose:t,title:"Reporte diario",size:"xl",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i&&c.jsx("p",{children:"Generando el reporte..."}),!i&&l&&c.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l}),!i&&!n&&!l&&c.jsx("p",{className:"text-red-500",children:"No fue posible generar el reporte."}),!i&&n&&c.jsxs("div",{className:"space-y-6",children:[n.roleLoginsUnavailable&&c.jsxs("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-start gap-2",children:[c.jsx(ca,{className:"mt-0.5 h-4 w-4"}),c.jsx("span",{children:"Los inicios de sesión de los roles no están disponibles en este dispositivo (almacenamiento local inaccesible)."})]}),c.jsxs("div",{className:"text-center border-b pb-4",children:[c.jsx("h2",{className:"font-bold text-brand-secondary text-[clamp(1.75rem,4vw,2.75rem)]",children:"Reporte OUIOUITACOS"}),c.jsxs("p",{className:"text-gray-500",children:["Generado el ",new Date(n.generatedAt).toLocaleString("es-CO")]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Datos desde ",new Date(n.startDate).toLocaleString("es-CO")]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsx(av,{icon:c.jsx(Gh,{}),label:"Ventas del día",value:ge(n.ventesDuJour)}),c.jsx(av,{icon:c.jsx(r0,{}),label:"Clientes del día",value:c.jsxs(c.Fragment,{children:[n.clientsDuJour,c.jsxs("span",{className:"mt-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Salle : ",n.clientsSurPlace??0," • En ligne : ",n.clientsEnLigne??0]})]})}),c.jsx(av,{icon:c.jsx(YA,{}),label:"Ticket promedio",value:ge(n.panierMoyen)})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(Bi,{})," Productos vendidos"]}),c.jsxs("div",{className:"space-y-4",children:[n.soldProducts.map(v=>c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-brand-primary",children:v.categoryName}),c.jsx("ul",{className:"list-disc list-inside pl-2 text-gray-700",children:v.products.map(x=>c.jsxs("li",{children:[x.quantity,"x ",x.name," - ",c.jsx("span",{className:"font-semibold",children:ge(x.totalSales)})]},x.id))})]},v.categoryName)),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-700 shadow-sm",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Total facturado"}),c.jsx("p",{className:"mt-1 text-2xl font-bold",children:ge(g)})]}),c.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-700 shadow-sm",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Promotions appliquées"}),c.jsx("p",{className:"mt-1 text-2xl font-bold",children:ge(n.totalPromotionsApplied??0)})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(t$,{})," Inicios de sesión desde las 05:00"]}),n.roleLoginsUnavailable?c.jsx("p",{className:"text-gray-500",children:"Inicios de sesión no disponibles: no es posible acceder al almacenamiento local."}):(()=>{const v=f(n.roleLogins);return v.size===0?c.jsx("p",{className:"text-gray-500",children:"No hay inicios de sesión registrados desde las 05:00."}):c.jsx("ul",{className:"space-y-2",children:Array.from(v.entries()).map(([x,_])=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-100 p-2 rounded-md",children:[c.jsx("span",{className:"font-semibold text-gray-800",children:x}),c.jsx("span",{className:"text-sm text-gray-600",children:_.join(", ")})]},x))})})()]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(ca,{className:"text-orange-500"})," Ingredientes con inventario bajo"]}),n.lowStockIngredients.length>0?c.jsx("ul",{className:"space-y-1",children:n.lowStockIngredients.map(v=>c.jsxs("li",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-md text-orange-800",children:[c.jsx("span",{children:v.nom}),c.jsxs("span",{className:"font-bold",children:[v.stock_actuel," / ",v.stock_minimum," ",v.unite]})]},v.id))}):c.jsx("p",{className:"text-gray-500",children:"No hay ingredientes con inventario bajo."})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 p-4 border-t",children:[c.jsx("button",{onClick:t,className:"w-full sm:w-auto bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg hover:bg-gray-300 transition",children:"Cerrar"}),c.jsxs("button",{onClick:m,disabled:i||!n,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2 disabled:bg-gray-400",children:[c.jsx(GA,{size:20})," Enviar por WhatsApp"]})]})]})})},hU=()=>{const[e,t]=b.useState(!1),{role:n}=ga(),[r,i]=b.useState(null),[s,l]=b.useState(!1),d=()=>t(!0),f=()=>t(!1);return b.useEffect(()=>{const h=async()=>{try{const g=await Ne.getNotificationCounts();i(g)}catch(g){console.error("Failed to fetch notifications",g)}};h();const m=Ne.notifications.subscribe("notifications_updated",h);return()=>{m()}},[]),b.useEffect(()=>{if(typeof window>"u")return;const h=()=>{window.innerWidth>=768&&t(!1)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"app-shell",children:[c.jsx(cU,{isOpen:e,onClose:f,notifications:r,onReportClick:()=>l(!0)}),c.jsxs("div",{className:"app-main",children:[c.jsxs("header",{className:"app-header",children:[c.jsx("button",{type:"button",onClick:d,className:"app-header__menu-button md:hidden","aria-label":"Abrir el menú",children:c.jsx(KA,{size:24})}),c.jsxs("h1",{className:"app-header__title",children:["Bienvenido, ",n==null?void 0:n.name]}),c.jsx("div",{className:"app-header__spacer md:hidden","aria-hidden":"true"})]}),c.jsx("main",{className:"app-content",children:c.jsx("div",{className:"app-content__inner",children:c.jsx(P4,{})})})]})]}),c.jsx(fU,{isOpen:s,onClose:()=>l(!1)})]})},mU=e=>{try{const t=localStorage.getItem("customer-order-history"),n=t?JSON.parse(t):[],r=n.findIndex(s=>s.id===e.id);r!==-1&&n.splice(r,1),n.unshift(e);const i=n.slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(i))}catch(t){console.error("Failed to save order to history:",t)}},pU=({orderId:e,onNewOrderClick:t,variant:n="page"})=>{var $,U,ee,W,P;const[r,i]=b.useState(null),[s,l]=b.useState(!0),[d,f]=b.useState(!1),h=[{name:"Enviado",icon:FA,description:"Commande transmise et en attente de validation."},{name:"Validado",icon:Ms,description:"La commande est validée par l’équipe."},{name:"En preparacion",icon:zA,description:"La cuisine prépare activement votre commande."},{name:"Listo",icon:d$,description:"La commande est prête pour la remise ou la livraison."}],m=b.useMemo(()=>[{gradient:"from-brand-primary to-brand-primary-dark",border:"border-brand-primary/40",glow:"shadow-[0_10px_25px_rgba(249,168,38,0.35)]"},{gradient:"from-emerald-500 to-emerald-600",border:"border-emerald-200/70",glow:"shadow-[0_10px_25px_rgba(16,185,129,0.35)]"},{gradient:"from-sky-500 to-indigo-600",border:"border-sky-200/70",glow:"shadow-[0_10px_25px_rgba(56,189,248,0.35)]"},{gradient:"from-rose-500 to-red-600",border:"border-rose-200/70",glow:"shadow-[0_10px_25px_rgba(244,114,182,0.35)]"},{gradient:"from-amber-500 to-orange-600",border:"border-amber-200/70",glow:"shadow-[0_10px_25px_rgba(251,191,36,0.35)]"}],[]),g=b.useCallback(M=>M?M.statut==="finalisee"||M.estado_cocina==="servido"||M.estado_cocina==="entregada"||M.estado_cocina==="listo"?3:M.estado_cocina==="recibido"?2:M.statut==="en_cours"?1:M.statut==="pendiente_validacion"||M.estado_cocina==="no_enviado"?0:-1:-1,[]),v=b.useMemo(()=>g(r),[r,g]);b.useEffect(()=>{let M=!0,G=null,ne,se=!1;const he=async()=>{if(!se){se=!0;try{const me=await Ne.getCustomerOrderStatus(e);if(M){if(i(me),(me==null?void 0:me.statut)==="finalisee"||(me==null?void 0:me.estado_cocina)==="servido"||(me==null?void 0:me.estado_cocina)==="entregada"){G&&(clearInterval(G),G=null),mU(me);const $e=me.date_servido??Date.now();oA(me.id,$e+sA)}if(!me){const $e=Qf();($e==null?void 0:$e.orderId)===e&&lA()}}}catch(me){console.error("Failed to fetch order status",me)}finally{M&&l(me=>me&&!1),se=!1}}};return l(!0),i(null),he(),G=setInterval(he,5e3),ne=Ne.notifications.subscribe("orders_updated",he),()=>{M=!1,G&&clearInterval(G),ne&&ne()}},[e]);const x=(r==null?void 0:r.statut)==="finalisee"||(r==null?void 0:r.estado_cocina)==="servido"||(r==null?void 0:r.estado_cocina)==="entregada"||(r==null?void 0:r.estado_cocina)==="listo",_=n==="page"?"container mx-auto p-4 lg:p-8":"w-full px-4 pt-0 pb-4 sm:pt-1 sm:pb-5 flex justify-center",j=n==="page"?"bg-white/95 p-6 rounded-xl shadow-2xl max-w-2xl mx-auto":"max-w-4xl mx-auto",S="border-t pt-6 mt-6 space-y-4 relative md:w-1/2 md:mx-auto";if(s)return c.jsx("div",{className:_,children:"Chargement du suivi de commande..."});if(!r)return n==="hero"?null:c.jsx("div",{className:_,children:c.jsxs("div",{className:j,children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Commande non trouvée"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Nous n'avons pas pu retrouver votre commande."}),c.jsx("button",{onClick:t,className:"bg-brand-primary text-brand-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition",children:"Passer une nouvelle commande"})]})});r.subtotal??r.total;const N=r.total_discount??0,O=((($=r.applied_promotions)==null?void 0:$.length)??0)>0,C=r.type==="a_emporter",A=((U=r.clientInfo)==null?void 0:U.nom)??r.client_name??"",T=((ee=r.clientInfo)==null?void 0:ee.telephone)??r.client_phone??"",k=((W=r.clientInfo)==null?void 0:W.adresse)??r.client_address??"",R=!!(A||T||k),L=O?r.applied_promotions.map((M,G)=>{const ne=typeof M.config=="object"&&M.config!==null?M.config:void 0,se=ne==null?void 0:ne.promo_code,he=M.visuals||null,me=(he==null?void 0:he.banner_image)||(he==null?void 0:he.banner_url),$e=(he==null?void 0:he.banner_text)||void 0,fe=M.discount_amount||0,de=m[G%m.length],we=n==="hero"?"p-1.5 sm:p-2":"p-3 sm:p-4",le=n==="hero"?"gap-3":"gap-4",Ve=n==="hero"?"relative h-6 w-10 flex-shrink-0 overflow-hidden rounded-xl bg-white/15":"relative h-8 w-14 flex-shrink-0 overflow-hidden rounded-xl bg-white/15",be=n==="hero"?"flex h-full w-full items-center justify-center px-2 text-center text-[9px] font-semibold leading-tight text-white":"flex h-full w-full items-center justify-center px-2 text-center text-[11px] font-semibold leading-tight text-white",rt=n==="hero"?"text-xs font-semibold tracking-wide text-white whitespace-nowrap truncate":"text-sm font-semibold tracking-wide text-white whitespace-nowrap truncate",ve=n==="hero"?"text-[9px] font-medium uppercase tracking-wide text-white/85 whitespace-nowrap":"text-[11px] font-medium uppercase tracking-wide text-white/85 whitespace-nowrap",je=n==="hero"?"block text-xs font-bold text-white":"block text-sm font-bold text-white",ze=n==="hero"?"absolute bottom-1 left-1 right-1 rounded bg-black/60 px-1 py-0.5 text-[9px] font-semibold uppercase tracking-wide":"absolute bottom-1 left-1 right-1 rounded bg-black/60 px-1 py-0.5 text-[10px] font-semibold uppercase tracking-wide";return c.jsxs("div",{className:`promo-banner flex w-full items-center ${le} overflow-hidden rounded-2xl border bg-gradient-to-r ${we} text-white shadow-lg ${de.gradient} ${de.border} ${de.glow}`,"aria-label":`Promotion ${M.name}`,children:[c.jsx("div",{className:Ve,children:me?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:me,alt:$e||M.name,className:"h-full w-full object-cover opacity-95"}),$e&&c.jsx("div",{className:ze,children:$e})]}):c.jsx("div",{className:be,children:M.name})}),c.jsxs("div",{className:"flex min-w-0 flex-1 flex-col text-left",children:[(!me||!$e)&&c.jsx("span",{className:rt,title:M.name,children:M.name}),se&&c.jsxs("span",{className:ve,children:["Code: ",se]})]}),c.jsx("div",{className:"text-right whitespace-nowrap",children:c.jsxs("span",{className:je,children:["-",ge(fe)]})})]},`${M.promotion_id}-${M.name}`)}):null,K=L?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:`text-sm font-semibold ${n==="hero"?"text-green-300":"text-green-700"}`,children:"Promotions appliquées"}),c.jsx("div",{className:"space-y-3",children:L})]}):null,B=h.length>1?h.length-1:1,F=Math.max(0,v),z=B>0?Math.min(100,(x?B:F)/B*100):100,Q=Math.max(0,Math.min(100,z)),H=`${Q}-${x?"complete":"active"}`,X=((P=r.items)==null?void 0:P.length)??0,I=b.useRef(null);return b.useEffect(()=>{if(n!=="hero")return;const M=I.current;M&&M.style.setProperty("--tracker-progress-target",`${Q}%`)},[n,Q]),n==="hero"?c.jsxs("div",{className:_,children:[c.jsxs("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-slate-900/90 via-slate-900/75 to-slate-900/60 p-6 text-white shadow-2xl backdrop-blur-xl sm:p-8",children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-70",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_65%)]"}),c.jsx("div",{className:"absolute -bottom-32 right-0 h-64 w-64 rounded-full bg-gradient-to-br from-amber-400/30 via-orange-500/20 to-red-500/30 blur-3xl"})]}),c.jsxs("div",{className:"relative flex flex-col gap-6",children:[x&&c.jsx("div",{className:"pointer-events-none absolute -top-6 right-4 sm:right-8",children:c.jsx("div",{className:"relative",style:{transform:"rotate(10deg)"},children:c.jsx("div",{className:"stamp-container scale-75 sm:scale-90",children:c.jsx("div",{className:"stamp-border",children:c.jsxs("div",{className:"stamp-inner",children:[c.jsx("span",{className:"stamp-text",children:"PEDIDO"}),c.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),c.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:c.jsxs("h2",{className:"text-3xl font-bold text-center text-white sm:text-4xl",children:["Commande #",r.id.slice(-6)]})}),c.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:h.map((M,G)=>{const ne=G===v,se=G===h.length-1,he=G<v||se&&x,me=`tracker-step-card rounded-2xl border p-3 sm:p-4 transition-all ${he?"bg-gradient-to-br from-emerald-400/80 to-emerald-600/80 border-white/35 text-white shadow-lg shadow-emerald-500/25":ne?"bg-gradient-to-br from-amber-400/95 via-orange-500/90 to-red-500/95 border-white/30 text-white shadow-xl shadow-orange-500/25 tracker-step-active":"bg-white/10 border-white/10 text-white/70 backdrop-blur-sm hover:bg-white/15 hover:border-white/20"} ${ne?"scale-[1.02]":""}`,$e=`tracker-step-icon-wrapper relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl bg-black/25 ${he||ne?"text-white":"text-white/70"}`;return c.jsx("div",{className:me,"aria-current":ne?"step":void 0,children:c.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[c.jsx("p",{className:`text-xs sm:text-sm font-semibold tracking-wide ${he||ne?"text-white":"text-white/70"}`,children:M.name}),c.jsxs("div",{className:$e,children:[c.jsx(M.icon,{className:"tracker-step-icon h-10 w-10 sm:h-12 sm:w-12"}),he&&c.jsx(Ms,{className:"absolute -top-2 -right-2 h-5 w-5 sm:h-6 sm:w-6 text-white drop-shadow"})]}),c.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${he||ne?"text-white/80":"text-white/60"}`,children:M.description})]})},M.name)})}),c.jsx("style",{children:`
                        `}),c.jsx("div",{className:"tracker-progress-container tracker-progress-hero",children:c.jsx("div",{className:`tracker-progress-fill tracker-progress-fill-hero ${x?"tracker-progress-fill-complete":""}`,ref:I,children:c.jsx("span",{className:"tracker-progress-glow"})},`hero-progress-${H}`)}),c.jsxs("div",{className:"relative",children:[x&&c.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute -top-6 right-4 z-20 inline-flex rotate-[-10deg] items-center justify-center rounded-full border-2 border-emerald-200/80 bg-emerald-500/90 px-6 py-2 text-lg font-black uppercase tracking-[0.35em] text-white shadow-[0_18px_35px_rgba(16,185,129,0.45)]",children:"LISTO"}),c.jsxs("div",{className:"rounded-2xl bg-black/25 p-4 sm:p-5",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Informations"}),c.jsxs("div",{className:"mt-3 flex flex-col gap-4 text-sm sm:flex-row sm:items-start sm:justify-between",children:[c.jsx("div",{className:"space-y-2",children:R?c.jsxs(c.Fragment,{children:[A&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(Zc,{size:16}),c.jsx("span",{className:"truncate",title:A,children:A})]}),T&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(qf,{size:16}),c.jsx("span",{className:"truncate",title:T,children:T})]}),k&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(ul,{size:16}),c.jsx("span",{className:"truncate",title:k,children:k})]})]}):c.jsx("p",{className:"text-white/70",children:"Aucune information client requise."})}),c.jsxs("div",{className:"flex flex-col items-start gap-2 text-sm sm:min-w-[12rem] sm:items-end sm:text-right",children:[r.receipt_url&&c.jsxs("button",{type:"button",onClick:()=>f(!0),className:"group relative inline-flex flex-col items-end gap-2 focus:outline-none","aria-label":"Agrandir le justificatif",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-white/20 bg-black/40 shadow-lg",children:[c.jsx("img",{src:r.receipt_url,alt:"Aperçu du justificatif",className:"h-20 w-28 object-cover transition duration-500 ease-out group-hover:scale-105 sm:h-24 sm:w-32"}),c.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition duration-300 group-hover:opacity-100",children:c.jsx(Bf,{size:20,className:"text-white"})})]}),c.jsx("span",{className:"text-[11px] font-medium uppercase tracking-wide text-white/70",children:"Cliquer pour agrandir"})]}),c.jsx("span",{className:"text-xs font-medium text-white/60",children:"Mise à jour automatique toutes les 5 secondes."})]})]})]}),c.jsxs("div",{className:"rounded-2xl bg-black/20 p-4 sm:p-5",children:[c.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-xs font-semibold uppercase tracking-wide text-white/60",children:[c.jsx("span",{children:"Résumé"}),c.jsxs("span",{children:["Articles : ",X]})]}),c.jsx("div",{className:"mt-4 max-h-56 space-y-3 overflow-y-auto pr-1 text-sm",children:r.items&&r.items.length>0?r.items.map(M=>{const ne=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,se=(()=>{const he=M.description;return typeof he=="string"&&he.trim().length>0?he.trim():null})();return c.jsx("div",{className:"rounded-xl border border-white/10 bg-black/25 p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-start gap-3",children:[c.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-amber-400/90 to-red-500/90 text-sm font-bold text-white shadow-md",children:M.quantite}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-white",children:M.nom_produit}),c.jsxs("p",{className:"text-xs text-white/60",children:[ge(M.prix_unitaire)," /u"]}),se&&c.jsx("p",{className:"mt-1 text-xs text-white/65",children:se}),M.commentaire&&c.jsxs("p",{className:"mt-2 text-xs italic text-amber-200/80",children:["“",M.commentaire,"”"]})]})]}),c.jsx("div",{className:"text-right text-sm font-semibold text-white",children:ne?c.jsx("span",{className:"text-emerald-200",children:"GRATUIT"}):ge(M.prix_unitaire*M.quantite)})]})},M.id)}):c.jsx("p",{className:"text-white/70",children:"Aucun article enregistré pour cette commande."})}),L?c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Promotions appliquées"}),c.jsx("div",{className:"space-y-3",children:L})]}):null,N>0&&c.jsxs("div",{className:"mt-5 flex items-center justify-between rounded-xl border border-emerald-300/30 bg-emerald-500/15 px-3 py-2 text-sm font-semibold text-emerald-100",children:[c.jsx("span",{children:"Réductions totales"}),c.jsxs("span",{children:["- ",ge(N)]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-white/15 pt-3 text-base font-semibold text-white",children:[c.jsx("span",{children:"Total de la commande"}),c.jsx("span",{children:ge(r.total)})]})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[x?c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-200",children:[c.jsx(Ms,{size:16})," Commande prête"]}):c.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-white/60",children:"Nous préparons votre commande"}),c.jsx("button",{onClick:x?t:void 0,disabled:!x,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${x?"bg-white text-amber-600 shadow-lg hover:bg-white/90":"cursor-not-allowed bg-white/10 text-white/50"}`,children:"Revenir au menu"})]})]})]})]}),c.jsx(mn,{isOpen:d,onClose:()=>f(!1),title:"Justificatif de Paiement",children:r.receipt_url?c.jsx("img",{src:r.receipt_url,alt:"Justificatif",className:"h-auto w-full rounded-md"}):c.jsx("p",{children:"Aucun justificatif fourni."})})]}):c.jsxs("div",{className:_,children:[c.jsxs("div",{className:j,children:[c.jsx("h2",{className:`text-3xl font-bold text-center mb-2 ${n==="hero"?"text-white":"text-gray-800"}`,children:"Suivi de votre commande"}),c.jsxs("p",{className:`text-center font-semibold mb-8 ${n==="hero"?"text-white":"text-gray-500"}`,children:["Commande #",r.id.slice(-6)]}),c.jsx("div",{className:"mb-8",children:c.jsx("div",{className:`flex items-start sm:items-center justify-between gap-3 sm:gap-4 px-2 ${h.length>3?"flex-wrap sm:flex-nowrap":""}`,children:h.map((M,G)=>{const ne=G===v,se=G===h.length-1,he=G<v||se&&x;return c.jsxs("div",{className:"flex flex-1 items-center gap-2 sm:gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[c.jsx("p",{className:`text-xs sm:text-sm font-semibold ${he||ne?"text-gray-900":"text-gray-400"}`,children:M.name}),c.jsxs("div",{className:`relative flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full border-4 transition-all duration-500 ${he?"bg-green-500 border-green-300":ne?"bg-blue-600 border-blue-400 animate-pulse":"bg-gray-400 border-gray-300"}`,children:[c.jsx(M.icon,{className:"h-8 w-8 text-white sm:h-9 sm:w-9"}),he&&c.jsx(Ms,{className:"absolute -top-2 -right-2 h-5 w-5 text-emerald-100 drop-shadow"})]}),c.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${he||ne?"text-gray-600":"text-gray-400"}`,children:M.description})]}),G<h.length-1&&c.jsx("div",{className:"flex flex-1 items-center","aria-hidden":!0,children:c.jsxs("div",{className:`tracker-gauge-wrapper ${n==="hero"?"tracker-gauge-hero":"tracker-gauge-default"} ${he?"tracker-gauge-wrapper-complete":""}`,children:[c.jsx("span",{className:`tracker-gauge-fill ${he?"tracker-gauge-fill-complete":ne?"tracker-gauge-fill-active":"tracker-gauge-fill-idle"}`}),(ne||he)&&c.jsx("span",{className:"tracker-gauge-glow"})]})})]},M.name)})})}),c.jsx("style",{children:`
                `}),c.jsxs("div",{className:S,children:[x&&c.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-none",children:c.jsx("div",{className:"relative",style:{transform:"rotate(15deg)"},children:c.jsx("div",{className:"stamp-container",children:c.jsx("div",{className:"stamp-border",children:c.jsxs("div",{className:"stamp-inner",children:[c.jsx("span",{className:"stamp-text",children:"PEDIDO"}),c.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),c.jsx("h3",{className:`mt-10 text-xl font-bold ${n==="hero"?"text-white":"text-gray-800"}`,children:"Résumé de la commande"}),C&&R&&c.jsxs("div",{className:`mt-6 rounded-xl border p-4 ${n==="hero"?"border-white/30 bg-white/10 backdrop-blur text-white":"border-gray-200 bg-gray-50 text-gray-700"}`,children:[c.jsx("p",{className:`mb-3 text-sm font-semibold uppercase tracking-wide ${n==="hero"?"text-gray-100":"text-gray-600"}`,children:"Informations Client"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[A&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Zc,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"font-medium whitespace-nowrap truncate",title:A,children:A})]}),T&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(qf,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"whitespace-nowrap",title:T,children:T})]}),k&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(ul,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"truncate",title:k,children:k})]})]}),r.receipt_url&&c.jsxs("button",{onClick:()=>f(!0),className:`mt-4 inline-flex items-center gap-2 text-sm font-semibold underline-offset-2 hover:underline ${n==="hero"?"text-white":"text-blue-500"}`,children:[c.jsx(Bf,{size:16})," Voir le justificatif"]})]}),c.jsx("div",{className:"space-y-2",children:r.items&&r.items.length>0?r.items.map(M=>{const ne=M.nom_produit==="Domicilio"&&M.prix_unitaire===0,se=M.description,he=typeof se=="string"&&se.trim().length>0?se.trim():null,me=typeof M.commentaire=="string"&&M.commentaire.trim().length>0?M.commentaire.trim():null;return c.jsx("div",{className:`flex flex-col gap-2 rounded-lg border-b border-dashed border-gray-200/70 pb-3 pt-2 last:border-b-0 last:pb-0 ${n==="hero"?"text-gray-200":"text-gray-600"}`,children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold leading-snug text-balance",children:[M.quantite,"x ",M.nom_produit]}),he&&c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:he}),me&&c.jsxs("p",{className:"mt-1 text-sm italic text-amber-600",children:["“",me,"”"]})]}),c.jsx("div",{className:"whitespace-nowrap text-right text-sm font-semibold",children:ne?c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-xs text-gray-400 line-through",children:ge(8e3)}),c.jsx("span",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):c.jsx("span",{children:ge(M.prix_unitaire*M.quantite)})})]})},M.id)}):c.jsx("p",{className:`${n==="hero"?"text-gray-300":"text-gray-600"}`,children:"Aucun article enregistré pour cette commande."})}),C&&K,!C&&K,N>0&&c.jsxs("div",{className:`mt-4 flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-semibold ${n==="hero"?"border-emerald-300/30 bg-emerald-500/15 text-emerald-100":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[c.jsx("span",{children:"Réductions totales"}),c.jsxs("span",{children:["-",ge(N)]})]}),c.jsxs("div",{className:`flex justify-between font-bold text-lg border-t pt-2 ${n==="hero"?"text-white border-gray-500":"text-gray-800"}`,children:[c.jsx("span",{children:"Total"}),c.jsx("span",{children:ge(r.total)})]}),!C&&R&&c.jsxs("div",{className:`border-t pt-4 space-y-2 ${n==="hero"?"border-gray-500":""}`,children:[c.jsx("h3",{className:`text-xl font-bold ${n==="hero"?"text-white":"text-gray-800"} mb-2`,children:"Informations Client"}),A&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(Zc,{size:16,className:"mr-2"}),c.jsx("span",{className:"whitespace-nowrap truncate",title:A,children:A})]}),T&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(qf,{size:16,className:"mr-2"}),c.jsx("span",{className:"whitespace-nowrap",title:T,children:T})]}),k&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(ul,{size:16,className:"mr-2"}),c.jsx("span",{className:"truncate",title:k,children:k})]}),r.receipt_url&&c.jsxs("button",{onClick:()=>f(!0),className:"flex items-center text-blue-400 hover:underline",children:[c.jsx(Bf,{size:16,className:"mr-2"}),"Voir le justificatif"]})]})]}),c.jsxs("div",{className:"mt-8 text-center space-y-4",children:[x&&c.jsx("div",{className:"flex justify-center",children:c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-green-100 px-4 py-2 text-sm font-semibold text-green-700",children:[c.jsx(Ms,{size:16})," Pedido listo"]})}),c.jsxs("div",{className:"flex flex-col space-y-4",children:[c.jsx("p",{className:`text-sm ${n==="hero"?"text-gray-300":"text-gray-600"}`,children:"Le statut de votre commande est mis à jour automatiquement."}),c.jsx("button",{onClick:x?t:void 0,disabled:!x,className:`font-bold py-3 px-6 rounded-lg transition ${x?`${n==="hero"?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-brand-primary text-brand-secondary hover:bg-brand-primary-dark"} cursor-pointer`:"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"}`,children:"Volver"})]})]})]}),c.jsx(mn,{isOpen:d,onClose:()=>f(!1),title:"Justificatif de Paiement",children:r.receipt_url?c.jsx("img",{src:r.receipt_url,alt:"Justificatif",className:"w-full h-auto rounded-md"}):c.jsx("p",{children:"Aucun justificatif fourni."})})]})},gU={"font/woff2":"woff2","application/font-woff2":"woff2","application/x-font-woff2":"woff2","font/woff":"woff","application/font-woff":"woff","application/x-font-woff":"woff","application/x-font-ttf":"truetype","font/ttf":"truetype","application/x-font-otf":"opentype","font/otf":"opentype","application/vnd.ms-fontobject":"embedded-opentype","application/x-font-eot":"embedded-opentype","image/svg+xml":"svg"},vU={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg"},Ob=e=>{const t=e.trim();return(t.length>0?t:"Custom Font").replace(/"|'/g,"")},yU=e=>{if(!e)return null;const t=e.toLowerCase();for(const[n,r]of Object.entries(gU))if(t.includes(n))return r;return null},bU=e=>{const n=e.toLowerCase().match(/\.([a-z0-9]+)(?:\?|#|$)/);if(!n)return null;const r=n[1];return vU[r]??null},xU=e=>{const t=yU(e.format);return t||bU(e.url)},wU=e=>{const t=Ob(e.name),n=xU(e),r=n?` format("${n}")`:"",i=`url("${e.url}")${r}`;return`@font-face {
`),document.head.appendChild(i),()=>{i.remove()}},[e])},vk=e=>{if(!e)return e??void 0;const t=e.trim();return t.length===0||t.includes(",")?t.length===0?void 0:t:/^(['"]).*\1$/.test(t)||!/[^a-zA-Z0-9-]/.test(t)?t:`'${t.replace(/'/g,"\\'")}'`},Kr=e=>e.background.type==="image"&&e.background.image?{backgroundImage:`url('${e.background.image}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:e.background.color}:{backgroundColor:e.background.color},yk=(e,t)=>{const n=Kr(e);if(e.background.type==="image"){const r=e.background.image??t;return r?{...n,backgroundImage:`url('${r}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:n}return t?{...n,backgroundImage:`url('${t}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:n},Gr=e=>({color:e.textColor,fontFamily:vk(e.fontFamily)}),Ui=e=>({...Gr(e),fontSize:e.fontSize}),Cb=(e,t)=>{const n={color:(t==null?void 0:t.textColor)??e.textColor,fontFamily:vk((t==null?void 0:t.fontFamily)??e.fontFamily)};return t!=null&&t.backgroundColor&&t.backgroundColor.trim().length>0&&(n.backgroundColor=t.backgroundColor),n},bk=(e,t)=>({...Cb(e,t),fontSize:(t==null?void 0:t.fontSize)??e.fontSize}),xk=(e,t)=>t!=null&&t.backgroundColor?{backgroundColor:t.backgroundColor}:{},wk=(e,t,n)=>{if(!e)return e;try{const r=new URL(e);return r.searchParams.set(t,n),r.toString()}catch{const i=e.includes("?")?"&":"?",s=encodeURIComponent(t),l=encodeURIComponent(n);return`${e}${i}${s}=${l}`}},C2="/logo-brand.svg",Fa=e=>{if(e.startsWith("navigation."))return"navigation";if(e.startsWith("hero."))return"hero";if(e.startsWith("about."))return"about";if(e.startsWith("menu."))return"menu";if(e.startsWith("instagramReviews."))return"instagramReviews";if(e.startsWith("findUs."))return"findUs";if(e.startsWith("footer."))return"footer";throw new Error(`Zone introuvable pour l'élément modifiable "${e}"`)},_k=cr.createContext(!0),et=({id:e,onEdit:t,children:n,label:r,className:i,buttonClassName:s,as:l="div"})=>{const d=["group relative",i].filter(Boolean).join(" "),f=cr.useContext(_k),[h,m]=b.useState(!1);if(!f)return c.jsx(l,{className:d,children:n});const g=["customization-edit-button absolute z-30 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-all duration-200","opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus-visible:opacity-100","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","hover:scale-110 hover:bg-blue-600 active:scale-95",s??"right-2 top-2"].filter(Boolean).join(" "),v=x=>{x.preventDefault(),x.stopPropagation();const _=Fa(e),j=x.currentTarget.getBoundingClientRect(),S=x.currentTarget.closest(`[data-zone="${_}"]`)??x.currentTarget.parentElement,N=(S==null?void 0:S.getBoundingClientRect())??null;t(e,{zone:_,anchor:j??N})};return c.jsxs(l,{className:d,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[c.jsx("button",{type:"button",onClick:v,className:g,"aria-label":r,"data-element-id":e,title:r,children:c.jsx(y$,{className:"h-4 w-4","aria-hidden":"true"})}),h&&c.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-blue-500 border-dashed rounded-lg opacity-50 animate-pulse"}),h&&c.jsxs("div",{className:"absolute z-40 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap",children:[r,c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]}),n]})},tl=({children:e,className:t,zone:n,activeZone:r})=>{const s=["customization-section-card relative overflow-hidden rounded-3xl border bg-white shadow-sm transition-all",r===n?"active border-brand-primary/70 shadow-brand-primary/20 ring-2 ring-brand-primary/10":"border-gray-200",t].filter(Boolean).join(" ");return c.jsx("div",{className:s,"data-zone":n,children:e})},A2=({content:e,bestSellerProducts:t,onEdit:n,activeZone:r,showEditButtons:i=!0})=>{const s=Kr(e.navigation.style),l=Gr(e.navigation.style);Ui(e.navigation.style);const d=e.navigation.brandLogo??C2,f=e.navigation.staffLogo??e.navigation.brandLogo??C2,h=yk(e.hero.style,e.hero.backgroundImage),m=Gr(e.hero.style),g=Ui(e.hero.style),v=Kr(e.about.style),x=Gr(e.about.style);Ui(e.about.style);const _=Kr(e.menu.style),j=Gr(e.menu.style),S=Ui(e.menu.style),N=Kr(e.findUs.style),O=Gr(e.findUs.style),C=Kr(e.footer.style),A=Ui(e.footer.style);gk(e.assets.library);const T=e.elementStyles??{},k=e.elementRichText??{},R=G=>{var he;const ne=k[G],se=(he=ne==null?void 0:ne.html)==null?void 0:he.trim();return se&&se.length>0?se:null},L=(G,ne,se,he)=>{const me=R(G);return me?cr.createElement(ne,{...se,dangerouslySetInnerHTML:{__html:me}}):cr.createElement(ne,se,he)},K={navigation:e.navigation.style,hero:e.hero.style,about:e.about.style,menu:e.menu.style,instagramReviews:e.instagramReviews.style,findUs:e.findUs.style,footer:e.footer.style},B=G=>T[G],F=G=>{const ne=Fa(G);return Cb(K[ne],B(G))},z=G=>{const ne=Fa(G);return bk(K[ne],B(G))},Q=G=>{const ne=Fa(G);return xk(K[ne],B(G))},H=e.findUs.address.trim(),X=e.findUs.mapUrl,I=typeof X=="string"?X.trim():"",$=I.length>0,U=!$&&H.length>0?encodeURIComponent(H):"",ee=$?I:U?`https://www.google.com/maps?q=${U}`:"https://www.google.com/maps",W=$?wk(I,"output","embed"):U?`https://www.google.com/maps?q=${U}&output=embed`:"about:blank",P=$||U.length>0,M=H.length>0?H:e.findUs.title;return c.jsx(_k.Provider,{value:i,children:c.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-gray-200 bg-slate-50 p-6 shadow-inner",children:[c.jsx(tl,{zone:"navigation",activeZone:r,children:c.jsx(et,{id:"navigation.style.background",label:"Modifier le fond de la navigation",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("header",{className:"login-header",style:s,children:c.jsxs("div",{className:"layout-container login-header__inner",style:l,children:[c.jsxs("div",{className:"login-brand",style:l,children:[c.jsx(et,{id:"navigation.brandLogo",label:"Modifier le logo principal",onEdit:n,as:"span",className:"inline-flex items-center",children:c.jsx("img",{src:d,alt:`Logo ${e.navigation.brand}`,className:"login-brand__logo"})}),c.jsx(et,{id:"navigation.brand",label:"Modifier le nom de la marque",onEdit:n,as:"span",className:"ml-3 inline-flex items-center",buttonClassName:"-right-3 -top-3",children:L("navigation.brand","span",{className:"login-brand__name",style:F("navigation.brand")},e.navigation.brand)})]}),c.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[c.jsx(et,{id:"navigation.links.home",label:"Modifier le lien Accueil",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:L("navigation.links.home","span",{className:"login-nav__link",style:z("navigation.links.home")},e.navigation.links.home)}),c.jsx(et,{id:"navigation.links.about",label:"Modifier le lien À propos",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:L("navigation.links.about","span",{className:"login-nav__link",style:z("navigation.links.about")},e.navigation.links.about)}),c.jsx(et,{id:"navigation.links.menu",label:"Modifier le lien Menu",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:L("navigation.links.menu","span",{className:"login-nav__link",style:z("navigation.links.menu")},e.navigation.links.menu)}),c.jsx(et,{id:"navigation.links.loginCta",label:"Modifier le bouton personnel",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:c.jsx("div",{className:"login-nav__staff-btn","aria-label":e.navigation.links.loginCta,role:"img",children:c.jsx(et,{id:"navigation.staffLogo",label:"Modifier le logo d'accès staff",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:c.jsx("img",{src:f,alt:"",className:"login-brand__logo","aria-hidden":"true"})})})})]})]})})})}),c.jsx(tl,{zone:"hero",activeZone:r,children:c.jsx(et,{id:"hero.backgroundImage",label:"Modifier le visuel de fond du hero",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-hero",style:{...h,...m},children:c.jsx("div",{className:"section-hero__inner",children:c.jsxs("div",{className:"hero-content",style:m,children:[c.jsx(et,{id:"hero.title",label:"Modifier le titre du hero",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("hero.title","h2",{className:"hero-title",style:F("hero.title")},e.hero.title)}),c.jsx(et,{id:"hero.subtitle",label:"Modifier le sous-titre du hero",onEdit:n,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:L("hero.subtitle","p",{className:"hero-subtitle",style:z("hero.subtitle")},e.hero.subtitle)}),c.jsx(et,{id:"hero.ctaLabel",label:"Modifier le texte du bouton principal",onEdit:n,className:"mt-6 inline-flex",buttonClassName:"-right-3 -top-3",children:c.jsx("button",{type:"button",className:"ui-btn ui-btn-accent hero-cta",style:{...z("hero.ctaLabel"),...Q("hero.ctaLabel")},disabled:!0,children:L("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:z("hero.ctaLabel")},e.hero.ctaLabel)})}),c.jsxs("div",{className:"hero-history mt-6",children:[c.jsx(et,{id:"hero.historyTitle",label:"Modifier le titre de l'historique",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("hero.historyTitle","p",{className:"hero-history__title",style:z("hero.historyTitle")},e.hero.historyTitle)}),c.jsx(et,{id:"hero.reorderCtaLabel",label:"Modifier le bouton de réassort",onEdit:n,className:"hero-history__list",buttonClassName:"right-2 top-2",children:c.jsx(c.Fragment,{children:[0,1,2].map(G=>c.jsxs("div",{className:"hero-history__item",children:[c.jsxs("div",{className:"hero-history__meta",children:[c.jsx("p",{className:"hero-history__date",style:g,children:"Pedido del 12/03/2024"}),c.jsxs("p",{className:"hero-history__details",style:g,children:["2 article(s) • ",ge(32e3)]})]}),c.jsx("button",{type:"button",className:"hero-history__cta",style:{...z("hero.reorderCtaLabel"),...Q("hero.reorderCtaLabel")},disabled:!0,children:L("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:z("hero.reorderCtaLabel")},e.hero.reorderCtaLabel)})]},G))})})]})]})})})})}),c.jsx(tl,{zone:"about",activeZone:r,children:c.jsx(et,{id:"about.style.background",label:"Modifier le fond de la section À propos",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-surface",style:{...v,...x},children:c.jsxs("div",{className:"section-inner section-inner--center",style:x,children:[c.jsx(et,{id:"about.title",label:"Modifier le titre À propos",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("about.title","h2",{className:"section-title",style:F("about.title")},e.about.title)}),c.jsx(et,{id:"about.description",label:"Modifier la description À propos",onEdit:n,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:L("about.description","p",{className:"section-text section-text--muted",style:z("about.description")},e.about.description)}),e.about.image&&c.jsx(et,{id:"about.image",label:"Modifier l'image À propos",onEdit:n,className:"mt-6 block",buttonClassName:"right-4 top-4",children:c.jsx("img",{src:e.about.image,alt:e.about.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})})]})})})}),c.jsx(tl,{zone:"menu",activeZone:r,children:c.jsx(et,{id:"menu.style.background",label:"Modifier le fond de la section Menu",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-muted",style:{..._,...j},children:c.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:j,children:[c.jsx(et,{id:"menu.title",label:"Modifier le titre du menu",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("menu.title","h2",{className:"section-title",style:F("menu.title")},e.menu.title)}),e.menu.image&&c.jsx(et,{id:"menu.image",label:"Modifier l'image du menu",onEdit:n,className:"mb-8 block",buttonClassName:"right-4 top-4",children:c.jsx("img",{src:e.menu.image,alt:e.menu.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})}),c.jsx("div",{className:"menu-grid",children:t.length>0?t.map(G=>{const ne=!!G.image;return c.jsxs("article",{className:"ui-card menu-card",children:[ne?c.jsx("img",{src:G.image,alt:G.nom_produit,className:"h-40 w-full rounded-t-xl object-cover"}):c.jsx("div",{className:"h-40 w-full rounded-t-xl bg-gradient-to-br from-orange-200 via-amber-100 to-orange-50"}),c.jsxs("div",{className:"menu-card__body",children:[c.jsx("h3",{className:"menu-card__title",style:j,children:G.nom_produit}),G.description&&c.jsx("p",{className:"menu-card__description",style:S,children:G.description}),c.jsx("p",{className:"menu-card__price",style:S,children:ge(G.prix_vente)})]})]},G.id)}):c.jsx("div",{className:"col-span-full rounded-2xl border border-dashed border-slate-300 bg-white/70 p-6 text-center",children:c.jsx("p",{className:"text-sm text-slate-500",style:S,children:"Aucun best seller sélectionné pour le moment."})})}),c.jsx(et,{id:"menu.ctaLabel",label:"Modifier le bouton de commande",onEdit:n,className:"section-actions mt-8",buttonClassName:"right-2 top-2",children:c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{type:"button",className:"ui-btn ui-btn-primary hero-cta",style:{...z("menu.ctaLabel"),...Q("menu.ctaLabel")},disabled:!0,children:L("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:z("menu.ctaLabel")},e.menu.ctaLabel)}),c.jsx(et,{id:"menu.loadingLabel",label:"Modifier le texte de chargement",onEdit:n,className:"ml-4 inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:L("menu.loadingLabel","p",{className:"section-text section-text--muted",style:z("menu.loadingLabel")},e.menu.loadingLabel)})]})})]})})})}),c.jsx(tl,{zone:"findUs",activeZone:r,children:c.jsx(et,{id:"findUs.style.background",label:"Modifier le fond de la section Encuéntranos",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-surface",style:{...N,...O},children:c.jsxs("div",{className:"find-us-grid",style:O,children:[c.jsxs("div",{className:"find-us-panel",style:O,children:[c.jsx(et,{id:"findUs.title",label:"Modifier le titre Encuéntranos",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("findUs.title","h2",{className:"section-title",style:F("findUs.title")},e.findUs.title)}),c.jsxs("div",{className:"find-us-details",children:[c.jsxs("div",{className:"find-us-detail",style:O,children:[c.jsx(ul,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(et,{id:"findUs.addressLabel",label:"Modifier le libellé de l'adresse",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("findUs.addressLabel","h3",{className:"find-us-detail__title",style:F("findUs.addressLabel")},e.findUs.addressLabel)}),c.jsx(et,{id:"findUs.address",label:"Modifier l'adresse",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:L("findUs.address","p",{className:"find-us-detail__text",style:z("findUs.address")},e.findUs.address)})]})]}),c.jsxs("div",{className:"find-us-detail",style:O,children:[c.jsx(Tl,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(et,{id:"findUs.hoursLabel",label:"Modifier le libellé des horaires",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:F("findUs.hoursLabel")},e.findUs.hoursLabel)}),c.jsx(et,{id:"findUs.hours",label:"Modifier les horaires",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:L("findUs.hours","p",{className:"find-us-detail__text",style:z("findUs.hours")},e.findUs.hours)})]})]}),c.jsxs("div",{className:"find-us-detail",style:O,children:[c.jsx(HA,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(et,{id:"findUs.cityLabel",label:"Modifier le libellé de l'email",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:L("findUs.cityLabel","h3",{className:"find-us-detail__title",style:F("findUs.cityLabel")},e.findUs.cityLabel)}),c.jsx(et,{id:"findUs.city",label:"Modifier l'email",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:L("findUs.city","p",{className:"find-us-detail__text",style:z("findUs.city")},e.findUs.city)})]})]})]})]}),c.jsx("div",{className:"find-us-map",style:O,children:P?c.jsxs("div",{className:"find-us-map__frame",children:[c.jsx("iframe",{title:`Carte Google Maps pour ${M}`,src:W,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),c.jsx("a",{className:"find-us-map__link",href:ee,target:"_blank",rel:"noopener noreferrer",children:c.jsx(et,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:n,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:L("findUs.mapLabel","span",{className:"find-us-map__label",style:z("findUs.mapLabel")},e.findUs.mapLabel)})})]}):c.jsx("div",{className:"find-us-map__placeholder",children:c.jsx(et,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:n,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:L("findUs.mapLabel","span",{className:"find-us-map__label",style:z("findUs.mapLabel")},e.findUs.mapLabel)})})})]})})})}),c.jsx(tl,{zone:"footer",activeZone:r,children:c.jsx(et,{id:"footer.style.background",label:"Modifier le fond du pied de page",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("footer",{className:"site-footer",style:{...C,...A},children:c.jsx("div",{className:"layout-container site-footer__inner",style:A,children:c.jsx(et,{id:"footer.text",label:"Modifier le texte du pied de page",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:c.jsxs("p",{style:z("footer.text"),children:["© ",new Date().getFullYear()," ",e.navigation.brand,"."," ",L("footer.text","span",{style:z("footer.text")},e.footer.text)]})})})})})})]})})},k2="/logo-brand.svg",jU=uu,jk=cr.forwardRef(({pin:e,onPinChange:t,pinLength:n,describedBy:r,disabled:i},s)=>{const l=g=>{e.length<n&&!i&&t(e+g)},d=()=>{e.length>0&&!i&&t(e.slice(0,-1))},f=g=>{if(i)return;const v=g.target.value.replace(/\D/g,"").slice(0,n);t(v)},h=g=>{if(/^\d$/.test(g.key)){g.preventDefault(),l(g.key);return}if(g.key==="Backspace"){g.preventDefault(),d();return}g.key==="Escape"&&(g.preventDefault(),t(""))},m=e.length===0?`Aucun chiffre saisi. Vous pouvez entrer ${n} chiffres.`:`${e.length} ${e.length>1?"chiffres saisis":"chiffre saisi"} sur ${n}.`;return c.jsxs("div",{className:"pin-input","aria-label":"Clavier numérique sécurisé",children:[c.jsx("input",{ref:s,id:"staff-pin-field",type:"password",inputMode:"numeric",autoComplete:"one-time-code",className:"pin-input__field",value:e,onChange:f,onKeyDown:h,"aria-describedby":r,"aria-label":`Code PIN à ${n} chiffres`,disabled:i,"aria-disabled":i,"aria-busy":i}),c.jsx("div",{className:"pin-indicator",role:"presentation",children:Array.from({length:n}).map((g,v)=>c.jsx("div",{className:"pin-indicator__slot","aria-hidden":"true",children:e[v]?"•":""},v))}),c.jsx("div",{className:"pin-input__live","aria-live":"polite",children:m}),c.jsxs("div",{className:"pin-pad",children:[[...Array(9)].map((g,v)=>c.jsx("button",{type:"button",onClick:()=>l(String(v+1)),className:"pin-pad__button",disabled:i,children:v+1},v+1)),c.jsx("div",{"aria-hidden":"true"}),c.jsx("button",{type:"button",onClick:()=>l("0"),className:"pin-pad__button",disabled:i,children:"0"}),c.jsx("button",{type:"button",onClick:d,className:"pin-pad__button pin-pad__button--muted",disabled:i,children:"DEL"})]})]})});jk.displayName="PinInput";const SU=e=>e===1?"menu-grid menu-grid--single":e===2?"menu-grid menu-grid--double":e===3?"menu-grid menu-grid--triple":e>=6?"menu-grid menu-grid--six":e>0?"menu-grid menu-grid--multi":"menu-grid",NU=e=>{const t="ui-card menu-card";return e===1?`${t} menu-card--single`:e===2?`${t} menu-card--double`:e===3?`${t} menu-card--triple`:e>=6?`${t} menu-card--compact`:t},EU=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState(""),[i,s]=b.useState(""),[l,d]=b.useState(!1),f=b.useRef(null),{login:h}=ga(),m=pa(),{content:g}=Au(),[v,x]=b.useState(()=>g);b.useEffect(()=>{g&&x(g)},[g]);const _=v??jU;gk(_.assets.library);const{navigation:j,hero:S,about:N,menu:O,findUs:C,footer:A,ordering:T}=_,k=T,R=k.onlineEnabled,L=j.brandLogo??k2,K=j.brandLogo??k2,B=Kr(j.style),F=Gr(j.style),z=yk(S.style,S.backgroundImage),Q=Gr(S.style),H=Ui(S.style),X=R?{...de("hero.ctaLabel"),...we("hero.ctaLabel")}:{...de("hero.ctaLabel")},I=R?"ui-btn ui-btn-accent hero-cta hero-cta--active":"hero-cta hero-cta--disabled",$=Kr(N.style),U=Gr(N.style),ee=Kr(O.style),W=Gr(O.style),P=Ui(O.style),M=Kr(C.style),G=Gr(C.style),ne=Kr(A.style),se=Ui(A.style),he=_.elementStyles??{},me={navigation:j.style,hero:S.style,about:N.style,menu:O.style,instagramReviews:_.instagramReviews.style,findUs:C.style,footer:A.style},$e=Oe=>he[Oe],fe=Oe=>{const nt=Fa(Oe);return Cb(me[nt],$e(Oe))},de=Oe=>{const nt=Fa(Oe);return bk(me[nt],$e(Oe))},we=Oe=>{const nt=Fa(Oe);return xk(me[nt],$e(Oe))},le=_.elementRichText??{},Ve=Oe=>{var va;const nt=le[Oe],Ht=(va=nt==null?void 0:nt.html)==null?void 0:va.trim();return Ht&&Ht.length>0?Ht:null},be=(Oe,nt,Ht,va)=>{const ql=Ve(Oe);return ql?cr.createElement(nt,{...Ht,dangerouslySetInnerHTML:{__html:ql}}):cr.createElement(nt,Ht,va)},[rt,ve]=b.useState([]),[je,ze]=b.useState([]),[At,yt]=b.useState(!0),[bt,_t]=b.useState(!1),[Dn,Nt]=b.useState(()=>Qf()),Wn=b.useCallback(async Oe=>{d(!0),s("");try{const nt=await h(Oe),Ht=Eb(nt)??"/dashboard";t(!1),r(""),m(Ht)}catch(nt){console.error("Failed to authenticate with PIN",nt);const Ht=nt instanceof Error&&nt.message?nt.message:"PIN invalide";s(Ht),r(""),requestAnimationFrame(()=>{var va;(va=f.current)==null||va.focus()})}finally{d(!1)}},[h,m]);b.useEffect(()=>{if(!e)return;const Oe=window.setTimeout(()=>{var nt;(nt=f.current)==null||nt.focus()},0);return()=>window.clearTimeout(Oe)},[e]),b.useEffect(()=>{n.length===6&&!l&&Wn(n)},[n,l,Wn]),b.useEffect(()=>{if(!(typeof window>"u"))try{const Oe=window.localStorage.getItem("customer-order-history");if(!Oe)return;const nt=JSON.parse(Oe);Array.isArray(nt)&&ze(nt)}catch(Oe){console.error("Could not load order history",Oe)}},[]),b.useEffect(()=>{let Oe=!0;return(async()=>{try{const Ht=await Ne.getBestSellerProducts();Oe&&ve(Ht)}catch(Ht){console.error("Could not load best seller products",Ht)}finally{Oe&&yt(!1)}})(),()=>{Oe=!1}},[]);const In=C.address.trim(),Lr=C.mapUrl,pe=typeof Lr=="string"?Lr.trim():"",xe=pe.length>0,ie=!xe&&In.length>0?encodeURIComponent(In):"",Se=xe?pe:ie?`https://www.google.com/maps?q=${ie}`:"https://www.google.com/maps",Re=xe?wk(pe,"output","embed"):ie?`https://www.google.com/maps?q=${ie}&output=embed`:"about:blank",De=xe||ie.length>0,Ae=In.length>0?In:C.title,Ge=(Dn==null?void 0:Dn.orderId)??null,tt=rt.slice(0,6),ht=tt.length,mr=SU(ht),ao=NU(ht),$r=Oe=>{Oe.preventDefault(),n.length===6&&!l&&Wn(n)},ln=()=>{lA(),Nt(null)},En=Oe=>{localStorage.setItem("customer-order-reorder-id",Oe),m("/commande-client")};return c.jsxs("div",{className:"login-page",children:[c.jsx("header",{className:"login-header",style:B,children:c.jsxs("div",{className:"layout-container login-header__inner",style:F,children:[c.jsxs("div",{className:"login-brand",style:F,children:[c.jsx("img",{src:L,alt:`Logo ${j.brand}`,className:"login-brand__logo"}),be("navigation.brand","span",{className:"login-brand__name",style:fe("navigation.brand")},j.brand)]}),c.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[be("navigation.links.home","a",{href:"#accueil",className:"login-nav__link",style:de("navigation.links.home")},j.links.home),be("navigation.links.about","a",{href:"#apropos",className:"login-nav__link",style:de("navigation.links.about")},j.links.about),be("navigation.links.menu","a",{href:"#menu",className:"login-nav__link",style:de("navigation.links.menu")},j.links.menu),c.jsx("button",{type:"button",onClick:()=>t(!0),className:"login-nav__staff-btn","aria-label":j.links.loginCta,children:c.jsx("img",{src:K,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]}),c.jsx("button",{type:"button",onClick:()=>_t(!0),className:"login-header__menu","aria-label":"Ouvrir le menu",children:c.jsx(KA,{size:24})})]})}),bt&&c.jsxs("div",{className:"login-menu-overlay",role:"dialog","aria-modal":"true",style:B,children:[c.jsx("button",{type:"button",onClick:()=>_t(!1),className:"login-menu-overlay__close","aria-label":"Fermer le menu",children:c.jsx(da,{size:28})}),c.jsxs("nav",{className:"login-menu-overlay__nav","aria-label":"Navigation mobile",style:F,children:[be("navigation.links.home","a",{href:"#accueil",onClick:()=>_t(!1),className:"login-menu-overlay__link",style:de("navigation.links.home")},j.links.home),be("navigation.links.about","a",{href:"#apropos",onClick:()=>_t(!1),className:"login-menu-overlay__link",style:de("navigation.links.about")},j.links.about),be("navigation.links.menu","a",{href:"#menu",onClick:()=>_t(!1),className:"login-menu-overlay__link",style:de("navigation.links.menu")},j.links.menu),c.jsx("button",{type:"button",onClick:()=>{t(!0),_t(!1)},className:"login-nav__staff-btn login-menu-overlay__staff-btn","aria-label":j.links.loginCta,children:c.jsx("img",{src:K,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]})]}),c.jsxs("main",{children:[c.jsx("section",{id:"accueil",className:"section section-hero",style:{...z,...Q},children:c.jsx("div",{className:`section-hero__inner ${Ge?"section-hero__inner--compact":""}`.trim(),children:Ge?c.jsx(pU,{orderId:Ge,onNewOrderClick:ln,variant:"hero"}):c.jsxs("div",{className:"hero-content",style:Q,children:[be("hero.title","h2",{className:"hero-title",style:fe("hero.title")},S.title),be("hero.subtitle","p",{className:"hero-subtitle",style:de("hero.subtitle")},S.subtitle),c.jsx("div",{className:"hero-ordering-status",role:"status",children:R?c.jsxs("div",{className:"hero-ordering-status__badge",children:[c.jsx("span",{className:"hero-ordering-status__badge-pulse","aria-hidden":"true"}),c.jsxs("div",{className:"hero-ordering-status__badge-text",children:[c.jsx("span",{className:"hero-ordering-status__badge-title",children:k.onlineHighlight}),c.jsx("span",{className:"hero-ordering-status__badge-hours",children:k.activeHoursLabel})]})]}):c.jsxs("div",{className:"hero-ordering-status__card",children:[c.jsx("p",{className:"hero-ordering-status__card-title",children:k.offlineTitle}),c.jsx("p",{className:"hero-ordering-status__card-text",children:k.offlineSubtitle}),c.jsx("p",{className:"hero-ordering-status__card-hours",children:k.activeHoursLabel})]})}),c.jsxs("div",{className:"hero-cta-group",children:[c.jsx("button",{type:"button",onClick:()=>m("/commande-client"),className:I,style:X,disabled:!R,children:be("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:de("hero.ctaLabel")},S.ctaLabel)}),!R&&c.jsx("a",{href:"#menu",className:"hero-secondary-link",children:"Explorar el menú"})]}),je.length>0&&c.jsxs("div",{className:"hero-history",children:[be("hero.historyTitle","p",{className:"hero-history__title",style:de("hero.historyTitle")},S.historyTitle),c.jsx("div",{className:"hero-history__list",children:je.slice(0,3).map(Oe=>c.jsxs("div",{className:"hero-history__item",children:[c.jsxs("div",{className:"hero-history__meta",children:[c.jsxs("p",{className:"hero-history__date",style:H,children:["Pedido del ",new Date(Oe.date_creation).toLocaleDateString()]}),c.jsxs("p",{className:"hero-history__details",style:H,children:[Oe.items.length," article(s) • ",ge(Oe.total)]})]}),c.jsx("button",{type:"button",onClick:()=>En(Oe.id),className:"hero-history__cta",style:{...de("hero.reorderCtaLabel"),...we("hero.reorderCtaLabel")},children:be("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:de("hero.reorderCtaLabel")},S.reorderCtaLabel)})]},Oe.id))})]})]})})}),c.jsx("section",{id:"apropos",className:"section section-surface",style:{...$,...U},children:c.jsxs("div",{className:"section-inner section-inner--center",style:U,children:[be("about.title","h2",{className:"section-title",style:fe("about.title")},N.title),be("about.description","p",{className:"section-text section-text--muted",style:de("about.description")},N.description),N.image&&c.jsx("img",{src:N.image,alt:N.title,className:"mt-6 h-64 w-full rounded-xl object-cover shadow-lg"})]})}),c.jsx("section",{id:"menu",className:"section section-muted",style:{...ee,...W},children:c.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:W,children:[be("menu.title","h2",{className:"section-title",style:fe("menu.title")},O.title),O.image&&c.jsx("img",{src:O.image,alt:O.title,className:"mb-8 h-64 w-full rounded-xl object-cover shadow-lg"}),At?be("menu.loadingLabel","p",{className:"section-text section-text--muted",style:de("menu.loadingLabel")},O.loadingLabel):tt.length>0?c.jsx("div",{className:mr,children:tt.map(Oe=>c.jsxs("article",{className:ao,children:[c.jsx("img",{src:Oe.image,alt:Oe.nom_produit,className:"menu-card__media"}),c.jsxs("div",{className:"menu-card__body",children:[c.jsx("h3",{className:"menu-card__title",style:W,children:Oe.nom_produit}),c.jsx("p",{className:"menu-card__description",style:P,children:Oe.description}),c.jsx("p",{className:"menu-card__price",style:P,children:ge(Oe.prix_vente)})]})]},Oe.id))}):c.jsx("p",{className:"section-text section-text--muted",style:P,children:"Aucun produit best seller n'est disponible pour le moment."}),c.jsx("div",{className:"section-actions",children:c.jsx("button",{onClick:()=>m("/commande-client"),className:"ui-btn ui-btn-primary hero-cta",style:{...de("menu.ctaLabel"),...we("menu.ctaLabel")},children:be("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:de("menu.ctaLabel")},O.ctaLabel)})})]})}),c.jsx("section",{id:"find-us",className:"section section-surface",style:{...M,...G},children:c.jsxs("div",{className:"section-inner section-inner--wide find-us-grid",style:G,children:[c.jsxs("div",{className:"find-us-panel",style:G,children:[be("findUs.title","h2",{className:"section-title",style:fe("findUs.title")},C.title),c.jsxs("div",{className:"find-us-details",children:[c.jsxs("div",{className:"find-us-detail",style:G,children:[c.jsx(ul,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.addressLabel","h3",{className:"find-us-detail__title",style:fe("findUs.addressLabel")},C.addressLabel),be("findUs.address","p",{className:"find-us-detail__text",style:de("findUs.address")},C.address)]})]}),c.jsxs("div",{className:"find-us-detail",style:G,children:[c.jsx(Tl,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:fe("findUs.hoursLabel")},C.hoursLabel),be("findUs.hours","p",{className:"find-us-detail__text",style:de("findUs.hours")},C.hours)]})]}),c.jsxs("div",{className:"find-us-detail",style:G,children:[c.jsx(HA,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.cityLabel","h3",{className:"find-us-detail__title",style:fe("findUs.cityLabel")},C.cityLabel),be("findUs.city","p",{className:"find-us-detail__text",style:de("findUs.city")},C.city)]})]})]})]}),c.jsx("div",{className:"find-us-map",style:G,children:De?c.jsxs("div",{className:"find-us-map__frame",children:[c.jsx("iframe",{title:`Carte Google Maps pour ${Ae}`,src:Re,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),c.jsx("a",{className:"find-us-map__link",href:Se,target:"_blank",rel:"noopener noreferrer",children:be("findUs.mapLabel","span",{className:"find-us-map__label",style:de("findUs.mapLabel")},C.mapLabel)})]}):c.jsx("div",{className:"find-us-map__placeholder",children:be("findUs.mapLabel","span",{className:"find-us-map__label",style:de("findUs.mapLabel")},C.mapLabel)})})]})})]}),c.jsx("footer",{className:"site-footer",style:{...ne,...se},children:c.jsx("div",{className:"layout-container site-footer__inner",style:se,children:c.jsxs("p",{style:de("footer.text"),children:["© ",new Date().getFullYear()," ",j.brand,"."," ",be("footer.text","span",{style:de("footer.text")},A.text)]})})}),c.jsx(mn,{isOpen:e,onClose:()=>{t(!1),r(""),s("")},title:"Connexion du personnel",size:"lg",children:c.jsx("div",{className:"login-modal",children:c.jsx("form",{onSubmit:$r,className:"login-modal__form","aria-describedby":i?"staff-pin-error":void 0,children:c.jsxs("div",{className:"login-modal__panel",children:[c.jsx(jk,{ref:f,pin:n,onPinChange:r,pinLength:6,describedBy:i?"staff-pin-error":void 0,disabled:l}),i&&c.jsx("p",{id:"staff-pin-error",className:"login-modal__error",role:"alert","aria-live":"assertive",children:i})]})})})})]})};function Sk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Sk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ft(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Sk(e))&&(r&&(r+=" "),r+=t);return r}var iv={},sv={},T2;function OU(){return T2||(T2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(sv)),sv}var ov={},P2;function Nk(){return P2||(P2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(ov)),ov}var lv={},M2;function Ab(){return M2||(M2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(lv)),lv}var cv={},uv={},R2;function CU(){return R2||(R2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(uv)),uv}var D2;function kb(){return D2||(D2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CU(),n=Ab();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],l=i.length;if(l===0)return s;let d=0,f="",h="",m=!1;for(i.charCodeAt(0)===46&&(s.push(""),d++);d<l;){const g=i[d];h?g==="\\"&&d+1<l?(d++,f+=i[d]):g===h?h="":f+=g:m?g==='"'||g==="'"?h=g:g==="]"?(m=!1,s.push(f),f=""):f+=g:g==="["?(m=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,d++}return f&&s.push(f),s}e.toPath=r})(cv)),cv}var I2;function Tb(){return I2||(I2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OU(),n=Nk(),r=Ab(),i=kb();function s(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const m=d[f];return m===void 0?n.isDeepKey(f)?s(d,i.toPath(f),h):h:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=d[f];return m===void 0?h:m}default:{if(Array.isArray(f))return l(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const m=d[f];return m===void 0?h:m}}}function l(d,f,h){if(f.length===0)return h;let m=d;for(let g=0;g<f.length;g++){if(m==null||t.isUnsafeProperty(f[g]))return h;m=m[f[g]]}return m===void 0?h:m}e.get=s})(iv)),iv}var dv,L2;function AU(){return L2||(L2=1,dv=Tb().get),dv}var kU=AU();const Gs=Qr(kU);var fv={exports:{}},vt={};/**
 */var $2;function TU(){if($2)return vt;$2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function _(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case n:case i:case r:case f:case h:case v:return j;default:switch(j=j&&j.$$typeof,j){case l:case d:case g:case m:return j;case s:return j;default:return S}}case t:return S}}}return vt.ContextConsumer=s,vt.ContextProvider=l,vt.Element=e,vt.ForwardRef=d,vt.Fragment=n,vt.Lazy=g,vt.Memo=m,vt.Portal=t,vt.Profiler=i,vt.StrictMode=r,vt.Suspense=f,vt.SuspenseList=h,vt.isContextConsumer=function(j){return _(j)===s},vt.isContextProvider=function(j){return _(j)===l},vt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},vt.isForwardRef=function(j){return _(j)===d},vt.isFragment=function(j){return _(j)===n},vt.isLazy=function(j){return _(j)===g},vt.isMemo=function(j){return _(j)===m},vt.isPortal=function(j){return _(j)===t},vt.isProfiler=function(j){return _(j)===i},vt.isStrictMode=function(j){return _(j)===r},vt.isSuspense=function(j){return _(j)===f},vt.isSuspenseList=function(j){return _(j)===h},vt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===i||j===r||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===m||j.$$typeof===l||j.$$typeof===s||j.$$typeof===d||j.$$typeof===x||j.getModuleId!==void 0)},vt.typeOf=_,vt}var z2;function PU(){return z2||(z2=1,fv.exports=TU()),fv.exports}var MU=PU(),hn=e=>e===0?0:e>0?1:-1,ur=e=>typeof e=="number"&&e!=+e,Ls=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pe=e=>(typeof e=="number"||e instanceof Number)&&!ur(e),ha=e=>Pe(e)||typeof e=="string",RU=0,du=e=>{var t=++RU;return"".concat(e||"").concat(t)},kn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(t)&&typeof t!="string")return r;var s;if(Ls(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return ur(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Ek=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Nn(e,t,n){return Pe(e)&&Pe(t)?e+n*(t-e):t}function DU(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Gs(r,t))===n)}var pn=e=>e===null||typeof e>"u",ku=e=>pn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),IU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Pb(e){if(typeof e!="string")return!1;var t=IU;return t.includes(e)}var LU=["viewBox","children"],U2=["points","pathLength"],hv={svg:LU,polygon:U2,polyline:U2},$U=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Pb(i)&&(r[i]=(s=>n[i](n,s)))}),r},zU=(e,t,n)=>r=>(e(t,n,r),null),Tu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Pb(i)&&typeof s=="function"&&(r||(r={}),r[i]=zU(s,t,n))}),r},UU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Ok(e){if(typeof e!="string")return!1;var t=UU;return t.includes(e)}function Wi(e){var t=Object.entries(e).filter(n=>{var[r]=n;return Ok(r)});return Object.fromEntries(t)}var q2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",B2=null,mv=null,Ck=e=>{if(e===B2&&Array.isArray(mv))return mv;var t=[];return b.Children.forEach(e,n=>{pn(n)||(MU.isFragment(n)?t=t.concat(Ck(n.props.children)):t.push(n))}),mv=t,B2=e,t};function Mb(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>q2(i)):r=[q2(t)],Ck(e).forEach(i=>{var s=Gs(i,"type.displayName")||Gs(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var qU=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&(hv==null?void 0:hv[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),d=typeof e!="function"&&(!!r&&s.includes(t)||Ok(t)),f=!!n&&Pb(t);return l||d||f},rn=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;qU((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},BU=["children","width","height","viewBox","className","style","title","desc"];function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l0.apply(null,arguments)}function FU(e,t){if(e==null)return{};var n,r,i=HU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Rb=b.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:d,title:f,desc:h}=e,m=FU(e,BU),g=s||{width:r,height:i,x:0,y:0},v=ft("recharts-surface",l);return b.createElement("svg",l0({},rn(m,!0,"svg"),{className:v,width:r,height:i,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),b.createElement("title",null,f),b.createElement("desc",null,h),n)}),KU=["children","className"];function c0(){return c0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c0.apply(null,arguments)}function GU(e,t){if(e==null)return{};var n,r,i=YU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Vn=b.forwardRef((e,t)=>{var{children:n,className:r}=e,i=GU(e,KU),s=ft("recharts-layer",r);return b.createElement("g",c0({className:s},rn(i,!0),{ref:t}),n)}),Ak=b.createContext(null),VU=()=>b.useContext(Ak);function St(e){return function(){return e}}const kk=Math.cos,ih=Math.sin,Zr=Math.sqrt,sh=Math.PI,Wh=2*sh,u0=Math.PI,d0=2*u0,Ns=1e-6,WU=d0-Ns;function Tk(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XU(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Tk;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class QU{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Tk:XU(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,f=r-t,h=i-n,m=l-t,g=d-n,v=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(v>Ns)if(!(Math.abs(g*f-h*m)>Ns)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,_=i-d,j=f*f+h*h,S=x*x+_*_,N=Math.sqrt(j),O=Math.sqrt(v),C=s*Math.tan((u0-Math.acos((j+v-S)/(2*N*O)))/2),A=C/O,T=C/N;Math.abs(A-1)>Ns&&this._append`L${t+A*m},${n+A*g}`,this._append`A${s},${s},0,0,${+(g*x>m*_)},${this._x1=t+T*f},${this._y1=n+T*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let d=r*Math.cos(i),f=r*Math.sin(i),h=t+d,m=n+f,g=1^l,v=l?i-s:s-i;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>Ns||Math.abs(this._y1-m)>Ns)&&this._append`L${h},${m}`,r&&(v<0&&(v=v%d0+d0),v>WU?this._append`A${r},${r},0,1,${g},${t-d},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=m}`:v>Ns&&this._append`A${r},${r},0,${+(v>=u0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Db(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new QU(t)}function Ib(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pk(e){this._context=e}Pk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xh(e){return new Pk(e)}function Mk(e){return e[0]}function Rk(e){return e[1]}function Dk(e,t){var n=St(!0),r=null,i=Xh,s=null,l=Db(d);e=typeof e=="function"?e:e===void 0?Mk:St(e),t=typeof t=="function"?t:t===void 0?Rk:St(t);function d(f){var h,m=(f=Ib(f)).length,g,v=!1,x;for(r==null&&(s=i(x=l())),h=0;h<=m;++h)!(h<m&&n(g=f[h],h,f))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+e(g,h,f),+t(g,h,f));if(x)return s=null,x+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:St(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:St(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:St(!!f),d):n},d.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),d):i},d.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),d):r},d}function mf(e,t,n){var r=null,i=St(!0),s=null,l=Xh,d=null,f=Db(h);e=typeof e=="function"?e:e===void 0?Mk:St(+e),t=typeof t=="function"?t:St(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Rk:St(+n);function h(g){var v,x,_,j=(g=Ib(g)).length,S,N=!1,O,C=new Array(j),A=new Array(j);for(s==null&&(d=l(O=f())),v=0;v<=j;++v){if(!(v<j&&i(S=g[v],v,g))===N)if(N=!N)x=v,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),_=v-1;_>=x;--_)d.point(C[_],A[_]);d.lineEnd(),d.areaEnd()}N&&(C[v]=+e(S,v,g),A[v]=+t(S,v,g),d.point(r?+r(S,v,g):C[v],n?+n(S,v,g):A[v]))}if(O)return d=null,O+""||null}function m(){return Dk().defined(i).curve(l).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:St(+g),r=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:St(+g),h):e},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:St(+g),h):r},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:St(+g),n=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:St(+g),h):t},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:St(+g),h):n},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(n)},h.lineX1=function(){return m().x(r).y(t)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:St(!!g),h):i},h.curve=function(g){return arguments.length?(l=g,s!=null&&(d=l(s)),h):l},h.context=function(g){return arguments.length?(g==null?s=d=null:d=l(s=g),h):s},h}class Ik{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function JU(e){return new Ik(e,!0)}function ZU(e){return new Ik(e,!1)}const Lb={draw(e,t){const n=Zr(t/sh);e.moveTo(n,0),e.arc(0,0,n,0,Wh)}},eq={draw(e,t){const n=Zr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Lk=Zr(1/3),tq=Lk*2,nq={draw(e,t){const n=Zr(t/tq),r=n*Lk;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},rq={draw(e,t){const n=Zr(t),r=-n/2;e.rect(r,r,n,n)}},aq=.8908130915292852,$k=ih(sh/10)/ih(7*sh/10),iq=ih(Wh/10)*$k,sq=-kk(Wh/10)*$k,oq={draw(e,t){const n=Zr(t*aq),r=iq*n,i=sq*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Wh*s/5,d=kk(l),f=ih(l);e.lineTo(f*n,-d*n),e.lineTo(d*r-f*i,f*r+d*i)}e.closePath()}},pv=Zr(3),lq={draw(e,t){const n=-Zr(t/(pv*3));e.moveTo(0,n*2),e.lineTo(-pv*n,-n),e.lineTo(pv*n,-n),e.closePath()}},Nr=-.5,Er=Zr(3)/2,f0=1/Zr(12),cq=(f0/2+1)*3,uq={draw(e,t){const n=Zr(t/cq),r=n/2,i=n*f0,s=r,l=n*f0+n,d=-s,f=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(d,f),e.lineTo(Nr*r-Er*i,Er*r+Nr*i),e.lineTo(Nr*s-Er*l,Er*s+Nr*l),e.lineTo(Nr*d-Er*f,Er*d+Nr*f),e.lineTo(Nr*r+Er*i,Nr*i-Er*r),e.lineTo(Nr*s+Er*l,Nr*l-Er*s),e.lineTo(Nr*d+Er*f,Nr*f-Er*d),e.closePath()}};function dq(e,t){let n=null,r=Db(i);e=typeof e=="function"?e:St(e||Lb),t=typeof t=="function"?t:St(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:St(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:St(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function oh(){}function lh(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zk(e){this._context=e}zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fq(e){return new zk(e)}function Uk(e){this._context=e}Uk.prototype={areaStart:oh,areaEnd:oh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:lh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hq(e){return new Uk(e)}function qk(e){this._context=e}qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:lh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mq(e){return new qk(e)}function Bk(e){this._context=e}Bk.prototype={areaStart:oh,areaEnd:oh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pq(e){return new Bk(e)}function F2(e){return e<0?-1:1}function H2(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),d=(s*i+l*r)/(r+i);return(F2(s)+F2(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function K2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function gv(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,d=(s-r)/3;e._context.bezierCurveTo(r+d,i+d*t,s-d,l-d*n,s,l)}function ch(e){this._context=e}ch.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gv(this,this._t0,K2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gv(this,K2(this,n=H2(this,e,t)),n);break;default:gv(this,this._t0,n=H2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Fk(e){this._context=new Hk(e)}(Fk.prototype=Object.create(ch.prototype)).point=function(e,t){ch.prototype.point.call(this,t,e)};function Hk(e){this._context=e}Hk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function gq(e){return new ch(e)}function vq(e){return new Fk(e)}function Kk(e){this._context=e}Kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=G2(e),i=G2(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function G2(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function yq(e){return new Kk(e)}function Qh(e,t){this._context=e,this._t=t}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function bq(e){return new Qh(e,.5)}function xq(e){return new Qh(e,0)}function wq(e){return new Qh(e,1)}function pl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,d=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<d;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function h0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _q(e,t){return e[t]}function jq(e){const t=[];return t.key=e,t}function Sq(){var e=St([]),t=h0,n=pl,r=_q;function i(s){var l=Array.from(e.apply(this,arguments),jq),d,f=l.length,h=-1,m;for(const g of s)for(d=0,++h;d<f;++d)(l[d][h]=[0,+r(g,l[d].key,h,s)]).data=g;for(d=0,m=Ib(t(l));d<f;++d)l[m[d]].index=d;return n(l,m),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:St(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:St(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?h0:typeof s=="function"?s:St(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??pl,i):n},i}function Nq(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}pl(e,t)}}function Eq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,d=0;l<i;++l)d+=e[l][n][1]||0;r[n][1]+=r[n][0]=-d/2}pl(e,t)}}function Oq(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var d=0,f=0,h=0;d<l;++d){for(var m=e[t[d]],g=m[r][1]||0,v=m[r-1][1]||0,x=(g-v)/2,_=0;_<d;++_){var j=e[t[_]],S=j[r][1]||0,N=j[r-1][1]||0;x+=S-N}f+=g,h+=x*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,pl(e,t)}}var Cq=["type","size","sizeType"];function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m0.apply(null,arguments)}function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(r){Aq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aq(e,t,n){return(t=kq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pq(e,t){if(e==null)return{};var n,r,i=Mq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Gk={symbolCircle:Lb,symbolCross:eq,symbolDiamond:nq,symbolSquare:rq,symbolStar:oq,symbolTriangle:lq,symbolWye:uq},Rq=Math.PI/180,Dq=e=>{var t="symbol".concat(ku(e));return Gk[t]||Lb},Iq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Rq;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Lq=(e,t)=>{Gk["symbol".concat(ku(e))]=t},$b=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=Pq(e,Cq),s=V2(V2({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var d=()=>{var v=Dq(l),x=dq().type(v).size(Iq(n,r,l));return x()},{className:f,cx:h,cy:m}=s,g=rn(s,!0);return h===+h&&m===+m&&n===+n?b.createElement("path",m0({},g,{className:ft("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};$b.registerSymbol=Lq;function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p0.apply(null,arguments)}function W2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(n),!0).forEach(function(r){zb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zb(e,t,n){return(t=zq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=Uq(e,"string");return typeof t=="symbol"?t:t+""}function Uq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Or=32;class Ub extends b.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Or/2,s=Or/6,l=Or/3,d=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return b.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Or,y2:i,className:"recharts-legend-icon"});if(f==="line")return b.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return b.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Or/8,"h").concat(Or,"v").concat(Or*3/4,"h").concat(-Or,"z"),className:"recharts-legend-icon"});if(b.isValidElement(t.legendIcon)){var h=$q({},t);return delete h.legendIcon,b.cloneElement(t.legendIcon,h)}return b.createElement($b,{fill:d,cx:i,cy:i,size:Or,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,d={x:0,y:0,width:Or,height:Or},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var v=m.formatter||i,x=ft({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var _=m.inactive?s:m.color,j=v?v(m.value,m,g):m.value;return b.createElement("li",p0({className:x,style:f,key:"legend-item-".concat(g)},Tu(this.props,m,g)),b.createElement(Rb,{width:n,height:n,viewBox:d,style:h,"aria-label":"".concat(j," legend icon")},this.renderIcon(m,l)),b.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},j))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return b.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}zb(Ub,"displayName","Legend");zb(Ub,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vv={},yv={},X2;function qq(){return X2||(X2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],d=r(l);i.has(d)||i.set(d,l)}return Array.from(i.values())}e.uniqBy=t})(yv)),yv}var bv={},Q2;function Yk(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(bv)),bv}var xv={},wv={},_v={},J2;function Bq(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(_v)),_v}var Z2;function qb(){return Z2||(Z2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bq();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(wv)),wv}var jv={},eN;function Fq(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(jv)),jv}var tN;function Hq(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qb(),n=Fq();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(xv)),xv}var Sv={},Nv={},nN;function Kq(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tb();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Nv)),Nv}var Ev={},Ov={},Cv={},Av={},rN;function Vk(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Av)),Av}var kv={},aN;function Wk(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(kv)),kv}var Tv={},iN;function Xk(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Tv)),Tv}var sN;function Gq(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bb(),n=Vk(),r=Wk(),i=Xk();function s(g,v,x){return typeof x!="function"?t.isMatch(g,v):l(g,v,function _(j,S,N,O,C,A){const T=x(j,S,N,O,C,A);return T!==void 0?!!T:l(j,S,_,A)},new Map)}function l(g,v,x,_){if(v===g)return!0;switch(typeof v){case"object":return d(g,v,x,_);case"function":return Object.keys(v).length>0?l(g,{...v},x,_):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function d(g,v,x,_){if(v==null)return!0;if(Array.isArray(v))return h(g,v,x,_);if(v instanceof Map)return f(g,v,x,_);if(v instanceof Set)return m(g,v,x,_);const j=Object.keys(v);if(g==null)return j.length===0;if(j.length===0)return!0;if(_&&_.has(v))return _.get(v)===g;_&&_.set(v,g);try{for(let S=0;S<j.length;S++){const N=j[S];if(!r.isPrimitive(g)&&!(N in g)||v[N]===void 0&&g[N]!==void 0||v[N]===null&&g[N]!==null||!x(g[N],v[N],N,g,v,_))return!1}return!0}finally{_&&_.delete(v)}}function f(g,v,x,_){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[j,S]of v.entries()){const N=g.get(j);if(x(N,S,j,g,v,_)===!1)return!1}return!0}function h(g,v,x,_){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const j=new Set;for(let S=0;S<v.length;S++){const N=v[S];let O=!1;for(let C=0;C<g.length;C++){if(j.has(C))continue;const A=g[C];let T=!1;if(x(A,N,S,g,v,_)&&(T=!0),T){j.add(C),O=!0;break}}if(!O)return!1}return!0}function m(g,v,x,_){return v.size===0?!0:g instanceof Set?h([...g],[...v],x,_):!1}e.isMatchWith=s,e.isSetMatch=m})(Cv)),Cv}var oN;function Bb(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gq();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Ov)),Ov}var Pv={},Mv={},Rv={},lN;function Yq(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Rv)),Rv}var Dv={},cN;function Qk(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Dv)),Dv}var Iv={},uN;function Jk(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",d="[object Date]",f="[object Map]",h="[object Set]",m="[object Array]",g="[object Function]",v="[object ArrayBuffer]",x="[object Object]",_="[object Error]",j="[object DataView]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",C="[object Uint32Array]",A="[object BigUint64Array]",T="[object Int8Array]",k="[object Int16Array]",R="[object Int32Array]",L="[object BigInt64Array]",K="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=v,e.arrayTag=m,e.bigInt64ArrayTag=L,e.bigUint64ArrayTag=A,e.booleanTag=i,e.dataViewTag=j,e.dateTag=d,e.errorTag=_,e.float32ArrayTag=K,e.float64ArrayTag=B,e.functionTag=g,e.int16ArrayTag=k,e.int32ArrayTag=R,e.int8ArrayTag=T,e.mapTag=f,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=N})(Iv)),Iv}var Lv={},dN;function Vq(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Lv)),Lv}var fN;function Zk(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yq(),n=Qk(),r=Jk(),i=Wk(),s=Vq();function l(m,g){return d(m,void 0,m,new Map,g)}function d(m,g,v,x=new Map,_=void 0){const j=_==null?void 0:_(m,g,v,x);if(j!==void 0)return j;if(i.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const S=new Array(m.length);x.set(m,S);for(let N=0;N<m.length;N++)S[N]=d(m[N],N,v,x,_);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;x.set(m,S);for(const[N,O]of m)S.set(N,d(O,N,v,x,_));return S}if(m instanceof Set){const S=new Set;x.set(m,S);for(const N of m)S.add(d(N,void 0,v,x,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(s.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,S);for(let N=0;N<m.length;N++)S[N]=d(m[N],N,v,x,_);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,S),f(S,m,v,x,_),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return x.set(m,S),f(S,m,v,x,_),S}if(typeof Blob<"u"&&m instanceof Blob){const S=new Blob([m],{type:m.type});return x.set(m,S),f(S,m,v,x,_),S}if(m instanceof Error){const S=new m.constructor;return x.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,f(S,m,v,x,_),S}if(m instanceof Boolean){const S=new Boolean(m.valueOf());return x.set(m,S),f(S,m,v,x,_),S}if(m instanceof Number){const S=new Number(m.valueOf());return x.set(m,S),f(S,m,v,x,_),S}if(m instanceof String){const S=new String(m.valueOf());return x.set(m,S),f(S,m,v,x,_),S}if(typeof m=="object"&&h(m)){const S=Object.create(Object.getPrototypeOf(m));return x.set(m,S),f(S,m,v,x,_),S}return m}function f(m,g,v=m,x,_){const j=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<j.length;S++){const N=j[S],O=Object.getOwnPropertyDescriptor(m,N);(O==null||O.writable)&&(m[N]=d(g[N],N,v,x,_))}}function h(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=f})(Mv)),Mv}var hN;function Wq(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zk();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Pv)),Pv}var mN;function Xq(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bb(),n=Wq();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Ev)),Ev}var $v={},zv={},Uv={},pN;function Qq(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zk(),n=Jk();function r(i,s){return t.cloneDeepWith(i,(l,d,f,h)=>{const m=s==null?void 0:s(l,d,f,h);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(Uv)),Uv}var gN;function Jq(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qq();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(zv)),zv}var qv={},Bv={},vN;function eT(){return vN||(vN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Bv)),Bv}var Fv={},yN;function Zq(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qk();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Fv)),Fv}var bN;function e7(){return bN||(bN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk(),n=eT(),r=Zq(),i=kb();function s(l,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&(l==null?void 0:l[d])==null?f=i.toPath(d):f=[d],f.length===0)return!1;let h=l;for(let m=0;m<f.length;m++){const g=f[m];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(qv)),qv}var xN;function t7(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bb(),n=Ab(),r=Jq(),i=Tb(),s=e7();function l(d,f){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return f=r.cloneDeep(f),function(h){const m=i.get(h,d);return m===void 0?s.has(h,d):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=l})($v)),$v}var wN;function n7(){return wN||(wN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yk(),n=Kq(),r=Xq(),i=t7();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Sv)),Sv}var _N;function r7(){return _N||(_N=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qq(),n=Yk(),r=Hq(),i=n7();function s(l,d=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(d)):[]}e.uniqBy=s})(vv)),vv}var Hv,jN;function a7(){return jN||(jN=1,Hv=r7().uniqBy),Hv}var i7=a7();const SN=Qr(i7);function tT(e,t,n){return t===!0?SN(e,n):typeof t=="function"?SN(e,t):e}var Kv={exports:{}},Gv={},Yv={exports:{}},Vv={};/**
 */var ON;function l7(){if(ON)return Gv;ON=1;var e=El(),t=o7();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,d=e.useMemo,f=e.useDebugValue;return Gv.useSyncExternalStoreWithSelector=function(h,m,g,v,x){var _=s(null);if(_.current===null){var j={hasValue:!1,value:null};_.current=j}else j=_.current;_=d(function(){function N(k){if(!O){if(O=!0,C=k,k=v(k),x!==void 0&&j.hasValue){var R=j.value;if(x(R,k))return A=R}return A=k}if(R=A,r(C,k))return R;var L=v(k);return x!==void 0&&x(R,L)?(C=k,R):(C=k,A=L)}var O=!1,C,A,T=g===void 0?null:g;return[function(){return N(m())},T===null?void 0:function(){return N(T())}]},[m,g,v,x]);var S=i(h,_[0],_[1]);return l(function(){j.hasValue=!0,j.value=S},[S]),f(S),S},Gv}var CN;function c7(){return CN||(CN=1,Kv.exports=l7()),Kv.exports}var u7=c7(),Fb=b.createContext(null),d7=e=>e,Lt=()=>{var e=b.useContext(Fb);return e?e.store.dispatch:d7},Gf=()=>{},f7=()=>Gf,h7=(e,t)=>e===t;function Te(e){var t=b.useContext(Fb);return u7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:f7,t?t.store.getState:Gf,t?t.store.getState:Gf,t?e:Gf,h7)}function m7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function p7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function g7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var AN=e=>Array.isArray(e)?e:[e];function v7(e){const t=Array.isArray(e[0])?e[0]:e;return g7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function y7(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var b7=class{constructor(e){this.value=e}deref(){return this.value}},x7=typeof WeakRef<"u"?WeakRef:b7,w7=0,kN=1;function pf(){return{s:w7,v:void 0,o:null,p:null}}function nT(e,t={}){let n=pf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){var g;let d=n;const{length:f}=arguments;for(let v=0,x=f;v<x;v++){const _=arguments[v];if(typeof _=="function"||typeof _=="object"&&_!==null){let j=d.o;j===null&&(d.o=j=new WeakMap);const S=j.get(_);S===void 0?(d=pf(),j.set(_,d)):d=S}else{let j=d.p;j===null&&(d.p=j=new Map);const S=j.get(_);S===void 0?(d=pf(),j.set(_,d)):d=S}}const h=d;let m;if(d.s===kN)m=d.v;else if(m=e.apply(null,arguments),s++,r){const v=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;v!=null&&r(v,m)&&(m=v,s!==0&&s--),i=typeof m=="object"&&m!==null||typeof m=="function"?new x7(m):m}return h.s=kN,h.v=m,m}return l.clearCache=()=>{n=pf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function _7(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,d,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),m7(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...f},{memoize:g,memoizeOptions:v=[],argsMemoize:x=nT,argsMemoizeOptions:_=[]}=m,j=AN(v),S=AN(_),N=v7(i),O=g(function(){return s++,h.apply(null,arguments)},...j),C=x(function(){l++;const T=y7(N,arguments);return d=O.apply(null,T),d},...S);return Object.assign(C,{resultFunc:h,memoizedResultFunc:O,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var re=_7(nT),j7=Object.assign((e,t=re)=>{p7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,d,f)=>(l[n[f]]=d,l),{}))},{withTypes:()=>j7}),Wv={},Xv={},Qv={},TN;function S7(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),d=t(i);if(l===d&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?d-l:l-d}return 0};e.compareValues=n})(Qv)),Qv}var Jv={},Zv={},PN;function rT(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Zv)),Zv}var MN;function N7(){return MN||(MN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Jv)),Jv}var RN;function E7(){return RN||(RN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S7(),n=N7(),r=kb();function i(s,l,d,f){if(s==null)return[];d=f?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const h=(x,_)=>{let j=x;for(let S=0;S<_.length&&j!=null;++S)j=j[_[S]];return j},m=(x,_)=>_==null||x==null?_:typeof x=="object"&&"key"in x?Object.hasOwn(_,x.key)?_[x.key]:h(_,x.path):typeof x=="function"?x(_):Array.isArray(x)?h(_,x):typeof _=="object"?_[x]:_,g=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(_=>m(_,x))})).slice().sort((x,_)=>{for(let j=0;j<g.length;j++){const S=t.compareValues(x.criteria[j],_.criteria[j],d[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(Xv)),Xv}var ey={},DN;function O7(){return DN||(DN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(d,f)=>{for(let h=0;h<d.length;h++){const m=d[h];Array.isArray(m)&&f<s?l(m,f+1):i.push(m)}};return l(n,0),i}e.flatten=t})(ey)),ey}var ty={},IN;function aT(){return IN||(IN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eT(),n=qb(),r=Vk(),i=Xk();function s(l,d,f){return r.isObject(f)&&(typeof d=="number"&&n.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?i.eq(f[d],l):!1}e.isIterateeCall=s})(ty)),ty}var LN;function C7(){return LN||(LN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7(),n=O7(),r=aT();function i(s,...l){const d=l.length;return d>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:d>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Wv)),Wv}var ny,$N;function A7(){return $N||($N=1,ny=C7().sortBy),ny}var k7=A7();const Jh=Qr(k7);var iT=e=>e.legend.settings,T7=e=>e.legend.size,P7=e=>e.legend.payload,M7=re([P7,iT],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Jh(r,n):r});function R7(){return Te(M7)}var gf=1;function sT(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=b.useState({height:0,left:0,top:0,width:0}),r=b.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>gf||Math.abs(l.left-t.left)>gf||Math.abs(l.top-t.top)>gf||Math.abs(l.width-t.width)>gf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function jn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var D7=typeof Symbol=="function"&&Symbol.observable||"@@observable",zN=D7,ry=()=>Math.random().toString(36).substring(7).split("").join("."),I7={INIT:`@@redux/INIT${ry()}`,REPLACE:`@@redux/REPLACE${ry()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ry()}`},uh=I7;function Hb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function oT(e,t,n){if(typeof e!="function")throw new Error(jn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jn(1));return n(oT)(e,t)}let r=e,i=t,s=new Map,l=s,d=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((S,N)=>{l.set(N,S)}))}function m(){if(f)throw new Error(jn(3));return i}function g(S){if(typeof S!="function")throw new Error(jn(4));if(f)throw new Error(jn(5));let N=!0;h();const O=d++;return l.set(O,S),function(){if(N){if(f)throw new Error(jn(6));N=!1,h(),l.delete(O),s=null}}}function v(S){if(!Hb(S))throw new Error(jn(7));if(typeof S.type>"u")throw new Error(jn(8));if(typeof S.type!="string")throw new Error(jn(17));if(f)throw new Error(jn(9));try{f=!0,i=r(i,S)}finally{f=!1}return(s=l).forEach(O=>{O()}),S}function x(S){if(typeof S!="function")throw new Error(jn(10));r=S,v({type:uh.REPLACE})}function _(){const S=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(jn(11));function O(){const A=N;A.next&&A.next(m())}return O(),{unsubscribe:S(O)}},[zN](){return this}}}return v({type:uh.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:x,[zN]:_}}function L7(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:uh.INIT})>"u")throw new Error(jn(12));if(typeof n(void 0,{type:uh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jn(13))})}function lT(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{L7(n)}catch(s){i=s}return function(l={},d){if(i)throw i;let f=!1;const h={};for(let m=0;m<r.length;m++){const g=r[m],v=n[g],x=l[g],_=v(x,d);if(typeof _>"u")throw d&&d.type,new Error(jn(14));h[g]=_,f=f||_!==x}return f=f||r.length!==Object.keys(l).length,f?h:l}}function dh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function $7(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(jn(15))};const l={getState:i.getState,dispatch:(f,...h)=>s(f,...h)},d=e.map(f=>f(l));return s=dh(...d)(i.dispatch),{...i,dispatch:s}}}function cT(e){return Hb(e)&&"type"in e&&typeof e.type=="string"}var uT=Symbol.for("immer-nothing"),UN=Symbol.for("immer-draftable"),dr=Symbol.for("immer-state");function Yr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gl=Object.getPrototypeOf;function Ys(e){return!!e&&!!e[dr]}function Wa(e){var t;return e?dT(e)||Array.isArray(e)||!!e[UN]||!!((t=e.constructor)!=null&&t[UN])||Pu(e)||em(e):!1}var z7=Object.prototype.constructor.toString();function dT(e){if(!e||typeof e!="object")return!1;const t=gl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===z7}function fh(e,t){Zh(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Zh(e){const t=e[dr];return t?t.type_:Array.isArray(e)?1:Pu(e)?2:em(e)?3:0}function g0(e,t){return Zh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fT(e,t,n){const r=Zh(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function U7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pu(e){return e instanceof Map}function em(e){return e instanceof Set}function Es(e){return e.copy_||e.base_}function v0(e,t){if(Pu(e))return new Map(e);if(em(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=dT(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[dr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],d=r[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(gl(e),r)}else{const r=gl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Kb(e,t=!1){return tm(e)||Ys(e)||!Wa(e)||(Zh(e)>1&&Object.defineProperties(e,{set:{value:vf},add:{value:vf},clear:{value:vf},delete:{value:vf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Kb(n,!0))),e}function vf(){Yr(2)}function tm(e){return Object.isFrozen(e)}var q7={};function Vs(e){const t=q7[e];return t||Yr(0,e),t}var fu;function hT(){return fu}function B7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qN(e,t){t&&(Vs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function y0(e){b0(e),e.drafts_.forEach(F7),e.drafts_=null}function b0(e){e===fu&&(fu=e.parent_)}function BN(e){return fu=B7(fu,e)}function F7(e){const t=e[dr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function FN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[dr].modified_&&(y0(t),Yr(4)),Wa(e)&&(e=hh(t,e),t.parent_||mh(t,e)),t.patches_&&Vs("Patches").generateReplacementPatches_(n[dr].base_,e,t.patches_,t.inversePatches_)):e=hh(t,n,[]),y0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uT?e:void 0}function hh(e,t,n){if(tm(t))return t;const r=t[dr];if(!r)return fh(t,(i,s)=>HN(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return mh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),fh(s,(d,f)=>HN(e,r,i,d,f,n,l)),mh(e,i,!1),n&&e.patches_&&Vs("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function HN(e,t,n,r,i,s,l){if(Ys(i)){const d=s&&t&&t.type_!==3&&!g0(t.assigned_,r)?s.concat(r):void 0,f=hh(e,i,d);if(fT(n,r,f),Ys(f))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Wa(i)&&!tm(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hh(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Pu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&mh(e,i)}}function mh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Kb(t,n)}function H7(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Gb;n&&(i=[r],s=hu);const{revoke:l,proxy:d}=Proxy.revocable(i,s);return r.draft_=d,r.revoke_=l,d}var Gb={get(e,t){if(t===dr)return e;const n=Es(e);if(!g0(n,t))return K7(e,n,t);const r=n[t];return e.finalized_||!Wa(r)?r:r===ay(e.base_,t)?(iy(e),e.copy_[t]=w0(r,e)):r},has(e,t){return t in Es(e)},ownKeys(e){return Reflect.ownKeys(Es(e))},set(e,t,n){const r=mT(Es(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=ay(Es(e),t),s=i==null?void 0:i[dr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(U7(n,i)&&(n!==void 0||g0(e.base_,t)))return!0;iy(e),x0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ay(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,iy(e),x0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Es(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Yr(11)},getPrototypeOf(e){return gl(e.base_)},setPrototypeOf(){Yr(12)}},hu={};fh(Gb,(e,t)=>{hu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hu.deleteProperty=function(e,t){return hu.set.call(this,e,t,void 0)};hu.set=function(e,t,n){return Gb.set.call(this,e[0],t,n,e[0])};function ay(e,t){const n=e[dr];return(n?Es(n):e)[t]}function K7(e,t,n){var i;const r=mT(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function mT(e,t){if(!(t in e))return;let n=gl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=gl(n)}}function x0(e){e.modified_||(e.modified_=!0,e.parent_&&x0(e.parent_))}function iy(e){e.copy_||(e.copy_=v0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var G7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(f=s,...h){return l.produce(f,m=>n.call(this,m,...h))}}typeof n!="function"&&Yr(6),r!==void 0&&typeof r!="function"&&Yr(7);let i;if(Wa(t)){const s=BN(this),l=w0(t,void 0);let d=!0;try{i=n(l),d=!1}finally{d?y0(s):b0(s)}return qN(s,r),FN(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===uT&&(i=void 0),this.autoFreeze_&&Kb(i,!0),r){const s=[],l=[];Vs("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else Yr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,f=>t(f,...d));let r,i;return[this.produce(t,n,(l,d)=>{r=l,i=d}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Wa(e)||Yr(8),Ys(e)&&(e=Ha(e));const t=BN(this),n=w0(e,void 0);return n[dr].isManual_=!0,b0(t),n}finishDraft(e,t){const n=e&&e[dr];(!n||!n.isManual_)&&Yr(9);const{scope_:r}=n;return qN(r,t),FN(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Vs("Patches").applyPatches_;return Ys(e)?r(e,t):this.produce(e,i=>r(i,t))}};function w0(e,t){const n=Pu(e)?Vs("MapSet").proxyMap_(e,t):em(e)?Vs("MapSet").proxySet_(e,t):H7(e,t);return(t?t.scope_:hT()).drafts_.push(n),n}function Ha(e){return Ys(e)||Yr(10,e),pT(e)}function pT(e){if(!Wa(e)||tm(e))return e;const t=e[dr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=v0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=v0(e,!0);return fh(n,(r,i)=>{fT(n,r,pT(i))}),t&&(t.finalized_=!1),n}var Y7=new G7,gT=Y7.produce;function vT(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var V7=vT(),W7=vT,X7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dh:dh.apply(null,arguments)};function Pr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(lr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>cT(r)&&r.type===e,n}var yT=class Gc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gc.prototype)}static get[Symbol.species](){return Gc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gc(...t[0].concat(this)):new Gc(...t.concat(this))}};function KN(e){return Wa(e)?gT(e,()=>{}):e}function yf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Q7(e){return typeof e=="boolean"}var J7=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new yT;return n&&(Q7(n)?l.push(V7):l.push(W7(n.extraArgument))),l},Z7="RTK_autoBatch",GN=e=>t=>{setTimeout(t,e)},e9=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:GN(10):e.type==="callback"?e.queueNotification:GN(e.timeout),h=()=>{l=!1,s&&(s=!1,d.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const g=()=>i&&m(),v=r.subscribe(g);return d.add(m),()=>{v(),d.delete(m)}},dispatch(m){var g;try{return i=!((g=m==null?void 0:m.meta)!=null&&g[Z7]),s=!i,s&&(l||(l=!0,f(h))),r.dispatch(m)}finally{i=!0}}})},t9=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new yT(e);return r&&i.push(e9(typeof r=="object"?r:void 0)),i};function n9(e){const t=J7(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(Hb(n))d=lT(n);else throw new Error(lr(1));let f;typeof r=="function"?f=r(t):f=t();let h=dh;i&&(h=X7({trace:!1,...typeof i=="object"&&i}));const m=$7(...f),g=t9(m);let v=typeof l=="function"?l(g):g();const x=h(...v);return oT(d,s,x)}function bT(e){const t={},n=[];let r;const i={addCase(s,l){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(lr(28));if(d in t)throw new Error(lr(29));return t[d]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function r9(e){return typeof e=="function"}function a9(e,t){let[n,r,i]=bT(t),s;if(r9(e))s=()=>KN(e());else{const d=KN(e);s=()=>d}function l(d=s(),f){let h=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[i]),h.reduce((m,g)=>{if(g)if(Ys(m)){const x=g(m,f);return x===void 0?m:x}else{if(Wa(m))return gT(m,v=>g(v,f));{const v=g(m,f);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},d)}return l.getInitialState=s,l}var i9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",s9=(e=21)=>{let t="",n=e;for(;n--;)t+=i9[Math.random()*64|0];return t},o9=Symbol.for("rtk-slice-createasyncthunk");function l9(e,t){return`${e}/${t}`}function c9({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[o9];return function(i){const{name:s,reducerPath:l=s}=i;if(!s)throw new Error(lr(11));const d=(typeof i.reducers=="function"?i.reducers(d9()):i.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(A,T){const k=typeof A=="string"?A:A.type;if(!k)throw new Error(lr(12));if(k in h.sliceCaseReducersByType)throw new Error(lr(13));return h.sliceCaseReducersByType[k]=T,m},addMatcher(A,T){return h.sliceMatchers.push({matcher:A,reducer:T}),m},exposeAction(A,T){return h.actionCreators[A]=T,m},exposeCaseReducer(A,T){return h.sliceCaseReducersByName[A]=T,m}};f.forEach(A=>{const T=d[A],k={reducerName:A,type:l9(s,A),createNotation:typeof i.reducers=="function"};h9(T)?p9(k,T,m,t):f9(k,T,m)});function g(){const[A={},T=[],k=void 0]=typeof i.extraReducers=="function"?bT(i.extraReducers):[i.extraReducers],R={...A,...h.sliceCaseReducersByType};return a9(i.initialState,L=>{for(let K in R)L.addCase(K,R[K]);for(let K of h.sliceMatchers)L.addMatcher(K.matcher,K.reducer);for(let K of T)L.addMatcher(K.matcher,K.reducer);k&&L.addDefaultCase(k)})}const v=A=>A,x=new Map,_=new WeakMap;let j;function S(A,T){return j||(j=g()),j(A,T)}function N(){return j||(j=g()),j.getInitialState()}function O(A,T=!1){function k(L){let K=L[A];return typeof K>"u"&&T&&(K=yf(_,k,N)),K}function R(L=v){const K=yf(x,T,()=>new WeakMap);return yf(K,L,()=>{const B={};for(const[F,z]of Object.entries(i.selectors??{}))B[F]=u9(z,L,()=>yf(_,L,N),T);return B})}return{reducerPath:A,getSelectors:R,get selectors(){return R(k)},selectSlice:k}}const C={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...O(l),injectInto(A,{reducerPath:T,...k}={}){const R=T??l;return A.inject({reducerPath:R,reducer:S},k),{...C,...O(R,!0)}}};return C}}function u9(e,t,n,r){function i(s,...l){let d=t(s);return typeof d>"u"&&r&&(d=n()),e(d,...l)}return i.unwrapped=e,i}var hr=c9();function d9(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function f9({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!m9(r))throw new Error(lr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Pr(e,l):Pr(e))}function h9(e){return e._reducerDefinitionType==="asyncThunk"}function m9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function p9({type:e,reducerName:t},n,r,i){if(!i)throw new Error(lr(18));const{payloadCreator:s,fulfilled:l,pending:d,rejected:f,settled:h,options:m}=n,g=i(e,s,m);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),d&&r.addCase(g.pending,d),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(t,{fulfilled:l||bf,pending:d||bf,rejected:f||bf,settled:h||bf})}function bf(){}var g9="task",xT="listener",wT="completed",Yb="cancelled",v9=`task-${Yb}`,y9=`task-${wT}`,_0=`${xT}-${Yb}`,b9=`${xT}-${wT}`,nm=class{constructor(e){Ug(this,"name","TaskAbortError");Ug(this,"message");this.code=e,this.message=`${g9} ${Yb} (reason: ${e})`}},Vb=(e,t)=>{if(typeof e!="function")throw new TypeError(lr(32))},ph=()=>{},_T=(e,t=ph)=>(e.catch(t),e),jT=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Bs=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Fs=e=>{if(e.aborted){const{reason:t}=e;throw new nm(t)}};function ST(e,t){let n=ph;return new Promise((r,i)=>{const s=()=>i(new nm(e.reason));if(e.aborted){s();return}n=jT(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=ph})}var x9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof nm?"cancelled":"rejected",error:n}}finally{t==null||t()}},gh=e=>t=>_T(ST(e,t).then(n=>(Fs(e),n))),NT=e=>{const t=gh(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:fl}=Object,YN={},rm="listenerMiddleware",w9=(e,t)=>{const n=r=>jT(e,()=>Bs(r,e.reason));return(r,i)=>{Vb(r);const s=new AbortController;n(s);const l=x9(async()=>{Fs(e),Fs(s.signal);const d=await r({pause:gh(s.signal),delay:NT(s.signal),signal:s.signal});return Fs(s.signal),d},()=>Bs(s,y9));return i!=null&&i.autoJoin&&t.push(l.catch(ph)),{result:gh(e)(l),cancel(){Bs(s,v9)}}}},_9=(e,t)=>{const n=async(r,i)=>{Fs(t);let s=()=>{};const d=[new Promise((f,h)=>{let m=e({predicate:r,effect:(g,v)=>{v.unsubscribe(),f([g,v.getState(),v.getOriginalState()])}});s=()=>{m(),h()}})];i!=null&&d.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await ST(t,Promise.race(d));return Fs(t),f}finally{s()}};return(r,i)=>_T(n(r,i))},ET=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Pr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(lr(21));return Vb(s),{predicate:i,type:t,effect:s}},OT=fl(e=>{const{type:t,predicate:n,effect:r}=ET(e);return{id:s9(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(lr(22))}}},{withTypes:()=>OT}),VN=(e,t)=>{const{type:n,effect:r,predicate:i}=ET(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},j0=e=>{e.pending.forEach(t=>{Bs(t,_0)})},j9=e=>()=>{e.forEach(j0),e.clear()},WN=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},CT=fl(Pr(`${rm}/add`),{withTypes:()=>CT}),S9=Pr(`${rm}/removeAll`),AT=fl(Pr(`${rm}/remove`),{withTypes:()=>AT}),N9=(...e)=>{console.error(`${rm}/error`,...e)},Mu=(e={})=>{const t=new Map,{extra:n,onError:r=N9}=e;Vb(r);const i=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&j0(m)}),s=m=>{const g=VN(t,m)??OT(m);return i(g)};fl(s,{withTypes:()=>s});const l=m=>{const g=VN(t,m);return g&&(g.unsubscribe(),m.cancelActive&&j0(g)),!!g};fl(l,{withTypes:()=>l});const d=async(m,g,v,x)=>{const _=new AbortController,j=_9(s,_.signal),S=[];try{m.pending.add(_),await Promise.resolve(m.effect(g,fl({},v,{getOriginalState:x,condition:(N,O)=>j(N,O).then(Boolean),take:j,delay:NT(_.signal),pause:gh(_.signal),extra:n,signal:_.signal,fork:w9(_.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,O,C)=>{N!==_&&(Bs(N,_0),C.delete(N))})},cancel:()=>{Bs(_,_0),m.pending.delete(_)},throwIfCancelled:()=>{Fs(_.signal)}})))}catch(N){N instanceof nm||WN(r,N,{raisedBy:"effect"})}finally{await Promise.all(S),Bs(_,b9),m.pending.delete(_)}},f=j9(t);return{middleware:m=>g=>v=>{if(!cT(v))return g(v);if(CT.match(v))return s(v.payload);if(S9.match(v)){f();return}if(AT.match(v))return l(v.payload);let x=m.getState();const _=()=>{if(x===YN)throw new Error(lr(23));return x};let j;try{if(j=g(v),t.size>0){const S=m.getState(),N=Array.from(t.values());for(const O of N){let C=!1;try{C=O.predicate(v,S,x)}catch(A){C=!1,WN(r,A,{raisedBy:"predicate"})}C&&d(O,v,m,_)}}}finally{x=YN}return j},startListening:s,stopListening:l,clearListeners:f}};function lr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var E9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},kT=hr({name:"chartLayout",initialState:E9,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:O9,setLayout:C9,setChartSize:A9,setScale:k9}=kT.actions,T9=kT.reducer;function XN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(n),!0).forEach(function(r){P9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P9(e,t,n){return(t=M9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vh=Math.PI/180,D9=e=>e*180/Math.PI,Jt=(e,t,n,r)=>({x:e+Math.cos(-vh*r)*n,y:t+Math.sin(-vh*r)*n}),TT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},I9=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},L9=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=I9({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var d=(n-i)/l,f=Math.acos(d);return r>s&&(f=2*Math.PI-f),{radius:l,angle:D9(f),angleInRadian:f}},$9=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},z9=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},U9=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=L9({x:n,y:r},t),{innerRadius:l,outerRadius:d}=t;if(i<l||i>d||i===0)return null;var{startAngle:f,endAngle:h}=$9(t),m=s,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?QN(QN({},t),{},{radius:i,angle:z9(m,t)}):null};function PT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function JN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(n),!0).forEach(function(r){q9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q9(e,t,n){return(t=B9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=F9(e,"string");return typeof t=="symbol"?t:t+""}function F9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function It(e,t,n){return pn(e)||pn(t)?n:ha(t)?Gs(e,t,n):typeof t=="function"?t(e):n}var H9=(e,t,n,r,i)=>{var s,l=-1,d=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(d<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<d;f++){var h=f>0?n[f-1].coordinate:n[d-1].coordinate,m=n[f].coordinate,g=f>=d-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(hn(m-h)!==hn(g-m)){var x=[];if(hn(g-m)===hn(i[1]-i[0])){v=g;var _=m+i[1]-i[0];x[0]=Math.min(_,(_+h)/2),x[1]=Math.max(_,(_+h)/2)}else{v=h;var j=g+i[1]-i[0];x[0]=Math.min(m,(j+m)/2),x[1]=Math.max(m,(j+m)/2)}var S=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=n[f]);break}}else{var N=Math.min(h,g),O=Math.max(h,g);if(e>(N+m)/2&&e<=(O+m)/2){({index:l}=n[f]);break}}}else if(t){for(var C=0;C<d;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<d-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===d-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},K9=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&s!=="center"&&Pe(e[s]))return Ar(Ar({},e),{},{[s]:e[s]+(r||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&l!=="middle"&&Pe(e[l]))return Ar(Ar({},e),{},{[l]:e[l]+(i||0)})}return e},Zs=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",MT=(e,t,n,r)=>{if(r)return e.map(d=>d.coordinate);var i,s,l=e.map(d=>(d.coordinate===t&&(i=!0),d.coordinate===n&&(s=!0),d.coordinate));return i||l.push(t),s||l.push(n),l},RT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:m,ticks:g,niceTicks:v,axisType:x}=e;if(!l)return null;var _=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,j=i==="category"&&l.bandwidth?l.bandwidth()/_:0;if(j=x==="angleAxis"&&s&&s.length>=2?hn(s[0]-s[1])*2*j:j,g||v){var S=(g||v||[]).map((N,O)=>{var C=r?r.indexOf(N):N;return{coordinate:l(C)+j,value:N,offset:j,index:O}});return S.filter(N=>!ur(N.coordinate))}return f&&h?h.map((N,O)=>({coordinate:l(N)+j,value:N,index:O,offset:j})):l.ticks&&m!=null?l.ticks(m).map((N,O)=>({coordinate:l(N)+j,value:N,offset:j,index:O})):l.domain().map((N,O)=>({coordinate:l(N)+j,value:r?r[N]:N,index:O,offset:j}))},ZN=1e-4,G9=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-ZN,s=Math.max(r[0],r[1])+ZN,l=e(t[0]),d=e(t[n-1]);(l<i||l>s||d<i||d>s)&&e.domain([t[0],t[n-1]])}},Y9=(e,t)=>{if(!t||t.length!==2||!Pe(t[0])||!Pe(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Pe(e[0])||e[0]<n)&&(i[0]=n),(!Pe(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},V9=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var d=ur(e[l][n][1])?e[l][n][0]:e[l][n][1];d>=0?(e[l][n][0]=i,e[l][n][1]=i+d,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+d,s=e[l][n][1])}},W9=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=ur(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},X9={sign:V9,expand:Nq,none:pl,silhouette:Eq,wiggle:Oq,positive:W9},Q9=(e,t,n)=>{var r=X9[n],i=Sq().keys(t).value((s,l)=>+It(s,l,0)).order(h0).offset(r);return i(e)};function J9(e){return e==null?void 0:String(e)}var eE=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var d=It(s,t.dataKey,t.scale.domain()[l]);return pn(d)?null:t.scale(d)-i/2+r},Z9=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},eB=e=>{var t=e.flat(2).filter(Pe);return[Math.min(...t),Math.max(...t)]},tB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],nB=(e,t,n)=>{if(e!=null)return tB(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,d=l.reduce((f,h)=>{var m=PT(h,t,n),g=eB(m);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],r[0]),Math.max(d[1],r[1])]},[1/0,-1/0]))},tE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Wb=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Jh(t,m=>m.coordinate),s=1/0,l=1,d=i.length;l<d;l++){var f=i[l],h=i[l-1];s=Math.min((f.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function rE(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Ar(Ar({},t),{},{dataKey:n,payload:r,value:i,name:s})}function am(e,t){if(e)return String(e);if(typeof t=="string")return t}function rB(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?U9({x:e,y:t},r):null}var aB=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Ar(Ar(Ar({},r),Jt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var d=i.coordinate,{angle:f}=r;return Ar(Ar(Ar({},r),Jt(r.cx,r.cy,d,f)),{},{angle:f,radius:d})}return{x:0,y:0}},iB=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Za=e=>e.layout.width,ei=e=>e.layout.height,sB=e=>e.layout.scale,DT=e=>e.layout.margin,im=re(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sm=re(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),IT="data-recharts-item-index",LT="data-recharts-item-data-key",Ru=60;function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(n),!0).forEach(function(r){oB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oB(e,t,n){return(t=lB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lB(e){var t=cB(e,"string");return typeof t=="symbol"?t:t+""}function cB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uB=e=>e.brush.height;function dB(e){var t=sm(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ru;return n+i}return n},0)}function fB(e){var t=sm(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ru;return n+i}return n},0)}function hB(e){var t=im(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function mB(e){var t=im(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var an=re([Za,ei,DT,uB,dB,fB,hB,mB,iT,T7],(e,t,n,r,i,s,l,d,f,h)=>{var m={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+d},v=xf(xf({},g),m),x=v.bottom;v.bottom+=r,v=K9(v,f,h);var _=e-v.left-v.right,j=t-v.top-v.bottom;return xf(xf({brushBottom:x},v),{},{width:Math.max(_,0),height:Math.max(j,0)})}),pB=re(an,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Xb=re(Za,ei,(e,t)=>({x:0,y:0,width:e,height:t})),gB=b.createContext(null),Dr=()=>b.useContext(gB)!=null,om=e=>e.brush,lm=re([om,an,DT],(e,t,n)=>({height:e.height,x:Pe(e.x)?e.x:t.left,y:Pe(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:Pe(e.width)?e.width:t.width})),Qb=()=>{var e,t=Dr(),n=Te(pB),r=Te(lm),i=(e=Te(om))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},vB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$T=()=>{var e;return(e=Te(an))!==null&&e!==void 0?e:vB},Jb=()=>Te(Za),Zb=()=>Te(ei),yB=()=>Te(e=>e.layout.margin),ot=e=>e.layout.layoutType,ex=()=>Te(ot),bB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zT=hr({name:"legend",initialState:bB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ha(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:iE,setLegendSettings:xB,addLegendPayload:UT,removeLegendPayload:qT}=zT.actions,wB=zT.reducer,_B=["contextPayload"];function S0(){return S0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S0.apply(null,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(r){tx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tx(e,t,n){return(t=jB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jB(e){var t=SB(e,"string");return typeof t=="symbol"?t:t+""}function SB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NB(e,t){if(e==null)return{};var n,r,i=EB(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function EB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function OB(e){return e.value}function CB(e){var{contextPayload:t}=e,n=NB(e,_B),r=tT(t,e.payloadUniqBy,OB),i=vl(vl({},n),{},{payload:r});return b.isValidElement(e.content)?b.cloneElement(e.content,i):typeof e.content=="function"?b.createElement(e.content,i):b.createElement(Ub,i)}function AB(e,t,n,r,i,s){var{layout:l,align:d,verticalAlign:f}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=d==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((i||0)-s.height)/2}:m=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),vl(vl({},h),m)}function kB(e){var t=Lt();return b.useEffect(()=>{t(xB(e))},[t,e]),null}function TB(e){var t=Lt();return b.useEffect(()=>(t(iE(e)),()=>{t(iE({width:0,height:0}))}),[t,e]),null}function PB(e){var t=R7(),n=VU(),r=yB(),{width:i,height:s,wrapperStyle:l,portal:d}=e,[f,h]=sT([t]),m=Jb(),g=Zb();if(m==null||g==null)return null;var v=m-(r.left||0)-(r.right||0),x=mu.getWidthOrHeight(e.layout,s,i,v),_=d?l:vl(vl({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||s||"auto"},AB(l,e,r,m,g,f)),l),j=d??n;if(j==null)return null;var S=b.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:h},b.createElement(kB,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),b.createElement(TB,{width:f.width,height:f.height}),b.createElement(CB,S0({},e,x,{margin:r,chartWidth:m,chartHeight:g,contextPayload:t})));return db.createPortal(S,j)}class mu extends b.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Pe(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return b.createElement(PB,this.props)}}tx(mu,"displayName","Legend");tx(mu,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N0.apply(null,arguments)}function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(n),!0).forEach(function(r){MB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MB(e,t,n){return(t=RB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RB(e){var t=DB(e,"string");return typeof t=="symbol"?t:t+""}function DB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IB(e){return Array.isArray(e)&&ha(e[0])&&ha(e[1])?e.join(" ~ "):e}var LB=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:d,wrapperClassName:f,labelClassName:h,label:m,labelFormatter:g,accessibilityLayer:v=!1}=e,x=()=>{if(s&&s.length){var T={padding:0,margin:0},k=(d?Jh(s,d):s).map((R,L)=>{if(R.type==="none")return null;var K=R.formatter||l||IB,{value:B,name:F}=R,z=B,Q=F;if(K){var H=K(B,F,R,L,s);if(Array.isArray(H))[z,Q]=H;else if(H!=null)z=H;else return null}var X=sy({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},r);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:X},ha(Q)?b.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,ha(Q)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},z),b.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:T},k)}return null},_=sy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),j=sy({margin:0},i),S=!pn(m),N=S?m:"",O=ft("recharts-default-tooltip",f),C=ft("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(N=g(m,s));var A=v?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",N0({className:O,style:_},A),b.createElement("p",{className:C,style:j},b.isValidElement(N)?N:"".concat(N)),x())},Ic="recharts-tooltip-wrapper",$B={visibility:"hidden"};function zB(e){var{coordinate:t,translateX:n,translateY:r}=e;return ft(Ic,{["".concat(Ic,"-right")]:Pe(n)&&t&&Pe(t.x)&&n>=t.x,["".concat(Ic,"-left")]:Pe(n)&&t&&Pe(t.x)&&n<t.x,["".concat(Ic,"-bottom")]:Pe(r)&&t&&Pe(t.y)&&r>=t.y,["".concat(Ic,"-top")]:Pe(r)&&t&&Pe(t.y)&&r<t.y})}function lE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:d,viewBox:f,viewBoxDimension:h}=e;if(s&&Pe(s[r]))return s[r];var m=n[r]-d-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?m:g;var v=f[r];if(v==null)return 0;if(l[r]){var x=m,_=v;return x<_?Math.max(g,v):Math.max(m,v)}if(h==null)return 0;var j=g+d,S=v+h;return j>S?Math.max(m,v):Math.max(g,v)}function UB(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function qB(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:d,viewBox:f}=e,h,m,g;return l.height>0&&l.width>0&&n?(m=lE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),g=lE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=UB({translateX:m,translateY:g,useTranslate3d:d})):h=$B,{cssProperties:h,cssClasses:zB({translateX:m,translateY:g,coordinate:n})}}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(r){E0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E0(e,t,n){return(t=BB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BB(e){var t=FB(e,"string");return typeof t=="symbol"?t:t+""}function FB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class HB extends b.PureComponent{constructor(){super(...arguments),E0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),E0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:d,isAnimationActive:f,offset:h,position:m,reverseDirection:g,useTranslate3d:v,viewBox:x,wrapperStyle:_,lastBoundingBox:j,innerRef:S,hasPortalFromProps:N}=this.props,{cssClasses:O,cssProperties:C}=qB({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:v,viewBox:x}),A=N?{}:wf(wf({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),T=wf(wf({},A),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},_);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:T,ref:S},s)}}var KB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),eo={devToolsEnabled:!1,isSsr:KB()},BT=()=>Te(e=>e.rootProps.accessibilityLayer);function fr(e){return Number.isFinite(e)}function yl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O0.apply(null,arguments)}function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(n),!0).forEach(function(r){GB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GB(e,t,n){return(t=YB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YB(e){var t=VB(e,"string");return typeof t=="symbol"?t:t+""}function VB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fE={curveBasisClosed:hq,curveBasisOpen:mq,curveBasis:fq,curveBumpX:JU,curveBumpY:ZU,curveLinearClosed:pq,curveLinear:Xh,curveMonotoneX:gq,curveMonotoneY:vq,curveNatural:yq,curveStep:bq,curveStepAfter:wq,curveStepBefore:xq},_f=e=>fr(e.x)&&fr(e.y),Lc=e=>e.x,$c=e=>e.y,WB=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(ku(e));return(n==="curveMonotone"||n==="curveBump")&&t?fE["".concat(n).concat(t==="vertical"?"Y":"X")]:fE[n]||Xh},XB=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=WB(t,i),d=s?n.filter(_f):n,f;if(Array.isArray(r)){var h=s?r.filter(g=>_f(g)):r,m=d.map((g,v)=>dE(dE({},g),{},{base:h[v]}));return i==="vertical"?f=mf().y($c).x1(Lc).x0(g=>g.base.x):f=mf().x(Lc).y1($c).y0(g=>g.base.y),f.defined(_f).curve(l),f(m)}return i==="vertical"&&Pe(r)?f=mf().y($c).x1(Lc).x0(r):Pe(r)?f=mf().x(Lc).y1($c).y0(r):f=Dk().x(Lc).y($c),f.defined(_f).curve(l),f(d)},FT=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?XB(e):r;return b.createElement("path",O0({},Wi(e),$U(e),{className:ft("recharts-curve",t),d:s===null?void 0:s,ref:i}))},QB=["x","y","top","left","width","height","className"];function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C0.apply(null,arguments)}function hE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(n),!0).forEach(function(r){ZB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZB(e,t,n){return(t=eF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nF(e,t){if(e==null)return{};var n,r,i=rF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aF=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),iF=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:d}=e,f=nF(e,QB),h=JB({x:t,y:n,top:r,left:i,width:s,height:l},f);return!Pe(t)||!Pe(n)||!Pe(s)||!Pe(l)||!Pe(r)||!Pe(i)?null:b.createElement("path",C0({},rn(h,!0),{className:ft("recharts-cross",d),d:aF(t,n,s,l,r,i)}))};function sF(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(r){lF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lF(e,t,n){return(t=cF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cF(e){var t=uF(e,"string");return typeof t=="symbol"?t:t+""}function uF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rn(e,t){var n=oF({},e),r=t,i=Object.keys(t),s=i.reduce((l,d)=>(l[d]===void 0&&r[d]!==void 0&&(l[d]=r[d]),l),n);return s}function dF(){}function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(n),!0).forEach(function(r){fF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fF(e,t,n){return(t=hF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hF(e){var t=mF(e,"string");return typeof t=="symbol"?t:t+""}function mF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),HT=(e,t,n)=>e.map(r=>"".concat(pF(r)," ").concat(t,"ms ").concat(n)).join(","),gF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),pu=(e,t)=>Object.keys(t).reduce((n,r)=>gE(gE({},n),{},{[r]:e(r,t[r])}),{});function vE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(n),!0).forEach(function(r){vF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vF(e,t,n){return(t=yF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yF(e){var t=bF(e,"string");return typeof t=="symbol"?t:t+""}function bF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yh=(e,t,n)=>e+(t-e)*n,A0=e=>{var{from:t,to:n}=e;return t!==n},KT=(e,t,n)=>{var r=pu((i,s)=>{if(A0(s)){var[l,d]=e(s.from,s.to,s.velocity);return Sn(Sn({},s),{},{from:l,velocity:d})}return s},t);return n<1?pu((i,s)=>A0(s)?Sn(Sn({},s),{},{velocity:yh(s.velocity,r[i].velocity,n),from:yh(s.from,r[i].from,n)}):s,t):KT(e,r,n-1)};function xF(e,t,n,r,i,s){var l,d=r.reduce((v,x)=>Sn(Sn({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),f=()=>pu((v,x)=>x.from,d),h=()=>!Object.values(d).filter(A0).length,m=null,g=v=>{l||(l=v);var x=v-l,_=x/n.dt;d=KT(n,d,_),i(Sn(Sn(Sn({},e),t),f())),l=v,h()||(m=s.setTimeout(g))};return()=>(m=s.setTimeout(g),()=>{m()})}function wF(e,t,n,r,i,s,l){var d=null,f=i.reduce((g,v)=>Sn(Sn({},g),{},{[v]:[e[v],t[v]]}),{}),h,m=g=>{h||(h=g);var v=(g-h)/r,x=pu((j,S)=>yh(...S,n(v)),f);if(s(Sn(Sn(Sn({},e),t),x)),v<1)d=l.setTimeout(m);else{var _=pu((j,S)=>yh(...S,n(1)),f);s(Sn(Sn(Sn({},e),t),_))}};return()=>(d=l.setTimeout(m),()=>{d()})}const _F=(e,t,n,r,i,s)=>{var l=gF(e,t);return n.isStepper===!0?xF(e,t,n,l,i,s):wF(e,t,n,r,l,i,s)};var bh=1e-4,GT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],YT=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),yE=(e,t)=>n=>{var r=GT(e,t);return YT(r,n)},jF=(e,t)=>n=>{var r=GT(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return YT(i,n)},bE=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(_=>parseFloat(_)))}}else l.length===4&&([t,r,n,i]=l);var h=yE(t,n),m=yE(r,i),g=jF(t,n),v=_=>_>1?1:_<0?0:_,x=_=>{for(var j=_>1?1:_,S=j,N=0;N<8;++N){var O=h(S)-j,C=g(S);if(Math.abs(O-j)<bh||C<bh)return m(S);S=v(S-O/C)}return m(S)};return x.isStepper=!1,x},SF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,d,f)=>{var h=-(l-d)*n,m=f*r,g=f+(h-m)*i/1e3,v=f*i/1e3+l;return Math.abs(v-d)<bh&&Math.abs(g)<bh?[d,0]:[v,g]};return s.isStepper=!0,s.dt=i,s},NF=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return bE(e);case"spring":return SF();default:if(e.split("(")[0]==="cubic-bezier")return bE(e)}return typeof e=="function"?e:null};function EF(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var d=l,[f,...h]=d;if(typeof f=="number"){i=e.setTimeout(s.bind(null,h),f);return}s(f),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class OF{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function CF(){return EF(new OF)}var AF=b.createContext(CF);function kF(e,t){var n=b.useContext(AF);return b.useMemo(()=>t??n(e),[e,t,n])}var TF={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},xE={t:0},oy={t:1};function cm(e){var t=Rn(e,TF),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:d,onAnimationStart:f,children:h}=t,m=kF(t.animationId,t.animationManager),[g,v]=b.useState(n?xE:oy),x=b.useRef(null);return b.useEffect(()=>{n||v(oy)},[n]),b.useEffect(()=>{if(!n||!r)return dF;var _=_F(xE,oy,NF(s),i,v,m.getTimeoutController()),j=()=>{x.current=_()};return m.start([f,l,j,i,d]),()=>{m.stop(),x.current&&x.current(),d()}},[n,r,i,s,l,f,d,m]),h(g.t)}function um(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=b.useRef(du(t)),r=b.useRef(e);return r.current!==e&&(n.current=du(t),r.current=e),n.current}function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(n),!0).forEach(function(r){PF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PF(e,t,n){return(t=MF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MF(e){var t=RF(e,"string");return typeof t=="symbol"?t:t+""}function RF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(null,arguments)}var jE=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,d=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=i[g]>s?s:i[g];h="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(f,",").concat(e+d*m[0],",").concat(t)),h+="L ".concat(e+n-d*m[1],",").concat(t),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(f,`,
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},DF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VT=e=>{var t=Rn(e,DF),n=b.useRef(null),[r,i]=b.useState(-1);b.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:s,y:l,width:d,height:f,radius:h,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isAnimationActive:_,isUpdateAnimationActive:j}=t,S=b.useRef(d),N=b.useRef(f),O=b.useRef(s),C=b.useRef(l),A=b.useMemo(()=>({x:s,y:l,width:d,height:f,radius:h}),[s,l,d,f,h]),T=um(A,"rectangle-");if(s!==+s||l!==+l||d!==+d||f!==+f||d===0||f===0)return null;var k=ft("recharts-rectangle",m);if(!j)return b.createElement("path",xh({},rn(t,!0),{className:k,d:jE(s,l,d,f,h)}));var R=S.current,L=N.current,K=O.current,B=C.current,F="0px ".concat(r===-1?1:r,"px"),z="".concat(r,"px 0px"),Q=HT(["strokeDasharray"],v,typeof g=="string"?g:void 0);return b.createElement(cm,{animationId:T,key:T,canBegin:r>0,duration:v,easing:g,isActive:j,begin:x},H=>{var X=Nn(R,d,H),I=Nn(L,f,H),$=Nn(K,s,H),U=Nn(B,l,H);n.current&&(S.current=X,N.current=I,O.current=$,C.current=U);var ee;return _?H>0?ee={transition:Q,strokeDasharray:z}:ee={strokeDasharray:F}:ee={strokeDasharray:z},b.createElement("path",xh({},rn(t,!0),{className:k,d:jE($,U,X,I,h),ref:n,style:_E(_E({},ee),t.style)}))})};function WT(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Jt(t,n,r,i),d=Jt(t,n,r,s);return{points:[l,d],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k0.apply(null,arguments)}var IF=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},jf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:d,cornerIsExternal:f}=e,h=d*(l?1:-1)+r,m=Math.asin(d/h)/vh,g=f?i:i+s*m,v=Jt(t,n,h,g),x=Jt(t,n,r,g),_=f?i-s*m:i,j=Jt(t,n,h*Math.cos(m*vh),_);return{center:v,circleTangency:x,lineTangency:j,theta:m}},XT=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,d=IF(s,l),f=s+d,h=Jt(t,n,i,s),m=Jt(t,n,i,f),g="M ".concat(h.x,",").concat(h.y,`
  `);if(r>0){var{circleTangency:C,lineTangency:A,theta:T}=jf({cx:t,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:k,lineTangency:R,theta:L}=jf({cx:t,cy:n,radius:r,angle:h,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),K=d?Math.abs(f-h):Math.abs(f-h)-T-L;if(K<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},$F={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QT=e=>{var t=Rn(e,$F),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:m,className:g}=t;if(s<i||h===m)return null;var v=ft("recharts-sector",g),x=s-i,_=kn(l,x,0,!0),j;return _>0&&Math.abs(h-m)<360?j=LF({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(_,x/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:m}):j=XT({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:m}),b.createElement("path",k0({},rn(t,!0),{className:v,d:j}))};function zF(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:d,cy:f,innerRadius:h,outerRadius:m,angle:g}=t,v=Jt(d,f,h,g),x=Jt(d,f,m,g);r=v.x,i=v.y,s=x.x,l=x.y}else return WT(t);return[{x:r,y:i},{x:s,y:l}]}var ly={},cy={},uy={},SE;function UF(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(uy)),uy}var NE;function qF(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UF();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(cy)),cy}var EE;function BF(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aT(),n=qF();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const d=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=i,i+=l;return f}e.range=r})(ly)),ly}var dy,OE;function FF(){return OE||(OE=1,dy=BF().range),dy}var HF=FF();const JT=Qr(HF);function Fi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nx(e){let t,n,r;e.length!==2?(t=Fi,n=(d,f)=>Fi(e(d),f),r=(d,f)=>e(d)-f):(t=e===Fi||e===KF?e:GF,n=e,r=e);function i(d,f,h=0,m=d.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;n(d[g],f)<0?h=g+1:m=g}while(h<m)}return h}function s(d,f,h=0,m=d.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;n(d[g],f)<=0?h=g+1:m=g}while(h<m)}return h}function l(d,f,h=0,m=d.length){const g=i(d,f,h,m-1);return g>h&&r(d[g-1],f)>-r(d[g],f)?g-1:g}return{left:i,center:l,right:s}}function GF(){return 0}function ZT(e){return e===null?NaN:+e}function*YF(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const VF=nx(Fi),Du=VF.right;nx(ZT).center;class CE extends Map{constructor(t,n=QF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(AE(this,t))}has(t){return super.has(AE(this,t))}set(t,n){return super.set(WF(this,t),n)}delete(t){return super.delete(XF(this,t))}}function AE({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function WF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function XF({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function QF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function JF(e=Fi){if(e===Fi)return eP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function eP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ZF=Math.sqrt(50),eH=Math.sqrt(10),tH=Math.sqrt(2);function wh(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=ZF?10:s>=eH?5:s>=tH?2:1;let d,f,h;return i<0?(h=Math.pow(10,-i)/l,d=Math.round(e*h),f=Math.round(t*h),d/h<e&&++d,f/h>t&&--f,h=-h):(h=Math.pow(10,i)*l,d=Math.round(e/h),f=Math.round(t/h),d*h<e&&++d,f*h>t&&--f),f<d&&.5<=n&&n<2?wh(e,t,n*2):[d,f,h]}function T0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?wh(t,e,n):wh(e,t,n);if(!(s>=i))return[];const d=s-i+1,f=new Array(d);if(r)if(l<0)for(let h=0;h<d;++h)f[h]=(s-h)/-l;else for(let h=0;h<d;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<d;++h)f[h]=(i+h)/-l;else for(let h=0;h<d;++h)f[h]=(i+h)*l;return f}function P0(e,t,n){return t=+t,e=+e,n=+n,wh(e,t,n)[2]}function M0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?P0(t,e,n):P0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function kE(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function TE(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?eP:JF(i);r>n;){if(r-n>600){const f=r-n+1,h=t-n+1,m=Math.log(f),g=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*g*(f-g)/f)*(h-f/2<0?-1:1),x=Math.max(n,Math.floor(t-h*g/f+v)),_=Math.min(r,Math.floor(t+(f-h)*g/f+v));tP(e,t,x,_,i)}const s=e[t];let l=n,d=r;for(zc(e,n,t),i(e[r],s)>0&&zc(e,n,r);l<d;){for(zc(e,l,d),++l,--d;i(e[l],s)<0;)++l;for(;i(e[d],s)>0;)--d}i(e[n],s)===0?zc(e,n,d):(++d,zc(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}return e}function zc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nH(e,t,n){if(e=Float64Array.from(YF(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return TE(e);if(t>=1)return kE(e);var r,i=(r-1)*t,s=Math.floor(i),l=kE(tP(e,s).subarray(0,s+1)),d=TE(e.subarray(s+1));return l+(d-l)*(i-s)}}function rH(e,t,n=ZT){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),d=+n(e[s+1],s+1,e);return l+(d-l)*(i-s)}}function aH(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Ir(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ti(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const R0=Symbol("implicit");function rx(){var e=new CE,t=[],n=[],r=R0;function i(s){let l=e.get(s);if(l===void 0){if(r!==R0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new CE;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return rx(t,n).unknown(r)},Ir.apply(i,arguments),i}function ax(){var e=rx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,d=!1,f=0,h=0,m=.5;delete e.unknown;function g(){var v=t().length,x=i<r,_=x?i:r,j=x?r:i;s=(j-_)/Math.max(1,v-f+h*2),d&&(s=Math.floor(s)),_+=(j-_-s*(v-f))*m,l=s*(1-f),d&&(_=Math.round(_),l=Math.round(l));var S=aH(v).map(function(N){return _+s*N});return n(x?S.reverse():S)}return e.domain=function(v){return arguments.length?(t(v),g()):t()},e.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,d=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(v){return arguments.length?(d=!!v,g()):d},e.padding=function(v){return arguments.length?(f=Math.min(1,h=+v),g()):f},e.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),g()):f},e.paddingOuter=function(v){return arguments.length?(h=+v,g()):h},e.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),g()):m},e.copy=function(){return ax(t(),[r,i]).round(d).paddingInner(f).paddingOuter(h).align(m)},Ir.apply(g(),arguments)}function nP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nP(t())},e}function iH(){return nP(ax.apply(null,arguments).paddingInner(1))}function ix(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Iu(){}var gu=.7,_h=1/gu,hl="\\s*([+-]?\\d+)\\s*",vu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sH=/^#([0-9a-f]{3,8})$/,oH=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),lH=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),cH=new RegExp(`^rgba\\(${hl},${hl},${hl},${vu}\\)$`),uH=new RegExp(`^rgba\\(${fa},${fa},${fa},${vu}\\)$`),dH=new RegExp(`^hsl\\(${vu},${fa},${fa}\\)$`),fH=new RegExp(`^hsla\\(${vu},${fa},${fa},${vu}\\)$`),PE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ix(Iu,yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ME,formatHex:ME,formatHex8:hH,formatHsl:mH,formatRgb:RE,toString:RE});function ME(){return this.rgb().formatHex()}function hH(){return this.rgb().formatHex8()}function mH(){return aP(this).formatHsl()}function RE(){return this.rgb().formatRgb()}function yu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?DE(t):n===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oH.exec(e))?new Yn(t[1],t[2],t[3],1):(t=lH.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cH.exec(e))?Sf(t[1],t[2],t[3],t[4]):(t=uH.exec(e))?Sf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dH.exec(e))?$E(t[1],t[2]/100,t[3]/100,1):(t=fH.exec(e))?$E(t[1],t[2]/100,t[3]/100,t[4]):PE.hasOwnProperty(e)?DE(PE[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function DE(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function Sf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yn(e,t,n,r)}function pH(e){return e instanceof Iu||(e=yu(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function D0(e,t,n,r){return arguments.length===1?pH(e):new Yn(e,t,n,r??1)}function Yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ix(Yn,D0,rP(Iu,{brighter(e){return e=e==null?_h:Math.pow(_h,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gu:Math.pow(gu,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(Hs(this.r),Hs(this.g),Hs(this.b),jh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IE,formatHex:IE,formatHex8:gH,formatRgb:LE,toString:LE}));function IE(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}`}function gH(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}${$s((isNaN(this.opacity)?1:this.opacity)*255)}`}function LE(){const e=jh(this.opacity);return`${e===1?"rgb(":"rgba("}${Hs(this.r)}, ${Hs(this.g)}, ${Hs(this.b)}${e===1?")":`, ${e})`}`}function jh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $s(e){return e=Hs(e),(e<16?"0":"")+e.toString(16)}function $E(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vr(e,t,n,r)}function aP(e){if(e instanceof Vr)return new Vr(e.h,e.s,e.l,e.opacity);if(e instanceof Iu||(e=yu(e)),!e)return new Vr;if(e instanceof Vr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,d=s-i,f=(s+i)/2;return d?(t===s?l=(n-r)/d+(n<r)*6:n===s?l=(r-t)/d+2:l=(t-n)/d+4,d/=f<.5?s+i:2-s-i,l*=60):d=f>0&&f<1?0:l,new Vr(l,d,f,e.opacity)}function vH(e,t,n,r){return arguments.length===1?aP(e):new Vr(e,t,n,r??1)}function Vr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ix(Vr,vH,rP(Iu,{brighter(e){return e=e==null?_h:Math.pow(_h,e),new Vr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gu:Math.pow(gu,e),new Vr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yn(fy(e>=240?e-240:e+120,i,r),fy(e,i,r),fy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Vr(zE(this.h),Nf(this.s),Nf(this.l),jh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jh(this.opacity);return`${e===1?"hsl(":"hsla("}${zE(this.h)}, ${Nf(this.s)*100}%, ${Nf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zE(e){return e=(e||0)%360,e<0?e+360:e}function Nf(e){return Math.max(0,Math.min(1,e||0))}function fy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sx=e=>()=>e;function yH(e,t){return function(n){return e+n*t}}function bH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xH(e){return(e=+e)==1?iP:function(t,n){return n-t?bH(t,n,e):sx(isNaN(t)?n:t)}}function iP(e,t){var n=t-e;return n?yH(e,n):sx(isNaN(e)?t:e)}const UE=(function e(t){var n=xH(t);function r(i,s){var l=n((i=D0(i)).r,(s=D0(s)).r),d=n(i.g,s.g),f=n(i.b,s.b),h=iP(i.opacity,s.opacity);return function(m){return i.r=l(m),i.g=d(m),i.b=f(m),i.opacity=h(m),i+""}}return r.gamma=e,r})(1);function wH(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function _H(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jH(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Pl(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(d){for(l=0;l<r;++l)s[l]=i[l](d);return s}}function SH(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Sh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function NH(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pl(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var I0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hy=new RegExp(I0.source,"g");function EH(e){return function(){return e}}function OH(e){return function(t){return e(t)+""}}function CH(e,t){var n=I0.lastIndex=hy.lastIndex=0,r,i,s,l=-1,d=[],f=[];for(e=e+"",t=t+"";(r=I0.exec(e))&&(i=hy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),d[l]?d[l]+=s:d[++l]=s),(r=r[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,f.push({i:l,x:Sh(r,i)})),n=hy.lastIndex;return n<t.length&&(s=t.slice(n),d[l]?d[l]+=s:d[++l]=s),d.length<2?f[0]?OH(f[0].x):EH(t):(t=f.length,function(h){for(var m=0,g;m<t;++m)d[(g=f[m]).i]=g.x(h);return d.join("")})}function Pl(e,t){var n=typeof t,r;return t==null||n==="boolean"?sx(t):(n==="number"?Sh:n==="string"?(r=yu(t))?(t=r,UE):CH:t instanceof yu?UE:t instanceof Date?SH:_H(t)?wH:Array.isArray(t)?jH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NH:Sh)(e,t)}function ox(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function AH(e,t){t===void 0&&(t=e,e=Pl);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var d=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[d](l-d)}}function kH(e){return function(){return e}}function Nh(e){return+e}var qE=[0,1];function Mn(e){return e}function L0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:kH(isNaN(t)?NaN:.5)}function TH(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function PH(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=L0(i,r),s=n(l,s)):(r=L0(r,i),s=n(s,l)),function(d){return s(r(d))}}function MH(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=L0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(d){var f=Du(e,d,1,r)-1;return s[f](i[f](d))}}function Lu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dm(){var e=qE,t=qE,n=Pl,r,i,s,l=Mn,d,f,h;function m(){var v=Math.min(e.length,t.length);return l!==Mn&&(l=TH(e[0],e[v-1])),d=v>2?MH:PH,f=h=null,g}function g(v){return v==null||isNaN(v=+v)?s:(f||(f=d(e.map(r),t,n)))(r(l(v)))}return g.invert=function(v){return l(i((h||(h=d(t,e.map(r),Sh)))(v)))},g.domain=function(v){return arguments.length?(e=Array.from(v,Nh),m()):e.slice()},g.range=function(v){return arguments.length?(t=Array.from(v),m()):t.slice()},g.rangeRound=function(v){return t=Array.from(v),n=ox,m()},g.clamp=function(v){return arguments.length?(l=v?!0:Mn,m()):l!==Mn},g.interpolate=function(v){return arguments.length?(n=v,m()):n},g.unknown=function(v){return arguments.length?(s=v,g):s},function(v,x){return r=v,i=x,m()}}function lx(){return dm()(Mn,Mn)}function RH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Eh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bl(e){return e=Eh(Math.abs(e)),e?e[1]:NaN}function DH(e,t){return function(n,r){for(var i=n.length,s=[],l=0,d=e[0],f=0;i>0&&d>0&&(f+d+1>r&&(d=Math.max(1,r-f)),s.push(n.substring(i-=d,i+d)),!((f+=d+1)>r));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function IH(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var LH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bu(e){if(!(t=LH.exec(e)))throw new Error("invalid format: "+e);var t;return new cx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bu.prototype=cx.prototype;function cx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $H(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var sP;function zH(e,t){var n=Eh(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(sP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Eh(e,Math.max(0,t+s-1))[0]}function BE(e,t){var n=Eh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:RH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>BE(e*100,t),r:BE,s:zH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HE(e){return e}var KE=Array.prototype.map,GE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function UH(e){var t=e.grouping===void 0||e.thousands===void 0?HE:DH(KE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?HE:IH(KE.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(g){g=bu(g);var v=g.fill,x=g.align,_=g.sign,j=g.symbol,S=g.zero,N=g.width,O=g.comma,C=g.precision,A=g.trim,T=g.type;T==="n"?(O=!0,T="g"):FE[T]||(C===void 0&&(C=12),A=!0,T="g"),(S||v==="0"&&x==="=")&&(S=!0,v="0",x="=");var k=j==="$"?n:j==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",R=j==="$"?r:/[%p]/.test(T)?l:"",L=FE[T],K=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(F){var z=k,Q=R,H,X,I;if(T==="c")Q=L(F)+Q,F="";else{F=+F;var $=F<0||1/F<0;if(F=isNaN(F)?f:L(Math.abs(F),C),A&&(F=$H(F)),$&&+F==0&&_!=="+"&&($=!1),z=($?_==="("?_:d:_==="-"||_==="("?"":_)+z,Q=(T==="s"?GE[8+sP/3]:"")+Q+($&&_==="("?")":""),K){for(H=-1,X=F.length;++H<X;)if(I=F.charCodeAt(H),48>I||I>57){Q=(I===46?i+F.slice(H+1):F.slice(H))+Q,F=F.slice(0,H);break}}}O&&!S&&(F=t(F,1/0));var U=z.length+F.length+Q.length,ee=U<N?new Array(N-U+1).join(v):"";switch(O&&S&&(F=t(ee+F,ee.length?N-Q.length:1/0),ee=""),x){case"<":F=z+F+Q+ee;break;case"=":F=z+ee+F+Q;break;case"^":F=ee.slice(0,U=ee.length>>1)+z+F+Q+ee.slice(U);break;default:F=ee+z+F+Q;break}return s(F)}return B.toString=function(){return g+""},B}function m(g,v){var x=h((g=bu(g),g.type="f",g)),_=Math.max(-8,Math.min(8,Math.floor(bl(v)/3)))*3,j=Math.pow(10,-_),S=GE[8+_/3];return function(N){return x(j*N)+S}}return{format:h,formatPrefix:m}}var Ef,ux,oP;qH({thousands:",",grouping:[3],currency:["$",""]});function qH(e){return Ef=UH(e),ux=Ef.format,oP=Ef.formatPrefix,Ef}function BH(e){return Math.max(0,-bl(Math.abs(e)))}function FH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bl(t)/3)))*3-bl(Math.abs(e)))}function HH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bl(t)-bl(e))+1}function lP(e,t,n,r){var i=M0(e,t,n),s;switch(r=bu(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=FH(i,l))&&(r.precision=s),oP(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=HH(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=BH(i))&&(r.precision=s-(r.type==="%")*2);break}}return ux(r)}function Xi(e){var t=e.domain;return e.ticks=function(n){var r=t();return T0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return lP(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],d=r[s],f,h,m=10;for(d<l&&(h=l,l=d,d=h,h=i,i=s,s=h);m-- >0;){if(h=P0(l,d,n),h===f)return r[i]=l,r[s]=d,t(r);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;f=h}return e},e}function cP(){var e=lx();return e.copy=function(){return Lu(e,cP())},Ir.apply(e,arguments),Xi(e)}function uP(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Nh),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return uP(e).unknown(t)},e=arguments.length?Array.from(e,Nh):[0,1],Xi(n)}function dP(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function YE(e){return Math.log(e)}function VE(e){return Math.exp(e)}function KH(e){return-Math.log(-e)}function GH(e){return-Math.exp(-e)}function YH(e){return isFinite(e)?+("1e"+e):e<0?0:e}function VH(e){return e===10?YH:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WH(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function WE(e){return(t,n)=>-e(-t,n)}function dx(e){const t=e(YE,VE),n=t.domain;let r=10,i,s;function l(){return i=WH(r),s=VH(r),n()[0]<0?(i=WE(i),s=WE(s),e(KH,GH)):e(YE,VE),t}return t.base=function(d){return arguments.length?(r=+d,l()):r},t.domain=function(d){return arguments.length?(n(d),l()):n()},t.ticks=d=>{const f=n();let h=f[0],m=f[f.length-1];const g=m<h;g&&([h,m]=[m,h]);let v=i(h),x=i(m),_,j;const S=d==null?10:+d;let N=[];if(!(r%1)&&x-v<S){if(v=Math.floor(v),x=Math.ceil(x),h>0){for(;v<=x;++v)for(_=1;_<r;++_)if(j=v<0?_/s(-v):_*s(v),!(j<h)){if(j>m)break;N.push(j)}}else for(;v<=x;++v)for(_=r-1;_>=1;--_)if(j=v>0?_/s(-v):_*s(v),!(j<h)){if(j>m)break;N.push(j)}N.length*2<S&&(N=T0(h,m,S))}else N=T0(v,x,Math.min(x-v,S)).map(s);return g?N.reverse():N},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=bu(f)).precision==null&&(f.trim=!0),f=ux(f)),d===1/0)return f;const h=Math.max(1,r*d/t.ticks().length);return m=>{let g=m/s(Math.round(i(m)));return g*r<r-.5&&(g*=r),g<=h?f(m):""}},t.nice=()=>n(dP(n(),{floor:d=>s(Math.floor(i(d))),ceil:d=>s(Math.ceil(i(d)))})),t}function fP(){const e=dx(dm()).domain([1,10]);return e.copy=()=>Lu(e,fP()).base(e.base()),Ir.apply(e,arguments),e}function XE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fx(e){var t=1,n=e(XE(t),QE(t));return n.constant=function(r){return arguments.length?e(XE(t=+r),QE(t)):t},Xi(n)}function hP(){var e=fx(dm());return e.copy=function(){return Lu(e,hP()).constant(e.constant())},Ir.apply(e,arguments)}function JE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XH(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QH(e){return e<0?-e*e:e*e}function hx(e){var t=e(Mn,Mn),n=1;function r(){return n===1?e(Mn,Mn):n===.5?e(XH,QH):e(JE(n),JE(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Xi(t)}function mx(){var e=hx(dm());return e.copy=function(){return Lu(e,mx()).exponent(e.exponent())},Ir.apply(e,arguments),e}function JH(){return mx.apply(null,arguments).exponent(.5)}function ZE(e){return Math.sign(e)*e*e}function ZH(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function mP(){var e=lx(),t=[0,1],n=!1,r;function i(s){var l=ZH(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(ZE(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Nh)).map(ZE)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mP(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ir.apply(i,arguments),Xi(i)}function pP(){var e=[],t=[],n=[],r;function i(){var l=0,d=Math.max(1,t.length);for(n=new Array(d-1);++l<d;)n[l-1]=rH(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Du(n,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Fi),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return pP().domain(e).range(t).unknown(r)},Ir.apply(s,arguments)}function gP(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[Du(r,f,0,n)]:s}function d(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,d()):i.slice()},l.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return gP().domain([e,t]).range(i).unknown(s)},Ir.apply(Xi(l),arguments)}function vP(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Du(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return vP().domain(e).range(t).unknown(n)},Ir.apply(i,arguments)}const my=new Date,py=new Date;function sn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),d=i.ceil(s);return s-l<d-s?l:d},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,d)=>{const f=[];if(s=i.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return f;let h;do f.push(h=new Date(+s)),t(s,d),e(s);while(h<s&&s<l);return f},i.filter=s=>sn(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(my.setTime(+s),py.setTime(+l),e(my),e(py),Math.floor(n(my,py))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Oh=sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Oh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Oh);Oh.range;const Ua=1e3,Tr=Ua*60,qa=Tr*60,Xa=qa*24,px=Xa*7,eO=Xa*30,gy=Xa*365,zs=sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());zs.range;const gx=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Tr)},(e,t)=>(t-e)/Tr,e=>e.getMinutes());gx.range;const vx=sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tr)},(e,t)=>(t-e)/Tr,e=>e.getUTCMinutes());vx.range;const yx=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Tr)},(e,t)=>{e.setTime(+e+t*qa)},(e,t)=>(t-e)/qa,e=>e.getHours());yx.range;const bx=sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qa)},(e,t)=>(t-e)/qa,e=>e.getUTCHours());bx.range;const $u=sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tr)/Xa,e=>e.getDate()-1);$u.range;const fm=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xa,e=>e.getUTCDate()-1);fm.range;const yP=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xa,e=>Math.floor(e/Xa));yP.range;function to(e){return sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tr)/px)}const hm=to(0),Ch=to(1),eK=to(2),tK=to(3),xl=to(4),nK=to(5),rK=to(6);hm.range;Ch.range;eK.range;tK.range;xl.range;nK.range;rK.range;function no(e){return sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/px)}const mm=no(0),Ah=no(1),aK=no(2),iK=no(3),wl=no(4),sK=no(5),oK=no(6);mm.range;Ah.range;aK.range;iK.range;wl.range;sK.range;oK.range;const xx=sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xx.range;const wx=sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wx.range;const Qa=sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qa.range;const Ja=sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ja.range;function bP(e,t,n,r,i,s){const l=[[zs,1,Ua],[zs,5,5*Ua],[zs,15,15*Ua],[zs,30,30*Ua],[s,1,Tr],[s,5,5*Tr],[s,15,15*Tr],[s,30,30*Tr],[i,1,qa],[i,3,3*qa],[i,6,6*qa],[i,12,12*qa],[r,1,Xa],[r,2,2*Xa],[n,1,px],[t,1,eO],[t,3,3*eO],[e,1,gy]];function d(h,m,g){const v=m<h;v&&([h,m]=[m,h]);const x=g&&typeof g.range=="function"?g:f(h,m,g),_=x?x.range(h,+m+1):[];return v?_.reverse():_}function f(h,m,g){const v=Math.abs(m-h)/g,x=nx(([,,S])=>S).right(l,v);if(x===l.length)return e.every(M0(h/gy,m/gy,g));if(x===0)return Oh.every(Math.max(M0(h,m,g),1));const[_,j]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return _.every(j)}return[d,f]}const[lK,cK]=bP(Ja,wx,mm,yP,bx,vx),[uK,dK]=bP(Qa,xx,hm,$u,yx,gx);function vy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Uc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function fK(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,d=e.months,f=e.shortMonths,h=qc(i),m=Bc(i),g=qc(s),v=Bc(s),x=qc(l),_=Bc(l),j=qc(d),S=Bc(d),N=qc(f),O=Bc(f),C={a:$,A:U,b:ee,B:W,c:null,d:sO,e:sO,f:DK,g:KK,G:YK,H:PK,I:MK,j:RK,L:xP,m:IK,M:LK,p:P,q:M,Q:cO,s:uO,S:$K,u:zK,U:UK,V:qK,w:BK,W:FK,x:null,X:null,y:HK,Y:GK,Z:VK,"%":lO},A={a:G,A:ne,b:se,B:he,c:null,d:oO,e:oO,f:JK,g:lG,G:uG,H:WK,I:XK,j:QK,L:_P,m:ZK,M:eG,p:me,q:$e,Q:cO,s:uO,S:tG,u:nG,U:rG,V:aG,w:iG,W:sG,x:null,X:null,y:oG,Y:cG,Z:dG,"%":lO},T={a:B,A:F,b:z,B:Q,c:H,d:aO,e:aO,f:CK,g:rO,G:nO,H:iO,I:iO,j:SK,L:OK,m:jK,M:NK,p:K,q:_K,Q:kK,s:TK,S:EK,u:vK,U:yK,V:bK,w:gK,W:xK,x:X,X:I,y:rO,Y:nO,Z:wK,"%":AK};C.x=k(n,C),C.X=k(r,C),C.c=k(t,C),A.x=k(n,A),A.X=k(r,A),A.c=k(t,A);function k(fe,de){return function(we){var le=[],Ve=-1,be=0,rt=fe.length,ve,je,ze;for(we instanceof Date||(we=new Date(+we));++Ve<rt;)fe.charCodeAt(Ve)===37&&(le.push(fe.slice(be,Ve)),(je=tO[ve=fe.charAt(++Ve)])!=null?ve=fe.charAt(++Ve):je=ve==="e"?" ":"0",(ze=de[ve])&&(ve=ze(we,je)),le.push(ve),be=Ve+1);return le.push(fe.slice(be,Ve)),le.join("")}}function R(fe,de){return function(we){var le=Uc(1900,void 0,1),Ve=L(le,fe,we+="",0),be,rt;if(Ve!=we.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(de&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(be=yy(Uc(le.y,0,1)),rt=be.getUTCDay(),be=rt>4||rt===0?Ah.ceil(be):Ah(be),be=fm.offset(be,(le.V-1)*7),le.y=be.getUTCFullYear(),le.m=be.getUTCMonth(),le.d=be.getUTCDate()+(le.w+6)%7):(be=vy(Uc(le.y,0,1)),rt=be.getDay(),be=rt>4||rt===0?Ch.ceil(be):Ch(be),be=$u.offset(be,(le.V-1)*7),le.y=be.getFullYear(),le.m=be.getMonth(),le.d=be.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),rt="Z"in le?yy(Uc(le.y,0,1)).getUTCDay():vy(Uc(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(rt+5)%7:le.w+le.U*7-(rt+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,yy(le)):vy(le)}}function L(fe,de,we,le){for(var Ve=0,be=de.length,rt=we.length,ve,je;Ve<be;){if(le>=rt)return-1;if(ve=de.charCodeAt(Ve++),ve===37){if(ve=de.charAt(Ve++),je=T[ve in tO?de.charAt(Ve++):ve],!je||(le=je(fe,we,le))<0)return-1}else if(ve!=we.charCodeAt(le++))return-1}return le}function K(fe,de,we){var le=h.exec(de.slice(we));return le?(fe.p=m.get(le[0].toLowerCase()),we+le[0].length):-1}function B(fe,de,we){var le=x.exec(de.slice(we));return le?(fe.w=_.get(le[0].toLowerCase()),we+le[0].length):-1}function F(fe,de,we){var le=g.exec(de.slice(we));return le?(fe.w=v.get(le[0].toLowerCase()),we+le[0].length):-1}function z(fe,de,we){var le=N.exec(de.slice(we));return le?(fe.m=O.get(le[0].toLowerCase()),we+le[0].length):-1}function Q(fe,de,we){var le=j.exec(de.slice(we));return le?(fe.m=S.get(le[0].toLowerCase()),we+le[0].length):-1}function H(fe,de,we){return L(fe,t,de,we)}function X(fe,de,we){return L(fe,n,de,we)}function I(fe,de,we){return L(fe,r,de,we)}function $(fe){return l[fe.getDay()]}function U(fe){return s[fe.getDay()]}function ee(fe){return f[fe.getMonth()]}function W(fe){return d[fe.getMonth()]}function P(fe){return i[+(fe.getHours()>=12)]}function M(fe){return 1+~~(fe.getMonth()/3)}function G(fe){return l[fe.getUTCDay()]}function ne(fe){return s[fe.getUTCDay()]}function se(fe){return f[fe.getUTCMonth()]}function he(fe){return d[fe.getUTCMonth()]}function me(fe){return i[+(fe.getUTCHours()>=12)]}function $e(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var de=k(fe+="",C);return de.toString=function(){return fe},de},parse:function(fe){var de=R(fe+="",!1);return de.toString=function(){return fe},de},utcFormat:function(fe){var de=k(fe+="",A);return de.toString=function(){return fe},de},utcParse:function(fe){var de=R(fe+="",!0);return de.toString=function(){return fe},de}}}var tO={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,hK=/^%/,mK=/[\\^$*+?|[\]().{}]/g;function st(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function pK(e){return e.replace(mK,"\\$&")}function qc(e){return new RegExp("^(?:"+e.map(pK).join("|")+")","i")}function Bc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function gK(e,t,n){var r=gn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function vK(e,t,n){var r=gn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function yK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function bK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function nO(e,t,n){var r=gn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function rO(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wK(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _K(e,t,n){var r=gn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function jK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function aO(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function SK(e,t,n){var r=gn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function iO(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function NK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function EK(e,t,n){var r=gn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function OK(e,t,n){var r=gn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CK(e,t,n){var r=gn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function AK(e,t,n){var r=hK.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kK(e,t,n){var r=gn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function TK(e,t,n){var r=gn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function sO(e,t){return st(e.getDate(),t,2)}function PK(e,t){return st(e.getHours(),t,2)}function MK(e,t){return st(e.getHours()%12||12,t,2)}function RK(e,t){return st(1+$u.count(Qa(e),e),t,3)}function xP(e,t){return st(e.getMilliseconds(),t,3)}function DK(e,t){return xP(e,t)+"000"}function IK(e,t){return st(e.getMonth()+1,t,2)}function LK(e,t){return st(e.getMinutes(),t,2)}function $K(e,t){return st(e.getSeconds(),t,2)}function zK(e){var t=e.getDay();return t===0?7:t}function UK(e,t){return st(hm.count(Qa(e)-1,e),t,2)}function wP(e){var t=e.getDay();return t>=4||t===0?xl(e):xl.ceil(e)}function qK(e,t){return e=wP(e),st(xl.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function BK(e){return e.getDay()}function FK(e,t){return st(Ch.count(Qa(e)-1,e),t,2)}function HK(e,t){return st(e.getFullYear()%100,t,2)}function KK(e,t){return e=wP(e),st(e.getFullYear()%100,t,2)}function GK(e,t){return st(e.getFullYear()%1e4,t,4)}function YK(e,t){var n=e.getDay();return e=n>=4||n===0?xl(e):xl.ceil(e),st(e.getFullYear()%1e4,t,4)}function VK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+st(t/60|0,"0",2)+st(t%60,"0",2)}function oO(e,t){return st(e.getUTCDate(),t,2)}function WK(e,t){return st(e.getUTCHours(),t,2)}function XK(e,t){return st(e.getUTCHours()%12||12,t,2)}function QK(e,t){return st(1+fm.count(Ja(e),e),t,3)}function _P(e,t){return st(e.getUTCMilliseconds(),t,3)}function JK(e,t){return _P(e,t)+"000"}function ZK(e,t){return st(e.getUTCMonth()+1,t,2)}function eG(e,t){return st(e.getUTCMinutes(),t,2)}function tG(e,t){return st(e.getUTCSeconds(),t,2)}function nG(e){var t=e.getUTCDay();return t===0?7:t}function rG(e,t){return st(mm.count(Ja(e)-1,e),t,2)}function jP(e){var t=e.getUTCDay();return t>=4||t===0?wl(e):wl.ceil(e)}function aG(e,t){return e=jP(e),st(wl.count(Ja(e),e)+(Ja(e).getUTCDay()===4),t,2)}function iG(e){return e.getUTCDay()}function sG(e,t){return st(Ah.count(Ja(e)-1,e),t,2)}function oG(e,t){return st(e.getUTCFullYear()%100,t,2)}function lG(e,t){return e=jP(e),st(e.getUTCFullYear()%100,t,2)}function cG(e,t){return st(e.getUTCFullYear()%1e4,t,4)}function uG(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wl(e):wl.ceil(e),st(e.getUTCFullYear()%1e4,t,4)}function dG(){return"+0000"}function lO(){return"%"}function cO(e){return+e}function uO(e){return Math.floor(+e/1e3)}var nl,SP,NP;fG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fG(e){return nl=fK(e),SP=nl.format,nl.parse,NP=nl.utcFormat,nl.utcParse,nl}function hG(e){return new Date(e)}function mG(e){return e instanceof Date?+e:+new Date(+e)}function _x(e,t,n,r,i,s,l,d,f,h){var m=lx(),g=m.invert,v=m.domain,x=h(".%L"),_=h(":%S"),j=h("%I:%M"),S=h("%I %p"),N=h("%a %d"),O=h("%b %d"),C=h("%B"),A=h("%Y");function T(k){return(f(k)<k?x:d(k)<k?_:l(k)<k?j:s(k)<k?S:r(k)<k?i(k)<k?N:O:n(k)<k?C:A)(k)}return m.invert=function(k){return new Date(g(k))},m.domain=function(k){return arguments.length?v(Array.from(k,mG)):v().map(hG)},m.ticks=function(k){var R=v();return e(R[0],R[R.length-1],k??10)},m.tickFormat=function(k,R){return R==null?T:h(R)},m.nice=function(k){var R=v();return(!k||typeof k.range!="function")&&(k=t(R[0],R[R.length-1],k??10)),k?v(dP(R,k)):m},m.copy=function(){return Lu(m,_x(e,t,n,r,i,s,l,d,f,h))},m}function pG(){return Ir.apply(_x(uK,dK,Qa,xx,hm,$u,yx,gx,zs,SP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gG(){return Ir.apply(_x(lK,cK,Ja,wx,mm,fm,bx,vx,zs,NP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pm(){var e=0,t=1,n,r,i,s,l=Mn,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:l(i===0?.5:(g=(s(g)-n)*i,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(l=g,h):l};function m(g){return function(v){var x,_;return arguments.length?([x,_]=v,l=g(x,_),h):[l(0),l(1)]}}return h.range=m(Pl),h.rangeRound=m(ox),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),h}}function Qi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EP(){var e=Xi(pm()(Mn));return e.copy=function(){return Qi(e,EP())},ti.apply(e,arguments)}function OP(){var e=dx(pm()).domain([1,10]);return e.copy=function(){return Qi(e,OP()).base(e.base())},ti.apply(e,arguments)}function CP(){var e=fx(pm());return e.copy=function(){return Qi(e,CP()).constant(e.constant())},ti.apply(e,arguments)}function jx(){var e=hx(pm());return e.copy=function(){return Qi(e,jx()).exponent(e.exponent())},ti.apply(e,arguments)}function vG(){return jx.apply(null,arguments).exponent(.5)}function AP(){var e=[],t=Mn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Du(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>nH(e,s/r))},n.copy=function(){return AP(t).domain(e)},ti.apply(n,arguments)}function gm(){var e=0,t=.5,n=1,r=1,i,s,l,d,f,h=Mn,m,g=!1,v;function x(j){return isNaN(j=+j)?v:(j=.5+((j=+m(j))-s)*(r*j<r*s?d:f),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,n]=j,i=m(e=+e),s=m(t=+t),l=m(n=+n),d=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function _(j){return function(S){var N,O,C;return arguments.length?([N,O,C]=S,h=AH(j,[N,O,C]),x):[h(0),h(.5),h(1)]}}return x.range=_(Pl),x.rangeRound=_(ox),x.unknown=function(j){return arguments.length?(v=j,x):v},function(j){return m=j,i=j(e),s=j(t),l=j(n),d=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function kP(){var e=Xi(gm()(Mn));return e.copy=function(){return Qi(e,kP())},ti.apply(e,arguments)}function TP(){var e=dx(gm()).domain([.1,1,10]);return e.copy=function(){return Qi(e,TP()).base(e.base())},ti.apply(e,arguments)}function PP(){var e=fx(gm());return e.copy=function(){return Qi(e,PP()).constant(e.constant())},ti.apply(e,arguments)}function Sx(){var e=hx(gm());return e.copy=function(){return Qi(e,Sx()).exponent(e.exponent())},ti.apply(e,arguments)}function yG(){return Sx.apply(null,arguments).exponent(.5)}const Yc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ax,scaleDiverging:kP,scaleDivergingLog:TP,scaleDivergingPow:Sx,scaleDivergingSqrt:yG,scaleDivergingSymlog:PP,scaleIdentity:uP,scaleImplicit:R0,scaleLinear:cP,scaleLog:fP,scaleOrdinal:rx,scalePoint:iH,scalePow:mx,scaleQuantile:pP,scaleQuantize:gP,scaleRadial:mP,scaleSequential:EP,scaleSequentialLog:OP,scaleSequentialPow:jx,scaleSequentialQuantile:AP,scaleSequentialSqrt:vG,scaleSequentialSymlog:CP,scaleSqrt:JH,scaleSymlog:hP,scaleThreshold:vP,scaleTime:pG,scaleUtc:gG,tickFormat:lP},Symbol.toStringTag,{value:"Module"}));var Ji=e=>e.chartData,Nx=re([Ji],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ex=(e,t,n,r)=>r?Nx(e):Ji(e);function _l(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(fr(t)&&fr(n))return!0}return!1}function dO(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function bG(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(fr(n))i=n;else if(typeof n=="function")return;if(fr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(_l(l))return l}}function xG(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(_l(r))return dO(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,d;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Pe(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&tE.test(i)){var f=tE.exec(i);if(f==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(d=Math.max(...t));else if(Pe(s))d=s;else if(typeof s=="function")try{t!=null&&(d=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&nE.test(s)){var m=nE.exec(s);if(m==null||t==null)d=void 0;else{var g=+m[1];d=t[1]+g}}else d=t==null?void 0:t[1];var v=[l,d];if(_l(v))return t==null?v:dO(v,t,n)}}}var Ml=1e9,wG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Cx,Pt=!0,Mr="[DecimalError] ",Ks=Mr+"Invalid argument: ",Ox=Mr+"Exponent out of range: ",Rl=Math.floor,Os=Math.pow,_G=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,or,fn=1e7,Ct=7,MP=9007199254740991,kh=Rl(MP/Ct),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ee.comparedTo=Ee.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ct;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ee.dividedBy=Ee.div=function(e){return Ka(this,new this.constructor(e))};Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return wt(Ka(t,new n(e),0,1),n.precision)};Ee.equals=Ee.eq=function(e){return!this.cmp(e)};Ee.exponent=function(){return Zt(this)};Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0};Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1};Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(or))throw Error(Mr+"NaN");if(n.s<1)throw Error(Mr+(n.s?"NaN":"-Infinity"));return n.eq(or)?new r(0):(Pt=!1,t=Ka(xu(n,s),xu(e,s),s),Pt=!0,wt(t,i))};Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IP(t,e):RP(t,(e.s=-e.s,e))};Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Mr+"NaN");return n.s?(Pt=!1,t=Ka(n,e,0,1).times(e),Pt=!0,n.minus(t)):wt(new r(n),i)};Ee.naturalExponential=Ee.exp=function(){return DP(this)};Ee.naturalLogarithm=Ee.ln=function(){return xu(this)};Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RP(t,e):IP(t,(e.s=-e.s,e))};Ee.precision=Ee.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ks+e);if(t=Zt(i)+1,r=i.d.length-1,n=r*Ct+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,i,s,l,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(Mr+"NaN")}for(e=Zt(d),Pt=!1,i=Math.sqrt(+d),i==0||i==1/0?(t=ua(d.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Rl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(Ka(d,s,l+2)).times(.5),ua(s.d).slice(0,l)===(t=ua(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(wt(s,n+1,0),s.times(s).eq(d)){r=s;break}}else if(t!="9999")break;l+=4}return Pt=!0,wt(r,n)};Ee.times=Ee.mul=function(e){var t,n,r,i,s,l,d,f,h,m=this,g=m.constructor,v=m.d,x=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,n=m.e+e.e,f=v.length,h=x.length,f<h&&(s=v,v=x,x=s,l=f,f=h,h=l),s=[],l=f+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=f+r;i>r;)d=s[i]+x[r]*v[i-r-1]+t,s[i--]=d%fn|0,t=d/fn|0;s[i]=(s[i]+t)%fn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Pt?wt(e,g.precision):e};Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ma(e,0,Ml),t===void 0?t=r.rounding:ma(t,0,8),wt(n,e+Zt(n)+1,t))};Ee.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Ws(r,!0):(ma(e,0,Ml),t===void 0?t=i.rounding:ma(t,0,8),r=wt(new i(r),e+1,t),n=Ws(r,!0,e+1)),n};Ee.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Ws(i):(ma(e,0,Ml),t===void 0?t=s.rounding:ma(t,0,8),r=wt(new s(i),e+Zt(i)+1,t),n=Ws(r.abs(),!1,e+Zt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return wt(new t(e),Zt(e)+1,t.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(e){var t,n,r,i,s,l,d=this,f=d.constructor,h=12,m=+(e=new f(e));if(!e.s)return new f(or);if(d=new f(d),!d.s){if(e.s<1)throw Error(Mr+"Infinity");return d}if(d.eq(or))return d;if(r=f.precision,e.eq(or))return wt(d,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=d.s,l){if((n=m<0?-m:m)<=MP){for(i=new f(or),t=Math.ceil(r/Ct+4),Pt=!1;n%2&&(i=i.times(d),hO(i.d,t)),n=Rl(n/2),n!==0;)d=d.times(d),hO(d.d,t);return Pt=!0,e.s<0?new f(or).div(i):wt(i,r)}}else if(s<0)throw Error(Mr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,Pt=!1,i=e.times(xu(d,r+h)),Pt=!0,i=DP(i),i.s=s,i};Ee.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Zt(i),r=Ws(i,n<=s.toExpNeg||n>=s.toExpPos)):(ma(e,1,Ml),t===void 0?t=s.rounding:ma(t,0,8),i=wt(new s(i),e,t),n=Zt(i),r=Ws(i,e<=n||n<=s.toExpNeg,e)),r};Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ma(e,1,Ml),t===void 0?t=r.rounding:ma(t,0,8)),wt(new r(n),e,t)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Zt(e),n=e.constructor;return Ws(e,t<=n.toExpNeg||t>=n.toExpPos)};function RP(e,t){var n,r,i,s,l,d,f,h,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Pt?wt(t,g):t;if(f=e.d,h=t.d,l=e.e,i=t.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,d=h.length):(r=h,i=l,d=f.length),l=Math.ceil(g/Ct),d=l>d?l+1:d+1,s>d&&(s=d,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(d=f.length,s=h.length,d-s<0&&(s=d,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/fn|0,f[s]%=fn;for(n&&(f.unshift(n),++i),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=i,Pt?wt(t,g):t}function ma(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ks+e)}function ua(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=Ct-r.length,n&&(s+=Li(n)),s+=r;l=e[t],r=l+"",n=Ct-r.length,n&&(s+=Li(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ka=(function(){function e(r,i){var s,l=0,d=r.length;for(r=r.slice();d--;)s=r[d]*i+l,r[d]=s%fn|0,l=s/fn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var d,f;if(s!=l)f=s>l?1:-1;else for(d=f=0;d<s;d++)if(r[d]!=i[d]){f=r[d]>i[d]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*fn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var d,f,h,m,g,v,x,_,j,S,N,O,C,A,T,k,R,L,K=r.constructor,B=r.s==i.s?1:-1,F=r.d,z=i.d;if(!r.s)return new K(r);if(!i.s)throw Error(Mr+"Division by zero");for(f=r.e-i.e,R=z.length,T=F.length,x=new K(B),_=x.d=[],h=0;z[h]==(F[h]||0);)++h;if(z[h]>(F[h]||0)&&--f,s==null?O=s=K.precision:l?O=s+(Zt(r)-Zt(i))+1:O=s,O<0)return new K(0);if(O=O/Ct+2|0,h=0,R==1)for(m=0,z=z[0],O++;(h<T||m)&&O--;h++)C=m*fn+(F[h]||0),_[h]=C/z|0,m=C%z|0;else{for(m=fn/(z[0]+1)|0,m>1&&(z=e(z,m),F=e(F,m),R=z.length,T=F.length),A=R,j=F.slice(0,R),S=j.length;S<R;)j[S++]=0;L=z.slice(),L.unshift(0),k=z[0],z[1]>=fn/2&&++k;do m=0,d=t(z,j,R,S),d<0?(N=j[0],R!=S&&(N=N*fn+(j[1]||0)),m=N/k|0,m>1?(m>=fn&&(m=fn-1),g=e(z,m),v=g.length,S=j.length,d=t(g,j,v,S),d==1&&(m--,n(g,R<v?L:z,v))):(m==0&&(d=m=1),g=z.slice()),v=g.length,v<S&&g.unshift(0),n(j,g,S),d==-1&&(S=j.length,d=t(z,j,R,S),d<1&&(m++,n(j,R<S?L:z,S))),S=j.length):d===0&&(m++,j=[0]),_[h++]=m,d&&j[0]?j[S++]=F[A]||0:(j=[F[A]],S=1);while((A++<T||j[0]!==void 0)&&O--)}return _[0]||_.shift(),x.e=f,wt(x,l?s+Zt(x)+1:s)}})();function DP(e,t){var n,r,i,s,l,d,f=0,h=0,m=e.constructor,g=m.precision;if(Zt(e)>16)throw Error(Ox+Zt(e));if(!e.s)return new m(or);for(Pt=!1,d=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(Os(2,h))/Math.LN10*2+5|0,d+=r,n=i=s=new m(or),m.precision=d;;){if(i=wt(i.times(e),d),n=n.times(++f),l=s.plus(Ka(i,n,d)),ua(l.d).slice(0,d)===ua(s.d).slice(0,d)){for(;h--;)s=wt(s.times(s),d);return m.precision=g,t==null?(Pt=!0,wt(s,g)):s}s=l}}function Zt(e){for(var t=e.e*Ct,n=e.d[0];n>=10;n/=10)t++;return t}function by(e,t,n){if(t>e.LN10.sd())throw Pt=!0,n&&(e.precision=n),Error(Mr+"LN10 precision limit exceeded");return wt(new e(e.LN10),t)}function Li(e){for(var t="";e--;)t+="0";return t}function xu(e,t){var n,r,i,s,l,d,f,h,m,g=1,v=10,x=e,_=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Mr+(x.s?"NaN":"-Infinity"));if(x.eq(or))return new j(0);if(t==null?(Pt=!1,h=S):h=t,x.eq(10))return t==null&&(Pt=!0),by(j,h);if(h+=v,j.precision=h,n=ua(_),r=n.charAt(0),s=Zt(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ua(x.d),r=n.charAt(0),g++;s=Zt(x),r>1?(x=new j("0."+n),s++):x=new j(r+"."+n.slice(1))}else return f=by(j,h+2,S).times(s+""),x=xu(new j(r+"."+n.slice(1)),h-v).plus(f),j.precision=S,t==null?(Pt=!0,wt(x,S)):x;for(d=l=x=Ka(x.minus(or),x.plus(or),h),m=wt(x.times(x),h),i=3;;){if(l=wt(l.times(m),h),f=d.plus(Ka(l,new j(i),h)),ua(f.d).slice(0,h)===ua(d.d).slice(0,h))return d=d.times(2),s!==0&&(d=d.plus(by(j,h+2,S).times(s+""))),d=Ka(d,new j(g),h),j.precision=S,t==null?(Pt=!0,wt(d,S)):d;d=f,i+=2}}function fO(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Rl(n/Ct),e.d=[],r=(n+1)%Ct,n<0&&(r+=Ct),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Ct;r<i;)e.d.push(+t.slice(r,r+=Ct));t=t.slice(r),r=Ct-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Pt&&(e.e>kh||e.e<-kh))throw Error(Ox+n)}else e.s=0,e.e=0,e.d=[0];return e}function wt(e,t,n){var r,i,s,l,d,f,h,m,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=Ct,i=t,h=g[m=0];else{if(m=Math.ceil((r+1)/Ct),s=g.length,m>=s)return e;for(h=s=g[m],l=1;s>=10;s/=10)l++;r%=Ct,i=r-Ct+l}if(n!==void 0&&(s=Os(10,l-i-1),d=h/s%10|0,f=t<0||g[m+1]!==void 0||h%s,f=n<4?(d||f)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||f||n==6&&(r>0?i>0?h/Os(10,l-i):0:g[m-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return f?(s=Zt(e),g.length=1,t=t-s-1,g[0]=Os(10,(Ct-t%Ct)%Ct),e.e=Rl(-t/Ct)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=m,s=1,m--):(g.length=m+1,s=Os(10,Ct-r),g[m]=i>0?(h/Os(10,l-i)%Os(10,i)|0)*s:0),f)for(;;)if(m==0){(g[0]+=s)==fn&&(g[0]=1,++e.e);break}else{if(g[m]+=s,g[m]!=fn)break;g[m--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(Pt&&(e.e>kh||e.e<-kh))throw Error(Ox+Zt(e));return e}function IP(e,t){var n,r,i,s,l,d,f,h,m,g,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),Pt?wt(t,x):t;if(f=e.d,g=t.d,r=t.e,h=e.e,f=f.slice(),l=h-r,l){for(m=l<0,m?(n=f,l=-l,d=g.length):(n=g,r=h,d=f.length),i=Math.max(Math.ceil(x/Ct),d)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,d=g.length,m=i<d,m&&(d=i),i=0;i<d;i++)if(f[i]!=g[i]){m=f[i]<g[i];break}l=0}for(m&&(n=f,f=g,g=n,t.s=-t.s),d=f.length,i=g.length-d;i>0;--i)f[d++]=0;for(i=g.length;i>l;){if(f[--i]<g[i]){for(s=i;s&&f[--s]===0;)f[s]=fn-1;--f[s],f[i]+=fn}f[i]-=g[i]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,Pt?wt(t,x):t):new v(0)}function Ws(e,t,n){var r,i=Zt(e),s=ua(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Li(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Li(-i-1)+s,n&&(r=n-l)>0&&(s+=Li(r))):i>=l?(s+=Li(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Li(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Li(r))),e.s<0?"-"+s:s}function hO(e,t){if(e.length>t)return e.length=t,!0}function LP(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ks+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return fO(l,s.toString())}else if(typeof s!="string")throw Error(Ks+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,_G.test(s))fO(l,s);else throw Error(Ks+s)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=LP,i.config=i.set=jG,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function jG(e){if(!e||typeof e!="object")throw Error(Mr+"Object expected");var t,n,r,i=["precision",1,Ml,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Rl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ks+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ks+n+": "+r);return this}var Cx=LP(wG);or=new Cx(1);const dt=Cx;var SG=e=>e,$P={},zP=e=>e===$P,mO=e=>function t(){return arguments.length===0||arguments.length===1&&zP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},UP=(e,t)=>e===1?t:mO(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==$P).length;return s>=e?t(...r):UP(e-s,mO(function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];var h=r.map(m=>zP(m)?d.shift():m);return t(...h,...d)}))}),vm=e=>UP(e.length,e),$0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},NG=vm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),EG=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return SG;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((d,f)=>f(d),s(...arguments))}},z0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),qP=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,d)=>{var f;return l===((f=t)===null||f===void 0?void 0:f[d])})||(t=i,n=e(...i)),n}};function BP(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function FP(e,t,n){for(var r=new dt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}vm((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});vm((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});vm((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var HP=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},KP=(e,t,n)=>{if(e.lte(0))return new dt(0);var r=BP(e.toNumber()),i=new dt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,d=new dt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=d.mul(i);return t?new dt(f.toNumber()):new dt(Math.ceil(f.toNumber()))},OG=(e,t,n)=>{var r=new dt(1),i=new dt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new dt(10).pow(BP(e)-1),i=new dt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):n||(i=new dt(Math.floor(e)));var l=Math.floor((t-1)/2),d=EG(NG(f=>i.add(new dt(f-l).mul(r)).toNumber()),$0);return d(0,t)},GP=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var l=KP(new dt(n).sub(t).div(r-1),i,s),d;t<=0&&n>=0?d=new dt(0):(d=new dt(t).add(n).div(2),d=d.sub(new dt(d).mod(l)));var f=Math.ceil(d.sub(t).div(l).toNumber()),h=Math.ceil(new dt(n).sub(d).div(l).toNumber()),m=f+h+1;return m>r?GP(t,n,r,i,s+1):(m<r&&(h=n>0?h+(r-m):h,f=n>0?f:f+(r-m)),{step:l,tickMin:d.sub(new dt(f).mul(l)),tickMax:d.add(new dt(h).mul(l))})};function CG(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,d]=HP([t,n]);if(l===-1/0||d===1/0){var f=d===1/0?[l,...$0(0,r-1).map(()=>1/0)]:[...$0(0,r-1).map(()=>-1/0),d];return t>n?z0(f):f}if(l===d)return OG(l,r,i);var{step:h,tickMin:m,tickMax:g}=GP(l,d,s,i,0),v=FP(m,g.add(new dt(.1).mul(h)),h);return t>n?z0(v):v}function AG(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=HP([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var d=Math.max(t,2),f=KP(new dt(l).sub(s).div(d-1),i,0),h=[...FP(new dt(s),new dt(l),f),l];return i===!1&&(h=h.map(m=>Math.round(m))),n>r?z0(h):h}var kG=qP(CG),TG=qP(AG),YP=e=>e.rootProps.maxBarSize,PG=e=>e.rootProps.barGap,VP=e=>e.rootProps.barCategoryGap,MG=e=>e.rootProps.barSize,zu=e=>e.rootProps.stackOffset,Ax=e=>e.options.chartName,kx=e=>e.rootProps.syncId,WP=e=>e.rootProps.syncMethod,Tx=e=>e.options.eventEmitter,$a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},sr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ym=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},RG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:$a.reversed,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:$a.type,unit:void 0},DG={allowDataOverflow:sr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sr.scale,tick:sr.tick,tickCount:sr.tickCount,ticks:void 0,type:sr.type,unit:void 0},IG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},LG={allowDataOverflow:sr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sr.scale,tick:sr.tick,tickCount:sr.tickCount,ticks:void 0,type:"category",unit:void 0},Px=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?IG:RG,Mx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?LG:DG,bm=e=>e.polarOptions,Rx=re([Za,ei,an],TT),XP=re([bm,Rx],(e,t)=>{if(e!=null)return kn(e.innerRadius,t,0)}),QP=re([bm,Rx],(e,t)=>{if(e!=null)return kn(e.outerRadius,t,t*.8)}),$G=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},JP=re([bm],$G);re([Px,JP],ym);var ZP=re([Rx,XP,QP],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});re([Mx,ZP],ym);var eM=re([ot,bm,XP,QP,Za,ei],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:d,startAngle:f,endAngle:h}=t;return{cx:kn(l,i,i/2),cy:kn(d,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),Rt=(e,t)=>t,Uu=(e,t,n)=>n;function Dx(e){return e==null?void 0:e.id}var on=e=>{var t=ot(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Dl=e=>e.tooltip.settings.axisId,vn=e=>{var t=on(e),n=Dl(e);return qu(e,t,n)},tM=re([vn],e=>e==null?void 0:e.dataKey);function nM(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var m=Dx(d);h.forEach((g,v)=>{var x=s==null||i?v:String(It(g,s,null)),_=It(g,d.dataKey,0),j;l.has(x)?j=l.get(x):j={},Object.assign(j,{[m]:_}),l.set(x,j)})}}),Array.from(l.values())}function xm(e){return e.stackId!=null&&e.dataKey!=null}function pO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pO(Object(n),!0).forEach(function(r){zG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zG(e,t,n){return(t=UG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UG(e){var t=qG(e,"string");return typeof t=="symbol"?t:t+""}function qG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U0=[0,"auto"],ar={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},rM=(e,t)=>e.cartesianAxis.xAxis[t],ni=(e,t)=>{var n=rM(e,t);return n??ar},ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:U0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ru},aM=(e,t)=>e.cartesianAxis.yAxis[t],ri=(e,t)=>{var n=aM(e,t);return n??ir},BG={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ix=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??BG},Ft=(e,t,n)=>{switch(t){case"xAxis":return ni(e,n);case"yAxis":return ri(e,n);case"zAxis":return Ix(e,n);case"angleAxis":return Px(e,n);case"radiusAxis":return Mx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},FG=(e,t,n)=>{switch(t){case"xAxis":return ni(e,n);case"yAxis":return ri(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},qu=(e,t,n)=>{switch(t){case"xAxis":return ni(e,n);case"yAxis":return ri(e,n);case"angleAxis":return Px(e,n);case"radiusAxis":return Mx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},iM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Lx(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var $x=e=>e.graphicalItems.cartesianItems,HG=re([Rt,Uu],Lx),zx=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Bu=re([$x,Ft,HG],zx),sM=re([Bu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(xm)),oM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),lM=re([Bu],oM),Ux=e=>e.map(t=>t.data).filter(Boolean).flat(1),KG=re([Bu],Ux),qx=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Bx=re([KG,Ex],qx),Fx=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:It(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:It(i,r)}))):e.map(r=>({value:r})),wm=re([Bx,Ft,Bu],Fx);function cM(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ro(e){return e.filter(t=>ha(t)||t instanceof Date).map(Number).filter(t=>ur(t)===!1)}function GG(e,t,n){return!n||typeof t!="number"||ur(t)?[]:n.length?ro(n.flatMap(r=>{var i=It(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!fr(s)||!fr(l)))return[t-s,t+l]})):[]}var YG=re([sM,Ex,vn],nM),uM=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,d]=s,f=d.map(Dx);return[l,{stackedData:Q9(e,f,n),graphicalItems:d}]}))},q0=re([YG,sM,zu],uM),dM=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=nB(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},VG=re([q0,Ji,Rt],dM),fM=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var d,f,h=(d=r[l.id])===null||d===void 0?void 0:d.filter(g=>cM(i,g)),m=It(s,(f=t.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:m,errorDomain:GG(s,m,h)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:It(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),_m=e=>e.errorBars,hM=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>cM(n,r));re([lM,_m,Rt],hM);var WG=re([Bx,Ft,lM,_m,Rt],fM);function XG(e){var{value:t}=e;if(ha(t)||t instanceof Date)return t}var gO=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=ro(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},QG=(e,t,n)=>{var r=e.map(XG).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Ek(r))?JT(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Hx=e=>{var t;if(e==null||!("domain"in e))return U0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=ro(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:U0},Ph=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),d=Math.max(...s);return[l,d]}},mM=e=>e.referenceElements.dots,Il=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),JG=re([mM,Rt,Uu],Il),pM=e=>e.referenceElements.areas,ZG=re([pM,Rt,Uu],Il),gM=e=>e.referenceElements.lines,eY=re([gM,Rt,Uu],Il),vM=(e,t)=>{var n=ro(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},tY=re(JG,Rt,vM),yM=(e,t)=>{var n=ro(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},nY=re([ZG,Rt],yM),bM=(e,t)=>{var n=ro(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},rY=re(eY,Rt,bM),aY=re(tY,rY,nY,(e,t,n)=>Ph(e,n,t)),xM=re([Ft],Hx),Kx=(e,t,n,r,i,s,l)=>{var d=bG(t,e.allowDataOverflow);if(d!=null)return d;var f=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=f?Ph(n,i,gO(r)):Ph(i,gO(r));return xG(t,h,e.allowDataOverflow)},iY=re([Ft,xM,VG,WG,aY,ot,Rt],Kx),sY=[0,1],Gx=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:d,type:f}=e,h=Zs(t,s);return h&&d==null?JT(0,n.length):f==="category"?QG(r,e,h):i==="expand"?sY:l}},Yx=re([Ft,ot,Bx,wm,zu,Rt,iY],Gx),wM=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var d="scale".concat(ku(s));return d in Yc?d:"point"}}},Ll=re([Ft,ot,iM,Ax,Rt],wM);function oY(e){if(e!=null){if(e in Yc)return Yc[e]();var t="scale".concat(ku(e));if(t in Yc)return Yc[t]()}}function Vx(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=oY(t);if(i!=null){var s=i.domain(n).range(r);return G9(s),s}}}var Wx=(e,t,n)=>{var r=Hx(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&_l(e))return kG(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&_l(e))return TG(e,t.tickCount,t.allowDecimals)}},Xx=re([Yx,qu,Ll],Wx),Qx=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&_l(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],d=n[n.length-1];return[Math.min(i,s),Math.max(l,d)]}return t},lY=re([Ft,Yx,Xx,Rt],Qx),cY=re(wm,Ft,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(ro(e.map(d=>d.value))).sort((d,f)=>d-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),_M=re(cY,ot,VP,an,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!fr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=kn(n,e*s),d=e*s/2;return d-l-(d-l)/s*l}return 0}),uY=(e,t)=>{var n=ni(e,t);return n==null||typeof n.padding!="string"?0:_M(e,"xAxis",t,n.padding)},dY=(e,t)=>{var n=ri(e,t);return n==null||typeof n.padding!="string"?0:_M(e,"yAxis",t,n.padding)},fY=re(ni,uY,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),hY=re(ri,dY,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),mY=re([an,fY,lm,om,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),pY=re([an,ot,hY,lm,om,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Fu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return mY(e,n,r);case"yAxis":return pY(e,n,r);case"zAxis":return(i=Ix(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return JP(e);case"radiusAxis":return ZP(e,n);default:return}},jM=re([Ft,Fu],ym),$l=re([Ft,Ll,lY,jM],Vx);re([Bu,_m,Rt],hM);function SM(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var jm=(e,t)=>t,Sm=(e,t,n)=>n,gY=re(im,jm,Sm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(SM)),vY=re(sm,jm,Sm,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(SM)),NM=(e,t)=>({width:e.width,height:t.height}),yY=(e,t)=>{var n=typeof t.width=="number"?t.width:Ru;return{width:n,height:e.height}},EM=re(an,ni,NM),bY=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},xY=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},wY=re(ei,an,gY,jm,Sm,(e,t,n,r,i)=>{var s={},l;return n.forEach(d=>{var f=NM(t,d);l==null&&(l=bY(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[d.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),_Y=re(Za,an,vY,jm,Sm,(e,t,n,r,i)=>{var s={},l;return n.forEach(d=>{var f=yY(t,d);l==null&&(l=xY(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[d.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),jY=(e,t)=>{var n=ni(e,t);if(n!=null)return wY(e,n.orientation,n.mirror)},SY=re([an,ni,jY,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),NY=(e,t)=>{var n=ri(e,t);if(n!=null)return _Y(e,n.orientation,n.mirror)},EY=re([an,ri,NY,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),OM=re(an,ri,(e,t)=>{var n=typeof t.width=="number"?t.width:Ru;return{width:n,height:e.height}}),vO=(e,t,n)=>{switch(t){case"xAxis":return EM(e,n).width;case"yAxis":return OM(e,n).height;default:return}},CM=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,d=Zs(e,r),f=t.map(h=>h.value);if(l&&d&&s==="category"&&i&&Ek(f))return f}},Jx=re([ot,wm,Ft,Rt],CM),AM=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Zs(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(d=>d.value)}},Zx=re([ot,wm,qu,Rt],AM),yO=re([ot,FG,Ll,$l,Jx,Zx,Fu,Xx,Rt],(e,t,n,r,i,s,l,d,f)=>{if(t==null)return null;var h=Zs(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:d,range:l,realScaleType:n,scale:r}}),OY=(e,t,n,r,i,s,l,d,f)=>{if(!(t==null||r==null)){var h=Zs(e,f),{type:m,ticks:g,tickCount:v}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/x:0;_=f==="angleAxis"&&s!=null&&s.length>=2?hn(s[0]-s[1])*2*_:_;var j=g||i;if(j){var S=j.map((N,O)=>{var C=l?l.indexOf(N):N;return{index:O,coordinate:r(C)+_,value:N,offset:_}});return S.filter(N=>!ur(N.coordinate))}return h&&d?d.map((N,O)=>({coordinate:r(N)+_,value:N,index:O,offset:_})):r.ticks?r.ticks(v).map(N=>({coordinate:r(N)+_,value:N,offset:_})):r.domain().map((N,O)=>({coordinate:r(N)+_,value:l?l[N]:N,index:O,offset:_}))}},kM=re([ot,qu,Ll,$l,Xx,Fu,Jx,Zx,Rt],OY),CY=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var d=Zs(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(r==null?void 0:r.length)>=2?hn(r[0]-r[1])*2*h:h,d&&s?s.map((m,g)=>({coordinate:n(m)+h,value:m,index:g,offset:h})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,g)=>({coordinate:n(m)+h,value:i?i[m]:m,index:g,offset:h}))}},jl=re([ot,qu,$l,Fu,Jx,Zx,Rt],CY),Sl=re(Ft,$l,(e,t)=>{if(!(e==null||t==null))return Th(Th({},e),{},{scale:t})}),AY=re([Ft,Ll,Yx,jM],Vx);re((e,t,n)=>Ix(e,n),AY,(e,t)=>{if(!(e==null||t==null))return Th(Th({},e),{},{scale:t})});var kY=re([ot,im,sm],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),TM=e=>e.options.defaultTooltipEventType,PM=e=>e.options.validateTooltipEventTypes;function MM(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function ew(e,t){var n=TM(e),r=PM(e);return MM(t,n,r)}function TY(e){return Te(t=>ew(t,e))}var RM=(e,t)=>{var n,r=Number(t);if(!(ur(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},PY=e=>e.tooltip.settings,qi={active:!1,index:null,dataKey:void 0,coordinate:void 0},MY={itemInteraction:{click:qi,hover:qi},axisInteraction:{click:qi,hover:qi},keyboardInteraction:qi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},DM=hr({name:"tooltip",initialState:MY,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ha(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:RY,removeTooltipEntrySettings:DY,setTooltipSettingsState:IY,setActiveMouseOverItemIndex:IM,mouseLeaveItem:LY,mouseLeaveChart:LM,setActiveClickItemIndex:$Y,setMouseOverAxisIndex:$M,setMouseClickAxisIndex:zY,setSyncInteraction:B0,setKeyboardInteraction:F0}=DM.actions,UY=DM.reducer;function bO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(n),!0).forEach(function(r){qY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qY(e,t,n){return(t=BY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BY(e){var t=FY(e,"string");return typeof t=="symbol"?t:t+""}function FY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HY(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KY(e){return e.index!=null}var zM=(e,t,n,r)=>{if(t==null)return qi;var i=HY(e,t,n);if(i==null)return qi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(KY(i)){if(s)return Of(Of({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Of(Of({},qi),{},{coordinate:i.coordinate})},tw=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!fr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},UM=(e,t,n,r,i,s,l,d)=>{if(!(s==null||d==null)){var f=l[0],h=f==null?void 0:d(f.positions,s);if(h!=null)return h;var m=i==null?void 0:i[Number(s)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},qM=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Hu=e=>e.options.tooltipPayloadSearcher,zl=e=>e.tooltip;function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(n),!0).forEach(function(r){GY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GY(e,t,n){return(t=YY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WY(e,t){return e??t}var BM=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:m}=n,g=[];return e.reduce((v,x)=>{var _,{dataDefinedOnItem:j,settings:S}=x,N=WY(j,d),O=Array.isArray(N)?PT(N,h,m):N,C=(_=S==null?void 0:S.dataKey)!==null&&_!==void 0?_:r,A=S==null?void 0:S.nameKey,T;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?T=DU(O,r,i):T=s(O,t,f,A),Array.isArray(T))T.forEach(R=>{var L=wO(wO({},S),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});v.push(rE({tooltipEntrySettings:L,dataKey:R.dataKey,payload:R.payload,value:It(R.payload,R.dataKey),name:R.name}))});else{var k;v.push(rE({tooltipEntrySettings:S,dataKey:C,payload:T,value:It(T,C),name:(k=It(T,A))!==null&&k!==void 0?k:S==null?void 0:S.name}))}return v},g)}},nw=re([vn,ot,iM,Ax,on],wM),XY=re([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),QY=re([on,Dl],Lx),Ku=re([XY,vn,QY],zx),JY=re([Ku],e=>e.filter(xm)),ZY=re([Ku],Ux),Ul=re([ZY,Ji],qx),eV=re([JY,Ji,vn],nM),rw=re([Ul,vn,Ku],Fx),tV=re([vn],Hx),nV=re([Ku],e=>e.filter(xm)),rV=re([eV,nV,zu],uM),aV=re([rV,Ji,on],dM),iV=re([Ku],oM),sV=re([Ul,vn,iV,_m,on],fM),oV=re([mM,on,Dl],Il),lV=re([oV,on],vM),cV=re([pM,on,Dl],Il),uV=re([cV,on],yM),dV=re([gM,on,Dl],Il),fV=re([dV,on],bM),hV=re([lV,fV,uV],Ph),mV=re([vn,tV,aV,sV,hV,ot,on],Kx),FM=re([vn,ot,Ul,rw,zu,on,mV],Gx),pV=re([FM,vn,nw],Wx),gV=re([vn,FM,pV,on],Qx),HM=e=>{var t=on(e),n=Dl(e),r=!1;return Fu(e,t,n,r)},KM=re([vn,HM],ym),GM=re([vn,nw,gV,KM],Vx),vV=re([ot,rw,vn,on],CM),yV=re([ot,rw,vn,on],AM),bV=(e,t,n,r,i,s,l,d)=>{if(t){var{type:f}=t,h=Zs(e,d);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return g=d==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?hn(i[0]-i[1])*2*g:g,h&&l?l.map((v,x)=>({coordinate:r(v)+g,value:v,index:x,offset:g})):r.domain().map((v,x)=>({coordinate:r(v)+g,value:s?s[v]:v,index:x,offset:g}))}}},ai=re([ot,vn,nw,GM,HM,vV,yV,on],bV),aw=re([TM,PM,PY],(e,t,n)=>MM(n.shared,e,t)),YM=e=>e.tooltip.settings.trigger,iw=e=>e.tooltip.settings.defaultIndex,Nm=re([zl,aw,YM,iw],zM),Xs=re([Nm,Ul],tw),VM=re([ai,Xs],RM),WM=re([Nm],e=>{if(e)return e.dataKey}),XM=re([zl,aw,YM,iw],qM),xV=re([Za,ei,ot,an,ai,iw,XM,Hu],UM),wV=re([Nm,xV],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),_V=re([Nm],e=>e.active),jV=re([XM,Xs,Ji,tM,VM,Hu,aw],BM);re([jV],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(r){SV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SV(e,t,n){return(t=NV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NV(e){var t=EV(e,"string");return typeof t=="symbol"?t:t+""}function EV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OV=()=>Te(vn),CV=()=>{var e=OV(),t=Te(ai),n=Te(GM);return Wb(jO(jO({},e),{},{scale:n}),t)},AV=()=>Te(Ax),sw=(e,t)=>t,QM=(e,t,n)=>n,ow=(e,t,n,r)=>r,kV=re(ai,e=>Jh(e,t=>t.coordinate)),lw=re([zl,sw,QM,ow],zM),JM=re([lw,Ul],tw),TV=(e,t,n)=>{if(t!=null){var r=zl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},ZM=re([zl,sw,QM,ow],qM),Mh=re([Za,ei,ot,an,ai,ow,ZM,Hu],UM),PV=re([lw,Mh],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),e3=re(ai,JM,RM),MV=re([ZM,JM,Ji,tM,e3,Hu,sw],BM),RV=re([lw],e=>({isActive:e.active,activeIndex:e.index})),DV=(e,t,n,r,i,s,l,d)=>{if(!(!e||!t||!r||!i||!s)){var f=rB(e.chartX,e.chartY,t,n,d);if(f){var h=iB(f,t),m=H9(h,l,s,r,i),g=aB(t,s,m,f);return{activeIndex:String(m),activeCoordinate:g}}}};function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H0.apply(null,arguments)}function SO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(n),!0).forEach(function(r){IV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IV(e,t,n){return(t=LV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LV(e){var t=$V(e,"string");return typeof t=="symbol"?t:t+""}function $V(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zV(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:d,tooltipEventType:f,chartName:h}=e,m=t,g=n,v=r;if(!d||!m||h!=="ScatterChart"&&f!=="axis")return null;var x,_;if(h==="ScatterChart")x=m,_=iF;else if(h==="BarChart")x=sF(l,m,i,s),_=VT;else if(l==="radial"){var{cx:j,cy:S,radius:N,startAngle:O,endAngle:C}=WT(m);x={cx:j,cy:S,startAngle:O,endAngle:C,innerRadius:N,outerRadius:N},_=QT}else x={points:zF(l,m,i)},_=FT;var A=typeof d=="object"&&"className"in d?d.className:void 0,T=Cf(Cf(Cf(Cf({stroke:"#ccc",pointerEvents:"none"},i),x),rn(d,!1)),{},{payload:g,payloadIndex:v,className:ft("recharts-tooltip-cursor",A)});return b.isValidElement(d)?b.cloneElement(d,T):b.createElement(_,T)}function UV(e){var t=CV(),n=$T(),r=ex(),i=AV();return b.createElement(zV,H0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var t3=b.createContext(null),qV=()=>b.useContext(t3),xy={exports:{}},NO;function BV(){return NO||(NO=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function s(f,h,m,g,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new i(m,g||f,v),_=n?n+h:h;return f._events[_]?f._events[_].fn?f._events[_]=[f._events[_],x]:f._events[_].push(x):(f._events[_]=x,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],m,g;if(this._eventsCount===0)return h;for(g in m=this._events)t.call(m,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},d.prototype.listeners=function(h){var m=n?n+h:h,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,x=g.length,_=new Array(x);v<x;v++)_[v]=g[v].fn;return _},d.prototype.listenerCount=function(h){var m=n?n+h:h,g=this._events[m];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,m,g,v,x,_){var j=n?n+h:h;if(!this._events[j])return!1;var S=this._events[j],N=arguments.length,O,C;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),N){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,g),!0;case 4:return S.fn.call(S.context,m,g,v),!0;case 5:return S.fn.call(S.context,m,g,v,x),!0;case 6:return S.fn.call(S.context,m,g,v,x,_),!0}for(C=1,O=new Array(N-1);C<N;C++)O[C-1]=arguments[C];S.fn.apply(S.context,O)}else{var A=S.length,T;for(C=0;C<A;C++)switch(S[C].once&&this.removeListener(h,S[C].fn,void 0,!0),N){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,m);break;case 3:S[C].fn.call(S[C].context,m,g);break;case 4:S[C].fn.call(S[C].context,m,g,v);break;default:if(!O)for(T=1,O=new Array(N-1);T<N;T++)O[T-1]=arguments[T];S[C].fn.apply(S[C].context,O)}}return!0},d.prototype.on=function(h,m,g){return s(this,h,m,g,!1)},d.prototype.once=function(h,m,g){return s(this,h,m,g,!0)},d.prototype.removeListener=function(h,m,g,v){var x=n?n+h:h;if(!this._events[x])return this;if(!m)return l(this,x),this;var _=this._events[x];if(_.fn)_.fn===m&&(!v||_.once)&&(!g||_.context===g)&&l(this,x);else{for(var j=0,S=[],N=_.length;j<N;j++)(_[j].fn!==m||v&&!_[j].once||g&&_[j].context!==g)&&S.push(_[j]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},d.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(xy)),xy.exports}var FV=BV();const HV=Qr(FV);var wu=new HV,K0="recharts.syncEvent.tooltip",EO="recharts.syncEvent.brush";function n3(e,t){if(t){var n=Number.parseInt(t,10);if(!ur(n))return e==null?void 0:e[n]}}var KV={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},r3=hr({name:"options",initialState:KV,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GV=r3.reducer,{createEventEmitter:YV}=r3.actions;function VV(e){return e.tooltip.syncInteraction}var WV={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},a3=hr({name:"chartData",initialState:WV,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:OO,setDataStartEndIndexes:XV,setComputedData:Fre}=a3.actions,QV=a3.reducer,JV=["x","y"];function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(r){ZV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZV(e,t,n){return(t=eW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eW(e){var t=tW(e,"string");return typeof t=="symbol"?t:t+""}function tW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nW(e,t){if(e==null)return{};var n,r,i=rW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var i3=()=>{};function aW(){var e=Te(kx),t=Te(Tx),n=Lt(),r=Te(WP),i=Te(ai),s=ex(),l=Qb(),d=Te(f=>f.rootProps.className);b.useEffect(()=>{if(e==null)return i3;var f=(h,m,g)=>{if(t!==g&&e===h){if(r==="index"){var v;if(l&&m!==null&&m!==void 0&&(v=m.payload)!==null&&v!==void 0&&v.coordinate){var x=m.payload.coordinate,{x:_,y:j}=x,S=nW(x,JV),N=xs(xs(xs({},S),typeof _=="number"&&{x:Math.max(l.x,Math.min(_,l.x+l.width))}),typeof j=="number"&&{y:Math.max(l.y,Math.min(j,l.y+l.height))}),O=xs(xs({},m),{},{payload:xs(xs({},m.payload),{},{coordinate:N})});n(O)}else n(m);return}if(i!=null){var C;if(typeof r=="function"){var A={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},T=r(i,A);C=i[T]}else r==="value"&&(C=i.find(Q=>String(Q.value)===m.payload.label));var{coordinate:k}=m.payload;if(C==null||m.payload.active===!1||k==null||l==null){n(B0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:L}=k,K=Math.min(R,l.x+l.width),B=Math.min(L,l.y+l.height),F={x:s==="horizontal"?C.coordinate:K,y:s==="horizontal"?B:C.coordinate},z=B0({active:m.payload.active,coordinate:F,dataKey:m.payload.dataKey,index:String(C.index),label:m.payload.label});n(z)}}};return wu.on(K0,f),()=>{wu.off(K0,f)}},[d,n,t,e,r,i,s,l])}function iW(){var e=Te(kx),t=Te(Tx),n=Lt();b.useEffect(()=>{if(e==null)return i3;var r=(i,s,l)=>{t!==l&&e===i&&n(XV(s))};return wu.on(EO,r),()=>{wu.off(EO,r)}},[n,t,e])}function sW(){var e=Lt();b.useEffect(()=>{e(YV())},[e]),aW(),iW()}function oW(e,t,n,r,i,s){var l=Te(v=>TV(v,e,t)),d=Te(Tx),f=Te(kx),h=Te(WP),m=Te(VV),g=m==null?void 0:m.active;b.useEffect(()=>{if(!g&&f!=null&&d!=null){var v=B0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});wu.emit(K0,f,v,d)}},[g,n,l,i,r,d,f,h,s])}function AO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(n),!0).forEach(function(r){lW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lW(e,t,n){return(t=cW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cW(e){var t=uW(e,"string");return typeof t=="symbol"?t:t+""}function uW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dW(e){return e.dataKey}function fW(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(LB,t)}var TO=[],hW={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!eo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function PO(e){var t=Rn(e,hW),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:d,isAnimationActive:f,offset:h,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:_,cursor:j,shared:S,trigger:N,defaultIndex:O,portal:C,axisId:A}=t,T=Lt(),k=typeof O=="number"?String(O):O;b.useEffect(()=>{T(IY({shared:S,trigger:N,axisId:A,active:n,defaultIndex:k}))},[T,S,N,A,n,k]);var R=Qb(),L=BT(),K=TY(S),{activeIndex:B,isActive:F}=Te(se=>RV(se,K,N,k)),z=Te(se=>MV(se,K,N,k)),Q=Te(se=>e3(se,K,N,k)),H=Te(se=>PV(se,K,N,k)),X=z,I=qV(),$=n??F,[U,ee]=sT([X,$]),W=K==="axis"?Q:void 0;oW(K,N,H,W,B,$);var P=C??I;if(P==null)return null;var M=X??TO;$||(M=TO),d&&M.length&&(M=tT(X.filter(se=>se.value!=null&&(se.hide!==!0||t.includeHidden)),m,dW));var G=M.length>0,ne=b.createElement(HB,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:f,active:$,coordinate:H,hasPayload:G,offset:h,position:g,reverseDirection:v,useTranslate3d:x,viewBox:R,wrapperStyle:_,lastBoundingBox:U,innerRef:ee,hasPortalFromProps:!!C},fW(l,kO(kO({},t),{},{payload:M,label:W,active:$,coordinate:H,accessibilityLayer:L})));return b.createElement(b.Fragment,null,db.createPortal(ne,P),$&&b.createElement(UV,{cursor:j,tooltipEventType:K,coordinate:H,payload:X,index:B}))}var wy={},_y={},jy={},MO;function mW(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,d=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),m=()=>{d!==null&&(n.apply(l,d),l=void 0,d=null)},g=()=>{h&&m(),j()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},_=()=>{v!==null&&(clearTimeout(v),v=null)},j=()=>{_(),l=void 0,d=null},S=()=>{m()},N=function(...O){if(i!=null&&i.aborted)return;l=this,d=O;const C=v==null;x(),f&&C&&m()};return N.schedule=x,N.cancel=j,N.flush=S,i==null||i.addEventListener("abort",j,{once:!0}),N}e.debounce=t})(jy)),jy}var RO;function pW(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mW();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:d=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),d&&(h[1]="trailing");let m,g=null;const v=t.debounce(function(...j){m=r.apply(this,j),g=null},i,{edges:h}),x=function(...j){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(m=r.apply(this,j),g=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,j),m)},_=()=>(v.flush(),m);return x.cancel=v.cancel,x.flush=_,x}e.debounce=n})(_y)),_y}var DO;function gW(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pW();function n(r,i=0,s={}){const{leading:l=!0,trailing:d=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:d})}e.throttle=n})(wy)),wy}var Sy,IO;function vW(){return IO||(IO=1,Sy=gW().throttle),Sy}var yW=vW();const bW=Qr(yW);var nu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(r){xW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xW(e,t,n){return(t=wW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wW(e){var t=_W(e,"string");return typeof t=="symbol"?t:t+""}function _W(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $O=b.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:d,maxHeight:f,children:h,debounce:m=0,id:g,className:v,onResize:x,style:_={}}=e,j=b.useRef(null),S=b.useRef();S.current=x,b.useImperativeHandle(t,()=>j.current);var[N,O]=b.useState({containerWidth:r.width,containerHeight:r.height}),C=b.useCallback((T,k)=>{O(R=>{var L=Math.round(T),K=Math.round(k);return R.containerWidth===L&&R.containerHeight===K?R:{containerWidth:L,containerHeight:K}})},[]);b.useEffect(()=>{var T=K=>{var B,{width:F,height:z}=K[0].contentRect;C(F,z),(B=S.current)===null||B===void 0||B.call(S,F,z)};m>0&&(T=bW(T,m,{trailing:!0,leading:!1}));var k=new ResizeObserver(T),{width:R,height:L}=j.current.getBoundingClientRect();return C(R,L),k.observe(j.current),()=>{k.disconnect()}},[C,m]);var A=b.useMemo(()=>{var{containerWidth:T,containerHeight:k}=N;if(T<0||k<0)return null;nu(Ls(i)||Ls(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),nu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var R=Ls(i)?T:i,L=Ls(s)?k:s;return n&&n>0&&(R?L=R/n:L&&(R=L*n),f&&L>f&&(L=f)),nu(R>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       height and width.`,R,L,i,s,l,d,n),b.Children.map(h,K=>b.cloneElement(K,{width:R,height:L,style:Ny({width:R,height:L},K.props.style)}))},[n,h,s,f,d,l,N,i]);return b.createElement("div",{id:g?"".concat(g):void 0,className:ft("recharts-responsive-container",v),style:Ny(Ny({},_),{},{width:i,height:s,minWidth:l,minHeight:d,maxHeight:f}),ref:j},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},A))}),Gu=e=>null;Gu.displayName="Cell";function jW(e,t,n){return(t=SW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SW(e){var t=NW(e,"string");return typeof t=="symbol"?t:t+""}function NW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EW{constructor(t){jW(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(n),!0).forEach(function(r){CW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CW(e,t,n){return(t=AW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TW={cacheSize:2e3,enableCache:!0},s3=OW({},TW),UO=new EW(s3.cacheSize),PW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qO="recharts_measurement_span";function MW(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(d)}var BO=(e,t)=>{try{var n=document.getElementById(qO);n||(n=document.createElement("span"),n.setAttribute("id",qO),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,PW,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},ru=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||eo.isSsr)return{width:0,height:0};if(!s3.enableCache)return BO(t,n);var r=MW(t,n),i=UO.get(r);if(i)return i;var s=BO(t,n);return UO.set(r,s),s},FO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,o3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},IW=Object.keys(o3),ll="NaN";function LW(e,t){return e*o3[t]}class Kn{static parse(t){var n,[,r,i]=(n=DW.exec(t))!==null&&n!==void 0?n:[];return new Kn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ur(t)&&(this.unit=""),n!==""&&!RW.test(n)&&(this.num=NaN,this.unit=""),IW.includes(n)&&(this.num=LW(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Kn(NaN,""):new Kn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ur(this.num)}}function l3(e){if(e.includes(ll))return ll;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=FO.exec(t))!==null&&n!==void 0?n:[],l=Kn.parse(r??""),d=Kn.parse(s??""),f=i==="*"?l.multiply(d):l.divide(d);if(f.isNaN())return ll;t=t.replace(FO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,g,v]=(h=HO.exec(t))!==null&&h!==void 0?h:[],x=Kn.parse(m??""),_=Kn.parse(v??""),j=g==="+"?x.add(_):x.subtract(_);if(j.isNaN())return ll;t=t.replace(HO,j.toString())}return t}var KO=/\(([^()]*)\)/;function $W(e){for(var t=e,n;(n=KO.exec(t))!=null;){var[,r]=n;t=t.replace(KO,l3(r))}return t}function zW(e){var t=e.replace(/\s+/g,"");return t=$W(t),t=l3(t),t}function UW(e){try{return zW(e)}catch{return ll}}function Ey(e){var t=UW(e.slice(5,-1));return t===ll?"":t}var qW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],BW=["dx","dy","angle","className","breakAll"];function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G0.apply(null,arguments)}function GO(e,t){if(e==null)return{};var n,r,i=FW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var c3=/[ \f\n\r\t\v\u2028\u2029]+/,u3=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];pn(t)||(n?i=t.toString().split(""):i=t.toString().split(c3));var s=i.map(d=>({word:d,width:ru(d,r).width})),l=n?0:ru(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},HW=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:d,breakAll:f}=e,h=Pe(s),m=l,g=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((z,Q)=>{var{word:H,width:X}=Q,I=z[z.length-1];if(I&&(r==null||i||I.width+X+n<Number(r)))I.words.push(H),I.width+=X+n;else{var $={words:[H],width:X};z.push($)}return z},[])},v=g(t),x=B=>B.reduce((F,z)=>F.width>z.width?F:z);if(!h||i)return v;var _=v.length>s||x(v).width>Number(r);if(!_)return v;for(var j="…",S=B=>{var F=m.slice(0,B),z=u3({breakAll:f,style:d,children:F+j}).wordsWithComputedWidth,Q=g(z),H=Q.length>s||x(Q).width>Number(r);return[H,Q]},N=0,O=m.length-1,C=0,A;N<=O&&C<=m.length-1;){var T=Math.floor((N+O)/2),k=T-1,[R,L]=S(k),[K]=S(T);if(!R&&!K&&(N=T+1),R&&K&&(O=T-1),!R&&K){A=L;break}C++}return A||v},YO=e=>{var t=pn(e)?[]:e.toString().split(c3);return[{words:t}]},KW=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!eo.isSsr){var d,f,h=u3({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:m,spaceWidth:g}=h;d=m,f=g}else return YO(r);return HW({breakAll:s,children:r,maxLines:l,style:i},d,f,t,n)}return YO(r)},VO="#808080",Em=b.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:d="start",verticalAnchor:f="end",fill:h=VO}=e,m=GO(e,qW),g=b.useMemo(()=>KW({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:v,dy:x,angle:_,className:j,breakAll:S}=m,N=GO(m,BW);if(!ha(n)||!ha(r)||g.length===0)return null;var O=n+(Pe(v)?v:0),C=r+(Pe(x)?x:0),A;switch(f){case"start":A=Ey("calc(".concat(s,")"));break;case"middle":A=Ey("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:A=Ey("calc(".concat(g.length-1," * -").concat(i,")"));break}var T=[];if(l){var k=g[0].width,{width:R}=m;T.push("scale(".concat(Pe(R)?R/k:1,")"))}return _&&T.push("rotate(".concat(_,", ").concat(O,", ").concat(C,")")),T.length&&(N.transform=T.join(" ")),b.createElement("text",G0({},rn(N,!0),{ref:t,x:O,y:C,className:ft("recharts-text",j),textAnchor:d,fill:h.includes("url")?VO:h}),g.map((L,K)=>{var B=L.words.join(S?"":" ");return b.createElement("tspan",{x:O,dy:K===0?A:i,key:"".concat(B,"-").concat(K)},B)}))});Em.displayName="Text";var GW=["labelRef"];function YW(e,t){if(e==null)return{};var n,r,i=VW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(n),!0).forEach(function(r){WW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WW(e,t,n){return(t=XW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XW(e){var t=QW(e,"string");return typeof t=="symbol"?t:t+""}function QW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},za.apply(null,arguments)}var d3=b.createContext(null),JW=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=b.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return b.createElement(d3.Provider,{value:l},s)},f3=()=>{var e=b.useContext(d3),t=Qb();return e||t},ZW=b.createContext(null),eX=()=>{var e=b.useContext(ZW),t=Te(eM);return e||t},tX=e=>{var{value:t,formatter:n}=e,r=pn(e.children)?t:e.children;return typeof n=="function"?n(r):r},cw=e=>e!=null&&typeof e=="function",nX=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},rX=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:d,cy:f,innerRadius:h,outerRadius:m,startAngle:g,endAngle:v,clockWise:x}=i,_=(h+m)/2,j=nX(g,v),S=j>=0?1:-1,N,O;switch(t){case"insideStart":N=g+S*s,O=x;break;case"insideEnd":N=v-S*s,O=!x;break;case"end":N=v+S*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=j<=0?O:!O;var C=Jt(d,f,_,N),A=Jt(d,f,_,N+(O?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    `).concat(A.x,",").concat(A.y),k=pn(e.id)?du("recharts-radial-line-"):e.id;return b.createElement("text",za({},r,{dominantBaseline:"central",className:ft("recharts-radial-bar-label",l)}),b.createElement("defs",null,b.createElement("path",{id:k,d:T})),b.createElement("textPath",{xlinkHref:"#".concat(k)},n))},aX=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:d,endAngle:f}=e,h=(d+f)/2;if(n==="outside"){var{x:m,y:g}=Jt(r,i,l+t,h);return{x:m,y:g,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(s+l)/2,{x,y:_}=Jt(r,i,v,h);return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},h3=e=>"cx"in e&&Pe(e.cx),iX=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!h3(n)&&(s=n);var{x:l,y:d,width:f,height:h}=t,m=h>=0?1:-1,g=m*r,v=m>0?"end":"start",x=m>0?"start":"end",_=f>=0?1:-1,j=_*r,S=_>0?"end":"start",N=_>0?"start":"end";if(i==="top"){var O={x:l+f/2,y:d-m*r,textAnchor:"middle",verticalAnchor:v};return Bt(Bt({},O),s?{height:Math.max(d-s.y,0),width:f}:{})}if(i==="bottom"){var C={x:l+f/2,y:d+h+g,textAnchor:"middle",verticalAnchor:x};return Bt(Bt({},C),s?{height:Math.max(s.y+s.height-(d+h),0),width:f}:{})}if(i==="left"){var A={x:l-j,y:d+h/2,textAnchor:S,verticalAnchor:"middle"};return Bt(Bt({},A),s?{width:Math.max(A.x-s.x,0),height:h}:{})}if(i==="right"){var T={x:l+f+j,y:d+h/2,textAnchor:N,verticalAnchor:"middle"};return Bt(Bt({},T),s?{width:Math.max(s.x+s.width-T.x,0),height:h}:{})}var k=s?{width:f,height:h}:{};return i==="insideLeft"?Bt({x:l+j,y:d+h/2,textAnchor:N,verticalAnchor:"middle"},k):i==="insideRight"?Bt({x:l+f-j,y:d+h/2,textAnchor:S,verticalAnchor:"middle"},k):i==="insideTop"?Bt({x:l+f/2,y:d+g,textAnchor:"middle",verticalAnchor:x},k):i==="insideBottom"?Bt({x:l+f/2,y:d+h-g,textAnchor:"middle",verticalAnchor:v},k):i==="insideTopLeft"?Bt({x:l+j,y:d+g,textAnchor:N,verticalAnchor:x},k):i==="insideTopRight"?Bt({x:l+f-j,y:d+g,textAnchor:S,verticalAnchor:x},k):i==="insideBottomLeft"?Bt({x:l+j,y:d+h-g,textAnchor:N,verticalAnchor:v},k):i==="insideBottomRight"?Bt({x:l+f-j,y:d+h-g,textAnchor:S,verticalAnchor:v},k):i&&typeof i=="object"&&(Pe(i.x)||Ls(i.x))&&(Pe(i.y)||Ls(i.y))?Bt({x:l+kn(i.x,f),y:d+kn(i.y,h),textAnchor:"end",verticalAnchor:"end"},k):Bt({x:l+f/2,y:d+h/2,textAnchor:"middle",verticalAnchor:"middle"},k)},sX={offset:5};function $i(e){var t=Rn(e,sX),{viewBox:n,position:r,value:i,children:s,content:l,className:d="",textBreakAll:f,labelRef:h}=t,m=eX(),g=f3(),v=r==="center"?g:m??g,x=n||v;if(!x||pn(i)&&pn(s)&&!b.isValidElement(l)&&typeof l!="function")return null;var _=Bt(Bt({},t),{},{viewBox:x});if(b.isValidElement(l)){var{labelRef:j}=_,S=YW(_,GW);return b.cloneElement(l,S)}var N;if(typeof l=="function"){if(N=b.createElement(l,_),b.isValidElement(N))return N}else N=tX(t);var O=h3(x),C=rn(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return rX(t,r,N,C,x);var A=O?aX(x,t.offset,t.position):iX(t,x);return b.createElement(Em,za({ref:h,className:ft("recharts-label",d)},C,A,{breakAll:f}),N)}$i.displayName="Label";var oX=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?b.createElement($i,za({key:"label-implicit"},r)):ha(e)?b.createElement($i,za({key:"label-implicit",value:e},r)):b.isValidElement(e)?e.type===$i?b.cloneElement(e,Bt({key:"label-implicit"},r)):b.createElement($i,za({key:"label-implicit",content:e},r)):cw(e)?b.createElement($i,za({key:"label-implicit",content:e},r)):e&&typeof e=="object"?b.createElement($i,za({},e,{key:"label-implicit"},r)):null};function lX(e){var{label:t}=e,n=f3();return oX(t,n)||null}var Oy={},Cy={},XO;function cX(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Cy)),Cy}var Ay={},QO;function uX(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Ay)),Ay}var JO;function dX(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cX(),n=uX(),r=qb();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Oy)),Oy}var ky,ZO;function fX(){return ZO||(ZO=1,ky=dX().last),ky}var hX=fX();const mX=Qr(hX);var pX=["valueAccessor"],gX=["dataKey","clockWise","id","textBreakAll"];function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rh.apply(null,arguments)}function eC(e,t){if(e==null)return{};var n,r,i=vX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yX=e=>Array.isArray(e.value)?mX(e.value):e.value,m3=b.createContext(void 0),bX=m3.Provider,p3=b.createContext(void 0),xX=p3.Provider;function wX(){return b.useContext(m3)}function _X(){return b.useContext(p3)}function Yf(e){var{valueAccessor:t=yX}=e,n=eC(e,pX),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,d=eC(n,gX),f=wX(),h=_X(),m=f||h;return!m||!m.length?null:b.createElement(Vn,{className:"recharts-label-list"},m.map((g,v)=>{var x,_=pn(r)?t(g,v):It(g&&g.payload,r),j=pn(s)?{}:{id:"".concat(s,"-").concat(v)};return b.createElement($i,Rh({},rn(g,!0),d,j,{fill:(x=n.fill)!==null&&x!==void 0?x:g.fill,parentViewBox:g.parentViewBox,value:_,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(v),index:v}))}))}Yf.displayName="LabelList";function g3(e){var{label:t}=e;return t?t===!0?b.createElement(Yf,{key:"labelList-implicit"}):b.isValidElement(t)||cw(t)?b.createElement(Yf,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(Yf,Rh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var v3=e=>e.graphicalItems.polarItems,jX=re([Rt,Uu],Lx),uw=re([v3,Ft,jX],zx),SX=re([uw],Ux),dw=re([SX,Nx],qx),NX=re([dw,Ft,uw],Fx),EX=re([dw,Ft,uw],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=It(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:It(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),tC=()=>{},OX=re([Ft,xM,tC,EX,tC,ot,Rt],Kx),y3=re([Ft,ot,dw,NX,zu,Rt,OX],Gx),CX=re([y3,Ft,Ll],Wx);re([Ft,y3,CX,Rt],Qx);var AX={radiusAxis:{},angleAxis:{}},b3=hr({name:"polarAxis",initialState:AX,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Hre,removeRadiusAxis:Kre,addAngleAxis:Gre,removeAngleAxis:Yre}=b3.actions,kX=b3.reducer;function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(n),!0).forEach(function(r){TX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TX(e,t,n){return(t=PX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PX(e){var t=MX(e,"string");return typeof t=="symbol"?t:t+""}function MX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RX=(e,t)=>t,fw=re([v3,RX],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),DX=[],hw=(e,t,n)=>(n==null?void 0:n.length)===0?DX:n,x3=re([Nx,fw,hw],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>rC(rC({},t.presentationProps),s.props))),i!=null)return i}}),IX=re([x3,fw,hw],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=It(r,t.nameKey,t.name),d;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?d=r.fill:d=t.fill,{value:am(l,t.dataKey),color:d,payload:r,type:t.legendType}})}),LX=re([x3,fw,hw,an],(e,t,n,r)=>{if(!(t==null||e==null))return IQ({offset:r,pieSettings:t,displayedData:e,cells:n})}),Ty={},aC;function $X(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Ty)),Ty}var Py,iC;function zX(){return iC||(iC=1,Py=$X().isPlainObject),Py}var UX=zX();const qX=Qr(UX);function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){BX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BX(e,t,n){return(t=FX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FX(e){var t=HX(e,"string");return typeof t=="symbol"?t:t+""}function HX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dh.apply(null,arguments)}var lC=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},KX={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GX=e=>{var t=Rn(e,KX),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t,v=b.useRef(),[x,_]=b.useState(-1),j=b.useRef(i),S=b.useRef(s),N=b.useRef(l),O=b.useRef(n),C=b.useRef(r),A=um(e,"trapezoid-");if(b.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var H=v.current.getTotalLength();H&&_(H)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var T=ft("recharts-trapezoid",d);if(!g)return b.createElement("g",null,b.createElement("path",Dh({},rn(t,!0),{className:T,d:lC(n,r,i,s,l)})));var k=j.current,R=S.current,L=N.current,K=O.current,B=C.current,F="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),Q=HT(["strokeDasharray"],h,f);return b.createElement(cm,{animationId:A,key:A,canBegin:x>0,duration:h,easing:f,isActive:g,begin:m},H=>{var X=Nn(k,i,H),I=Nn(R,s,H),$=Nn(L,l,H),U=Nn(K,n,H),ee=Nn(B,r,H);v.current&&(j.current=X,S.current=I,N.current=$,O.current=U,C.current=ee);var W=H>0?{transition:Q,strokeDasharray:z}:{strokeDasharray:F};return b.createElement("path",Dh({},rn(t,!0),{className:T,d:lC(U,ee,X,I,$),ref:v,style:oC(oC({},W),t.style)}))})},YX=["option","shapeType","propTransformer","activeClassName","isActive"];function VX(e,t){if(e==null)return{};var n,r,i=WX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function WX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){XX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XX(e,t,n){return(t=QX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZX(e,t){return Ih(Ih({},t),e)}function eQ(e,t){return e==="symbols"}function uC(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return b.createElement(VT,n);case"trapezoid":return b.createElement(GX,n);case"sector":return b.createElement(QT,n);case"symbols":if(eQ(t))return b.createElement($b,n);break;default:return null}}function tQ(e){return b.isValidElement(e)?e.props:e}function w3(e){var{option:t,shapeType:n,propTransformer:r=ZX,activeClassName:i="recharts-active-shape",isActive:s}=e,l=VX(e,YX),d;if(b.isValidElement(t))d=b.cloneElement(t,Ih(Ih({},l),tQ(t)));else if(typeof t=="function")d=t(l);else if(qX(t)&&typeof t!="boolean"){var f=r(t,l);d=b.createElement(uC,{shapeType:n,elementProps:f})}else{var h=l;d=b.createElement(uC,{shapeType:n,elementProps:h})}return s?b.createElement(Vn,{className:i},d):d}var mw=(e,t)=>{var n=Lt();return(r,i)=>s=>{e==null||e(r,i,s),n(IM({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},pw=e=>{var t=Lt();return(n,r)=>i=>{e==null||e(n,r,i),t(LY())}},gw=(e,t)=>{var n=Lt();return(r,i)=>s=>{e==null||e(r,i,s),n($Y({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function _3(e){var{fn:t,args:n}=e,r=Lt(),i=Dr();return b.useEffect(()=>{if(!i){var s=t(n);return r(RY(s)),()=>{r(DY(s))}}},[t,n,r,i]),null}var j3=()=>{};function nQ(e){var{legendPayload:t}=e,n=Lt(),r=Dr();return b.useEffect(()=>r?j3:(n(UT(t)),()=>{n(qT(t))}),[n,r,t]),null}function rQ(e){var{legendPayload:t}=e,n=Lt(),r=Te(ot);return b.useEffect(()=>r!=="centric"&&r!=="radial"?j3:(n(UT(t)),()=>{n(qT(t))}),[n,r,t]),null}var My,aQ=()=>{var[e]=b.useState(()=>du("uid-"));return e},iQ=(My=M5.useId)!==null&&My!==void 0?My:aQ;function sQ(e,t){var n=iQ();return t||(e?"".concat(e,"-").concat(n):n)}var oQ=b.createContext(void 0),S3=e=>{var{id:t,type:n,children:r}=e,i=sQ("recharts-".concat(n),t);return b.createElement(oQ.Provider,{value:i},r(i))},lQ={cartesianItems:[],polarItems:[]},N3=hr({name:"graphicalItems",initialState:lQ,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ha(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ha(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ha(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:cQ,replaceCartesianGraphicalItem:uQ,removeCartesianGraphicalItem:dQ,addPolarGraphicalItem:fQ,removePolarGraphicalItem:hQ}=N3.actions,mQ=N3.reducer;function pQ(e){var t=Lt(),n=b.useRef(null);return b.useEffect(()=>{n.current===null?t(cQ(e)):n.current!==e&&t(uQ({prev:n.current,next:e})),n.current=e},[t,e]),b.useEffect(()=>()=>{n.current&&(t(dQ(n.current)),n.current=null)},[t]),null}function gQ(e){var t=Lt();return b.useEffect(()=>(t(fQ(e)),()=>{t(hQ(e))}),[t,e]),null}var vQ=["onMouseEnter","onClick","onMouseLeave"],yQ=["id"],bQ=["id"];function vw(e,t){if(e==null)return{};var n,r,i=xQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){wQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wQ(e,t,n){return(t=_Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Q(e){var t=jQ(e,"string");return typeof t=="symbol"?t:t+""}function jQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(null,arguments)}function SQ(e){var t=b.useMemo(()=>Mb(e.children,Gu),[e.children]),n=Te(r=>IX(r,e.id,t));return n==null?null:b.createElement(rQ,{legendPayload:n})}function NQ(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:d,hide:f,tooltipType:h}=e;return{dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:am(d,t),hide:f,type:h,color:l,unit:""}}}var EQ=(e,t)=>e>t?"start":e<t?"end":"middle",OQ=(e,t,n)=>kn(typeof t=="function"?t(e):t,n,n*.8),CQ=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,d=TT(s,l),f=i+kn(e.cx,s,s/2),h=r+kn(e.cy,l,l/2),m=kn(e.innerRadius,d,0),g=OQ(n,e.outerRadius,d),v=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:m,outerRadius:g,maxRadius:v}},AQ=(e,t)=>{var n=hn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function kQ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var TQ=(e,t)=>{if(b.isValidElement(e))return b.cloneElement(e,t);if(typeof e=="function")return e(t);var n=ft("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return b.createElement(FT,Hi({},t,{type:"linear",className:n}))},PQ=(e,t,n)=>{if(b.isValidElement(e))return b.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),b.isValidElement(r)))return r;var i=ft("recharts-pie-label-text",kQ(e));return b.createElement(Em,Hi({},t,{alignmentBaseline:"middle",className:i}),r)};function MQ(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var d=Wi(n),f=rn(i,!1),h=rn(s,!1),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((v,x)=>{var _=(v.startAngle+v.endAngle)/2,j=Jt(v.cx,v.cy,v.outerRadius+m,_),S=Tt(Tt(Tt(Tt({},d),v),{},{stroke:"none"},f),{},{index:x,textAnchor:EQ(j.x,v.cx)},j),N=Tt(Tt(Tt(Tt({},d),v),{},{fill:"none",stroke:v.fill},h),{},{index:x,points:[Jt(v.cx,v.cy,v.outerRadius,_),j],key:"line"});return b.createElement(Vn,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(x)},s&&TQ(s,N),PQ(i,S,It(v,l)))});return b.createElement(Vn,{className:"recharts-pie-labels"},g)}function RQ(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?b.createElement(g3,{label:i}):b.createElement(MQ,{sectors:t,props:n,showLabels:r})}function DQ(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Te(Xs),{onMouseEnter:l,onClick:d,onMouseLeave:f}=i,h=vw(i,vQ),m=mw(l,i.dataKey),g=pw(f),v=gw(d,i.dataKey);return t==null||t.length===0?null:b.createElement(b.Fragment,null,t.map((x,_)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var j=n&&String(_)===s,S=s?r:null,N=j?n:S,O=Tt(Tt({},x),{},{stroke:x.stroke,tabIndex:-1,[IT]:_,[LT]:i.dataKey});return b.createElement(Vn,Hi({tabIndex:-1,className:"recharts-pie-sector"},Tu(h,x,_),{onMouseEnter:m(x,_),onMouseLeave:g(x,_),onClick:v(x,_),key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(_)}),b.createElement(w3,Hi({option:N,isActive:j,shapeType:"sector"},O)))}))}function IQ(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:d,endAngle:f,dataKey:h,nameKey:m,tooltipType:g}=n,v=Math.abs(n.minAngle),x=AQ(d,f),_=Math.abs(x),j=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,S=r.filter(k=>It(k,h,0)!==0).length,N=(_>=360?S:S-1)*j,O=_-S*v-N,C=r.reduce((k,R)=>{var L=It(R,h,0);return k+(Pe(L)?L:0)},0),A;if(C>0){var T;A=r.map((k,R)=>{var L=It(k,h,0),K=It(k,m,R),B=CQ(n,s,k),F=(Pe(L)?L:0)/C,z,Q=Tt(Tt({},k),i&&i[R]&&i[R].props);R?z=T.endAngle+hn(x)*j*(L!==0?1:0):z=d;var H=z+hn(x)*((L!==0?v:0)+F*O),X=(z+H)/2,I=(B.innerRadius+B.outerRadius)/2,$=[{name:K,value:L,payload:Q,dataKey:h,type:g}],U=Jt(B.cx,B.cy,I,X);return T=Tt(Tt(Tt(Tt({},n.presentationProps),{},{percent:F,cornerRadius:l,name:K,tooltipPayload:$,midAngle:X,middleRadius:I,tooltipPosition:U},Q),B),{},{value:L,startAngle:z,endAngle:H,payload:Q,paddingAngle:hn(x)*j}),T})}return A}function LQ(e){var{showLabels:t,sectors:n,children:r}=e,i=b.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return b.createElement(xX,{value:t?i:void 0},r)}function $Q(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:d,activeShape:f,inactiveShape:h,onAnimationStart:m,onAnimationEnd:g}=t,v=um(t,"recharts-pie-"),x=n.current,[_,j]=b.useState(!1),S=b.useCallback(()=>{typeof g=="function"&&g(),j(!1)},[g]),N=b.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return b.createElement(LQ,{showLabels:!_,sectors:r},b.createElement(cm,{animationId:v,begin:s,duration:l,isActive:i,easing:d,onAnimationStart:N,onAnimationEnd:S,key:v},O=>{var C=[],A=r&&r[0],T=A==null?void 0:A.startAngle;return r==null||r.forEach((k,R)=>{var L=x&&x[R],K=R>0?Gs(k,"paddingAngle",0):0;if(L){var B=Nn(L.endAngle-L.startAngle,k.endAngle-k.startAngle,O),F=Tt(Tt({},k),{},{startAngle:T+K,endAngle:T+B+K});C.push(F),T=F.endAngle}else{var{endAngle:z,startAngle:Q}=k,H=Nn(0,z-Q,O),X=Tt(Tt({},k),{},{startAngle:T+K,endAngle:T+H+K});C.push(X),T=X.endAngle}}),n.current=C,b.createElement(Vn,null,b.createElement(DQ,{sectors:C,activeShape:f,inactiveShape:h,allOtherPieProps:t}))}),b.createElement(RQ,{showLabels:!_,sectors:r,props:t}),t.children)}var zQ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function UQ(e){var{id:t}=e,n=vw(e,yQ),{hide:r,className:i,rootTabIndex:s}=e,l=b.useMemo(()=>Mb(e.children,Gu),[e.children]),d=Te(m=>LX(m,t,l)),f=b.useRef(null),h=ft("recharts-pie",i);return r||d==null?(f.current=null,b.createElement(Vn,{tabIndex:s,className:h})):b.createElement(b.Fragment,null,b.createElement(_3,{fn:NQ,args:Tt(Tt({},e),{},{sectors:d})}),b.createElement(Vn,{tabIndex:s,className:h},b.createElement($Q,{props:Tt(Tt({},n),{},{sectors:d}),previousSectorsRef:f})))}function E3(e){var t=Rn(e,zQ),{id:n}=t,r=vw(t,bQ),i=Wi(r);return b.createElement(S3,{id:n,type:"pie"},s=>b.createElement(b.Fragment,null,b.createElement(gQ,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),b.createElement(SQ,Hi({},r,{id:s})),b.createElement(UQ,Hi({},r,{id:s}))))}E3.displayName="Pie";function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){qQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qQ(e,t,n){return(t=BQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BQ(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HQ={xAxis:{},yAxis:{},zAxis:{}},O3=hr({name:"cartesianAxis",initialState:HQ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=hC(hC({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:KQ,removeXAxis:GQ,addYAxis:YQ,removeYAxis:VQ,addZAxis:Vre,removeZAxis:Wre,updateYAxisWidth:WQ}=O3.actions,XQ=O3.reducer,QQ=re([an],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),JQ=re([QQ,Za,ei],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),C3=()=>Te(JQ),ZQ="Invariant failed";function eJ(e,t){throw new Error(ZQ)}var tJ=["x","y"];function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y0.apply(null,arguments)}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){nJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nJ(e,t,n){return(t=rJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rJ(e){var t=aJ(e,"string");return typeof t=="symbol"?t:t+""}function aJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iJ(e,t){if(e==null)return{};var n,r,i=sJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function oJ(e,t){var{x:n,y:r}=e,i=iJ(e,tJ),s="".concat(n),l=parseInt(s,10),d="".concat(r),f=parseInt(d,10),h="".concat(t.height||i.height),m=parseInt(h,10),g="".concat(t.width||i.width),v=parseInt(g,10);return Fc(Fc(Fc(Fc(Fc({},t),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:m,width:v,name:t.name,radius:t.radius})}function yw(e){return b.createElement(w3,Y0({shapeType:"rectangle",propTransformer:oJ,activeClassName:"recharts-active-bar"},e))}var lJ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Pe(t))return t;var s=Pe(r)||pn(r);return s?t(r,i):(s||eJ(),n)}},cJ={},A3=hr({name:"errorBars",initialState:cJ,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Xre,replaceErrorBar:Qre,removeErrorBar:Jre}=A3.actions,uJ=A3.reducer,dJ=["children"];function fJ(e,t){if(e==null)return{};var n,r,i=hJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var mJ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pJ=b.createContext(mJ);function gJ(e){var{children:t}=e,n=fJ(e,dJ);return b.createElement(pJ.Provider,{value:n},t)}function k3(e,t){var n,r,i=Te(h=>ni(h,e)),s=Te(h=>ri(h,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ar.allowDataOverflow,d=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ir.allowDataOverflow,f=l||d;return{needClip:f,needClipX:l,needClipY:d}}function vJ(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=C3(),{needClipX:s,needClipY:l,needClip:d}=k3(t,n);if(!d)return null;var{x:f,y:h,width:m,height:g}=i;return b.createElement("clipPath",{id:"clipPath-".concat(r)},b.createElement("rect",{x:s?f:f-m/2,y:l?h:h-g/2,width:s?m:m*2,height:l?g:g*2}))}var yJ=["onMouseEnter","onMouseLeave","onClick"],bJ=["value","background","tooltipPosition"],xJ=["id"],wJ=["onMouseEnter","onClick","onMouseLeave"];function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ki.apply(null,arguments)}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){_J(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _J(e,t,n){return(t=jJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jJ(e){var t=SJ(e,"string");return typeof t=="symbol"?t:t+""}function SJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lh(e,t){if(e==null)return{};var n,r,i=NJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var EJ=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:am(n,t),payload:e}]};function OJ(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:am(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:d}}}function CJ(e){var t=Te(Xs),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:d,onClick:f}=s,h=Lh(s,yJ),m=mw(l,r),g=pw(d),v=gw(f,r);if(!i||n==null)return null;var x=rn(i,!1);return b.createElement(b.Fragment,null,n.map((_,j)=>{var{value:S,background:N,tooltipPosition:O}=_,C=Lh(_,bJ);if(!N)return null;var A=m(_,j),T=g(_,j),k=v(_,j),R=Pn(Pn(Pn(Pn(Pn({option:i,isActive:String(j)===t},C),{},{fill:"#eee"},N),x),Tu(h,_,j)),{},{onMouseEnter:A,onMouseLeave:T,onClick:k,dataKey:r,index:j,className:"recharts-bar-background-rectangle"});return b.createElement(yw,Ki({key:"background-bar-".concat(R.index)},R))}))}function AJ(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Pn(Pn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return b.createElement(bX,{value:t?i:void 0},n)}function kJ(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,d=Te(Xs),f=Te(WM),h=n&&String(s)===d&&(f==null||l===f),m=h?n:t;return b.createElement(yw,Ki({},r,i,{isActive:h,option:m,index:s,dataKey:l}))}function TJ(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return b.createElement(yw,Ki({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function PJ(e){var{data:t,props:n}=e,r=Wi(n),{id:i}=r,s=Lh(r,xJ),{shape:l,dataKey:d,activeBar:f}=n,{onMouseEnter:h,onClick:m,onMouseLeave:g}=n,v=Lh(n,wJ),x=mw(h,d),_=pw(g),j=gw(m,d);return t?b.createElement(b.Fragment,null,t.map((S,N)=>b.createElement(Vn,Ki({className:"recharts-bar-rectangle"},Tu(v,S,N),{onMouseEnter:x(S,N),onMouseLeave:_(S,N),onClick:j(S,N),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(N)}),f?b.createElement(kJ,{shape:l,activeBar:f,baseProps:s,entry:S,index:N,dataKey:d}):b.createElement(TJ,{shape:l,baseProps:s,entry:S,index:N,dataKey:d})))):null}function MJ(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,onAnimationEnd:h,onAnimationStart:m}=t,g=n.current,v=um(t,"recharts-bar-"),[x,_]=b.useState(!1),j=!x,S=b.useCallback(()=>{typeof h=="function"&&h(),_(!1)},[h]),N=b.useCallback(()=>{typeof m=="function"&&m(),_(!0)},[m]);return b.createElement(AJ,{showLabels:j,rects:r},b.createElement(cm,{animationId:v,begin:l,duration:d,isActive:s,easing:f,onAnimationEnd:S,onAnimationStart:N,key:v},O=>{var C=O===1?r:r==null?void 0:r.map((A,T)=>{var k=g&&g[T];if(k)return Pn(Pn({},A),{},{x:Nn(k.x,A.x,O),y:Nn(k.y,A.y,O),width:Nn(k.width,A.width,O),height:Nn(k.height,A.height,O)});if(i==="horizontal"){var R=Nn(0,A.height,O);return Pn(Pn({},A),{},{y:A.y+A.height-R,height:R})}var L=Nn(0,A.width,O);return Pn(Pn({},A),{},{width:L})});return O>0&&(n.current=C??null),C==null?null:b.createElement(Vn,null,b.createElement(PJ,{props:t,data:C}))}),b.createElement(g3,{label:t.label}),t.children)}function RJ(e){var t=b.useRef(null);return b.createElement(MJ,{previousRectanglesRef:t,props:e})}var T3=0,DJ=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:It(e,t)}};class IJ extends b.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:d,background:f,id:h}=this.props;if(t||n==null)return null;var m=ft("recharts-bar",i),g=h;return b.createElement(Vn,{className:m,id:h},d&&b.createElement("defs",null,b.createElement(vJ,{clipPathId:g,xAxisId:s,yAxisId:l})),b.createElement(Vn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},b.createElement(CJ,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),b.createElement(RJ,this.props)))}}var LJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!eo.isSsr,legendType:"rect",minPointSize:T3,xAxisId:0,yAxisId:0};function $J(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:m}=e,{needClip:g}=k3(t,n),v=ex(),x=Dr(),_=Mb(e.children,Gu),j=Te(O=>fZ(O,t,n,x,e.id,_));if(v!=="vertical"&&v!=="horizontal")return null;var S,N=j==null?void 0:j[0];return N==null||N.height==null||N.width==null?S=0:S=v==="vertical"?N.height/2:N.width/2,b.createElement(gJ,{xAxisId:t,yAxisId:n,data:j,dataPointFormatter:DJ,errorBarOffset:S},b.createElement(IJ,Ki({},e,{layout:v,needClip:g,data:j,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:m})))}function zJ(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:d,xAxisTicks:f,yAxisTicks:h,stackedData:m,displayedData:g,offset:v,cells:x,parentViewBox:_}=e,j=t==="horizontal"?d:l,S=m?j.scale.domain():null,N=Z9({numericAxis:j});return g.map((O,C)=>{var A,T,k,R,L,K;m?A=Y9(m[C],S):(A=It(O,n),Array.isArray(A)||(A=[N,A]));var B=lJ(r,T3)(A[1],C);if(t==="horizontal"){var F,[z,Q]=[d.scale(A[0]),d.scale(A[1])];T=eE({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:O,index:C}),k=(F=Q??z)!==null&&F!==void 0?F:void 0,R=i.size;var H=z-Q;if(L=ur(H)?0:H,K={x:T,y:v.top,width:R,height:v.height},Math.abs(B)>0&&Math.abs(L)<Math.abs(B)){var X=hn(L||B)*(Math.abs(B)-Math.abs(L));k-=X,L+=X}}else{var[I,$]=[l.scale(A[0]),l.scale(A[1])];if(T=I,k=eE({axis:d,ticks:h,bandSize:s,offset:i.offset,entry:O,index:C}),R=$-I,L=i.size,K={x:v.left,y:k,width:v.width,height:L},Math.abs(B)>0&&Math.abs(R)<Math.abs(B)){var U=hn(R||B)*(Math.abs(B)-Math.abs(R));R+=U}}if(T==null||k==null||R==null||L==null)return null;var ee=Pn(Pn({},O),{},{x:T,y:k,width:R,height:L,value:m?A:A[1],payload:O,background:K,tooltipPosition:{x:T+R/2,y:k+L/2},parentViewBox:_},x&&x[C]&&x[C].props);return ee}).filter(Boolean)}function UJ(e){var t=Rn(e,LJ),n=Dr();return b.createElement(S3,{id:t.id,type:"bar"},r=>b.createElement(b.Fragment,null,b.createElement(nQ,{legendPayload:EJ(t)}),b.createElement(_3,{fn:OJ,args:t}),b.createElement(pQ,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:J9(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),b.createElement($J,Ki({},t,{id:r}))))}var V0=b.memo(UJ);V0.displayName="Bar";function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){qJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qJ(e,t,n){return(t=BJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BJ(e){var t=FJ(e,"string");return typeof t=="symbol"?t:t+""}function FJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HJ=(e,t)=>t,KJ=(e,t,n)=>n,GJ=(e,t,n,r)=>r,YJ=(e,t,n,r,i)=>i,Yu=re([$x,YJ],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),VJ=re([Yu],e=>e==null?void 0:e.maxBarSize),WJ=(e,t,n,r,i,s)=>s,vC=(e,t,n)=>{var r=n??e;if(!pn(r))return kn(r,t,0)},XJ=re([ot,$x,HJ,KJ,GJ],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),QJ=(e,t,n,r)=>{var i=ot(e);return i==="horizontal"?q0(e,"yAxis",n,r):q0(e,"xAxis",t,r)},JJ=(e,t,n)=>{var r=ot(e);return r==="horizontal"?vO(e,"xAxis",t):vO(e,"yAxis",n)},ZJ=(e,t,n)=>{var r={},i=e.filter(xm),s=e.filter(h=>h.stackId==null),l=i.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),r),d=Object.entries(l).map(h=>{var[m,g]=h,v=g.map(_=>_.dataKey),x=vC(t,n,g[0].barSize);return{stackId:m,dataKeys:v,barSize:x}}),f=s.map(h=>{var m=[h.dataKey].filter(v=>v!=null),g=vC(t,n,h.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...d,...f]},eZ=re([XJ,MG,JJ],ZJ),tZ=(e,t,n,r,i)=>{var s,l,d=Yu(e,t,n,r,i);if(d!=null){var f=ot(e),h=YP(e),{maxBarSize:m}=d,g=pn(m)?h:m,v,x;return f==="horizontal"?(v=Sl(e,"xAxis",t,r),x=jl(e,"xAxis",t,r)):(v=Sl(e,"yAxis",n,r),x=jl(e,"yAxis",n,r)),(s=(l=Wb(v,x,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},P3=(e,t,n,r)=>{var i=ot(e),s,l;return i==="horizontal"?(s=Sl(e,"xAxis",t,r),l=jl(e,"xAxis",t,r)):(s=Sl(e,"yAxis",n,r),l=jl(e,"yAxis",n,r)),Wb(s,l)};function nZ(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=kn(e,n,0,!0),d,f=[];if(fr(r[0].barSize)){var h=!1,m=n/s,g=r.reduce((N,O)=>N+(O.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&m>0&&(h=!0,m*=.9,g=s*m);var v=(n-g)/2>>0,x={offset:v-l,size:0};d=r.reduce((N,O)=>{var C,A={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:h?m:(C=O.barSize)!==null&&C!==void 0?C:0}},T=[...N,A];return x=T[T.length-1].position,T},f)}else{var _=kn(t,n,0,!0);n-2*_-(s-1)*l<=0&&(l=0);var j=(n-2*_-(s-1)*l)/s;j>1&&(j>>=0);var S=fr(i)?Math.min(j,i):j;d=r.reduce((N,O,C)=>[...N,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:_+(j+l)*C+(j-S)/2,size:S}}],f)}return d}}var rZ=(e,t,n,r,i,s,l)=>{var d=pn(l)?t:l,f=nZ(n,r,i!==s?i:s,e,d);return i!==s&&f!=null&&(f=f.map(h=>Af(Af({},h),{},{position:Af(Af({},h.position),{},{offset:h.position.offset-i/2})}))),f},aZ=re([eZ,YP,PG,VP,tZ,P3,VJ],rZ),iZ=(e,t,n,r)=>Sl(e,"xAxis",t,r),sZ=(e,t,n,r)=>Sl(e,"yAxis",n,r),oZ=(e,t,n,r)=>jl(e,"xAxis",t,r),lZ=(e,t,n,r)=>jl(e,"yAxis",n,r),cZ=re([aZ,Yu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),uZ=(e,t)=>{var n=Dx(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},dZ=re([QJ,Yu],uZ),fZ=re([an,Xb,iZ,sZ,oZ,lZ,cZ,ot,Ex,P3,dZ,Yu,WJ],(e,t,n,r,i,s,l,d,f,h,m,g,v)=>{var{chartData:x,dataStartIndex:_,dataEndIndex:j}=f;if(!(g==null||l==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:S}=g,N;if(S!=null&&S.length>0?N=S:N=x==null?void 0:x.slice(_,j+1),N!=null)return zJ({layout:d,barSettings:g,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:m,displayedData:N,offset:e,cells:v})}}),M3=e=>{var{chartData:t}=e,n=Lt(),r=Dr();return b.useEffect(()=>r?()=>{}:(n(OO(t)),()=>{n(OO(void 0))}),[t,n,r]),null},yC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},R3=hr({name:"brush",initialState:yC,reducers:{setBrushSettings(e,t){return t.payload==null?yC:t.payload}}}),{setBrushSettings:Zre}=R3.actions,hZ=R3.reducer;function mZ(e,t,n){return(t=pZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pZ(e){var t=gZ(e,"string");return typeof t=="symbol"?t:t+""}function gZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bw{static create(t){return new bw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}mZ(bw,"EPS",1e-4);function vZ(e){return(e%180+180)%180}var yZ=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=vZ(i),l=s*Math.PI/180,d=Math.atan(r/n),f=l>d&&l<Math.PI-d?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},bZ={dots:[],areas:[],lines:[]},D3=hr({name:"referenceElements",initialState:bZ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ha(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ha(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ha(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:eae,removeDot:tae,addArea:nae,removeArea:rae,addLine:aae,removeLine:iae}=D3.actions,xZ=D3.reducer,wZ=b.createContext(void 0),_Z=e=>{var{children:t}=e,[n]=b.useState("".concat(du("recharts"),"-clip")),r=C3();if(r==null)return null;var{x:i,y:s,width:l,height:d}=r;return b.createElement(wZ.Provider,{value:n},b.createElement("defs",null,b.createElement("clipPath",{id:n},b.createElement("rect",{x:i,y:s,height:d,width:l}))),t)};function Nl(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function I3(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function jZ(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return yZ(r,n)}function SZ(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:d}=e;return t===1?{start:r?i:s,end:r?i+l:s+d}:{start:r?i+l:s+d,end:r?i:s}}function $h(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function NZ(e,t){return I3(e,t+1)}function EZ(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:d}=t,f=0,h=1,m=l,g=function(){var _=r==null?void 0:r[f];if(_===void 0)return{v:I3(r,h)};var j=f,S,N=()=>(S===void 0&&(S=n(_,j)),S),O=_.coordinate,C=f===0||$h(e,O,N,m,d);C||(f=0,m=l,h+=1),C&&(m=O+e*(N()/2+i),f+=h)},v;h<=s.length;)if(v=g(),v)return v.v;return[]}function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){OZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OZ(e,t,n){return(t=CZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CZ(e){var t=AZ(e,"string");return typeof t=="symbol"?t:t+""}function AZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kZ(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:d}=t,{end:f}=t,h=function(v){var x=s[v],_,j=()=>(_===void 0&&(_=n(x,v)),_);if(v===l-1){var S=e*(x.coordinate+e*j()/2-f);s[v]=x=Cn(Cn({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[v]=x=Cn(Cn({},x),{},{tickCoord:x.coordinate});var N=$h(e,x.tickCoord,j,d,f);N&&(f=x.tickCoord-e*(j()/2+i),s[v]=Cn(Cn({},x),{},{isShow:!0}))},m=l-1;m>=0;m--)h(m);return s}function TZ(e,t,n,r,i,s){var l=(r||[]).slice(),d=l.length,{start:f,end:h}=t;if(s){var m=r[d-1],g=n(m,d-1),v=e*(m.coordinate+e*g/2-h);l[d-1]=m=Cn(Cn({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate});var x=$h(e,m.tickCoord,()=>g,f,h);x&&(h=m.tickCoord-e*(g/2+i),l[d-1]=Cn(Cn({},m),{},{isShow:!0}))}for(var _=s?d-1:d,j=function(O){var C=l[O],A,T=()=>(A===void 0&&(A=n(C,O)),A);if(O===0){var k=e*(C.coordinate-e*T()/2-f);l[O]=C=Cn(Cn({},C),{},{tickCoord:k<0?C.coordinate-k*e:C.coordinate})}else l[O]=C=Cn(Cn({},C),{},{tickCoord:C.coordinate});var R=$h(e,C.tickCoord,T,f,h);R&&(f=C.tickCoord+e*(T()/2+i),l[O]=Cn(Cn({},C),{},{isShow:!0}))},S=0;S<_;S++)j(S);return l}function xw(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:d,interval:f,tickFormatter:h,unit:m,angle:g}=e;if(!i||!i.length||!r)return[];if(Pe(f)||eo.isSsr){var v;return(v=NZ(i,Pe(f)?f:0))!==null&&v!==void 0?v:[]}var x=[],_=d==="top"||d==="bottom"?"width":"height",j=m&&_==="width"?ru(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(C,A)=>{var T=typeof h=="function"?h(C.value,A):C.value;return _==="width"?jZ(ru(T,{fontSize:t,letterSpacing:n}),j,g):ru(T,{fontSize:t,letterSpacing:n})[_]},N=i.length>=2?hn(i[1].coordinate-i[0].coordinate):1,O=SZ(s,N,_);return f==="equidistantPreserveStart"?EZ(N,O,S,i,l):(f==="preserveStart"||f==="preserveStartEnd"?x=TZ(N,O,S,i,l,f==="preserveStartEnd"):x=kZ(N,O,S,i,l),x.filter(C=>C.isShow))}var PZ=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var d=n?n.getBoundingClientRect().width:0,f=i+s,h=l+f+d+(n?r:0);return Math.round(h)}return 0},MZ=["axisLine","width","height","className","hide","ticks"],RZ=["viewBox"],DZ=["viewBox"];function W0(e,t){if(e==null)return{};var n,r,i=IZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qs.apply(null,arguments)}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){LZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LZ(e,t,n){return(t=$Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Z(e){var t=zZ(e,"string");return typeof t=="symbol"?t:t+""}function zZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ww={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function UZ(e){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var h=nn(nn(nn({},f),rn(d,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var m=+(s==="top"&&!l||s==="bottom"&&l);h=nn(nn({},h),{},{x1:t,y1:n+m*i,x2:t+r,y2:n+m*i})}else{var g=+(s==="left"&&!l||s==="right"&&l);h=nn(nn({},h),{},{x1:t+g*r,y1:n,x2:t+g*r,y2:n+i})}return b.createElement("line",Qs({},h,{className:ft("recharts-cartesian-axis-line",Gs(d,"className"))}))}function qZ(e,t,n,r,i,s,l,d,f){var h,m,g,v,x,_,j=d?-1:1,S=e.tickSize||l,N=Pe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=m=e.coordinate,v=n+ +!d*i,g=v-j*S,_=g-j*f,x=N;break;case"left":g=v=e.coordinate,m=t+ +!d*r,h=m-j*S,x=h-j*f,_=N;break;case"right":g=v=e.coordinate,m=t+ +d*r,h=m+j*S,x=h+j*f,_=N;break;default:h=m=e.coordinate,v=n+ +d*i,g=v+j*S,_=g+j*f,x=N;break}return{line:{x1:h,y1:g,x2:m,y2:v},tick:{x,y:_}}}function BZ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function FZ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function HZ(e){var{option:t,tickProps:n,value:r}=e,i,s=ft(n.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))i=b.cloneElement(t,nn(nn({},n),{},{className:s}));else if(typeof t=="function")i=t(nn(nn({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ft(l,t==null?void 0:t.className)),i=b.createElement(Em,Qs({},n,{className:l}),r)}return i}function KZ(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:s,unit:l,padding:d,tickTextProps:f,orientation:h,mirror:m,x:g,y:v,width:x,height:_,tickSize:j,tickMargin:S,fontSize:N,letterSpacing:O,getTicksConfig:C,events:A}=e,T=xw(nn(nn({},C),{},{ticks:t}),N,O),k=BZ(h,m),R=FZ(h,m),L=Wi(C),K=rn(n,!1),B=nn(nn({},L),{},{fill:"none"},rn(r,!1)),F=T.map((z,Q)=>{var{line:H,tick:X}=qZ(z,g,v,x,_,h,j,m,S),I=nn(nn(nn(nn({textAnchor:k,verticalAnchor:R},L),{},{stroke:"none",fill:i},K),X),{},{index:Q,payload:z,visibleTicksCount:T.length,tickFormatter:s,padding:d},f);return b.createElement(Vn,Qs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(z.value,"-").concat(z.coordinate,"-").concat(z.tickCoord)},Tu(A,z,Q)),r&&b.createElement("line",Qs({},B,H,{className:ft("recharts-cartesian-axis-tick-line",Gs(r,"className"))})),n&&b.createElement(HZ,{option:n,tickProps:I,value:"".concat(typeof s=="function"?s(z.value,Q):z.value).concat(l||"")}))});return F.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},F):null}var GZ=b.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:s,hide:l,ticks:d}=e,f=W0(e,MZ),[h,m]=b.useState(""),[g,v]=b.useState(""),x=b.useRef([]);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return PZ({ticks:x.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var _=b.useCallback(j=>{if(j){var S=j.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=Array.from(S);var N=S[0];if(N){var O=window.getComputedStyle(N),C=O.fontSize,A=O.letterSpacing;(C!==h||A!==g)&&(m(C),v(A))}}},[h,g]);return l||r!=null&&r<=0||i!=null&&i<=0?null:b.createElement(Vn,{className:ft("recharts-cartesian-axis",s),ref:_},b.createElement(UZ,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Wi(e)}),b.createElement(KZ,{ticks:d,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:h,letterSpacing:g,getTicksConfig:e,events:f}),b.createElement(JW,{x:e.x,y:e.y,width:e.width,height:e.height},b.createElement(lX,{label:e.label}),e.children))}),YZ=b.memo(GZ,(e,t)=>{var{viewBox:n}=e,r=W0(e,RZ),{viewBox:i}=t,s=W0(t,DZ);return Nl(n,i)&&Nl(r,s)}),_w=b.forwardRef((e,t)=>{var n=Rn(e,ww);return b.createElement(YZ,Qs({},n,{ref:t}))});_w.displayName="CartesianAxis";var VZ=["x1","y1","x2","y2","key"],WZ=["offset"],XZ=["xAxisId","yAxisId"],QZ=["xAxisId","yAxisId"];function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(r){JZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JZ(e,t,n){return(t=ZZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZZ(e){var t=eee(e,"string");return typeof t=="symbol"?t:t+""}function eee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(null,arguments)}function zh(e,t){if(e==null)return{};var n,r,i=tee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nee=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:d}=e;return b.createElement("rect",{x:r,y:i,ry:d,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function L3(e,t){var n;if(b.isValidElement(e))n=b.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:d}=t,f=zh(t,VZ),h=Wi(f),{offset:m}=h,g=zh(h,WZ);n=b.createElement("line",Us({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:d}))}return n}function ree(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,d=zh(e,XZ),f=i.map((h,m)=>{var g=An(An({},d),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(m),index:m});return L3(r,g)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function aee(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,d=zh(e,QZ),f=i.map((h,m)=>{var g=An(An({},d),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(m),index:m});return L3(r,g)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function iee(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var h=d.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==h[0]&&h.unshift(0);var m=h.map((g,v)=>{var x=!h[v+1],_=x?i+l-g:h[v+1]-g;if(_<=0)return null;var j=v%t.length;return b.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:_,width:s,stroke:"none",fill:t[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function see(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:d,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==h[0]&&h.unshift(0);var m=h.map((g,v)=>{var x=!h[v+1],_=x?i+l-g:h[v+1]-g;if(_<=0)return null;var j=v%n.length;return b.createElement("rect",{key:"react-".concat(v),x:g,y:s,width:_,height:d,stroke:"none",fill:n[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var oee=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return MT(xw(An(An(An({},ww),n),{},{ticks:RT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},lee=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return MT(xw(An(An(An({},ww),n),{},{ticks:RT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},cee={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function $3(e){var t=Jb(),n=Zb(),r=$T(),i=An(An({},Rn(e,cee)),{},{x:Pe(e.x)?e.x:r.left,y:Pe(e.y)?e.y:r.top,width:Pe(e.width)?e.width:r.width,height:Pe(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:d,y:f,width:h,height:m,syncWithTicks:g,horizontalValues:v,verticalValues:x}=i,_=Dr(),j=Te(K=>yO(K,"xAxis",s,_)),S=Te(K=>yO(K,"yAxis",l,_));if(!Pe(h)||h<=0||!Pe(m)||m<=0||!Pe(d)||d!==+d||!Pe(f)||f!==+f)return null;var N=i.verticalCoordinatesGenerator||oee,O=i.horizontalCoordinatesGenerator||lee,{horizontalPoints:C,verticalPoints:A}=i;if((!C||!C.length)&&typeof O=="function"){var T=v&&v.length,k=O({yAxis:S?An(An({},S),{},{ticks:T?v:S.ticks}):void 0,width:t,height:n,offset:r},T?!0:g);nu(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(C=k)}if((!A||!A.length)&&typeof N=="function"){var R=x&&x.length,L=N({xAxis:j?An(An({},j),{},{ticks:R?x:j.ticks}):void 0,width:t,height:n,offset:r},R?!0:g);nu(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(A=L)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(nee,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(iee,Us({},i,{horizontalPoints:C})),b.createElement(see,Us({},i,{verticalPoints:A})),b.createElement(ree,Us({},i,{offset:r,horizontalPoints:C,xAxis:j,yAxis:S})),b.createElement(aee,Us({},i,{offset:r,verticalPoints:A,xAxis:j,yAxis:S})))}$3.displayName="CartesianGrid";var uee=["dangerouslySetInnerHTML","ticks"],dee=["id"],fee=["domain"],hee=["domain"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X0.apply(null,arguments)}function Uh(e,t){if(e==null)return{};var n,r,i=mee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function pee(e){var t=Lt();return b.useEffect(()=>(t(KQ(e)),()=>{t(GQ(e))}),[e,t]),null}var gee=e=>{var{xAxisId:t,className:n}=e,r=Te(Xb),i=Dr(),s="xAxis",l=Te(S=>$l(S,s,t,i)),d=Te(S=>kM(S,s,t,i)),f=Te(S=>EM(S,t)),h=Te(S=>SY(S,t)),m=Te(S=>rM(S,t));if(f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=e,x=Uh(e,uee),{id:_}=m,j=Uh(m,dee);return b.createElement(_w,X0({},x,j,{scale:l,x:h.x,y:h.y,width:f.width,height:f.height,className:ft("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:d}))},vee={allowDataOverflow:ar.allowDataOverflow,allowDecimals:ar.allowDecimals,allowDuplicatedCategory:ar.allowDuplicatedCategory,height:ar.height,hide:!1,mirror:ar.mirror,orientation:ar.orientation,padding:ar.padding,reversed:ar.reversed,scale:ar.scale,tickCount:ar.tickCount,type:ar.type,xAxisId:0},yee=e=>{var t,n,r,i,s,l=Rn(e,vee);return b.createElement(b.Fragment,null,b.createElement(pee,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),b.createElement(gee,l))},bee=(e,t)=>{var{domain:n}=e,r=Uh(e,fee),{domain:i}=t,s=Uh(t,hee);return Nl(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Nl({domain:n},{domain:i}):!1},z3=b.memo(yee,bee);z3.displayName="XAxis";var xee=["dangerouslySetInnerHTML","ticks"],wee=["id"],_ee=["domain"],jee=["domain"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q0.apply(null,arguments)}function qh(e,t){if(e==null)return{};var n,r,i=See(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function See(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Nee(e){var t=Lt();return b.useEffect(()=>(t(YQ(e)),()=>{t(VQ(e))}),[e,t]),null}var Eee=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,s=b.useRef(null),l=b.useRef(null),d=Te(Xb),f=Dr(),h=Lt(),m="yAxis",g=Te(T=>$l(T,m,t,f)),v=Te(T=>OM(T,t)),x=Te(T=>EY(T,t)),_=Te(T=>kM(T,m,t,f)),j=Te(T=>aM(T,t));if(b.useLayoutEffect(()=>{if(!(r!=="auto"||!v||cw(i)||b.isValidElement(i)||j==null)){var T=s.current;if(T){var k=T.getCalculatedWidth();Math.round(v.width)!==Math.round(k)&&h(WQ({id:t,width:k}))}}},[_,v,h,i,t,r,j]),v==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:N}=e,O=qh(e,xee),{id:C}=j,A=qh(j,wee);return b.createElement(_w,Q0({},O,A,{ref:s,labelRef:l,scale:g,x:x.x,y:x.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:ft("recharts-".concat(m," ").concat(m),n),viewBox:d,ticks:_}))},Oee={allowDataOverflow:ir.allowDataOverflow,allowDecimals:ir.allowDecimals,allowDuplicatedCategory:ir.allowDuplicatedCategory,hide:!1,mirror:ir.mirror,orientation:ir.orientation,padding:ir.padding,reversed:ir.reversed,scale:ir.scale,tickCount:ir.tickCount,type:ir.type,width:ir.width,yAxisId:0},Cee=e=>{var t,n,r,i,s,l=Rn(e,Oee);return b.createElement(b.Fragment,null,b.createElement(Nee,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),b.createElement(Eee,l))},Aee=(e,t)=>{var{domain:n}=e,r=qh(e,_ee),{domain:i}=t,s=qh(t,jee);return Nl(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Nl({domain:n},{domain:i}):!1},U3=b.memo(Cee,Aee);U3.displayName="YAxis";var Ry={exports:{}},Dy={};/**
 */var _C;function kee(){if(_C)return Dy;_C=1;var e=El();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Dy.useSyncExternalStoreWithSelector=function(f,h,m,g,v){var x=i(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=l(function(){function S(T){if(!N){if(N=!0,O=T,T=g(T),v!==void 0&&_.hasValue){var k=_.value;if(v(k,T))return C=k}return C=T}if(k=C,n(O,T))return k;var R=g(T);return v!==void 0&&v(k,R)?(O=T,k):(O=T,C=R)}var N=!1,O,C,A=m===void 0?null:m;return[function(){return S(h())},A===null?void 0:function(){return S(A())}]},[h,m,g,v]);var j=r(f,x[0],x[1]);return s(function(){_.hasValue=!0,_.value=j},[j]),d(j),j},Dy}var jC;function Tee(){return jC||(jC=1,Ry.exports=kee()),Ry.exports}Tee();function Pee(e){e()}function Mee(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Pee(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var SC={notify(){},get:()=>[]};function Ree(e,t){let n,r=SC,i=0,s=!1;function l(j){m();const S=r.subscribe(j);let N=!1;return()=>{N||(N=!0,S(),g())}}function d(){r.notify()}function f(){_.onStateChange&&_.onStateChange()}function h(){return s}function m(){i++,n||(n=e.subscribe(f),r=Mee())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=SC)}function v(){s||(s=!0,m())}function x(){s&&(s=!1,g())}const _={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>r};return _}var Dee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iee=Dee(),Lee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$ee=Lee(),zee=()=>Iee||$ee?b.useLayoutEffect:b.useEffect,Uee=zee(),Iy=Symbol.for("react-redux-context"),Ly=typeof globalThis<"u"?globalThis:{};function qee(){if(!b.createContext)return{};const e=Ly[Iy]??(Ly[Iy]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Bee=qee();function Fee(e){const{children:t,context:n,serverState:r,store:i}=e,s=b.useMemo(()=>{const f=Ree(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=b.useMemo(()=>i.getState(),[i]);Uee(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const d=n||Bee;return b.createElement(d.Provider,{value:s},t)}var Hee=Fee,Kee=(e,t)=>t,jw=re([Kee,ot,eM,on,KM,ai,kV,an],DV),Sw=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},q3=Pr("mouseClick"),B3=Mu();B3.startListening({actionCreator:q3,effect:(e,t)=>{var n=e.payload,r=jw(t.getState(),Sw(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(zY({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var J0=Pr("mouseMove"),F3=Mu();F3.startListening({actionCreator:J0,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=ew(r,r.tooltip.settings.shared),s=jw(r,Sw(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch($M({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(LM()))}});var NC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},H3=hr({name:"rootProps",initialState:NC,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:NC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Gee=H3.reducer,{updateOptions:Yee}=H3.actions,K3=hr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Vee}=K3.actions,Wee=K3.reducer,G3=Pr("keyDown"),Y3=Pr("focus"),Nw=Mu();Nw.startListening({actionCreator:G3,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(tw(i,Ul(n))),d=ai(n);if(s==="Enter"){var f=Mh(n,"axis","hover",String(i.index));t.dispatch(F0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var h=kY(n),m=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,v=l+g*m;if(!(d==null||v>=d.length||v<0)){var x=Mh(n,"axis","hover",String(v));t.dispatch(F0({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Nw.startListening({actionCreator:Y3,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Mh(n,"axis","hover",String(s));t.dispatch(F0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Cr=Pr("externalEvent"),V3=Mu();V3.startListening({actionCreator:Cr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:wV(n),activeDataKey:WM(n),activeIndex:Xs(n),activeLabel:VM(n),activeTooltipIndex:Xs(n),isTooltipActive:_V(n)};e.payload.handler(r,e.payload.reactEvent)}}});var Xee=re([zl],e=>e.tooltipItemPayloads),Qee=re([Xee,Hu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(d=>d.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),W3=Pr("touchMove"),X3=Mu();X3.startListening({actionCreator:W3,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=ew(r,r.tooltip.settings.shared);if(i==="axis"){var s=jw(r,Sw({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch($M({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,d=n.touches[0],f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(IT),m=(l=f.getAttribute(LT))!==null&&l!==void 0?l:void 0,g=Qee(t.getState(),h,m);t.dispatch(IM({activeDataKey:m,activeIndex:h,activeCoordinate:g}))}}});var Jee=lT({brush:hZ,cartesianAxis:XQ,chartData:QV,errorBars:uJ,graphicalItems:mQ,layout:T9,legend:wB,options:GV,polarAxis:kX,polarOptions:Wee,referenceElements:xZ,rootProps:Gee,tooltip:UY}),Zee=function(t){return n9({reducer:Jee,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([B3.middleware,F3.middleware,Nw.middleware,V3.middleware,X3.middleware]),devTools:eo.devToolsEnabled})};function Q3(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Dr(),s=b.useRef(null);if(i)return n;s.current==null&&(s.current=Zee(t));var l=Fb;return b.createElement(Hee,{context:l,store:s.current},n)}function J3(e){var{layout:t,width:n,height:r,margin:i}=e,s=Lt(),l=Dr();return b.useEffect(()=>{l||(s(C9(t)),s(A9({width:n,height:r})),s(O9(i)))},[s,l,t,n,r,i]),null}function Z3(e){var t=Lt();return b.useEffect(()=>{t(Yee(e))},[t,e]),null}var ete=["children"];function tte(e,t){if(e==null)return{};var n,r,i=nte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(null,arguments)}var rte={width:"100%",height:"100%"},ate=b.forwardRef((e,t)=>{var n=Jb(),r=Zb(),i=BT();if(!yl(n)||!yl(r))return null;var{children:s,otherAttributes:l,title:d,desc:f}=e,h,m;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?m=l.role:m=i?"application":void 0,b.createElement(Rb,Bh({},l,{title:d,desc:f,role:m,tabIndex:h,width:n,height:r,style:rte,ref:t}),s)}),ite=e=>{var{children:t}=e,n=Te(lm);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return b.createElement(Rb,{width:r,height:i,x:l,y:s},t)},EC=b.forwardRef((e,t)=>{var{children:n}=e,r=tte(e,ete),i=Dr();return i?b.createElement(ite,null,n):b.createElement(ate,Bh({ref:t},r),n)});function ste(){var e=Lt(),[t,n]=b.useState(null),r=Te(sB);return b.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;fr(s)&&s!==r&&e(k9(s))}},[t,e,r]),n}function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ote(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){lte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lte(e,t,n){return(t=cte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cte(e){var t=ute(e,"string");return typeof t=="symbol"?t:t+""}function ute(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dte=b.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:m,onMouseMove:g,onMouseUp:v,onTouchEnd:x,onTouchMove:_,onTouchStart:j,style:S,width:N}=e,O=Lt(),[C,A]=b.useState(null),[T,k]=b.useState(null);sW();var R=ste(),L=b.useCallback(M=>{R(M),typeof t=="function"&&t(M),A(M),k(M)},[R,t,A,k]),K=b.useCallback(M=>{O(q3(M)),O(Cr({handler:s,reactEvent:M}))},[O,s]),B=b.useCallback(M=>{O(J0(M)),O(Cr({handler:h,reactEvent:M}))},[O,h]),F=b.useCallback(M=>{O(LM()),O(Cr({handler:m,reactEvent:M}))},[O,m]),z=b.useCallback(M=>{O(J0(M)),O(Cr({handler:g,reactEvent:M}))},[O,g]),Q=b.useCallback(()=>{O(Y3())},[O]),H=b.useCallback(M=>{O(G3(M.key))},[O]),X=b.useCallback(M=>{O(Cr({handler:l,reactEvent:M}))},[O,l]),I=b.useCallback(M=>{O(Cr({handler:d,reactEvent:M}))},[O,d]),$=b.useCallback(M=>{O(Cr({handler:f,reactEvent:M}))},[O,f]),U=b.useCallback(M=>{O(Cr({handler:v,reactEvent:M}))},[O,v]),ee=b.useCallback(M=>{O(Cr({handler:j,reactEvent:M}))},[O,j]),W=b.useCallback(M=>{O(W3(M)),O(Cr({handler:_,reactEvent:M}))},[O,_]),P=b.useCallback(M=>{O(Cr({handler:x,reactEvent:M}))},[O,x]);return b.createElement(t3.Provider,{value:C},b.createElement(Ak.Provider,{value:T},b.createElement("div",{className:ft("recharts-wrapper",r),style:ote({position:"relative",cursor:"default",width:N,height:i},S),onClick:K,onContextMenu:X,onDoubleClick:I,onFocus:Q,onKeyDown:H,onMouseDown:$,onMouseEnter:B,onMouseLeave:F,onMouseMove:z,onMouseUp:U,onTouchEnd:P,onTouchMove:W,onTouchStart:ee,ref:L},n)))}),fte=["children","className","width","height","style","compact","title","desc"];function hte(e,t){if(e==null)return{};var n,r,i=mte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eR=b.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:d,title:f,desc:h}=e,m=hte(e,fte),g=Wi(m);return d?b.createElement(EC,{otherAttributes:g,title:f,desc:h},n):b.createElement(dte,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(EC,{otherAttributes:g,title:f,desc:h,ref:t},b.createElement(_Z,null,n)))}),pte=["width","height"];function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z0.apply(null,arguments)}function gte(e,t){if(e==null)return{};var n,r,i=vte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yte={top:5,right:5,bottom:5,left:5},bte={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yte,reverseStackOrder:!1,syncMethod:"index"},xte=b.forwardRef(function(t,n){var r,i=Rn(t.categoricalChartProps,bte),{width:s,height:l}=i,d=gte(i,pte);if(!yl(s)||!yl(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,categoricalChartProps:v}=t,x={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return b.createElement(Q3,{preloadedState:{options:x},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:f},b.createElement(M3,{chartData:v.data}),b.createElement(J3,{width:s,height:l,layout:i.layout,margin:i.margin}),b.createElement(Z3,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(eR,Z0({},d,{width:s,height:l,ref:n})))}),wte=["axis","item"],_te=b.forwardRef((e,t)=>b.createElement(xte,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wte,tooltipPayloadSearcher:n3,categoricalChartProps:e,ref:t}));function jte(e){var t=Lt();return b.useEffect(()=>{t(Vee(e))},[t,e]),null}var Ste=["width","height","layout"];function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eb.apply(null,arguments)}function Nte(e,t){if(e==null)return{};var n,r,i=Ete(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ete(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ote={top:5,right:5,bottom:5,left:5},Cte={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ote,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ate=b.forwardRef(function(t,n){var r,i=Rn(t.categoricalChartProps,Cte),{width:s,height:l,layout:d}=i,f=Nte(i,Ste);if(!yl(s)||!yl(l))return null;var{chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v}=t,x={chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v,eventEmitter:void 0};return b.createElement(Q3,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},b.createElement(M3,{chartData:i.data}),b.createElement(J3,{width:s,height:l,layout:d,margin:i.margin}),b.createElement(Z3,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(jte,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),b.createElement(eR,eb({width:s,height:l},f,{ref:n})))}),kte=["item"],Tte={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Pte=b.forwardRef((e,t)=>{var n=Rn(e,Tte);return b.createElement(Ate,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:kte,tooltipPayloadSearcher:n3,categoricalChartProps:n,ref:t})});const CC=[{value:"editor",label:"Éditeur",headerDescription:"Gestion complète",helper:"Créer, modifier et valider le contenu.",tooltip:"Autorise toutes les actions, y compris la modification et la validation des données."},{value:"readonly",label:"Lecture seule",headerDescription:"Consultation",helper:"Visualiser les informations sans modifier.",tooltip:"Permet uniquement de consulter les informations sans pouvoir les modifier."},{value:"none",label:"Aucun",headerDescription:"Accès bloqué",helper:"Masquer totalement la section.",tooltip:"Bloque complètement l’accès à la section ou à la fonctionnalité."}],Mte=({permissionKeys:e,permissions:t,onChange:n,getPermissionLabel:r,customPermissions:i,onRemoveCustomPermission:s})=>{const l=b.useMemo(()=>{if(e.length===0)return[];const f=Gn.map(x=>x.permissionKey),h=new Set(f),m=f.filter(x=>e.includes(x)),g=e.filter(x=>!h.has(x)).sort((x,_)=>r(x).localeCompare(r(_),"fr")),v=[];return m.length>0&&v.push({id:"navigation",title:"Navigation principale",keys:m}),g.length>0&&v.push({id:"custom",title:"Permissions personnalisées",keys:g}),v},[r,e]),d=f=>{e.forEach(h=>{(t[h]??"none")!==f&&n(h,f)})};return e.length===0?c.jsx("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm font-medium text-gray-900",children:"Aucune permission disponible pour ce rôle pour le moment."}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>d("editor"),title:"Autoriser toutes les sections en mode édition.",children:"Tout autoriser"}),c.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>d("readonly"),title:"Basculer toutes les sections en lecture seule.",children:"Lecture seule partout"}),c.jsx("button",{type:"button",className:"permission-action-button is-danger",onClick:()=>d("none"),title:"Révoquer toutes les permissions.",children:"Tout bloquer"})]}),c.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:c.jsx("div",{className:"max-h-96 overflow-auto",children:c.jsx("div",{className:"min-w-full",children:c.jsxs("div",{className:"grid grid-cols-[minmax(220px,2fr)_repeat(3,minmax(140px,1fr))]",children:[c.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:"Section / permission"}),CC.map(f=>c.jsxs("div",{className:"border-b border-l border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:[c.jsx("div",{children:f.label}),c.jsx("p",{className:"mt-1 text-xs font-medium text-gray-900",children:f.headerDescription})]},f.value)),l.map(f=>c.jsxs(cr.Fragment,{children:[c.jsx("div",{className:"col-span-4 border-t border-gray-200 bg-gray-100 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-gray-900",children:f.title}),f.keys.map(h=>{const m=t[h]??"none",g=`permission-${h.replace(/[^a-zA-Z0-9_-]/g,"_")}`,v=h in i;return c.jsxs(cr.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:r(h)}),v&&s&&c.jsx("button",{type:"button",onClick:()=>s(h),className:"text-gray-700 transition-colors hover:text-red-600",title:"Supprimer cette permission personnalisée",children:c.jsx(Vi,{className:"h-4 w-4"})})]})}),CC.map(x=>{const _=m===x.value;return c.jsx("div",{className:"border-t border-l border-gray-100 px-4 py-3",children:c.jsxs("label",{className:`permission-choice${_?" is-active":""}`,title:x.tooltip,children:[c.jsx("input",{type:"radio",className:"sr-only",name:g,value:x.value,checked:_,onChange:()=>n(h,x.value)}),c.jsx("span",{className:"permission-choice__label",children:x.label}),c.jsx("span",{className:"permission-choice__helper",children:x.helper})]})},x.value)})]},h)})]},f.id))]})})})})]})},Rte=({mode:e,formState:t,onSubmit:n,onInputChange:r,onHomePageChange:i,onPermissionChange:s,onAddCustomPermission:l,onRemoveCustomPermission:d,onCancel:f,isSubmitting:h,hasAccessibleHomePage:m,permissionKeys:g,getPermissionLabel:v,isPermissionGranted:x})=>{const[_,j]=b.useState(!1),[S,N]=b.useState(""),[O,C]=b.useState(""),[A,T]=b.useState(null),k=()=>{j(!1),N(""),C(""),T(null)},R=()=>{const L=S.trim(),K=O.trim();if(!L||!K){T("La clé technique et le nom affiché sont obligatoires.");return}if(g.includes(L)){T("Cette clé de permission existe déjà.");return}l(L,K),k()};return c.jsxs("div",{children:[c.jsx("h4",{className:"mb-4 text-lg font-semibold text-gray-900",children:e==="edit"?"Modifier le rôle sélectionné":"Créer un nouveau rôle"}),c.jsxs("form",{onSubmit:n,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-name",className:"mb-1 block text-sm font-medium text-gray-900",children:"Nom du rôle"}),c.jsx("input",{id:"role-name",name:"name",value:t.name,onChange:r,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. Manager"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-pin",className:"mb-1 block text-sm font-medium text-gray-900",children:"Code PIN d'accès"}),c.jsx("input",{id:"role-pin",name:"pin",value:t.pin,onChange:r,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. 1234"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-home-page",className:"mb-1 block text-sm font-medium text-gray-900",children:"Page d'accueil par défaut"}),c.jsx("select",{id:"role-home-page",name:"homePage",value:t.homePage,onChange:L=>i(L.target.value),disabled:!m,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary disabled:cursor-not-allowed disabled:bg-gray-100",children:Gn.map(L=>{const K=x(t.permissions[L.permissionKey]);return c.jsxs("option",{value:L.permissionKey,disabled:!K,children:[v(L.permissionKey),K?"":" (accès requis)"]},L.permissionKey)})}),m?c.jsx("p",{className:"mt-1 text-xs text-gray-900",children:"Les pages sans permission sont désactivées."}):c.jsx("p",{className:"mt-1 text-xs font-medium text-red-700",children:"Accordez au moins une permission pour choisir une page d'accueil."})]}),c.jsxs("div",{children:[c.jsx("p",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Permissions par page"}),c.jsx(Mte,{permissionKeys:g,permissions:t.permissions,onChange:s,getPermissionLabel:v,customPermissions:t.customPermissions,onRemoveCustomPermission:d}),c.jsx("div",{className:"mt-4 space-y-3",children:_?c.jsxs("div",{className:"rounded-md border border-dashed border-brand-primary/50 bg-brand-primary/5 p-4",children:[c.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Clé technique"}),c.jsx("input",{type:"text",value:S,onChange:L=>{N(L.target.value),T(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. /rapports"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Nom affiché"}),c.jsx("input",{type:"text",value:O,onChange:L=>{C(L.target.value),T(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. Rapports"})]})]}),A&&c.jsx("p",{className:"mt-2 text-xs font-medium text-red-700",children:A}),c.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[c.jsx("button",{type:"button",onClick:k,className:"rounded-md border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),c.jsx("button",{type:"button",onClick:R,className:"rounded-md bg-brand-primary px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-primary/90",children:"Ajouter"})]})]}):c.jsx("button",{type:"button",onClick:()=>{j(!0),T(null)},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Ajouter une permission"})})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[e==="edit"&&c.jsx("button",{type:"button",onClick:f,className:"rounded-md border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),c.jsxs("button",{type:"submit",disabled:h,className:"inline-flex items-center rounded-md bg-brand-primary px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-primary/90 disabled:cursor-not-allowed disabled:opacity-60",children:[c.jsx(P$,{className:"mr-2 h-4 w-4"}),h?"Enregistrement...":e==="edit"?"Mettre à jour":"Créer"]})]})]})]})},Dte=({roles:e,isFetching:t,onCreateRole:n,onSelectRole:r,onDeleteRole:i,selectedRoleId:s,isEditing:l,deletingRoleId:d,getPermissionLabel:f})=>{const h=!t&&e.length===0;return c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rôles existants"}),c.jsxs("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-md border border-brand-primary px-2 py-1 text-sm font-medium text-brand-primary transition-colors hover:bg-brand-primary/10",children:[c.jsx(Yh,{className:"mr-1.5 h-4 w-4"}),"Nouveau rôle"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto rounded-md border border-gray-200 p-3",children:t?c.jsx("p",{className:"text-sm text-gray-900",children:"Chargement des rôles..."}):h?c.jsx("p",{className:"text-sm text-gray-900",children:"Aucun rôle configuré pour le moment."}):c.jsx("div",{className:"space-y-3",children:e.map(m=>{const g=l&&s===m.id;return c.jsxs("div",{className:`flex items-center justify-between rounded-md border px-3 py-2 transition-colors ${g?"border-brand-primary bg-brand-primary/10":"border-gray-200"}`,children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"font-semibold text-gray-900",children:m.name}),c.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["PIN : ",m.pin??"—"]}),m.homePage&&c.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Accueil : ",f(m.homePage)]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>r(m),className:"rounded-md border border-gray-300 px-2 py-1 text-xs font-semibold text-gray-900 transition-colors hover:bg-gray-100",children:"Modifier"}),c.jsxs("button",{type:"button",onClick:()=>i(m.id),disabled:d===m.id,className:"inline-flex items-center rounded-md border border-red-300 px-2 py-1 text-xs font-semibold text-red-600 transition-colors hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[c.jsx(Vi,{className:"mr-1 h-3 w-3"}),"Supprimer"]})]})]},m.id)})})})]})};var HC;const Ite=((HC=Gn[0])==null?void 0:HC.permissionKey)??"/dashboard",Lte=e=>{if(!e)return!1;const t=e.trim().toLowerCase();return t===QA.ADMIN||t==="administrateur"},Cs=(e,t,n={})=>{const r={...e||{}};return delete r[qs],Gn.forEach(i=>{i.permissionKey in r||(i.permissionKey===Va&&Lte(t)?r[i.permissionKey]="editor":r[i.permissionKey]="none")}),Object.keys(n).forEach(i=>{i in r||(r[i]="none")}),r},As=e=>{const t=Gn.find(n=>ks(e[n.permissionKey]));return(t==null?void 0:t.permissionKey)??Ite},AC=e=>{const t=Cs(void 0,void 0,e);return{name:"",pin:"",permissions:t,homePage:As(t),customPermissions:{...e}}},ks=e=>e==="editor"||e==="readonly",$te=({isOpen:e,onClose:t})=>{const{refreshRole:n,role:r}=ga(),[i,s]=b.useState([]),[l,d]=b.useState({}),[f,h]=b.useState(()=>AC({})),[m,g]=b.useState("create"),[v,x]=b.useState(!1),[_,j]=b.useState(!1),[S,N]=b.useState(null),[O,C]=b.useState(null),[A,T]=b.useState(null),k=b.useMemo(()=>{const W=Gn.map(M=>M.permissionKey),P=new Set;return Object.keys(l).forEach(M=>{W.includes(M)||P.add(M)}),i.forEach(M=>{Object.keys(M.permissions).forEach(G=>{G!==qs&&(W.includes(G)||P.add(G))})}),[...W,...Array.from(P)]},[i,l]),R=b.useMemo(()=>Gn.some(W=>ks(f.permissions[W.permissionKey])),[f.permissions]),L=b.useCallback(async()=>{x(!0);try{const W=await Ne.getRoles();s(W),d(P=>{const M={...P};let G=!1;const ne=new Set(Gn.map(se=>se.permissionKey));return W.forEach(se=>{Object.keys(se.permissions).forEach(he=>{he===qs||ne.has(he)||he in M||(M[he]=he,G=!0)})}),G?M:P}),T(null)}catch(W){console.error("Failed to load roles:",W),T("Impossible de charger les rôles.")}finally{x(!1)}},[]),K=b.useCallback(()=>{g("create"),h(AC(l))},[l]);b.useEffect(()=>{e&&(C(null),T(null),K(),L())},[e,L,K]),b.useEffect(()=>{h(W=>{const P=W.homePage;if(ks(W.permissions[P]))return W;const M=As(W.permissions);return M===P?W:{...W,homePage:M}})},[f.permissions]),b.useEffect(()=>{h(W=>{const P=W.customPermissions,M=l,G=Object.keys(P),ne=Object.keys(M);if(G.length===ne.length&&G.every(me=>M[me]===P[me]))return W;const se=Cs(W.permissions,W.name,M),he=ks(se[W.homePage])?W.homePage:As(se);return{...W,customPermissions:{...M},permissions:se,homePage:he}})},[l]);const B=b.useCallback(W=>{const P=Gn.find(M=>M.permissionKey===W);return P?P.name:l[W]??W},[l]);return{roles:i,formState:f,mode:m,isFetching:v,isSubmitting:_,deletingRoleId:S,statusMessage:O,errorMessage:A,permissionKeys:k,hasAccessibleHomePage:R,handleInputChange:W=>{const{name:P,value:M}=W.target;h(G=>({...G,[P]:M}))},handlePermissionChange:(W,P)=>{h(M=>({...M,permissions:{...M.permissions,[W]:P}}))},handleHomePageChange:W=>{h(P=>({...P,homePage:W}))},handleSelectRole:W=>{const P=new Set(Gn.map(se=>se.permissionKey)),M={...l};let G=!1;Object.keys(W.permissions).forEach(se=>{se===qs||P.has(se)||se in M||(M[se]=se,G=!0)}),G&&d(M);const ne=Cs(W.permissions,W.name,G?M:l);g("edit"),h({id:W.id,name:W.name,pin:W.pin??"",permissions:ne,homePage:W.homePage??As(ne),customPermissions:{...G?M:l}}),C(null),T(null)},handleDeleteRole:async W=>{if(confirm("Supprimer ce rôle ? Cette action est irréversible.")){N(W),C(null),T(null);try{await Ne.deleteRole(W),C("Rôle supprimé avec succès."),m==="edit"&&f.id===W&&K(),await L(),(r==null?void 0:r.id)===W&&await n()}catch(P){console.error("Failed to delete role:",P),T("Impossible de supprimer le rôle.")}finally{N(null)}}},handleSubmit:async W=>{if(W.preventDefault(),T(null),C(null),!f.name.trim()||!f.pin.trim()){T("Le nom et le code PIN sont obligatoires.");return}j(!0);try{const P=Cs(f.permissions,f.name,l),M=ks(P[f.homePage])?f.homePage:As(P);if(m==="create")await Ne.createRole({name:f.name.trim(),pin:f.pin.trim(),permissions:P,homePage:M}),C("Rôle créé avec succès."),await L(),await n(),K();else if(f.id){const G=await Ne.updateRole(f.id,{name:f.name.trim(),pin:f.pin.trim(),permissions:P,homePage:M});C("Rôle mis à jour avec succès.");const ne=Cs(G.permissions,G.name,l);h({id:G.id,name:G.name,pin:G.pin??"",permissions:ne,homePage:G.homePage??As(ne),customPermissions:{...l}}),await L(),(r==null?void 0:r.id)===G.id&&await n()}}catch(P){console.error("Failed to save role:",P),T("Impossible d'enregistrer le rôle.")}finally{j(!1)}},handleClose:()=>{K(),C(null),T(null),t()},resetForm:K,getPermissionLabel:B,isPermissionGranted:ks,handleAddCustomPermission:(W,P)=>{Gn.some(M=>M.permissionKey===W)||d(M=>{if(M[W]===P)return M;const G={...M,[W]:P};return h(ne=>{const se=Cs(ne.permissions,ne.name,G);return W in se||(se[W]="none"),{...ne,customPermissions:{...G},permissions:se}}),G})},handleRemoveCustomPermission:W=>{Gn.some(P=>P.permissionKey===W)||d(P=>{if(!(W in P))return P;const M={...P};return delete M[W],h(G=>{const{[W]:ne,...se}=G.customPermissions,he={...G.permissions};delete he[W];const me=Cs(he,G.name,M),$e=ks(me[G.homePage])?G.homePage:As(me);return{...G,customPermissions:{...se},permissions:me,homePage:$e}}),M})}}},zte=({isOpen:e,onClose:t})=>{const{roles:n,formState:r,mode:i,isFetching:s,isSubmitting:l,deletingRoleId:d,statusMessage:f,errorMessage:h,permissionKeys:m,hasAccessibleHomePage:g,handleInputChange:v,handlePermissionChange:x,handleHomePageChange:_,handleSelectRole:j,handleDeleteRole:S,handleSubmit:N,handleClose:O,resetForm:C,getPermissionLabel:A,isPermissionGranted:T,handleAddCustomPermission:k,handleRemoveCustomPermission:R}=$te({isOpen:e,onClose:t});return c.jsx(mn,{isOpen:e,onClose:O,title:"Gestion des rôles",size:"xl",children:c.jsxs("div",{className:"flex flex-col gap-6",children:[f&&c.jsx("div",{className:"rounded-md bg-green-100 px-4 py-2 text-sm font-medium text-green-900",children:f}),h&&c.jsx("div",{className:"rounded-md bg-red-100 px-4 py-2 text-sm font-medium text-red-900",children:h}),c.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-8",children:[c.jsx("div",{className:"md:w-[38%] md:flex-shrink-0 lg:w-[35%]",children:c.jsx(Dte,{roles:n,isFetching:s,onCreateRole:C,onSelectRole:j,onDeleteRole:S,selectedRoleId:r.id,isEditing:i==="edit",deletingRoleId:d,getPermissionLabel:A})}),c.jsx("div",{className:"flex-1",children:c.jsx(Rte,{mode:i,formState:r,onSubmit:N,onInputChange:v,onHomePageChange:_,onPermissionChange:x,onAddCustomPermission:k,onRemoveCustomPermission:R,onCancel:C,isSubmitting:l,hasAccessibleHomePage:g,permissionKeys:m,getPermissionLabel:A,isPermissionGranted:T})})]})]})})},Ute=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:1,minimumFractionDigits:0}),Vc=e=>Ute.format(Number.isFinite(e)?e:0),ki=(e,t)=>t==null?null:t===0?e===0?0:100:(e-t)/Math.abs(t)*100,Ti=({title:e,value:t,icon:n,helper:r,comparison:i})=>{const s=typeof i=="number"&&Number.isFinite(i),l=s?i??0:0,d=s?Vc(Math.abs(l)):null,f=!s||l===0?"":l>0?"+":"−",h=d?`${f}${d}%`:"N/A",m=s?l<0?"bg-red-500/20 text-red-200":l>0?"bg-emerald-500/25 text-emerald-100":"bg-white/10 text-white/70":"bg-white/10 text-white/60";return c.jsxs("article",{className:"relative overflow-hidden rounded-3xl bg-slate-900 text-white shadow-lg transition-all hover:shadow-xl",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-slate-900/85 to-slate-900/60","aria-hidden":!0}),c.jsx("div",{className:"absolute -right-12 -top-12 h-44 w-44 rounded-full bg-cyan-400/20 blur-3xl","aria-hidden":!0}),c.jsx("div",{className:"absolute bottom-0 left-0 h-36 w-36 rounded-full bg-emerald-400/20 blur-3xl","aria-hidden":!0}),c.jsxs("div",{className:"relative flex flex-col gap-6 p-6 sm:p-7",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"min-w-0 space-y-3",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-white/60",children:e}),c.jsx("p",{className:"text-3xl font-bold leading-tight text-balance break-words sm:text-4xl",children:t})]}),c.jsx("div",{className:"shrink-0 rounded-2xl bg-white/10 p-3 text-white shadow-inner shadow-white/10",children:n})]}),c.jsxs("div",{className:"flex flex-col gap-3 text-sm text-white/70",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:`inline-flex min-w-[5.5rem] items-center justify-center rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.28em] ${m}`,children:h}),c.jsx("span",{className:"text-xs font-medium text-white/60",children:"vs période précédente"})]}),r?c.jsx("p",{className:"text-xs leading-relaxed text-white/70",children:r}):null]})]})]})},kf=({title:e,value:t,icon:n,onClick:r})=>{const i=r?{role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),r())}}:{};return c.jsxs("div",{className:`relative flex min-w-0 items-center gap-3 overflow-hidden rounded-3xl border border-slate-200 bg-white p-5 text-slate-900 shadow-sm transition-all hover:-translate-y-1 hover:shadow-lg ${r?"cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400":""}`,onClick:r,...i,children:[c.jsx("div",{className:"absolute -right-8 -top-8 h-24 w-24 rounded-full bg-slate-100","aria-hidden":!0}),c.jsx("div",{className:"relative shrink-0 rounded-2xl bg-slate-900/5 p-3 text-slate-600",children:n}),c.jsxs("div",{className:"relative min-w-0 flex-1 space-y-1",children:[c.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.28em] text-slate-500",children:e}),c.jsx("p",{className:"text-xl font-bold leading-tight text-balance break-words text-slate-900 sm:text-2xl",children:t})]})]})},tb={week:{label:"Últimos 7 días",days:7},month:{label:"Últimos 30 días",days:30}},qte=e=>{const{days:t}=tb[e],n=new Date(tu());n.setDate(n.getDate()+1);const r=new Date(n);return r.setDate(r.getDate()-t),{start:r,end:n}},Bte=()=>{const[e,t]=b.useState(null),[n,r]=b.useState([]),[i,s]=b.useState(!0),[l,d]=b.useState("category"),[f,h]=b.useState(!1),[m,g]=b.useState(!1),[v,x]=b.useState("week"),_=b.useCallback(async()=>{const{start:M,end:G}=qte(v),ne=M.toISOString(),se=G.toISOString();s(!0);try{const[he,me]=await Promise.all([Ne.getDashboardStats(v),Ne.getSalesByProduct({start:ne,end:se})]);t(he),r(me)}catch(he){console.error("Failed to fetch dashboard stats",he)}finally{s(!1)}},[v]);if(b.useEffect(()=>{_()},[_]),b.useEffect(()=>{const M=Ne.notifications.subscribe("orders_updated",()=>{_()});return()=>{M()}},[_]),i)return c.jsx("div",{className:"text-gray-800",children:"Cargando datos del panel..."});if(!e)return c.jsx("div",{className:"text-red-500",children:"No fue posible cargar los datos."});const j=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF4560","#775DD0"],S=l==="category"?e.ventesParCategorie:n,N=S.length>0,O=tb[v],C=e.ventesPeriodePrecedente,A=ki(e.ventesPeriode,e.ventesPeriodePrecedente),T=e.ventesPeriode>0?e.beneficePeriode/e.ventesPeriode*100:null,k=e.ventesPeriodePrecedente>0?e.beneficePeriodePrecedente/e.ventesPeriodePrecedente*100:null,R=e.commandesPeriode,L=O.days>0?e.ventesPeriode/O.days:0,K=e.clientsPeriode>0?e.ventesPeriode/e.clientsPeriode:0,B=O.days>0?R/O.days:0,F=O.days>0?e.clientsPeriode/O.days:0,z=e.commandesPeriodePrecedente>0?e.ventesPeriodePrecedente/e.commandesPeriodePrecedente:0,Q=e.clientsPeriodePrecedente>0?e.ventesPeriodePrecedente/e.clientsPeriodePrecedente:0,H=O.days>0?e.ventesPeriodePrecedente/O.days:0,X=ki(e.beneficePeriode,e.beneficePeriodePrecedente),I=T!==null?ki(T,k??null):null,$=ki(R,e.commandesPeriodePrecedente),U=ki(e.panierMoyen,z),ee=ki(K,Q),W=ki(e.clientsPeriode,e.clientsPeriodePrecedente),P=ki(L,H);return c.jsxs("div",{className:"space-y-8",children:[c.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white/80 p-4 shadow-sm backdrop-blur",children:c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("div",{className:"inline-flex rounded-full border border-slate-200 bg-slate-50 p-1 text-sm font-semibold text-slate-600 shadow-inner",children:Object.entries(tb).map(([M,G])=>{const ne=M,se=v===ne;return c.jsx("button",{onClick:()=>x(ne),className:`rounded-full px-4 py-1.5 transition ${se?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"hover:text-slate-900"}`,children:G.label},ne)})}),c.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center justify-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-md transition hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900",children:[c.jsx(z$,{className:"h-4 w-4"}),"Gestión de roles"]})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[c.jsx(Ti,{title:`Chiffre d'affaires (${e.periodLabel})`,value:ge(e.ventesPeriode),icon:c.jsx(Gh,{size:24}),comparison:A,helper:`Période précédente : ${ge(C)}`}),c.jsx(Ti,{title:"Bénéfice net",value:ge(e.beneficePeriode),icon:c.jsx(XA,{size:24}),comparison:X,helper:T!==null?`Marge : ${Vc(T)}%`:"Marge indisponible"}),c.jsx(Ti,{title:"Marge bénéficiaire",value:T!==null?`${Vc(T)}%`:"0%",icon:c.jsx(Eu,{size:24}),comparison:I,helper:`Profit : ${ge(e.beneficePeriode)}`}),c.jsx(Ti,{title:"Commandes traitées",value:Kc(R),icon:c.jsx(_b,{size:24}),comparison:$,helper:`≈ ${Vc(B)} commandes / jour`})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[c.jsx(Ti,{title:"Ticket moyen",value:ge(e.panierMoyen),icon:c.jsx(Bf,{size:24}),comparison:U,helper:R>0?`Basé sur ${Kc(R)} commandes`:"Aucune commande sur la période"}),c.jsx(Ti,{title:"Revenu par client",value:ge(K),icon:c.jsx(ez,{size:24}),comparison:ee,helper:e.clientsPeriode>0?`${Kc(e.clientsPeriode)} clients servis`:"Aucun client sur la période"}),c.jsx(Ti,{title:`Clients (${e.periodLabel})`,value:Kc(e.clientsPeriode),icon:c.jsx(r0,{size:24}),comparison:W,helper:`≈ ${Vc(F)} clients / jour`}),c.jsx(Ti,{title:"Revenu moyen quotidien",value:ge(L),icon:c.jsx(a8,{size:24}),comparison:P,helper:`Total période : ${ge(e.ventesPeriode)}`})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(kf,{title:"Mesas ocupadas",value:e.tablesOccupees,icon:c.jsx(bb,{size:24})}),c.jsx(kf,{title:"Clientes actuales",value:e.clientsActuels,icon:c.jsx(r0,{size:24})}),c.jsx(kf,{title:"En cocina",value:e.commandesEnCuisine,icon:c.jsx(VA,{size:24})}),c.jsx(kf,{title:"Ingredientes bajos",value:e.ingredientsStockBas.length,icon:c.jsx(ca,{size:24,className:e.ingredientsStockBas.length>0?"text-red-500":"text-gray-600"}),onClick:()=>h(!0)})]}),c.jsxs("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("h3",{className:"mb-4 text-lg font-semibold text-slate-900 text-balance",children:["Ventas durante ",e.periodLabel]}),c.jsx($O,{width:"100%",height:300,children:c.jsxs(_te,{data:e.ventesPeriodeSeries,children:[c.jsx($3,{strokeDasharray:"3 3"}),c.jsx(z3,{dataKey:"name"}),c.jsx(U3,{}),c.jsx(PO,{}),c.jsx(mu,{}),c.jsx(V0,{dataKey:"ventes",fill:"#8884d8",name:`${e.periodLabel}`}),c.jsx(V0,{dataKey:"ventesPeriodePrecedente",fill:"#d8d6f5",name:"Periodo anterior"})]})})]}),c.jsxs("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[c.jsxs("h3",{className:"text-lg font-semibold text-slate-900 text-balance",children:["Distribución de ventas (",e.periodLabel,")"]}),c.jsxs("div",{className:"inline-flex rounded-full border border-slate-200 bg-slate-50 p-1 text-sm font-semibold text-slate-600 shadow-inner",children:[c.jsx("button",{onClick:()=>d("category"),className:`rounded-full px-3 py-1 transition ${l==="category"?"bg-slate-900 text-white shadow-lg shadow-slate-900/15":"hover:text-slate-900"}`,children:"Por categoría"}),c.jsx("button",{onClick:()=>d("product"),className:`rounded-full px-3 py-1 transition ${l==="product"?"bg-slate-900 text-white shadow-lg shadow-slate-900/15":"hover:text-slate-900"}`,children:"Por producto"})]})]}),N?c.jsx($O,{width:"100%",height:300,children:c.jsxs(Pte,{children:[c.jsx(E3,{data:S,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:S.map((M,G)=>c.jsx(Gu,{fill:j[G%j.length]},`cell-${G}`))}),c.jsx(PO,{formatter:M=>ge(M)}),c.jsx(mu,{})]})}):c.jsx("div",{style:{height:300},className:"flex items-center justify-center text-slate-500",children:"No hay datos para el periodo seleccionado."})]}),c.jsx(mn,{isOpen:f,onClose:()=>h(!1),title:"Ingredientes con inventario bajo",children:e.ingredientsStockBas.length>0?c.jsx("ul",{className:"space-y-2",children:e.ingredientsStockBas.map(M=>c.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg bg-red-50 p-3 text-sm shadow-sm",children:[c.jsx("span",{className:"min-w-0 flex-1 break-words font-semibold text-red-800",children:M.nom}),c.jsxs("span",{className:"shrink-0 text-base font-bold text-red-600",children:[M.stock_actuel," / ",M.stock_minimum," ",M.unite]})]},M.id))}):c.jsx("p",{className:"text-gray-600 text-center",children:"No hay ingredientes con inventario bajo por el momento."})}),c.jsx(zte,{isOpen:m,onClose:()=>g(!1)})]})},Fte=e=>{const t=Number.isFinite(e)?Math.max(0,e):0,n=Math.floor(t/1e3),r=Math.floor(n/60),i=n%60;return`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},Ew=({startTime:e,className:t="",variant:n="default",accentClassName:r,label:i})=>{const[s,l]=b.useState(Date.now()-e);b.useEffect(()=>{const v=setInterval(()=>{l(Date.now()-e)},1e3);return()=>clearInterval(v)},[e]);const d=Math.floor(s/6e4),f=Fte(s),h=i?`${i.trim()} ${f}`:`Tiempo transcurrido ${f}`,g=[n==="chip"?`inline-flex items-center gap-3 rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow-lg shadow-slate-900/10 ring-1 ring-inset ring-white/30 ${r??"bg-brand-primary"}`:`flex items-center gap-2 px-3 py-1.5 rounded-full text-lg font-bold border-2 border-white ${d>=20?"bg-red-500 text-white shadow-lg":d>=10?"bg-yellow-400 text-black shadow-md":"bg-brand-primary text-brand-secondary shadow-md ring-1 ring-black/5"}`,t].filter(Boolean).join(" ");return c.jsxs("div",{className:g,role:"timer","aria-live":"polite","aria-label":h,title:h,children:[n==="default"&&c.jsx(Tl,{size:20,className:"shrink-0"}),n==="chip"&&i?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-white/70",children:i}),c.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:f})]}):c.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:f})]})},kC={nom:"",capacite:"",couverts:""},Hte=({isOpen:e,onClose:t,mode:n,initialValues:r,onSubmit:i,showCouvertsField:s=!1})=>{const[l,d]=b.useState(kC),[f,h]=b.useState({}),[m,g]=b.useState(null),[v,x]=b.useState(!1),_=b.useMemo(()=>n==="create"?"Ajouter une table":"Modifier la table",[n]);b.useEffect(()=>{if(!e){d(kC),h({}),g(null),x(!1);return}const O={nom:(r==null?void 0:r.nom)??"",capacite:r!=null&&r.capacite?String(r.capacite):"",couverts:s&&(r==null?void 0:r.couverts)!==void 0?String(r.couverts):""};d(O),h({}),g(null)},[r==null?void 0:r.capacite,r==null?void 0:r.couverts,r==null?void 0:r.nom,e,s]);const j=O=>{const{name:C,value:A}=O.target;d(T=>({...T,[C]:A}))},S=()=>{const O={},C=l.nom.trim(),A=l.capacite.trim();C||(O.nom="Le nom est requis.");let T=null;if(!A)O.capacite="La capacité est requise.";else{const k=Number(A);!Number.isInteger(k)||k<=0?O.capacite="La capacité doit être un entier positif.":T=k}if(s){const k=l.couverts.trim();if(!k)O.couverts="Le nombre de couverts est requis.";else{const R=Number(k);!Number.isInteger(R)||R<=0?O.couverts="Les couverts doivent être un entier positif.":T!==null&&R>T&&(O.couverts="Les couverts ne peuvent pas dépasser la capacité.")}}return O},N=async O=>{O.preventDefault(),h({}),g(null);const C=S();if(Object.keys(C).length>0){h(C);return}const A={nom:l.nom.trim(),capacite:Number(l.capacite.trim())};if(s){const T=l.couverts.trim();T&&(A.couverts=Number(T))}x(!0);try{await i(A)}catch(T){const k=T instanceof Error&&T.message?T.message:"Une erreur est survenue. Veuillez réessayer.";g(k)}finally{x(!1)}};return c.jsx(mn,{isOpen:e,onClose:t,title:_,size:"md",children:c.jsxs("form",{onSubmit:N,className:"space-y-5",children:[m&&c.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:m}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-name",className:"block text-sm font-medium text-gray-700",children:"Nom de la table"}),c.jsx("input",{id:"table-name",name:"nom",type:"text",className:"ui-input mt-1",value:l.nom,onChange:j,disabled:v,placeholder:"Ex. Terrasse 1",autoFocus:!0}),f.nom&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.nom})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-capacity",className:"block text-sm font-medium text-gray-700",children:"Capacité (nombre de places)"}),c.jsx("input",{id:"table-capacity",name:"capacite",type:"number",min:1,className:"ui-input mt-1",value:l.capacite,onChange:j,disabled:v,placeholder:"Ex. 4"}),f.capacite&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.capacite})]}),s&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-couverts",className:"block text-sm font-medium text-gray-700",children:"Couverts (actuels)"}),c.jsx("input",{id:"table-couverts",name:"couverts",type:"number",min:1,className:"ui-input mt-1",value:l.couverts,onChange:j,disabled:v,placeholder:"Ex. 2"}),f.couverts&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.couverts})]}),c.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",disabled:v,children:"Annuler"}),c.jsx("button",{type:"submit",className:"w-full ui-btn-primary py-3 disabled:opacity-60",disabled:v,children:v?"Enregistrement...":"Enregistrer"})]})]})})},Pi={libre:{text:"Libre",statusClass:"status--free",Icon:bb},en_cuisine:{text:"En cuisine",statusClass:"status--preparing",Icon:sz},para_entregar:{text:"Para entregar",statusClass:"status--ready",Icon:K8},para_pagar:{text:"Para pagar",statusClass:"status--payment",Icon:Gh}},Kte=e=>{const t=e.trim();if(!t)return e;const n=t.split(/\s+/);if(n.length<2)return t;const[r,...i]=n;let s=0;for(;s<i.length&&i[s].toLowerCase()===r.toLowerCase();)s+=1;return[r,...i.slice(s)].join(" ")},Gte=e=>{switch(e.statut){case"libre":return Pi.libre;case"en_cuisine":return Pi.en_cuisine;case"para_entregar":return Pi.para_entregar;case"para_pagar":return Pi.para_pagar;default:return e.estado_cocina==="servido"||e.estado_cocina==="entregada"?Pi.para_pagar:e.estado_cocina==="listo"?Pi.para_entregar:e.commandeId?Pi.en_cuisine:Pi.libre}},Yte=({table:e,onServe:t,canEdit:n,onEdit:r,onDelete:i,isDeleting:s,onSeatGuests:l})=>{const d=pa(),{text:f,statusClass:h,Icon:m}=Gte(e),[g,v]=b.useState(!1),x=b.useRef(null),_=()=>{if(e.statut==="libre"&&l){l(e);return}e.commandeId?d(`/commande/${e.id}`):n&&r&&r(e)},j=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),_())},S=T=>{T.stopPropagation(),e.commandeId&&t(e.commandeId)},N=T=>{T.stopPropagation(),v(k=>!k)};b.useEffect(()=>{if(!g)return;const T=k=>{x.current&&!x.current.contains(k.target)&&v(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[g]);const O=T=>{T.stopPropagation(),v(!1),r==null||r(e)},C=async T=>{if(T.stopPropagation(),v(!1),!!i)try{await i(e)}catch(k){console.error("Failed to delete table from card:",k)}},A=Kte(e.nom);return c.jsxs("div",{onClick:_,onKeyDown:j,className:`ui-card status-card ${h} relative h-full`,role:"button",tabIndex:0,children:[e.statut==="para_entregar"&&e.readyOrdersCount&&e.readyOrdersCount>0&&c.jsx("div",{className:"absolute left-3 top-3 z-10",children:c.jsx("span",{className:"table-notification-badge",children:e.readyOrdersCount})}),n&&c.jsxs("div",{className:"absolute right-3 top-3",ref:x,children:[c.jsx("button",{type:"button",onClick:N,className:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-60","aria-haspopup":"menu","aria-expanded":g,"aria-label":"Options de la table",disabled:s,children:c.jsx(BA,{size:18})}),g&&c.jsxs("div",{className:"absolute right-0 mt-2 w-44 rounded-md border border-gray-200 bg-white py-1 text-sm shadow-lg",children:[c.jsxs("button",{type:"button",onClick:O,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-gray-700 transition hover:bg-gray-100",children:[c.jsx(x$,{size:16}),"Modifier"]}),c.jsxs("button",{type:"button",onClick:C,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-red-600 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",disabled:s,children:[c.jsx(Vi,{size:16}),s?"Suppression…":"Supprimer"]})]})]}),c.jsxs("div",{className:"status-card__header",children:[c.jsx("h3",{className:"status-card__title",children:A}),e.date_envoi_cuisine&&e.statut!=="libre"&&c.jsx("div",{className:"status-card__timer",children:c.jsx(Ew,{startTime:e.date_envoi_cuisine,className:"w-full justify-center"})})]}),c.jsxs("div",{className:"status-card__body",children:[c.jsx(m,{size:56,className:"status-card__icon"}),c.jsx("p",{className:"status-card__state",children:f})]}),(e.estado_cocina==="listo"||e.statut==="para_entregar")&&c.jsx("div",{className:"status-card__footer",children:c.jsx("button",{type:"button",onClick:S,className:"ui-btn ui-btn-accent status-card__cta",children:"ENTREGADA"})})]})},Vte=()=>{var fe;const{role:e}=ga(),t=((fe=e==null?void 0:e.permissions)==null?void 0:fe["/ventes"])==="editor",n=pa(),[r,i]=b.useState([]),[s,l]=b.useState(!0),[d,f]=b.useState(null),[h,m]=b.useState(null),[g,v]=b.useState(null),[x,_]=b.useState(!1),[j,S]=b.useState("create"),[N,O]=b.useState(null),[C,A]=b.useState(null),[T,k]=b.useState(!1),[R,L]=b.useState(null),[K,B]=b.useState(null),[F,z]=b.useState(null),[Q,H]=b.useState(!1),X=b.useRef(0),I=b.useCallback(async()=>{const de=++X.current;try{const we=await Ne.getTables();de===X.current&&(i(we),f(null))}catch(we){console.error("Failed to fetch tables",we),de===X.current&&f("Impossible de charger le plan de salle. Veuillez réessayer.")}finally{de===X.current&&l(!1)}},[]);b.useEffect(()=>{l(!0),I();const de=setInterval(I,1e4),we=Ne.notifications.subscribe("orders_updated",I);return()=>{clearInterval(de),we()}},[I]);const $=b.useCallback(()=>{_(!1),O(null)},[]),U=b.useCallback(()=>{S("create"),O(null),m(null),v(null),_(!0)},[]),ee=b.useCallback(de=>{S("edit"),O(de),m(null),v(null),_(!0)},[]),W=b.useCallback(de=>{L(de);const we=de.couverts??null;B(typeof we=="number"&&we>=1&&we<=10?we:null),z(null),m(null),v(null),k(!0)},[m,v]),P=b.useCallback(()=>{Q||(k(!1),L(null),B(null),z(null))},[Q]),M=b.useCallback(async de=>{if(R){if(!Number.isInteger(de)||de<=0){z("Veuillez sélectionner un nombre de couverts valide.");return}H(!0),z(null),m(null);try{await Ne.createOrGetOrderByTableId(R.id,{couverts:de}),k(!1),L(null),B(null),await I(),n(`/commande/${R.id}`)}catch(we){console.error("Failed to open table with couverts:",we),m("Impossible d'ouvrir la table. Veuillez réessayer.")}finally{H(!1)}}},[I,n,R]),G=b.useCallback(de=>{Q||(B(de),z(null),M(de))},[M,Q]),ne=b.useCallback(async de=>{m(null),v(null);try{let we="";if(j==="create")await Ne.createTable(de),we="Table créée avec succès.";else{if(!N){const le="Aucune table sélectionnée pour la mise à jour.";throw m(le),new Error(le)}await Ne.updateTable(N.id,de),we="Table mise à jour avec succès."}await I(),$(),v(we)}catch(we){console.error("Failed to save table:",we);const le=j==="create"?"Impossible de créer la table. Veuillez réessayer.":"Impossible de mettre à jour la table. Veuillez réessayer.";throw m(le),new Error(le)}},[I,$,j,N]),se=b.useCallback(async de=>{if(confirm("Supprimer cette table ? Cette action est irréversible.")){m(null),v(null),A(de.id);try{await Ne.deleteTable(de.id),await I(),v("Table supprimée avec succès.")}catch(we){console.error("Failed to delete table:",we),m("Impossible de supprimer la table. Veuillez réessayer.")}finally{A(null)}}},[I]),he=b.useCallback(async de=>{m(null),v(null);const we=r.find(le=>le.commandeId===de);if(we){i(le=>le.map(Ve=>Ve.id===we.id?{...Ve,statut:"para_pagar",estado_cocina:"servido"}:Ve));try{await Ne.markOrderAsServed(de),await I()}catch(le){console.error("Failed to mark order as served:",le),m("Impossible de marquer la commande comme servie. Veuillez réessayer."),await I()}}},[I,r]);if(s)return c.jsx("p",{className:"section-text section-text--muted",children:"Chargement du plan de salle..."});const me=j==="edit"&&N?{nom:N.nom,capacite:N.capacite,couverts:N.couverts}:void 0,$e=j==="edit"&&!!(N!=null&&N.commandeId);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[t&&c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",onClick:U,className:"ui-btn ui-btn-primary flex items-center gap-2",children:[c.jsx(Yh,{size:18}),"Ajouter une table"]})}),d&&c.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:d}),h&&c.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:h}),g&&c.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:g})]}),c.jsx("div",{className:"mt-6 status-grid",children:r.map(de=>c.jsx(Yte,{table:de,onServe:he,canEdit:!!t,onEdit:ee,onDelete:se,isDeleting:C===de.id,onSeatGuests:W},de.id))}),c.jsx(mn,{isOpen:T,onClose:P,title:"CUBIERTOS",size:"sm",children:c.jsxs("div",{className:"space-y-5 text-left",children:[c.jsx("div",{className:"grid grid-cols-5 gap-3",children:Array.from({length:10},(de,we)=>{const le=we+1,Ve=K===le;return c.jsx("button",{type:"button",onClick:()=>G(le),disabled:Q,className:`flex h-12 w-12 items-center justify-center rounded-md border text-lg font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${Ve?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-300 bg-white text-gray-900 hover:border-primary-400 hover:text-primary-600"} ${Q?"cursor-not-allowed opacity-50":""}`,"aria-pressed":Ve,children:le},le)})}),F&&c.jsx("p",{className:"text-sm text-red-600",children:F}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",onClick:P,className:"ui-btn ui-btn-secondary",disabled:Q,children:"Annuler"})})]})}),c.jsx(Hte,{isOpen:x,onClose:$,mode:j,initialValues:me,onSubmit:ne,showCouvertsField:$e})]})},Wte=({isOpen:e,onClose:t,order:n,onFinalize:r})=>{const[i,s]=b.useState("efectivo"),[l,d]=b.useState(null),[f,h]=b.useState(!1),m=async g=>{g.preventDefault(),i&&(h(!0),await r(i,l),h(!1),t())};return c.jsx(mn,{isOpen:e,onClose:t,title:`Finalizar el pedido #${n.id.slice(-4)}`,children:c.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Total a pagar"}),c.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:ge(n.total)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Método de pago"}),c.jsxs("select",{value:i,onChange:g=>s(g.target.value),className:"mt-1 ui-select",children:[c.jsx("option",{value:"efectivo",children:"Efectivo"}),c.jsx("option",{value:"transferencia",children:"Transferencia"}),c.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),i==="transferencia"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprobante (opcional)"}),c.jsxs("label",{htmlFor:"payment-receipt",className:"mt-1 flex w-full cursor-pointer items-center gap-2 rounded-lg border border-gray-300 bg-white p-2 text-gray-500 shadow-sm hover:bg-gray-50",children:[c.jsx(Ou,{size:18}),c.jsx("span",{children:l?l.name:"Selecciona un archivo..."})]}),c.jsx("input",{id:"payment-receipt",type:"file",accept:"image/*,.pdf",onChange:g=>d(g.target.files?g.target.files[0]:null),className:"hidden"})]}),c.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:f?"Finalizando...":"Confirmar pago"})]})]})})},Xte=e=>e??"",Qte=e=>!e||e.length===0?[]:e.slice().sort(),Vf=(e=[])=>{const t=new Map;for(const n of e)t.set(n.id,{quantite:n.quantite,commentaire:Xte(n.commentaire),excludedIngredients:Qte(n.excluded_ingredients)});return{size:e.length,itemsById:t}},TC=(e,t)=>{if(e===t)return!0;if(e.size!==t.size)return!1;for(const[n,r]of e.itemsById){const i=t.itemsById.get(n);if(!i||r.quantite!==i.quantite||r.commentaire!==i.commentaire||r.excludedIngredients.length!==i.excludedIngredients.length)return!1;for(let s=0;s<r.excludedIngredients.length;s+=1)if(r.excludedIngredients[s]!==i.excludedIngredients[s])return!1}return!0},Jte=({filteredProducts:e,quantities:t,onAdd:n,activeCategoryId:r,categories:i,onSelectCategory:s,isProductAvailable:l,handleProductPointerDown:d,handleProductKeyDown:f})=>c.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[c.jsx("div",{className:"border-b bg-white/80 p-4",children:c.jsxs("div",{className:"mt-2 flex items-center gap-2 overflow-x-auto pb-2",children:[c.jsx("button",{onClick:()=>s("all"),className:`shrink-0 rounded-full px-4 py-2 text-sm font-semibold whitespace-nowrap transition ${r==="all"?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),i.map(h=>c.jsx("button",{onClick:()=>s(h.id),className:`shrink-0 rounded-full px-4 py-2 text-sm font-semibold whitespace-nowrap transition ${r===h.id?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:h.nom},h.id))]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(h=>{const m=!l(h),g=t[h.id]||0,v=g>0,x=()=>n(h),_=d(h),j=f(h);return c.jsxs("button",{type:"button",onClick:x,onPointerDown:_,onKeyDown:j,className:`relative flex h-full flex-col items-center justify-between rounded-xl p-3 text-center transition-all focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 focus:ring-offset-gray-900 ${v?"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 text-black shadow-xl shadow-orange-500/30":"border border-gray-200 bg-white text-black hover:shadow-lg"} ${m&&!v?"border-2 border-yellow-500":""}`,children:[g>0&&c.jsx("div",{className:"absolute left-1 top-1 flex h-5 w-5 items-center justify-center rounded-full bg-brand-accent text-xs font-bold text-white",children:g}),m&&c.jsx("div",{className:`absolute right-1 top-1 rounded-full p-1 text-white ${v?"bg-black/30":"bg-yellow-500"}`,title:"Stock bas",children:c.jsx(ca,{size:16})}),c.jsx("img",{src:h.image,alt:h.nom_produit,className:"mb-3 aspect-square w-full max-w-[6rem] rounded-md object-cover"}),c.jsx("p",{className:"text-[clamp(0.9rem,1.8vw,1.05rem)] font-semibold leading-snug text-black text-balance text-center break-words whitespace-normal [hyphens:auto]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:h.nom_produit}),c.jsx("p",{className:"mt-1 w-full flex-1 text-xs text-black text-center leading-snug",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:h.description}),c.jsx("p",{className:"mt-3 font-bold text-black",children:ge(h.prix_vente)})]},h.id)})})})]}),Zte=b.memo(Jte),ene=({categorizedItems:e,order:t,total:n,onQuantityChange:r,onCommentChange:i,onPersistComment:s,onStartEditingComment:l,onSendToKitchen:d,onServeOrder:f,onOpenPayment:h,isSending:m,hasPending:g,orderStatus:v,editingCommentId:x,className:_})=>{var S;const j=e.pending.length+e.sent.length;return c.jsxs("div",{className:`ui-card flex flex-col ${_??""}`,children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx("h2",{className:"text-2xl font-semibold text-brand-secondary",children:"Commande"})}),c.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto p-4",children:j===0?c.jsx("p",{className:"text-gray-500",children:"La commande est vide."}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Articles à envoyer"}),c.jsx("span",{className:"text-sm text-gray-500",children:e.pending.length})]}),e.pending.length===0?c.jsx("p",{className:"text-sm text-gray-500",children:"Aucun article en attente."}):e.pending.map(({item:N,index:O})=>c.jsxs("div",{className:"p-3 rounded-lg bg-yellow-100",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-yellow-500 text-base font-bold text-white shadow-md",children:N.quantite}),c.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:N.nom_produit})]}),c.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:ge(N.quantite*N.prix_unitaire)})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("p",{className:"text-sm text-gray-700",children:[ge(N.prix_unitaire)," /u"]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[c.jsx("button",{onClick:()=>r(O,-1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:c.jsx(_8,{size:20})}),c.jsx("span",{className:"font-bold w-6 text-center",children:N.quantite}),c.jsx("button",{onClick:()=>r(O,1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:c.jsx(xb,{size:20})})]})]}),x===N.id||N.commentaire?c.jsx("input",{type:"text",placeholder:"Ajouter un commentaire...",value:N.commentaire??"",onChange:C=>i(O,C.target.value),onBlur:()=>s(O),autoFocus:x===N.id,className:"mt-2 ui-input text-sm"}):c.jsxs("button",{onClick:()=>l(N.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[c.jsx(GA,{size:12})," Ajouter un commentaire"]})]},N.id))]}),e.sent.length>0&&c.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-6",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Envoyés en cuisine"}),c.jsx("span",{className:"text-sm text-gray-500",children:e.sent.length})]}),e.sent.map(({item:N})=>c.jsxs("div",{className:"p-3 rounded-lg bg-green-100",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-green-600 text-base font-bold text-white shadow-md",children:N.quantite}),c.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:N.nom_produit})]}),c.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:ge(N.quantite*N.prix_unitaire)})]}),c.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[ge(N.prix_unitaire)," /u"]}),N.commentaire&&c.jsxs("p",{className:"mt-2 text-sm italic text-gray-600 pl-2",children:['"',N.commentaire,'"']})]},N.id))]})]})}),c.jsxs("div",{className:"space-y-4 border-t p-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[c.jsx("span",{children:"Sous-total"}),c.jsx("span",{children:ge(t.subtotal??0)})]}),t.total_discount&&t.total_discount>0&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[c.jsx("span",{children:"Réduction totale"}),c.jsxs("span",{children:["- ",ge(t.total_discount)]})]}),t.shipping_cost!==void 0&&t.shipping_cost>0&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[c.jsx("span",{children:"Frais de livraison"}),c.jsx("span",{children:ge(t.shipping_cost)})]}),t.shipping_cost===0&&((S=t.applied_promotions)==null?void 0:S.some(N=>N.type==="FREE_SHIPPING"))&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[c.jsx("span",{children:"Livraison gratuite"}),c.jsx("span",{children:ge(0)})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t pt-2 text-2xl font-semibold text-brand-secondary",children:[c.jsx("span",{children:"Total"}),c.jsx("span",{children:ge(n)})]})]}),v==="listo"&&c.jsxs("button",{onClick:f,className:"w-full ui-btn-info justify-center py-3",children:[c.jsx(f8,{size:20}),c.jsx("span",{children:"Entregada"})]}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("button",{onClick:d,disabled:m||!g,className:"ui-btn-accent flex-1 justify-center py-3 disabled:opacity-60",children:[c.jsx(D$,{size:20}),c.jsx("span",{children:m?"Synchronisation…":"Envoyer en Cuisine"})]}),c.jsxs("button",{onClick:h,disabled:v!=="servido",className:"ui-btn-success flex-1 justify-center py-3 disabled:opacity-60",children:[c.jsx(Gh,{size:20}),c.jsx("span",{children:"Payer"})]})]})]})]})},tne=({isOpen:e,product:t,onClose:n,onSave:r})=>{const[i,s]=b.useState(1),[l,d]=b.useState("");if(b.useEffect(()=>{e&&(s(1),d(""))},[e,t==null?void 0:t.id]),!t)return null;const f=()=>{s(g=>Math.max(1,g-1))},h=()=>{s(g=>g+1)},m=()=>{r({quantity:i,comment:l})};return c.jsx(mn,{isOpen:e,onClose:n,title:t.nom_produit,children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("img",{src:t.image,alt:t.nom_produit,className:"w-full h-48 object-cover rounded-lg"}),t.description&&c.jsx("p",{className:"text-gray-200 text-sm",children:t.description}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Commentaire"}),c.jsx("textarea",{value:l,onChange:g=>d(g.target.value),rows:2,className:"mt-1 block w-full rounded-md border border-gray-600 bg-gray-900/60 py-2 px-3 text-sm text-gray-100 focus:border-brand-primary focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Allergies, instructions spécifiques…"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:f,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Diminuer la quantité",children:c.jsx(c$,{size:18})}),c.jsx("span",{className:"w-8 text-center text-lg font-bold text-gray-100",children:i}),c.jsx("button",{type:"button",onClick:h,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Augmenter la quantité",children:c.jsx(Yh,{size:18})})]}),c.jsxs("button",{type:"button",onClick:m,className:"rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 px-6 font-semibold text-white shadow-md transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Ajouter (",ge(t.prix_vente*i),")"]})]})]})})},$y=e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),aa=e=>JSON.parse(JSON.stringify(e)),PC=(()=>{let e=0;return()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`tmp-${crypto.randomUUID()}`:(e+=1,`tmp-${Date.now()}-${e}`)})(),MC=e=>(e??"").trim(),nne=(e=[],t=[])=>{if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>i===r[s])},rne=(e,t,n,r,i=[])=>{const s=MC(n.comment),l=s.length===0,d=Number.isFinite(n.quantity)?Math.max(1,Math.floor(n.quantity)):1,f=l?e.findIndex(m=>m.produitRef===t.id&&m.estado==="en_attente"&&MC(m.commentaire)===""&&nne(m.excluded_ingredients??[],i)):-1;if(f>-1)return e.map((m,g)=>g===f?{...m,quantite:m.quantite+d}:m);const h={id:r(),produitRef:t.id,nom_produit:t.nom_produit,prix_unitaire:t.prix_vente,quantite:d,excluded_ingredients:[...i],commentaire:s,estado:"en_attente"};return[...e,h]},RC=Vf([]),ane=()=>{const{tableId:e}=y4(),t=pa(),[n,r]=b.useState(null),[i,s]=b.useState(null),[l,d]=b.useState([]),[f,h]=b.useState([]),[m,g]=b.useState([]),[v,x]=b.useState("all"),[_,j]=b.useState(!0),[S,N]=b.useState(!1),[O,C]=b.useState(!1),[A,T]=b.useState(null),[k,R]=b.useState(!1),[L,K]=b.useState(null),B=b.useRef(n),F=b.useRef(i),z=b.useRef(null),Q=b.useRef(null),H=b.useRef(null),X=b.useRef(Promise.resolve()),I=b.useRef(null),$=b.useRef(null),U=b.useCallback((pe,xe,ie)=>{if(!xe||xe.length===0)return pe.current=null,RC;const Se=ie??Vf(xe);return pe.current={source:xe,snapshot:Se},Se},[]),ee=b.useCallback((pe,xe)=>{if(!pe||pe.length===0)return xe.current=null,RC;const ie=xe.current;return ie&&ie.source===pe?ie.snapshot:U(xe,pe)},[U]);b.useEffect(()=>{B.current=n},[n]),b.useEffect(()=>{F.current=i},[i]);const W=b.useCallback(pe=>{const xe=B.current;if(!xe)return!0;const ie=pe??F.current;if(!ie)return!0;const Se=ee(xe.items,I),Re=pe?Vf(ie.items):ee(ie.items,$);return TC(Re,Se)},[ee]),P=b.useCallback(()=>{const pe=Q.current;if(!pe)return;const xe=Vf(pe.items);z.current=aa(pe);const ie=B.current;if(ie){const Re=ee(ie.items,I);if(TC(Re,xe)){Q.current=null;return}}Q.current=null,B.current=pe,r(pe),U(I,pe.items,xe);const Se=aa(pe);F.current=Se,s(Se),U($,Se.items)},[ee,U]),M=b.useCallback(async(pe=!1)=>{if(e)try{if(pe||j(!0),pe){const Ae=await Ne.createOrGetOrderByTableId(e),Ge=aa(Ae);if(z.current=Ge,W()){Q.current=null,r(Ae),B.current=Ae,U(I,Ae.items);const ht=aa(Ae);F.current=ht,s(ht),U($,ht.items)}else{const ht=F.current;ht&&JSON.stringify(ht)===JSON.stringify(Ae)?Q.current=null:Q.current=Ge}return}const[xe,ie,Se,Re]=await Promise.all([Ne.createOrGetOrderByTableId(e),Ne.getProducts(),Ne.getCategories(),Ne.getIngredients()]);z.current=aa(xe),r(xe),B.current=xe,U(I,xe.items);const De=aa(xe);s(De),F.current=De,U($,De.items),d(ie),h(Se),g(Re),Q.current=null}catch(xe){console.error("Failed to load order data",xe),t("/ventes")}finally{pe||j(!1)}},[W,t,e,U]);b.useEffect(()=>{M()},[M]),b.useEffect(()=>{W()&&P()},[P,W,n,i]),b.useEffect(()=>{const pe=Ne.notifications.subscribe("orders_updated",()=>M(!0));return()=>pe()},[M]);const G=b.useMemo(()=>!W(),[W,n,i]),ne=b.useMemo(()=>n?n.items.reduce((pe,xe)=>(xe.estado!=="en_attente"||(pe[xe.produitRef]=(pe[xe.produitRef]||0)+xe.quantite),pe),{}):{},[n]),se=b.useMemo(()=>v==="all"?l:l.filter(pe=>pe.categoria_id===v),[v,l]),he=b.useCallback(pe=>{if(!pe.recipe||pe.recipe.length===0)return!0;for(const xe of pe.recipe){const ie=m.find(Se=>Se.id===xe.ingredient_id);if(!ie||ie.stock_actuel<=ie.stock_minimum)return!1}return!0},[m]);b.useEffect(()=>()=>{H.current!==null&&(window.clearTimeout(H.current),H.current=null)},[]);const me=b.useCallback(async(pe,xe)=>{const ie=B.current;if(!ie)return;const Se=ht=>typeof pe=="function"?pe(ht):pe,De=(xe!=null&&xe.isLocalUpdate?ie.items:(xe==null?void 0:xe.removalSourceItems)??ie.items).map(ht=>({...ht})),Ae=Se(De),Ge={...ie,items:Ae,total:Ae.reduce((ht,mr)=>ht+mr.quantite*mr.prix_unitaire,0)};if(r(Ge),B.current=Ge,U(I,Ge.items),xe!=null&&xe.isLocalUpdate)return;const tt=async()=>{try{let ht=Q.current??z.current??null;if(!ht){const Oe=await Ne.getOrderById(ie.id);Oe?(ht=Oe,z.current=aa(Oe)):ht=ie}if(!ht)return;const mr=B.current.items.map(Oe=>({...Oe})),$r=((xe==null?void 0:xe.removalSourceItems)??ie.items).filter(Oe=>$y(Oe.id)&&!mr.some(nt=>nt.id===Oe.id)).map(Oe=>Oe.id),ln=await Ne.updateOrder(ie.id,{items:mr,removedItemIds:$r},{includeNotifications:!1});r(ln),B.current=ln,U(I,ln.items);const En=aa(ln);s(En),F.current=En,U($,En.items),z.current=aa(ln),Ne.getIngredients().then(g).catch(Oe=>{console.error("Failed to refresh ingredients",Oe)}),P()}catch(ht){console.error("Failed to update order:",ht),alert("Une erreur est survenue lors de la mise à jour de la commande."),M(!0)}};X.current=X.current.then(tt,tt),await X.current},[P,M,U]),$e=b.useCallback((pe=300)=>{H.current!==null&&window.clearTimeout(H.current);const xe=pe>0?pe:1;H.current=window.setTimeout(async()=>{if(H.current=null,!B.current)return;const ie=B.current.items.map(Re=>({...Re})),Se=z.current?z.current.items.map(Re=>({...Re})):ie.map(Re=>({...Re}));await me(ie,{removalSourceItems:Se})},xe)},[me]),fe=b.useCallback(pe=>{B.current&&(me(pe,{isLocalUpdate:!0}),$e())},[$e,me]),de=b.useCallback(pe=>{K(pe)},[]),we=b.useCallback(()=>{K(null)},[]),le=b.useCallback(pe=>{L&&(fe(xe=>rne(xe,L,pe,PC)),K(null))},[fe,L]),Ve=b.useCallback((pe,xe)=>{const ie=B.current;if(!ie||!ie.items[pe])return;const Se=ie.items[pe].id;fe(Re=>{const De=Re.findIndex(Ge=>Ge.id===Se);if(De===-1)return Re;const Ae=Re[De].quantite+xe;return Ae<=0?Re.filter(Ge=>Ge.id!==Se):Re.map(Ge=>Ge.id===Se?{...Ge,quantite:Ae}:Ge)})},[fe]),be=b.useCallback((pe,xe)=>{const ie=B.current;if(!ie||!ie.items[pe])return;const Se=ie.items[pe].id;me(Re=>{const De=Re.findIndex(tt=>tt.id===Se);if(De===-1)return Re;const Ae=Re.map(tt=>({...tt})),Ge=Ae[De];if(Ge.quantite>1&&!Ge.commentaire&&xe){Ge.quantite-=1;const tt={...Ge,id:PC(),quantite:1,commentaire:xe};Ae.push(tt),T(tt.id)}else Ge.commentaire=xe;return Ae},{isLocalUpdate:!0})},[me]),rt=b.useCallback(pe=>{B.current&&(me(B.current.items.map(xe=>({...xe}))),T(null))},[me]),ve=b.useCallback(async()=>{if(B.current){R(!0);try{let pe=B.current;for(;pe&&pe.items.some(Ae=>Ae.estado==="en_attente"&&!$y(Ae.id));)await me(pe.items.map(Ae=>({...Ae}))),pe=B.current;if(pe=B.current,!pe)return;const xe=pe.items.filter(Ae=>Ae.estado==="en_attente");if(xe.length===0)return;if(xe.filter(Ae=>!$y(Ae.id)).length>0){console.warn("Des articles non persistés subsistent après synchronisation, envoi annulé.");return}const Se=xe.map(Ae=>Ae.id),Re=await Ne.sendOrderToKitchen(pe.id,Se);r(Re),B.current=Re,U(I,Re.items);const De=aa(Re);s(De),F.current=De,U($,De.items),t("/ventes")}catch(pe){console.error("Failed to send order to kitchen",pe),alert("Erreur lors de l'envoi en cuisine.")}finally{R(!1)}}},[t,me,U]),je=b.useCallback(async()=>{if(n)try{const pe=await Ne.markOrderAsServed(n.id);r(pe),B.current=pe,U(I,pe.items)}catch(pe){console.error("Failed to mark order as served",pe)}},[n,U]),ze=async(pe,xe)=>{if(n)try{let ie=n.payment_receipt_url??void 0;if(xe&&xe instanceof File)try{ie=await MA(xe,{orderId:n.id})}catch(Se){console.error("Failed to upload receipt",Se)}await Ne.finalizeOrder(n.id,pe,ie),t("/ventes")}catch(ie){console.error("Failed to finalize order",ie),alert("Erreur lors de la finalisation de la commande. Veuillez réessayer.")}},At=()=>{if(n&&n.estado_cocina==="no_enviado"&&n.items.length>0){C(!0);return}G?C(!0):t("/ventes")},yt=async()=>{try{n&&n.estado_cocina==="no_enviado"?await Ne.cancelUnsentTableOrder(n.id):i&&!W(i)&&await me(i.items)}catch(pe){console.error("Failed to cancel unsent order before exiting",pe)}finally{C(!1),t("/ventes")}},bt=(n==null?void 0:n.items)??[],_t=b.useMemo(()=>bt.reduce((pe,xe,ie)=>(xe.estado==="en_attente"?pe.pending.push({item:xe,index:ie}):pe.sent.push({item:xe,index:ie}),pe),{pending:[],sent:[]}),[bt]),Dn=b.useCallback(pe=>xe=>{xe.preventDefault(),xe.currentTarget.focus()},[]),Nt=b.useCallback(pe=>xe=>{(xe.key==="Enter"||xe.key===" ")&&(xe.preventDefault(),de(pe))},[de]),Wn=b.useCallback(()=>{N(!0)},[]),In=b.useCallback(pe=>{T(pe)},[]),Lr=b.useMemo(()=>_t.pending.length>0,[_t]);return _?c.jsx("div",{className:"text-center p-10 text-gray-800",children:"Chargement de la commande..."}):n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[minmax(0,2.15fr)_minmax(0,0.85fr)] lg:items-start lg:min-h-[calc(100vh-10rem)]",children:[c.jsxs("div",{className:"ui-card flex h-full flex-col overflow-hidden",children:[c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsxs("button",{onClick:At,className:"ui-btn-dark",title:"Retour au plan de salle",children:[c.jsx($A,{size:20}),c.jsx("span",{children:"Retour plan de salle"})]}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900",children:["Table ",n.table_nom]})]})}),c.jsx(Zte,{filteredProducts:se,quantities:ne,onAdd:de,activeCategoryId:v,categories:f,onSelectCategory:x,isProductAvailable:he,handleProductPointerDown:Dn,handleProductKeyDown:Nt})]}),c.jsx("div",{className:"flex flex-col lg:h-full",children:c.jsx("div",{className:"lg:sticky lg:top-24",children:c.jsx(ene,{className:"mt-6 lg:mt-0 lg:h-full lg:max-w-[420px] lg:mx-auto",categorizedItems:_t,order:n,total:n.total,onQuantityChange:Ve,onCommentChange:be,onPersistComment:rt,onStartEditingComment:In,onSendToKitchen:ve,onServeOrder:je,onOpenPayment:Wn,isSending:k,hasPending:Lr,orderStatus:n.estado_cocina,editingCommentId:A})})})]}),c.jsx(tne,{isOpen:L!==null,product:L,onClose:we,onSave:le}),c.jsx(Wte,{isOpen:S,onClose:()=>N(!1),order:n,onFinalize:ze}),c.jsxs(mn,{isOpen:O,onClose:()=>C(!1),title:"Quitter sans envoyer ?",children:[c.jsx("p",{className:"text-gray-700",children:"Vous avez des articles non envoyés en cuisine. Si vous quittez, ils seront annulés. Voulez-vous continuer ?"}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:()=>C(!1),className:"ui-btn-secondary",children:"Non, rester"}),c.jsx("button",{onClick:yt,className:"ui-btn-danger",children:"Oui, quitter"})]})]})]}):c.jsx("div",{className:"text-center p-10 text-red-500",children:"Commande non trouvée."})},ine={critical:{border:"border-4 border-solid border-red-500",accent:"bg-red-500 urgency-accent-critical",badge:"bg-red-100 text-red-700 ring-1 ring-inset ring-red-300 urgency-badge-critical",icon:"text-red-500 urgency-icon-critical",background:"bg-red-100"},warning:{border:"border-[3px] border-solid border-yellow-400",accent:"bg-yellow-400 urgency-accent-warning",badge:"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-300 urgency-badge-warning",icon:"text-yellow-500 urgency-icon-warning",background:"bg-yellow-100"},normal:{border:"border-2 border-solid border-brand-accent",accent:"bg-brand-accent urgency-accent-normal",badge:"bg-blue-100 text-blue-700 ring-1 ring-inset ring-blue-200 urgency-badge-normal",icon:"text-brand-accent urgency-icon-normal",background:"bg-blue-100"}},sne=e=>{if(!e)return"normal";const t=(Date.now()-e)/6e4;return t>=20?"critical":t>=10?"warning":"normal"},tR=e=>{const t=sne(e),n=ine[t];return{level:t,border:n.border,accent:n.accent,badge:n.badge,icon:n.icon,background:n.background}},one=e=>{const t=e.trim().length;return t<=10?"text-[clamp(1.35rem,3vw,1.75rem)]":t<=16?"text-[clamp(1.25rem,2.9vw,1.6rem)]":t<=24?"text-[clamp(1.15rem,2.7vw,1.45rem)]":"text-[clamp(1.05rem,2.5vw,1.3rem)]"},lne=({order:e,onReady:t,canMarkReady:n})=>{const r=tR(e.date_envoi_cuisine||Date.now()),i=b.useMemo(()=>{const m=[],g=new Map;return e.items.forEach(v=>{var N;const x=(N=v.commentaire)==null?void 0:N.trim(),_=x||"no_comment",j=`${v.produitRef}::${_}`;if(x){m.push({key:`${j}::${v.id}`,nom_produit:v.nom_produit,quantite:v.quantite,commentaire:x});return}const S=g.get(j);if(S!==void 0){m[S].quantite+=v.quantite;return}g.set(j,m.length),m.push({key:j,nom_produit:v.nom_produit,quantite:v.quantite})}),m},[e.items]),s=b.useMemo(()=>e.items.reduce((m,g)=>m+g.quantite,0),[e.items]),d=new Date(e.date_envoi_cuisine||Date.now()).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),f=e.table_nom||`Para llevar #${e.id.slice(-4)}`,h=one(f);return c.jsxs("div",{className:`flex h-full flex-col overflow-hidden rounded-xl text-gray-900 shadow-lg transition-shadow duration-300 hover:shadow-xl ${r.border} ${r.background}`,children:[c.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[c.jsx("h3",{className:`font-semibold leading-tight text-gray-900 ${h}`,children:c.jsx("span",{className:"block max-w-full break-words text-balance",children:f})}),c.jsxs("p",{className:"text-[0.65rem] font-medium uppercase tracking-[0.2em] text-gray-500 sm:text-xs",children:["pedido a las ",d]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600 sm:justify-between",children:[c.jsx(Ew,{startTime:e.date_envoi_cuisine||Date.now(),variant:"chip",accentClassName:r.accent}),c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow ${r.accent}`,children:[c.jsx("span",{className:"text-white/70",children:"ITEMS"}),c.jsx("span",{className:"text-lg tracking-normal",children:s})]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:c.jsx("ul",{className:"space-y-2 pb-4",children:i.map(m=>c.jsxs("li",{className:"rounded-lg border border-gray-200 bg-gray-50 px-3 py-3 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-full text-xl font-bold text-white shadow-md ${r.accent}`,children:m.quantite}),c.jsx("p",{className:"text-[clamp(1rem,2.1vw,1.35rem)] font-semibold leading-snug text-gray-900 break-words text-balance whitespace-normal [hyphens:auto]",children:m.nom_produit})]}),m.commentaire&&c.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800",children:m.commentaire})]},m.key))})}),n&&c.jsx("div",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:c.jsxs("button",{onClick:()=>t(e.id,e.date_envoi_cuisine),className:"group inline-flex w-full items-center justify-center gap-3 rounded-lg border-2 border-transparent bg-black px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-sm transition hover:bg-neutral-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/70 focus-visible:ring-offset-2",children:[c.jsx(zA,{size:20,className:"shrink-0"}),c.jsx("span",{children:"LISTO"})]})})]})},cne=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0),{role:i}=ga(),s=(i==null?void 0:i.permissions["/cocina"])==="editor",l=b.useCallback(async()=>{try{const f=await Ne.getKitchenOrders();t(f)}catch(f){console.error("Failed to fetch kitchen orders",f)}finally{r(!1)}},[]);b.useEffect(()=>{l();const f=setInterval(l,5e3),h=Ne.notifications.subscribe("orders_updated",l);return()=>{clearInterval(f),h()}},[l]);const d=async(f,h)=>{try{await Ne.markOrderAsReady(f,h),l()}catch(m){console.error("Failed to mark order as ready",m)}};return n?c.jsx("div",{className:"text-gray-700",children:"Cargando pedidos de cocina..."}):c.jsx("div",{className:"flex h-full flex-col",children:e.length===0?c.jsx("div",{className:"mt-6 flex flex-1 items-center justify-center text-2xl text-gray-500",children:"No hay pedidos en preparación."}):c.jsx("div",{className:"mt-6 grid flex-1 grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(f=>c.jsx(lne,{order:f,onReady:d,canMarkReady:s},f.ticketKey))})})},DC=({order:e,onValidate:t,onDeliver:n,isProcessing:r})=>{var g;const[i,s]=b.useState(!1),l=e.table_nom||`Pedido #${e.id.slice(-6)}`,d=e.date_envoi_cuisine||e.date_creation,f=tR(d),h=(((g=e.applied_promotions)==null?void 0:g.length)??0)>0,m=h;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${f.border} ${f.background}`,children:[c.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${f.accent}`}),c.jsx("header",{className:"border-b border-gray-200 px-5 py-3",children:c.jsxs("div",{className:"grid gap-1.5 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[c.jsxs("div",{className:"min-w-0 space-y-0.5",children:[c.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:l}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(d).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),c.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:c.jsx(Ew,{startTime:d,variant:"chip",label:"Tiempo",accentClassName:f.accent,className:"!px-3 !py-1"})})]})}),c.jsx("div",{className:"flex-1 overflow-hidden px-5 py-3",children:c.jsxs("div",{className:"flex h-full flex-col gap-1",children:[e.clientInfo&&c.jsxs("section",{className:"space-y-1 rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm text-gray-900 shadow-sm",children:[e.clientInfo.nom&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[c.jsx(Zc,{size:16,className:f.icon}),c.jsx("span",{className:"font-medium",children:e.clientInfo.nom})]}),e.clientInfo.telephone&&c.jsxs("div",{className:"ml-6 flex items-center gap-2 text-xs text-gray-600",children:[c.jsx(qf,{size:14,className:"text-gray-500"}),c.jsx("span",{children:e.clientInfo.telephone})]})]}),e.clientInfo.adresse&&c.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[c.jsx(ul,{size:16,className:`mt-0.5 text-gray-500 ${f.icon}`}),c.jsx("span",{className:"text-sm text-gray-700",children:e.clientInfo.adresse})]})]}),c.jsxs("section",{className:"flex min-h-[10rem] flex-col gap-1 overflow-hidden",children:[c.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:e.items.length>0?c.jsx("ul",{className:"space-y-1",children:e.items.map(v=>{var _;const x=(_=v.commentaire)==null?void 0:_.trim();return c.jsxs("li",{className:"rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-900 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:`flex h-9 w-9 shrink-0 items-center justify-center rounded-full text-base font-bold text-white shadow-md ${f.accent}`,children:v.quantite}),c.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(0.95rem,1.9vw,1.15rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:v.nom_produit})]}),c.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-gray-900 sm:text-base",children:ge(v.prix_unitaire*v.quantite)})]}),x&&c.jsx("p",{className:"mt-1 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800",children:x})]},v.id)})}):c.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]}),m&&c.jsx("section",{className:"space-y-1 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900 shadow-sm",children:h&&c.jsx("ul",{className:"space-y-1","aria-label":"Promotions",children:e.applied_promotions.map(v=>{const x=typeof v.config=="object"&&v.config!==null?v.config.promo_code:void 0;return c.jsxs("li",{className:"rounded-md border border-emerald-200 bg-white/70 px-3 py-2 text-emerald-900 shadow-sm",children:[c.jsxs("p",{className:"font-medium leading-tight",children:[v.name,x?` (Code: ${x})`:""]}),c.jsxs("p",{className:"mt-1 text-sm font-semibold text-emerald-700",children:["-",ge(v.discount_amount||0)]})]},`${v.promotion_id}-${v.name}`)})})}),c.jsxs("div",{className:"mt-auto flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 font-semibold text-gray-900 shadow-sm",children:[c.jsx("span",{children:"Total"}),c.jsx("span",{className:"text-lg sm:text-xl text-gray-900",children:ge(e.total)})]})]})}),c.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:(t||n)&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:()=>s(!0),className:"w-full ui-btn ui-btn-secondary",type:"button",children:[c.jsx(n0,{size:16,className:f.icon})," ",e.receipt_url?"Ver comprobante":"Comprobante no disponible"]}),t&&e.statut==="pendiente_validacion"&&c.jsx("button",{onClick:()=>t(e.id),disabled:r,className:"w-full ui-btn ui-btn-info uppercase",type:"button",children:r?"Validando...":"Validar"}),n&&e.estado_cocina==="listo"&&c.jsx("button",{onClick:()=>n(e.id),disabled:r,className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:r?"Procesando...":"Entregar"})]})})]}),c.jsx(mn,{isOpen:i,onClose:()=>s(!1),title:"Comprobante de pago",children:e.receipt_url?c.jsx("img",{src:e.receipt_url,alt:"Comprobante",className:"w-full h-auto rounded-md"}):c.jsx("p",{children:"No se proporcionó comprobante."})})]})},une=()=>{const[e,t]=b.useState([]),[n,r]=b.useState([]),[i,s]=b.useState(!0),[l,d]=b.useState(null),{content:f,loading:h,updateContent:m}=Au(),[g,v]=b.useState(!1),[x,_]=b.useState(null),j=b.useCallback(async()=>{try{const{pending:k,ready:R}=await Ne.getTakeawayOrders();t(k.sort((L,K)=>L.date_creation-K.date_creation)),r(R.sort((L,K)=>(L.date_listo_cuisine||0)-(K.date_listo_cuisine||0)))}catch(k){console.error("Failed to fetch takeaway orders",k)}finally{s(!1)}},[]);b.useEffect(()=>{s(!0),j();const k=setInterval(j,1e4),R=Ne.notifications.subscribe("orders_updated",j);return()=>{clearInterval(k),R()}},[j]);const S=async k=>{if(!l){d(k);try{await Ne.validateTakeawayOrder(k),await j()}catch(R){console.error("Failed to validate order:",R),alert(`No se pudo validar el pedido: ${R.message}`)}finally{d(null)}}},N=async k=>{if(!l){d(k);try{await Ne.markTakeawayAsDelivered(k),await j()}catch(R){console.error("Failed to mark order as delivered:",R),alert("Ocurrió un error al finalizar el pedido.")}finally{d(null)}}},O=b.useCallback(async()=>{if(g)return;if(!f){alert("El contenido del sitio aún no está disponible. Intenta de nuevo en unos segundos.");return}const k=!f.ordering.onlineEnabled;v(!0),_(null);try{await m({...f,ordering:{...f.ordering,onlineEnabled:k}}),_(k?"Pedidos en línea activados":"Pedidos en línea desactivados")}catch(R){console.error("Failed to toggle online ordering availability",R),_("No se pudo actualizar la disponibilidad. Intenta nuevamente.")}finally{v(!1)}},[g,f,m]),A=(f??uu).ordering,T=h||g||!f;return i?c.jsx("div",{className:"text-gray-700",children:"Cargando pedidos para llevar..."}):c.jsxs("div",{className:"space-y-5",children:[c.jsx("div",{className:"rounded-2xl border border-dashed border-blue-200/70 bg-gradient-to-br from-blue-50/60 via-white/85 to-blue-100/60 p-5 shadow-sm backdrop-blur",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{className:"min-w-0 space-y-2 text-slate-800",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-blue-500",children:"Disponibilidad pedidos en línea"}),c.jsx("p",{className:"text-lg font-bold text-slate-900",children:A.onlineEnabled?"Pedir en línea activo":"Pedir en línea inactivo"}),c.jsx("p",{className:"text-sm text-slate-600 break-words",children:A.activeHoursLabel}),!A.onlineEnabled&&c.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Activa esta opción para volver a recibir pedidos digitales."}),h&&!f&&c.jsx("p",{className:"text-xs font-medium uppercase tracking-[0.22em] text-slate-500",children:"Cargando configuración..."}),x&&c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-blue-600",children:x})]}),c.jsxs("button",{type:"button",onClick:O,disabled:T,className:`inline-flex items-center justify-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${A.onlineEnabled?"bg-emerald-500 text-white hover:bg-emerald-400 focus-visible:outline-emerald-600":"bg-slate-900 text-white hover:bg-slate-800 focus-visible:outline-slate-900"} ${T?"cursor-not-allowed opacity-60":""}`,role:"switch","aria-checked":A.onlineEnabled,children:[c.jsx(O$,{className:"h-4 w-4"}),g?"Actualizando...":A.onlineEnabled?"Desactivar pedidos en línea":"Activar pedidos en línea"]})]})}),c.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[c.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-blue-700",children:["Pendientes de validación (",e.length,")"]}),c.jsx("div",{className:"space-y-1.5",children:e.length>0?e.map(k=>c.jsx(DC,{order:k,onValidate:S,isProcessing:l===k.id},k.id)):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos para validar."})})]}),c.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[c.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-700",children:["Pedidos listos (",n.length,")"]}),c.jsx("div",{className:"space-y-1.5",children:n.length>0?n.map(k=>c.jsx(DC,{order:k,onDeliver:N,isProcessing:l===k.id},k.id)):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos listos."})})]})]})]})},dne=()=>{const{role:e}=ga(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,l]=b.useState(null),[d,f]=b.useState(""),[h,m]=b.useState(!1),[g,v]=b.useState(!1),[x,_]=b.useState(!1),[j,S]=b.useState(null),[N,O]=b.useState("add"),C=(e==null?void 0:e.permissions["/ingredients"])==="editor",A=b.useCallback(async()=>{try{const R=await Ne.getIngredients();n(R),l(null)}catch(R){l("Impossible de charger les ingrédients."),console.error(R)}finally{i(!1)}},[]);b.useEffect(()=>{i(!0),A()},[A]);const T=b.useMemo(()=>t.filter(R=>R.nom.toLowerCase().includes(d.toLowerCase())),[t,d]),k=(R,L=null)=>{S(L),R==="add"||R==="edit"?(O(R),m(!0)):R==="resupply"?v(!0):R==="delete"&&_(!0)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsxs("div",{className:"relative w-full md:w-80",children:[c.jsx(wb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),c.jsx("input",{type:"text",placeholder:"Rechercher un ingrédient...",value:d,onChange:R=>f(R.target.value),className:"ui-input pl-10 sm:w-64"})]}),C&&c.jsxs("button",{onClick:()=>k("add"),className:"w-full md:w-auto ui-btn-primary",children:[c.jsx(xb,{size:20}),"Ajouter un ingrédient"]})]}),r?c.jsx("p",{className:"text-gray-800",children:"Chargement..."}):s?c.jsx("p",{className:"text-red-500",children:s}):c.jsx("div",{className:"ui-card p-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Actuel"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Minimum"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire moyen"}),C&&c.jsx("th",{className:"p-3 text-right text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:T.map(R=>{const L=R.stock_actuel<=R.stock_minimum;return c.jsxs("tr",{className:`border-b hover:bg-gray-50 ${L?"bg-red-50":""}`,children:[c.jsx("td",{className:`p-3 font-semibold ${L?"text-red-900":"text-gray-900"}`,children:R.nom}),c.jsxs("td",{className:`p-3 font-bold ${L?"text-red-700":"text-gray-800"}`,children:[R.stock_actuel," ",R.unite]}),c.jsxs("td",{className:`p-3 ${L?"text-red-800":"text-gray-700"}`,children:[R.stock_minimum," ",R.unite]}),c.jsx("td",{className:`p-3 ${L?"text-red-800":"text-gray-700"}`,children:ge(R.prix_unitaire)}),C&&c.jsx("td",{className:"p-3 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>k("resupply",R),title:"Réapprovisionner",className:"p-2 text-green-600 hover:bg-green-100 rounded-full",children:c.jsx(h$,{size:20})}),c.jsx("button",{onClick:()=>k("edit",R),title:"Modifier",className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:c.jsx(WA,{size:20})}),c.jsx("button",{onClick:()=>k("delete",R),title:"Supprimer",className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:c.jsx(Vi,{size:20})})]})})]},R.id)})})]})}),h&&C&&c.jsx(fne,{isOpen:h,onClose:()=>m(!1),onSuccess:A,ingredient:j,mode:N}),g&&C&&j&&c.jsx(hne,{isOpen:g,onClose:()=>v(!1),onSuccess:A,ingredient:j}),x&&C&&j&&c.jsx(mne,{isOpen:x,onClose:()=>_(!1),onSuccess:A,ingredient:j})]})},fne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r,mode:i})=>{const[s,l]=b.useState({nom:(r==null?void 0:r.nom)||"",unite:(r==null?void 0:r.unite)||"g",stock_minimum:(r==null?void 0:r.stock_minimum)||0}),[d,f]=b.useState(!1),h=async m=>{m.preventDefault(),f(!0);try{i==="edit"&&r?await Ne.updateIngredient(r.id,s):await Ne.createIngredient(s),n(),t()}catch(g){console.error("Failed to save ingredient",g)}finally{f(!1)}};return c.jsx(mn,{isOpen:e,onClose:t,title:i==="add"?"Ajouter un Ingrédient":"Modifier l'Ingrédient",children:c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),c.jsx("input",{type:"text",id:"nom",value:s.nom,onChange:m=>l({...s,nom:m.target.value}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"unite",className:"block text-sm font-medium text-gray-700",children:"Unité"}),c.jsxs("select",{id:"unite",value:s.unite,onChange:m=>l({...s,unite:m.target.value}),required:!0,className:"mt-1 ui-select",children:[c.jsx("option",{value:"g",children:"Grammes (g)"}),c.jsx("option",{value:"kg",children:"Kilogrammes (kg)"}),c.jsx("option",{value:"ml",children:"Millilitres (ml)"}),c.jsx("option",{value:"L",children:"Litres (L)"}),c.jsx("option",{value:"unite",children:"Unité"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"stock_minimum",className:"block text-sm font-medium text-gray-700",children:"Stock Minimum"}),c.jsx("input",{type:"number",id:"stock_minimum",min:"0",value:s.stock_minimum,onChange:m=>l({...s,stock_minimum:parseFloat(m.target.value)}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:d,className:"w-full ui-btn-primary py-3 disabled:opacity-60",children:d?"Sauvegarde...":"Sauvegarder"})]})]})})},hne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r})=>{const[i,s]=b.useState(0),[l,d]=b.useState(0),[f,h]=b.useState(!1),m=async g=>{if(g.preventDefault(),!(i<=0||l<0)){h(!0);try{await Ne.resupplyIngredient(r.id,i,l),n(),t()}catch(v){console.error("Failed to resupply ingredient",v)}finally{h(!1)}}};return c.jsx(mn,{isOpen:e,onClose:t,title:`Réapprovisionner: ${r.nom}`,children:c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantité Achetée (",r.unite,")"]}),c.jsx("input",{type:"number",id:"quantity",min:"0.01",step:"0.01",value:i,onChange:g=>s(parseFloat(g.target.value)),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-700",children:["Prix par unité (",r.unite,")"]}),c.jsx("input",{type:"number",id:"unitPrice",min:"0",step:"0.01",value:l,onChange:g=>d(parseFloat(g.target.value)),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:f,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:f?"Ajout...":"Ajouter au Stock"})]})]})})},mne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r})=>{const[i,s]=b.useState(!1),[l,d]=b.useState(null),f=async()=>{s(!0),d(null);try{await Ne.deleteIngredient(r.id),n(),t()}catch(h){console.error("Failed to delete ingredient",h),d("Impossible de supprimer cet ingrédient car il est utilisé dans au moins une recette.")}finally{s(!1)}};return c.jsxs(mn,{isOpen:e,onClose:t,title:"Confirmer la Suppression",children:[c.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer l'ingrédient ",c.jsx("strong",{className:"text-gray-900",children:r.nom})," ? Cette action est irréversible."]}),l&&c.jsx("p",{className:"mt-4 text-sm text-red-600",children:l}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{onClick:f,disabled:i,className:"w-full ui-btn-danger py-3 disabled:opacity-60",children:i?"Suppression...":"Supprimer"})]})]})},IC=[1,2,3,4,5,6],LC=e=>{switch(e){case"disponible":return{text:"Disponible",color:"bg-green-100 text-green-800",Icon:Ms};case"agotado_temporal":return{text:"Rupture (Temp.)",color:"bg-yellow-100 text-yellow-800",Icon:Tl};case"agotado_indefinido":return{text:"Indisponible",color:"bg-red-100 text-red-800",Icon:O8};default:return{text:"Inconnu",color:"bg-gray-100 text-gray-800",Icon:N8}}},pne=()=>{const{role:e}=ga(),[t,n]=b.useState([]),[r,i]=b.useState([]),[s,l]=b.useState([]),[d,f]=b.useState(!0),[h,m]=b.useState(null),[g,v]=b.useState(""),[x,_]=b.useState("all"),[j,S]=b.useState(!1),[N,O]=b.useState(!1),[C,A]=b.useState(!1),[T,k]=b.useState(null),[R,L]=b.useState("add"),K=(e==null?void 0:e.permissions["/produits"])==="editor",B=b.useCallback(async()=>{try{f(!0);const[X,I,$]=await Promise.all([Ne.getProducts(),Ne.getCategories(),Ne.getIngredients()]);n(X),i(I),l($),m(null)}catch(X){m("Impossible de charger les données des produits."),console.error(X)}finally{f(!1)}},[]);b.useEffect(()=>{B()},[B]);const F=b.useMemo(()=>t.filter(X=>X.nom_produit.toLowerCase().includes(g.toLowerCase())&&(x==="all"||X.categoria_id===x)),[t,g,x]),z=b.useMemo(()=>{const X=new Map;return t.forEach(I=>{I.is_best_seller&&I.best_seller_rank!=null&&X.set(I.best_seller_rank,I)}),X},[t]),Q=(X,I="add",$=null)=>{X==="product"?(L(I),k($),S(!0)):X==="category"?O(!0):X==="delete"&&$&&(k($),A(!0))},H=async(X,I)=>{try{await Ne.updateProduct(X.id,{estado:I}),B()}catch($){console.error("Failed to update status",$);const U=$ instanceof Error?$.message:"Une erreur inconnue s'est produite.";alert(`Échec de la mise à jour du statut du produit : ${U}`)}};return d?c.jsx("p",{className:"text-gray-800",children:"Chargement des produits..."}):h?c.jsx("p",{className:"text-red-500",children:h}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mt-6 ui-card p-4 flex flex-col lg:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[c.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[c.jsx(wb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),c.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:g,onChange:X=>v(X.target.value),className:"ui-input pl-10"})]}),c.jsxs("select",{value:x,onChange:X=>_(X.target.value),className:"ui-select md:w-56",children:[c.jsx("option",{value:"all",children:"Toutes les catégories"}),r.map(X=>c.jsx("option",{value:X.id,children:X.nom},X.id))]})]}),K&&c.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[c.jsx("button",{onClick:()=>O(!0),className:"flex-1 lg:flex-initial ui-btn-secondary",children:c.jsx(L$,{size:20})}),c.jsxs("button",{onClick:()=>Q("product","add"),className:"flex-1 lg:flex-initial ui-btn-primary",children:[c.jsx(xb,{size:20}),"Ajouter Produit"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:F.map(X=>c.jsx(gne,{product:X,category:r.find(I=>I.id===X.categoria_id),onEdit:()=>Q("product","edit",X),onDelete:()=>Q("delete","edit",X),onStatusChange:H,canEdit:K},X.id))}),j&&K&&c.jsx(vne,{isOpen:j,onClose:()=>S(!1),onSuccess:B,product:T,mode:R,categories:r,ingredients:s,occupiedPositions:z}),N&&K&&c.jsx(yne,{isOpen:N,onClose:()=>O(!1),onSuccess:B,categories:r}),C&&K&&T&&c.jsx(bne,{isOpen:C,onClose:()=>A(!1),onSuccess:B,product:T})]})},gne=({product:e,category:t,onEdit:n,onDelete:r,onStatusChange:i,canEdit:s})=>{const{text:l,color:d,Icon:f}=LC(e.estado),[h,m]=b.useState(!1),g=e.prix_vente-(e.cout_revient||0);return e.prix_vente>0&&g/e.prix_vente*100,c.jsxs("div",{className:"ui-card flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:e.image,alt:e.nom_produit,className:"w-full h-40 object-cover"}),e.is_best_seller&&c.jsxs("span",{className:"absolute top-2 left-2 rounded-full bg-brand-primary/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow-md",children:["Best seller",e.best_seller_rank?` #${e.best_seller_rank}`:""]})]}),c.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-black",children:(t==null?void 0:t.nom)||"Sans catégorie"}),c.jsx("h3",{className:"font-bold text-[clamp(1.05rem,2.2vw,1.35rem)] leading-snug text-black break-words text-balance whitespace-normal [hyphens:auto]",children:e.nom_produit})]}),c.jsx("p",{className:"text-xl font-extrabold text-black",children:ge(e.prix_vente)})]}),c.jsx("p",{className:"text-xs text-black mt-1 flex-grow",children:e.description}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full flex items-center gap-1 ${d}`,children:[c.jsx(f,{size:14})," ",l]}),s&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>m(!h),className:"p-1 text-gray-500 hover:text-gray-800",children:c.jsx(BA,{size:20})}),h&&c.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:[c.jsx("button",{onClick:()=>{n(),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"}),c.jsx("button",{onClick:()=>{r(),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Supprimer"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("p",{className:"px-4 pt-2 pb-1 text-xs text-gray-500",children:"Changer statut :"}),["disponible","agotado_temporal","agotado_indefinido"].map(v=>c.jsx("button",{onClick:()=>{i(e,v),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:LC(v).text},v))]})]})]})]})]})},vne=({isOpen:e,onClose:t,onSuccess:n,product:r,mode:i,categories:s,ingredients:l,occupiedPositions:d})=>{var K;const[f,h]=b.useState({nom_produit:(r==null?void 0:r.nom_produit)||"",prix_vente:(r==null?void 0:r.prix_vente)||0,categoria_id:(r==null?void 0:r.categoria_id)||(((K=s[0])==null?void 0:K.id)??""),estado:(r==null?void 0:r.estado)||"disponible",image:(r==null?void 0:r.image)??"",description:(r==null?void 0:r.description)||"",recipe:(r==null?void 0:r.recipe)||[],is_best_seller:(r==null?void 0:r.is_best_seller)??!1,best_seller_rank:(r==null?void 0:r.best_seller_rank)??null}),[m,g]=b.useState(null),[v,x]=b.useState(!1);b.useEffect(()=>{var B;e&&(h({nom_produit:(r==null?void 0:r.nom_produit)||"",prix_vente:(r==null?void 0:r.prix_vente)||0,categoria_id:(r==null?void 0:r.categoria_id)||(((B=s[0])==null?void 0:B.id)??""),estado:(r==null?void 0:r.estado)||"disponible",image:(r==null?void 0:r.image)??"",description:(r==null?void 0:r.description)||"",recipe:(r==null?void 0:r.recipe)||[],is_best_seller:(r==null?void 0:r.is_best_seller)??!1,best_seller_rank:(r==null?void 0:r.best_seller_rank)??null}),g(null))},[e,r,s]);const _=b.useCallback(()=>{for(const B of IC){const F=d.get(B);if(!F||F.id===(r==null?void 0:r.id))return B}return null},[d,r==null?void 0:r.id]),j=b.useCallback(B=>{h(F=>{if(B){const z=F.best_seller_rank??_();return{...F,is_best_seller:!0,best_seller_rank:z??null}}return{...F,is_best_seller:!1,best_seller_rank:null}})},[_]),S=b.useCallback(B=>{const F=B.target.value;h(z=>({...z,best_seller_rank:F?Number(F):null}))},[]),N=b.useMemo(()=>new Map(l.map(B=>[B.id,B])),[l]),O=b.useMemo(()=>f.recipe.reduce((B,F)=>{const z=N.get(F.ingredient_id);if(!z)return B;let Q=z.prix_unitaire;return(z.unite==="kg"||z.unite==="L")&&(Q=Q/1e3),B+Q*F.qte_utilisee},0),[f.recipe,N]),C=f.prix_vente-O,A=f.prix_vente>0?C/f.prix_vente*100:0,T=(B,F,z)=>{const Q=[...f.recipe];if(F==="qte_utilisee"){const{valueAsNumber:H,value:X}=z.currentTarget,I=Number.isNaN(H)?Number(X.replace(",",".")):H;Q[B]={...Q[B],[F]:Number.isNaN(I)?Q[B].qte_utilisee:I}}else Q[B]={...Q[B],[F]:z.currentTarget.value};h(H=>({...H,recipe:Q}))},k=()=>{l.length!==0&&h({...f,recipe:[...f.recipe,{ingredient_id:l[0].id,qte_utilisee:0}]})},R=B=>{const F=f.recipe.filter((z,Q)=>Q!==B);h({...f,recipe:F})},L=async B=>{var F;if(B.preventDefault(),f.recipe.length===0){alert("Veuillez ajouter au moins un ingrédient à la recette.");return}if(f.is_best_seller){if(f.best_seller_rank==null){alert("Veuillez sélectionner une position de best seller disponible.");return}const z=d.get(f.best_seller_rank);if(z&&z.id!==(r==null?void 0:r.id)){alert(`La position ${f.best_seller_rank} est déjà occupée par ${z.nom_produit}.`);return}}x(!0);try{let z=((F=f.image)==null?void 0:F.trim())??"";m&&(z=await F6(m,f.nom_produit));const Q={...f,image:z,is_best_seller:f.is_best_seller,best_seller_rank:f.is_best_seller?f.best_seller_rank:null};i==="edit"&&r?await Ne.updateProduct(r.id,Q):await Ne.addProduct(Q),n(),g(null),t()}catch(z){console.error("Failed to save product",z);const Q=z instanceof Error?z.message:"Une erreur inconnue s'est produite.";alert(`Échec du téléversement de l'image du produit : ${Q}`)}finally{x(!1)}};return c.jsx(mn,{isOpen:e,onClose:t,title:i==="add"?"Ajouter un Produit":"Modifier le Produit",size:"lg",children:c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsxs("div",{className:"max-h-[65vh] overflow-y-auto pr-2 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),c.jsx("input",{type:"text",value:f.nom_produit,onChange:B=>h({...f,nom_produit:B.target.value}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:f.prix_vente,onChange:B=>{const{valueAsNumber:F,value:z}=B.currentTarget,Q=Number.isNaN(F)?Number(z.replace(",",".")):F;h(H=>({...H,prix_vente:Number.isNaN(Q)?H.prix_vente:Q}))},required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),c.jsx("select",{value:f.categoria_id,onChange:B=>h({...f,categoria_id:B.target.value}),required:!0,className:"mt-1 ui-select",children:s.map(B=>c.jsx("option",{value:B.id,children:B.nom},B.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),c.jsxs("select",{value:f.estado,onChange:B=>h({...f,estado:B.target.value}),required:!0,className:"mt-1 ui-select",children:[c.jsx("option",{value:"disponible",children:"Disponible"}),c.jsx("option",{value:"agotado_temporal",children:"Rupture (Temp.)"}),c.jsx("option",{value:"agotado_indefinido",children:"Indisponible"})]})]}),c.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-2",children:[c.jsx("input",{id:"best-seller-toggle",type:"checkbox",checked:f.is_best_seller,onChange:B=>j(B.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),c.jsx("label",{htmlFor:"best-seller-toggle",className:"text-sm font-medium text-gray-700",children:"Best seller"})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"best-seller-rank",children:"Position dans le classement"}),c.jsxs("select",{id:"best-seller-rank",value:f.best_seller_rank??"",onChange:S,disabled:!f.is_best_seller,className:"mt-1 ui-select",children:[c.jsx("option",{value:"",children:"Sélectionner une position"}),IC.map(B=>{const F=d.get(B),z=(F==null?void 0:F.id)===(r==null?void 0:r.id),Q=!!(F&&!z),H=F?z?`${B} – Position actuelle`:`${B} – Occupé par ${F.nom_produit}`:`${B}`;return c.jsx("option",{value:B,disabled:Q,children:H},B)})]}),f.is_best_seller&&f.best_seller_rank===null&&c.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Sélectionnez une position disponible pour ce best seller."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Coût de revient"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ge(O)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge"}),c.jsx("p",{className:`text-lg font-semibold ${C>=0?"text-emerald-600":"text-red-600"}`,children:ge(C)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge %"}),c.jsxs("p",{className:`text-lg font-semibold ${A>=0?"text-emerald-600":"text-red-600"}`,children:[Number.isFinite(A)?Kc(A):"0","%"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),c.jsx("textarea",{rows:3,value:f.description,onChange:B=>h({...f,description:B.target.value}),className:"mt-1 ui-textarea",placeholder:"Courte description du produit..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image du produit"}),c.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[c.jsx("img",{src:m?URL.createObjectURL(m):PA(f.image),alt:"Aperçu",className:"w-20 h-20 object-cover rounded-md bg-gray-100"}),c.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ou,{size:16}),c.jsx("span",{children:"Changer l'image"})]}),c.jsx("input",{id:"product-image-upload",type:"file",className:"sr-only",onChange:B=>g(B.target.files?B.target.files[0]:null)})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-2",children:"Recette"}),f.recipe.length===0&&c.jsx("div",{className:"text-center p-2 my-2 bg-red-50 border border-red-200 rounded-md",children:c.jsx("p",{className:"text-sm text-red-600",children:"Un produit doit contenir au moins un ingrédient."})}),c.jsx("div",{className:"space-y-2",children:f.recipe.map((B,F)=>{var z,Q;return c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(F8,{className:"text-gray-400 cursor-move",size:16}),c.jsx("select",{value:B.ingredient_id,onChange:H=>T(F,"ingredient_id",H),className:"ui-select flex-grow",children:l.map(H=>c.jsx("option",{value:H.id,children:H.nom},H.id))}),c.jsx("input",{type:"number",placeholder:"Qté",value:B.qte_utilisee,onChange:H=>T(F,"qte_utilisee",H),className:"ui-input w-24"}),c.jsx("span",{className:"text-gray-500 text-sm w-12",children:((z=l.find(H=>H.id===B.ingredient_id))==null?void 0:z.unite)==="kg"?"g":(Q=l.find(H=>H.id===B.ingredient_id))==null?void 0:Q.unite}),c.jsx("button",{type:"button",onClick:()=>R(F),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:c.jsx(Vi,{size:16})})]},F)})}),c.jsx("button",{type:"button",onClick:k,className:"mt-2 text-sm text-blue-600 hover:underline",children:"Ajouter un ingrédient"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:v||f.recipe.length===0,className:"w-full sm:w-auto ui-btn-primary py-3 disabled:opacity-60",children:v?"Sauvegarde...":"Sauvegarder"})]})]})})},yne=({isOpen:e,onClose:t,onSuccess:n,categories:r})=>{const[i,s]=b.useState(""),[l,d]=b.useState(""),f=async()=>{if(i.trim())try{await Ne.addCategory(i),s(""),n()}catch(m){console.error(m)}},h=async m=>{d("");try{await Ne.deleteCategory(m),n()}catch(g){d(g.message),console.error(g)}};return c.jsx(mn,{isOpen:e,onClose:t,title:"Gérer les Catégories",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),placeholder:"Nom de la nouvelle catégorie",className:"ui-input flex-grow"}),c.jsx("button",{onClick:f,className:"ui-btn-primary px-4",children:"Ajouter"})]}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map(m=>c.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[c.jsx("span",{className:"text-gray-800",children:m.nom}),c.jsx("button",{onClick:()=>h(m.id),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:c.jsx(Vi,{size:16})})]},m.id))}),c.jsx("div",{className:"pt-4 flex",children:c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Fermer"})})]})})},bne=({isOpen:e,onClose:t,onSuccess:n,product:r})=>{const[i,s]=b.useState(!1),l=async()=>{s(!0);try{await Ne.deleteProduct(r.id),n(),t()}catch(d){console.error("Failed to delete product",d)}finally{s(!1)}};return c.jsxs(mn,{isOpen:e,onClose:t,title:"Confirmer la Suppression",children:[c.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer le produit ",c.jsx("strong",{className:"text-gray-900",children:r.nom_produit})," ? Cette action est irréversible."]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto ui-btn-danger py-3",children:i?"Suppression...":"Supprimer"})]})]})},Tf=e=>e.visuals?{...e.visuals,banner_image:e.visuals.banner_image??e.visuals.banner_url}:null,xne=e=>{if(e.status!=="active")return!1;const t=new Date;return!(e.conditions.start_date&&new Date(e.conditions.start_date)>t||e.conditions.end_date&&new Date(e.conditions.end_date)<t||e.conditions.usage_limit&&e.usage_count>=e.conditions.usage_limit)},wne=e=>{const t=new Date;if(e.days_of_week&&!e.days_of_week.includes(t.getDay()))return!1;if(e.time_range){const[n,r]=e.time_range.start_time.split(":").map(Number),[i,s]=e.time_range.end_time.split(":").map(Number),l=t.getHours()*60+t.getMinutes(),d=n*60+r,f=i*60+s;if(l<d||l>f)return!1}return!0},_ne=(e,t)=>{const n=e.subtotal||e.total;if(t.min_order_amount&&n<t.min_order_amount||t.max_order_amount&&n>t.max_order_amount)return!1;const r=e.items.reduce((i,s)=>i+s.quantite,0);return t.min_items_count&&r<t.min_items_count||t.max_items_count&&r>t.max_items_count||t.order_types&&!t.order_types.includes(e.type)?!1:(t.first_order_only,!0)},Pf=(e,t)=>{if(!xne(e)||!wne(e.conditions)||!_ne(t,e.conditions))return!1;if(e.type==="buy_x_get_y"){const n=e.discount.buy_x_get_y_config;return!n||!n.product_ids?!1:t.items.filter(i=>n.product_ids.includes(i.produitRef)).reduce((i,s)=>i+s.quantite,0)>=2}return!0},Mf=(e,t)=>{let n=0;const r=e.subtotal||e.total;t.applies_to==="total"?n=r:t.applies_to==="products"&&t.product_ids&&t.product_ids.length>0?n=e.items.filter(s=>{var l;return(l=t.product_ids)==null?void 0:l.includes(s.produitRef)}).reduce((s,l)=>s+l.prix_unitaire*l.quantite,0):t.applies_to==="categories"&&t.category_ids&&t.category_ids.length>0;let i=n*t.discount_value/100;return t.max_discount_amount&&(i=Math.min(i,t.max_discount_amount)),i},Rf=(e,t)=>t.discount_value,jne=(e,t)=>{const n=t.buy_x_get_y_config;if(!n)return 0;let r=0;const i=e.items.reduce((s,l)=>(s[l.produitRef]||(s[l.produitRef]=[]),s[l.produitRef].push(l),s),{});for(const s in i){const l=i[s],d=l.reduce((f,h)=>f+h.quantite,0);if(n.product_ids&&n.product_ids.includes(s)&&d>=2){const f=Math.floor(d/2),h=[...l].sort((m,g)=>m.prix_unitaire-g.prix_unitaire);h.length>0&&(r+=h[0].prix_unitaire*f)}}return r},Sne=e=>e.shipping_cost||0,Df=(e,t)=>{switch(e.type){case"percentage":return Mf(t,e.discount);case"fixed_amount":return Rf(t,e.discount);case"promo_code":return e.discount.discount_type==="percentage"?Mf(t,e.discount):e.discount.discount_type==="fixed_amount"?Rf(t,e.discount):0;case"buy_x_get_y":return jne(t,e.discount);case"free_shipping":return Sne(t);case"threshold":return e.discount.discount_type==="percentage"?Mf(t,e.discount):e.discount.discount_type==="fixed_amount"?Rf(t,e.discount):0;case"happy_hour":return e.discount.discount_type==="percentage"?Mf(t,e.discount):e.discount.discount_type==="fixed_amount"?Rf(t,e.discount):0;default:return 0}},Nne=async e=>{const t={...e,applied_promotions:[],total_discount:0,subtotal:e.subtotal||e.total},{data:n,error:r}=await ye.from("promotions").select("*").eq("status","active");if(r||!n)return console.error("Error fetching active promotions:",r),e;let i=t.subtotal;const s=n.filter(f=>f.type==="buy_x_get_y"&&Pf(f,t)).sort((f,h)=>h.priority-f.priority);for(const f of s){const h=Df(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,config:f.discount.buy_x_get_y_config,visuals:Tf(f)})}}if(e.promo_code){const f=await aR(e.promo_code);if(f&&Pf(f,t)){const h=Df(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,config:{promo_code:f.discount.promo_code},visuals:Tf(f)})}}}const l=n.filter(f=>(f.type==="percentage"||f.type==="fixed_amount"||f.type==="threshold"||f.type==="happy_hour")&&Pf(f,t)).sort((f,h)=>h.priority-f.priority);for(const f of l){const h=Df(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,visuals:Tf(f)})}}const d=n.find(f=>f.type==="free_shipping"&&Pf(f,t));if(d){const f=Df(d,t);f>0&&t.applied_promotions.push({promotion_id:d.id,name:d.name,discount_amount:f,type:"FREE_SHIPPING",visuals:Tf(d)})}return t.total=i,t},Ene=async()=>{const{data:e,error:t}=await ye.from("promotions").select("*").order("priority",{ascending:!1});if(t)throw console.error("Error fetching promotions:",t),new Error("Impossible de récupérer les promotions");return e||[]},nR=async()=>{const{data:e,error:t}=await ye.from("promotions").select("*").eq("status","active").order("priority",{ascending:!1});if(t)throw console.error("Error fetching active promotions:",t),new Error("Impossible de récupérer les promotions actives");return e||[]},One=async e=>{const{data:t,error:n}=await ye.from("promotions").insert([{...e,usage_count:0}]).select().single();if(n)throw console.error("Error creating promotion:",n),new Error("Impossible de créer la promotion");return t},rR=async(e,t)=>{const{data:n,error:r}=await ye.from("promotions").update(t).eq("id",e).select().single();if(r)throw console.error("Error updating promotion:",r),new Error("Impossible de mettre à jour la promotion");return n},Cne=async(e,t)=>rR(e,{status:t}),Ane=async e=>{const{error:t}=await ye.from("promotions").delete().eq("id",e);if(t)throw console.error("Error deleting promotion:",t),new Error("Impossible de supprimer la promotion")},aR=async e=>{const{data:t,error:n}=await ye.from("promotions").select("*").eq("type","promo_code").eq("status","active");return n?(console.error("Error fetching promotion by code:",n),null):(t==null?void 0:t.find(i=>{var s;return((s=i.discount)==null?void 0:s.promo_code)===e}))||null},kne=async e=>{const{data:t,error:n}=await ye.from("promotion_usages").select("*").eq("promotion_id",e).order("applied_at",{ascending:!1});return n?(console.error("Error fetching promotion usages:",n),[]):t||[]},Tne=[{value:"percentage",label:"Pourcentage"},{value:"fixed_amount",label:"Montant fixe"},{value:"promo_code",label:"Code promo"},{value:"buy_x_get_y",label:"2x1 / Achetez X, obtenez Y"},{value:"free_product",label:"Produit gratuit"},{value:"free_shipping",label:"Livraison gratuite"},{value:"combo",label:"Combo"},{value:"threshold",label:"Palier"},{value:"happy_hour",label:"Happy hour"}],Pne=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"scheduled",label:"Programmée"},{value:"expired",label:"Expirée"}],$C=({isOpen:e,onClose:t,onSave:n,promotion:r})=>{var z,Q;const[i,s]=b.useState(""),[l,d]=b.useState("percentage"),[f,h]=b.useState("active"),[m,g]=b.useState(0),[v,x]=b.useState({}),[_,j]=b.useState({type:"percentage",value:0,applies_to:"total"}),[S,N]=b.useState({}),[O,C]=b.useState(!1),[A,T]=b.useState(null),[k,R]=b.useState("general"),[L,K]=b.useState(!1);b.useEffect(()=>{r&&(s(r.name),d(r.type),h(r.status),g(r.priority),x(r.conditions),j(r.discount),N(r.visuals||{}))},[r]);const B=async H=>{if(H.preventDefault(),C(!0),T(null),l!=="free_shipping"&&(!_.value||_.value<=0)){T("La valeur de la réduction doit être supérieure à 0"),C(!1),R("discount");return}if(!i||i.trim()===""){T("Le nom de la promotion est obligatoire"),C(!1),R("general");return}try{r?await rR(r.id,{name:i,type:l,status:f,priority:m,conditions:v,discount:_,visuals:S}):await One({name:i,type:l,status:f,priority:m,conditions:v,discount:_,visuals:S}),n()}catch(X){T(X instanceof Error?X.message:"Une erreur est survenue")}finally{C(!1)}},F=async H=>{var I;const X=(I=H.target.files)==null?void 0:I[0];if(X){K(!0);try{const $=await lu(X);N({...S,banner_image:Ya($)})}catch{T("Erreur lors du téléchargement de l'image")}finally{K(!1)}}};return e?c.jsx("div",{className:"promotion-modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 text-black backdrop-blur-sm",children:c.jsxs("div",{className:"promotion-modal__content flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:r?"Modifier la promotion":"Nouvelle promotion"}),c.jsx("button",{onClick:t,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer la fenêtre de promotion",children:c.jsx(da,{size:22})})]}),A&&c.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:A}),c.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${k==="general"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>R("general"),children:"Général"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${k==="conditions"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>R("conditions"),children:"Conditions"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${k==="discount"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>R("discount"),children:"Réduction"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${k==="visuals"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>R("visuals"),children:"Affichage"})]}),c.jsxs("form",{onSubmit:B,className:"flex-1 overflow-y-auto bg-white px-4 py-6 text-black sm:px-6",children:[k==="general"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nom de la promotion"}),c.jsx("input",{type:"text",id:"name",value:i,onChange:H=>s(H.target.value),className:"ui-input mt-2",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de promotion"}),c.jsx("select",{id:"type",value:l,onChange:H=>d(H.target.value),className:"ui-input mt-2",required:!0,children:Tne.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"status",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Statut"}),c.jsx("select",{id:"status",value:f,onChange:H=>h(H.target.value),className:"ui-input mt-2",required:!0,children:Pne.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"priority",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Priorité"}),c.jsx("input",{type:"number",id:"priority",value:m,onChange:H=>g(parseInt(H.target.value)||0),className:"ui-input mt-2",min:"0",max:"100"}),c.jsx("p",{className:"mt-2 text-xs text-black",children:"Plus la valeur est élevée, plus la promotion est prioritaire."})]})]})}),k==="conditions"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[l==="promo_code"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"promo_code",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Code promo"}),c.jsx("input",{type:"text",id:"promo_code",value:v.promo_code||"",onChange:H=>x({...v,promo_code:H.target.value}),className:"ui-input mt-2",required:l==="promo_code"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"min_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant minimum de commande"}),c.jsx("input",{type:"number",id:"min_order_amount",value:v.min_order_amount||"",onChange:H=>x({...v,min_order_amount:parseFloat(H.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de commande"}),c.jsx("input",{type:"number",id:"max_order_amount",value:v.max_order_amount||"",onChange:H=>x({...v,max_order_amount:parseFloat(H.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"start_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de début"}),c.jsx("input",{type:"datetime-local",id:"start_date",value:v.start_date?new Date(v.start_date).toISOString().slice(0,16):"",onChange:H=>x({...v,start_date:H.target.value?new Date(H.target.value).toISOString():void 0}),className:"ui-input mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"end_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de fin"}),c.jsx("input",{type:"datetime-local",id:"end_date",value:v.end_date?new Date(v.end_date).toISOString().slice(0,16):"",onChange:H=>x({...v,end_date:H.target.value?new Date(H.target.value).toISOString():void 0}),className:"ui-input mt-2"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Jours de la semaine"}),c.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"].map((H,X)=>{var I;return c.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-sm text-black shadow-sm",children:[c.jsx("input",{type:"checkbox",checked:((I=v.days_of_week)==null?void 0:I.includes(X))||!1,onChange:$=>{const U=v.days_of_week||[];$.target.checked?x({...v,days_of_week:[...U,X]}):x({...v,days_of_week:U.filter(ee=>ee!==X)})},className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),c.jsx("span",{children:H})]},X)})})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"hours_start",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de début"}),c.jsx("input",{type:"time",id:"hours_start",value:((z=v.hours_of_day)==null?void 0:z.start)||"",onChange:H=>x({...v,hours_of_day:{...v.hours_of_day||{},start:H.target.value}}),className:"ui-input mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"hours_end",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de fin"}),c.jsx("input",{type:"time",id:"hours_end",value:((Q=v.hours_of_day)==null?void 0:Q.end)||"",onChange:H=>x({...v,hours_of_day:{...v.hours_of_day||{},end:H.target.value}}),className:"ui-input mt-2"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_uses",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nombre maximum d'utilisations"}),c.jsx("input",{type:"number",id:"max_uses",value:v.max_uses_total||"",onChange:H=>x({...v,max_uses_total:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_uses_per_customer",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Maximum par client"}),c.jsx("input",{type:"number",id:"max_uses_per_customer",value:v.max_uses_per_customer||"",onChange:H=>x({...v,max_uses_per_customer:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]})]}),l==="buy_x_get_y"&&c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"buy_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité à acheter"}),c.jsx("input",{type:"number",id:"buy_quantity",value:v.buy_quantity||"",onChange:H=>x({...v,buy_quantity:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:l==="buy_x_get_y"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"get_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité offerte"}),c.jsx("input",{type:"number",id:"get_quantity",value:v.get_quantity||"",onChange:H=>x({...v,get_quantity:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:l==="buy_x_get_y"})]})]}),c.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm",children:[c.jsx("input",{type:"checkbox",id:"first_order_only",checked:v.first_order_only||!1,onChange:H=>x({...v,first_order_only:H.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),c.jsx("label",{htmlFor:"first_order_only",className:"text-sm font-medium text-black",children:"Uniquement pour la première commande"})]})]})}),k==="discount"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"discount_type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de réduction"}),c.jsxs("select",{id:"discount_type",value:_.type,onChange:H=>j({..._,type:H.target.value}),className:"ui-input mt-2",required:!0,children:[c.jsx("option",{value:"percentage",children:"Pourcentage"}),c.jsx("option",{value:"fixed_amount",children:"Montant fixe"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"discount_value",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Valeur de la réduction"}),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("input",{type:"number",id:"discount_value",value:_.value,onChange:H=>j({..._,value:parseFloat(H.target.value)||0}),className:"ui-input pr-10",min:"0",step:(_.type==="percentage","0.01"),required:!0}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:_.type==="percentage"?"%":"€"})]})]})]}),_.type==="percentage"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_discount_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de la réduction"}),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("input",{type:"number",id:"max_discount_amount",value:_.max_discount_amount||"",onChange:H=>j({..._,max_discount_amount:parseFloat(H.target.value)||void 0}),className:"ui-input pr-10",min:"0",step:"0.01"}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:"€"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"applies_to",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Application de la réduction"}),c.jsxs("select",{id:"applies_to",value:_.applies_to,onChange:H=>j({..._,applies_to:H.target.value}),className:"ui-input mt-2",required:!0,children:[c.jsx("option",{value:"total",children:"Total de la commande"}),c.jsx("option",{value:"products",children:"Produits spécifiques"}),c.jsx("option",{value:"shipping",children:"Frais de livraison"})]})]})]})}),k==="visuals"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du badge"}),c.jsx("input",{type:"text",id:"badge_text",value:S.badge_text||"",onChange:H=>N({...S,badge_text:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: 2x1, -20%, etc."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur du texte du badge"}),c.jsx("input",{type:"color",id:"badge_color",value:S.badge_color||"#FFFFFF",onChange:H=>N({...S,badge_color:H.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_bg_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur de fond du badge"}),c.jsx("input",{type:"color",id:"badge_bg_color",value:S.badge_bg_color||"#F9A826",onChange:H=>N({...S,badge_bg_color:H.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_bg_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de fond du badge (optionnel)"}),c.jsx("p",{className:"mt-1 text-xs text-black",children:"Si vous uploadez une image, elle remplacera la couleur de fond du badge"}),c.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[c.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[c.jsx("input",{type:"file",id:"badge_bg_image",onChange:async H=>{var I;const X=(I=H.target.files)==null?void 0:I[0];if(X){K(!0);try{const $=await lu(X,{tags:["badge-background"]});N({...S,badge_bg_image:Ya($)})}catch{T("Erreur lors du téléchargement de l'image du badge")}finally{K(!1)}}},className:"sr-only",accept:"image/*"}),c.jsx("span",{children:L?"Téléchargement...":"Choisir une image"})]}),S.badge_bg_image&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:S.badge_bg_image,alt:"Aperçu de l'image de fond du badge",className:"h-16 w-auto rounded-lg object-cover shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>N({...S,badge_bg_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:c.jsx(da,{size:12})})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte de la bannière"}),c.jsx("input",{type:"text",id:"banner_text",value:S.banner_text||"",onChange:H=>N({...S,banner_text:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: Offre spéciale : 20% de réduction sur tous les tacos !"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de la bannière"}),c.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[c.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[c.jsx("input",{type:"file",id:"banner_image",onChange:F,className:"sr-only",accept:"image/*"}),c.jsx("span",{children:L?"Téléchargement...":"Choisir une image"})]}),S.banner_image&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:S.banner_image,alt:"Aperçu de la bannière",className:"h-20 w-auto rounded-lg object-cover shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>N({...S,banner_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:c.jsx(da,{size:12})})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_cta",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du bouton d'appel à l'action"}),c.jsx("input",{type:"text",id:"banner_cta",value:S.banner_cta||"",onChange:H=>N({...S,banner_cta:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: En profiter maintenant"})]})]})})]}),c.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 bg-slate-50/80 p-6 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:O,children:"Annuler"}),c.jsx("button",{type:"submit",onClick:B,className:"inline-flex items-center justify-center gap-2 rounded-full border border-brand-primary bg-white px-5 py-2.5 text-sm font-semibold text-black shadow transition hover:bg-brand-primary/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:O,children:O?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent"}),c.jsx("span",{children:"Enregistrement..."})]}):c.jsx("span",{children:"Enregistrer"})})]})]})}):null},nb=(e,t,n)=>Math.min(Math.max(e,t),n),Mne=e=>{const t=e.replace("#","").trim();if(t.length===3){const n=parseInt(t[0]+t[0],16),r=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16);return[n,r,i]}if(t.length===4){const n=parseInt(t[0]+t[0],16),r=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16);return[n,r,i]}if(t.length===6||t.length===8){const n=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[n,r,i]}return null},Rne=e=>{const t=e.match(/rgba?\(([^)]+)\)/i);if(!t)return null;const[n,r,i]=t[1].split(",").slice(0,3).map(s=>nb(parseFloat(s.trim()),0,255));return[n,r,i].some(s=>Number.isNaN(s))?null:[n,r,i]},Dne=(e,t,n)=>{const r=(e%360+360)%360,i=nb(t,0,1),s=nb(n,0,1);if(i===0){const x=Math.round(s*255);return[x,x,x]}const l=(1-Math.abs(2*s-1))*i,d=l*(1-Math.abs(r/60%2-1)),f=s-l/2;let h=0,m=0,g=0;r<60?(h=l,m=d):r<120?(h=d,m=l):r<180?(m=l,g=d):r<240?(m=d,g=l):r<300?(h=d,g=l):(h=l,g=d);const v=x=>Math.round((x+f)*255);return[v(h),v(m),v(g)]},Ine=e=>{const t=e.match(/hsla?\(([^)]+)\)/i);if(!t)return null;const[n,r,i]=t[1].split(",").slice(0,3).map(f=>f.trim()),s=parseFloat(n),l=parseFloat(r.replace("%",""))/100,d=parseFloat(i.replace("%",""))/100;return[s,l,d].some(f=>Number.isNaN(f))?null:Dne(s,l,d)},Lne=e=>{if(!e)return null;const t=e.trim();return t?t.startsWith("#")?Mne(t):t.toLowerCase().startsWith("rgb")?Rne(t):t.toLowerCase().startsWith("hsl")?Ine(t):null:null},$ne=e=>{const t=Lne(e);if(!t)return null;const[n,r,i]=t.map(l=>l/255),s=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]},zne=(e,t=.55)=>{const n=$ne(e);return n===null?!1:n<t},iR=(e,{lightColor:t="#FFFFFF",darkColor:n="#000000",threshold:r=.55}={})=>zne(e,r)?t:n,Une={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},qne={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Bne={active:"bg-green-100 text-black",inactive:"bg-gray-100 text-black",scheduled:"bg-blue-100 text-black",expired:"bg-red-100 text-black"},Fne=({isOpen:e,onClose:t,promotion:n})=>{var j;const[r,i]=b.useState([]),[s,l]=b.useState(!1),[d,f]=b.useState(null),[h,m]=b.useState("details");b.useEffect(()=>{e&&n&&g()},[e,n]);const g=async()=>{l(!0),f(null);try{const S=await kne(n.id);i(S)}catch(S){f("Erreur lors du chargement des utilisations"),console.error(S)}finally{l(!1)}},v=S=>{const N=new Date(S);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(N)},x=((j=n.visuals)==null?void 0:j.badge_bg_color)||"#F9A826",_=iR(x);return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur-sm",children:c.jsxs("div",{className:"flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:"Détails de la promotion"}),c.jsx("button",{onClick:t,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer les détails de la promotion",children:c.jsx(da,{size:22})})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${h==="details"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>m("details"),children:"Détails"}),c.jsxs("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${h==="usages"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>m("usages"),children:["Utilisations (",n.usage_count,")"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-4 py-6 sm:px-6",children:[h==="details"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-black",children:n.name}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${Bne[n.status]}`,children:qne[n.status]}),c.jsx("span",{className:"text-sm font-medium text-black",children:Une[n.type]})]})]}),c.jsxs("div",{className:"rounded-full border border-slate-200 bg-white/80 px-4 py-1.5 text-sm font-semibold text-black shadow-sm",children:["Priorité : ",n.priority]})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(Y8,{size:16}),"Informations générales"]}),c.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"ID"}),c.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:n.id})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Créée le"}),c.jsx("dd",{children:v(n.created_at)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Mise à jour"}),c.jsx("dd",{children:v(n.updated_at)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Utilisations"}),c.jsx("dd",{children:n.usage_count})]})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(Eu,{size:16}),"Réduction"]}),c.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Type"}),c.jsx("dd",{children:n.discount.type==="percentage"?"Pourcentage":"Montant fixe"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Valeur"}),c.jsxs("dd",{className:"font-semibold text-black",children:[n.discount.value,n.discount.type==="percentage"?"%":"€"]})]}),n.discount.max_discount_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Maximum"}),c.jsxs("dd",{children:[n.discount.max_discount_amount,"€"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Application"}),c.jsxs("dd",{children:[n.discount.applies_to==="total"&&"Total de la commande",n.discount.applies_to==="products"&&"Produits spécifiques",n.discount.applies_to==="shipping"&&"Frais de livraison"]})]})]})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(s8,{size:16}),"Conditions"]}),c.jsxs("dl",{className:"grid grid-cols-1 gap-3 text-sm text-black md:grid-cols-2",children:[n.conditions.promo_code&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Code promo"}),c.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:n.conditions.promo_code})]}),n.conditions.min_order_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Montant minimum"}),c.jsxs("dd",{children:[n.conditions.min_order_amount,"€"]})]}),n.conditions.max_order_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Montant maximum"}),c.jsxs("dd",{children:[n.conditions.max_order_amount,"€"]})]}),n.conditions.start_date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Date de début"}),c.jsx("dd",{children:v(n.conditions.start_date)})]}),n.conditions.end_date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Date de fin"}),c.jsx("dd",{children:v(n.conditions.end_date)})]}),n.conditions.days_of_week&&n.conditions.days_of_week.length>0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Jours"}),c.jsx("dd",{children:n.conditions.days_of_week.map(S=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][S]).join(", ")})]}),n.conditions.hours_of_day&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Heures"}),c.jsxs("dd",{children:[n.conditions.hours_of_day.start," - ",n.conditions.hours_of_day.end]})]}),n.conditions.max_uses_total&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Utilisations max."}),c.jsx("dd",{children:n.conditions.max_uses_total})]}),n.conditions.max_uses_per_customer&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Max par client"}),c.jsx("dd",{children:n.conditions.max_uses_per_customer})]}),n.conditions.first_order_only&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Première commande"}),c.jsx("dd",{children:"Oui"})]}),n.type==="buy_x_get_y"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Achetez"}),c.jsx("dd",{children:n.conditions.buy_quantity})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Obtenez"}),c.jsx("dd",{children:n.conditions.get_quantity})]})]})]})]}),n.visuals&&Object.keys(n.visuals).length>0&&c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(nh,{size:16}),"Éléments visuels"]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-black md:grid-cols-2",children:[n.visuals.badge_text&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Badge"}),c.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:x,color:_},children:n.visuals.badge_text})]}),n.visuals.banner_text&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Texte bannière"}),c.jsx("span",{className:"text-right text-black",children:n.visuals.banner_text})]}),n.visuals.banner_cta&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Bouton"}),c.jsx("span",{className:"text-right text-black",children:n.visuals.banner_cta})]})]}),n.visuals.banner_image&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"mb-2 block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de bannière"}),c.jsx("img",{src:n.visuals.banner_image,alt:"Bannière promotionnelle",className:"w-full max-h-40 rounded-xl object-cover shadow-sm"})]})]})]}),h==="usages"&&c.jsxs("div",{className:"space-y-4",children:[d&&c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:d}),s?c.jsxs("div",{className:"flex items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-black shadow-sm",children:[c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-brand-primary"}),c.jsx("span",{children:"Chargement…"})]}):r.length===0?c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-center text-sm font-medium text-black shadow-sm",children:"Aucune utilisation enregistrée pour cette promotion"}):c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 shadow-sm",children:c.jsxs("table",{className:"w-full divide-y divide-slate-200 text-sm text-black",children:[c.jsx("thead",{className:"bg-slate-50/90 text-xs font-semibold uppercase tracking-wide text-black",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Commande"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(S=>c.jsxs("tr",{className:"bg-white/80 transition hover:bg-brand-accent-soft",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-black",children:v(S.applied_at)}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 text-black transition hover:underline",onClick:N=>{N.preventDefault()},children:[S.order_id.substring(0,8),"...",c.jsx(R8,{size:14})]})}),c.jsx("td",{className:"px-4 py-3",children:S.customer_phone||"—"}),c.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-black",children:[S.discount_amount.toFixed(2),"€"]})]},S.id))})]})})]})]}),c.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-slate-50/80 p-6",children:c.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",children:"Fermer"})})]})}):null},Hne=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmLabel:s="Confirmer",cancelLabel:l="Annuler",confirmButtonClass:d="bg-brand-primary hover:bg-brand-primary-dark"})=>e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[c.jsx("h2",{className:"text-xl font-semibold",children:r}),c.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:c.jsx(da,{size:24})})]}),c.jsx("div",{className:"p-6",children:c.jsx("p",{className:"text-gray-700",children:i})}),c.jsxs("div",{className:"flex justify-end items-center gap-3 p-6 border-t",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:l}),c.jsx("button",{type:"button",onClick:n,className:`px-4 py-2 text-white rounded-md ${d}`,children:s})]})]})}):null,Kne={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Gne={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800"},Yne={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Vne={percentage:c.jsx(Eu,{size:16}),fixed_amount:c.jsx(nh,{size:16}),promo_code:c.jsx(nh,{size:16}),buy_x_get_y:c.jsx(Bi,{size:16}),free_product:c.jsx(Bi,{size:16}),free_shipping:c.jsx(Bi,{size:16}),combo:c.jsx(Bi,{size:16}),threshold:c.jsx(qA,{size:16}),happy_hour:c.jsx(Tl,{size:16})},Wne=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),[l,d]=b.useState(!1),[f,h]=b.useState(!1),[m,g]=b.useState(!1),[v,x]=b.useState(!1),[_,j]=b.useState(null),[S,N]=b.useState(""),[O,C]=b.useState("all"),[A,T]=b.useState("all"),[k,R]=b.useState("priority"),[L,K]=b.useState("desc"),B=async()=>{r(!0),s(null);try{const P=await Ene();t(P)}catch(P){s("Erreur lors du chargement des promotions"),console.error(P)}finally{r(!1)}};b.useEffect(()=>{B()},[]);const F=()=>{j(null),d(!0)},z=P=>{j(P),h(!0)},Q=P=>{j(P),g(!0)},H=P=>{j(P),x(!0)},X=async P=>{try{const M=P.active?"inactive":"active",G=await Cne(P.id,M);t(e.map(ne=>ne.id===P.id?G:ne))}catch(M){s("Erreur lors de la mise à jour du statut"),console.error(M)}},I=async()=>{if(_)try{await Ane(_.id),t(e.filter(P=>P.id!==_.id)),x(!1)}catch(P){s("Erreur lors de la suppression de la promotion"),console.error(P)}},$=P=>{k===P?K(L==="asc"?"desc":"asc"):(R(P),K("desc"))},U=e.filter(P=>{const M=P.name.toLowerCase().includes(S.toLowerCase()),G=O==="all"||P.status===O,ne=A==="all"||P.type===A;return M&&G&&ne}).sort((P,M)=>{let G=0;switch(k){case"name":G=P.name.localeCompare(M.name);break;case"priority":G=P.priority-M.priority;break;case"created_at":G=new Date(P.created_at).getTime()-new Date(M.created_at).getTime();break;case"usage_count":G=P.usage_count-M.usage_count;break}return L==="asc"?G:-G}),ee=P=>k!==P?null:L==="asc"?c.jsx(qA,{size:16}):c.jsx(UA,{size:16}),W=P=>{const M=new Date(P);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(M)};return c.jsxs("div",{className:"promotions-page p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des promotions"}),c.jsxs("button",{onClick:F,className:"bg-brand-primary hover:bg-brand-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[c.jsx(Yh,{size:20}),"Nouvelle promotion"]})]}),i&&c.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Rechercher une promotion...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:S,onChange:P=>N(P.target.value)}),c.jsx(wb,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:O,onChange:P=>C(P.target.value),children:[c.jsx("option",{value:"all",children:"Tous les statuts"}),c.jsx("option",{value:"active",children:"Actives"}),c.jsx("option",{value:"inactive",children:"Inactives"}),c.jsx("option",{value:"scheduled",children:"Programmées"}),c.jsx("option",{value:"expired",children:"Expirées"})]}),c.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:A,onChange:P=>T(P.target.value),children:[c.jsx("option",{value:"all",children:"Tous les types"}),c.jsx("option",{value:"percentage",children:"Pourcentage"}),c.jsx("option",{value:"fixed_amount",children:"Montant fixe"}),c.jsx("option",{value:"promo_code",children:"Code promo"}),c.jsx("option",{value:"buy_x_get_y",children:"2x1 / Achetez X, obtenez Y"}),c.jsx("option",{value:"free_product",children:"Produit gratuit"}),c.jsx("option",{value:"free_shipping",children:"Livraison gratuite"}),c.jsx("option",{value:"combo",children:"Combo"}),c.jsx("option",{value:"threshold",children:"Palier"}),c.jsx("option",{value:"happy_hour",children:"Happy hour"})]}),c.jsxs("button",{onClick:B,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2",children:[c.jsx(k$,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"Actualiser"})]})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b",children:[c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>$("name"),children:["Nom ",ee("name")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Statut"}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>$("priority"),children:["Priorité ",ee("priority")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>$("created_at"),children:["Créée le ",ee("created_at")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>$("usage_count"),children:["Utilisations ",ee("usage_count")]})}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),c.jsx("tbody",{children:n?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:c.jsxs("div",{className:"flex justify-center items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),c.jsx("span",{className:"ml-2",children:"Chargement..."})]})})}):U.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune promotion trouvée"})}):U.map(P=>c.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[c.jsxs("td",{className:"px-4 py-4",children:[c.jsx("div",{className:"font-medium",children:P.name}),P.type==="promo_code"&&P.conditions.promo_code&&c.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",c.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:P.conditions.promo_code})]})]}),c.jsx("td",{className:"px-4 py-4",children:c.jsxs("div",{className:"flex items-center gap-1.5",children:[Vne[P.type],c.jsx("span",{children:Yne[P.type]})]})}),c.jsx("td",{className:"px-4 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Gne[P.status]}`,children:Kne[P.status]})}),c.jsx("td",{className:"px-4 py-4",children:P.priority}),c.jsx("td",{className:"px-4 py-4",children:W(P.created_at)}),c.jsx("td",{className:"px-4 py-4",children:P.usage_count}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>X(P),className:"p-1.5 rounded-md hover:bg-gray-100",title:P.status==="active"?"Désactiver":"Activer",children:P.status==="active"?c.jsx(I8,{size:18}):c.jsx(n0,{size:18})}),c.jsx("button",{onClick:()=>Q(P),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Voir les détails",children:c.jsx(n0,{size:18})}),c.jsx("button",{onClick:()=>z(P),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Modifier",children:c.jsx(WA,{size:18})}),c.jsx("button",{onClick:()=>H(P),className:"p-1.5 rounded-md hover:bg-gray-100 text-red-500",title:"Supprimer",children:c.jsx(Vi,{size:18})})]})})]},P.id))})]})})]}),l&&c.jsx($C,{isOpen:l,onClose:()=>d(!1),onSave:()=>{d(!1),B()}}),f&&_&&c.jsx($C,{isOpen:f,onClose:()=>h(!1),onSave:()=>{h(!1),B()},promotion:_}),m&&_&&c.jsx(Fne,{isOpen:m,onClose:()=>g(!1),promotion:_}),v&&_&&c.jsx(Hne,{isOpen:v,onClose:()=>x(!1),onConfirm:I,title:"Supprimer la promotion",message:`Êtes-vous sûr de vouloir supprimer la promotion "${_.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",cancelLabel:"Annuler",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})},Xne=({promotion:e,className:t=""})=>{const n=e.config,r=n.visuals||{};let i=r.badge_text||"",s=r.description||e.description||"";i||(n.discount_type==="percentage"?(i=`-${n.discount_value}%`,s=s||`${n.discount_value}% de descuento`):n.discount_type==="fixed_amount"?(i=`-$${n.discount_value.toLocaleString()}`,s=s||`$${n.discount_value.toLocaleString()} de descuento`):n.buy_quantity&&n.get_quantity?(i=`${n.buy_quantity}x${n.get_quantity}`,s=s||`Compra ${n.buy_quantity}, lleva ${n.get_quantity}`):n.applies_to==="shipping"?(i="ENVÍO GRATIS",s=s||"Envío gratis en este producto"):(i=e.name||"PROMO",s=s||e.name));const l=r.badge_bg_color||"#E63946",d=r.badge_bg_image,f=d?"#000000":iR(l);return c.jsx("div",{className:`px-2 py-0.5 rounded-full font-bold text-xs shadow-md ${t}`,style:{backgroundColor:d?"transparent":l,backgroundImage:d?`url(${d})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:f,textShadow:d?"0 1px 3px rgba(0,0,0,0.8)":"none"},title:s,children:i})},Qne=e=>{const[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,l]=b.useState(null);b.useEffect(()=>{if(!e){n([]),i(!1);return}(async()=>{try{i(!0);const g=(await nR().catch(v=>(console.error("[useProductPromotions] Error fetching active promotions from API:",v),[]))).filter(v=>{if(!lz(v)||!cz(v))return!1;const x=v.config||{},_=Array.isArray(v.conditions)?v.conditions:[];return!x.product_ids&&!x.category_ids&&_.length===0?!1:x.product_ids&&Array.isArray(x.product_ids)&&x.product_ids.length>0&&x.product_ids.includes(e.id)||x.category_ids&&Array.isArray(x.category_ids)&&x.category_ids.length>0&&x.category_ids.includes(e.categoria_id)?!0:_.length>0?_.some(S=>S.type==="specific_product"&&Array.isArray(S.value)?S.value.includes(e.id):S.type==="specific_category"&&Array.isArray(S.value)?S.value.includes(e.categoria_id):!1):!1}).sort((v,x)=>(x.priority||0)-(v.priority||0));n(g)}catch(h){console.error("[useProductPromotions] Error during promotion processing:",h),l(h instanceof Error?h:new Error("Une erreur est survenue")),n([])}finally{i(!1)}})()},[e]);const d=t.length>0?t[0]:null;return{promotions:t,bestPromotion:d,loading:r,error:s}},Jne=({product:e,onClick:t})=>{const{promotions:n,loading:r}=Qne(e);return c.jsxs("div",{onClick:()=>e.estado==="disponible"&&t(),className:`relative border rounded-2xl p-6 flex flex-col items-center text-center transition-shadow bg-white/90 shadow-md ${e.estado==="disponible"?"cursor-pointer hover:shadow-xl":"opacity-50"}`,children:[!r&&n.length>0&&e.estado==="disponible"&&c.jsx("div",{className:"absolute top-2 right-2 flex flex-wrap gap-1 max-w-[calc(100%-1rem)] justify-end z-10",children:n.map((i,s)=>c.jsx(Xne,{promotion:i},i.id||s))}),c.jsx("img",{src:e.image,alt:e.nom_produit,className:"w-36 h-36 md:w-40 md:h-40 object-cover rounded-xl mb-4"}),c.jsx("p",{className:"font-semibold flex-grow text-black leading-snug text-[clamp(1.05rem,2.4vw,1.3rem)] break-words text-balance whitespace-normal [hyphens:auto]",children:e.nom_produit}),c.jsx("p",{className:"text-base text-black mt-2 px-1 max-h-20 overflow-hidden",children:e.description}),c.jsx("p",{className:"font-bold text-2xl text-black mt-3",children:ge(e.prix_vente)}),e.estado!=="disponible"&&c.jsx("span",{className:"text-xs text-red-500 font-bold mt-1",children:"Agotado"})]})},Zne=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const f=await nR();t(f)}catch(f){console.error("Error loading promotions:",f)}finally{r(!1)}})()},[]);const i=e.filter(d=>d.type!=="promo_code");if(n||i.length===0)return null;const s=d=>{var f;return d.type==="free_shipping"?c.jsx(Q$,{size:16}):d.type==="percentage"?c.jsx(Eu,{size:16}):(f=d.conditions)!=null&&f.time_range?c.jsx(Tl,{size:16}):d.type==="buy_x_get_y"?c.jsx(y2,{size:16}):c.jsx(nh,{size:16})},l=d=>{const f=d.discount,h=d.conditions;let m=d.description||d.name;return h!=null&&h.min_order_amount&&(m+=` (Mínimo: ${h.min_order_amount.toLocaleString()})`),h!=null&&h.time_range&&(m+=` (${h.time_range.start_time} - ${h.time_range.end_time})`),d.type==="promo_code"&&(f!=null&&f.promo_code)&&(m+=` (Código: ${f.promo_code})`),m};return c.jsxs("div",{className:"mb-4 space-y-2",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center drop-shadow-md",children:[c.jsx(y2,{className:"mr-2",size:22}),"Promociones Activas"]}),c.jsx("div",{className:"space-y-2",children:i.map(d=>{var g,v,x,_;const f=((g=d.visuals)==null?void 0:g.badge_bg_color)||"#4CAF50",h=(v=d.visuals)==null?void 0:v.banner_image,m=(x=d.visuals)==null?void 0:x.banner_text;return h?c.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-md transition-transform hover:scale-[1.02]",children:[c.jsx("img",{src:h,alt:d.name,className:"w-full h-32 object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3",children:c.jsxs("div",{className:"text-white",children:[c.jsx("p",{className:"font-bold text-lg drop-shadow-md",children:d.name}),m&&c.jsx("p",{className:"text-sm drop-shadow-md",children:m})]})})]},d.id):c.jsxs("div",{className:"flex items-start p-2 rounded-lg shadow-sm border-l-4 transition-transform hover:scale-[1.01]",style:{borderLeftColor:f,background:`linear-gradient(to right, ${f}15, white)`},children:[c.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full mr-2 flex-shrink-0",style:{backgroundColor:f,color:((_=d.visuals)==null?void 0:_.badge_color)||"#FFFFFF"},children:s(d)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-900 text-sm",children:d.name}),c.jsx("p",{className:"text-xs text-gray-600",children:l(d)})]})]},d.id)})})]})},ere=({isOpen:e,order:t,whatsappNumber:n="573238090562"})=>{var l;const r=pa();if(!e||!t)return null;const i=()=>{var T,k,R,L,K,B;const d=t.items.filter(F=>{var z;return!((z=F.nom_produit)!=null&&z.toLowerCase().includes("domicilio"))}),f=d.map(F=>`- ${F.quantite}x ${F.nom_produit} (${ge(F.prix_unitaire)})`).join(`
`),h=d.reduce((F,z)=>F+(z.quantite??0),0),m=t.subtotal??d.reduce((F,z)=>F+(z.quantite??0)*z.prix_unitaire,0),g=typeof t.date_creation=="number"?new Date(t.date_creation):void 0,v=g?new Intl.DateTimeFormat("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}).format(g):"No disponible",x=g?new Intl.DateTimeFormat("es-CO",{hour:"2-digit",minute:"2-digit"}).format(g):"No disponible",_=((T=t.clientInfo)==null?void 0:T.nom)??t.client_name??"No especificado",j=((k=t.clientInfo)==null?void 0:k.telephone)??t.client_phone??"No especificado",S=((R=t.clientInfo)==null?void 0:R.adresse)??t.client_address,N=t.total_discount??0,O=(((L=t.applied_promotions)==null?void 0:L.length)??0)>0,C=t.payment_method==="transferencia"?"Transferencia":t.payment_method==="tarjeta"?"Tarjeta":"Efectivo",A=[];return A.push("¡Hola! Aquí están los detalles de mi pedido:"),A.push(`Pedido #${t.id.slice(-6)}`),A.push(`Fecha: ${v}`),A.push(`Hora: ${x}`),A.push(""),A.push(`Cliente: ${_}`),A.push(`Teléfono: ${j}`),S&&A.push(`Dirección: ${S}`),A.push(""),A.push(`Número de productos: ${h}`),f&&(A.push("Productos:"),A.push(f)),A.push(""),A.push(`Total antes de promociones: ${ge(m)}`),t.shipping_cost!==void 0&&(t.shipping_cost>0?A.push(`Costo de envío: ${ge(t.shipping_cost)}`):(K=t.applied_promotions)!=null&&K.some(F=>F.type==="FREE_SHIPPING")&&A.push("Costo de envío: Gratis")),N>0&&A.push(`Descuento total: -${ge(N)}`),O?(A.push("Promociones aplicadas:"),(B=t.applied_promotions)==null||B.forEach(F=>{A.push(`- ${F.name}: -${ge(F.discount_amount)}`)})):A.push("Promociones aplicadas: Ninguna"),A.push(`Total a pagar: ${ge(t.total)}`),A.push(`Método de pago: ${C}`),t.receipt_url&&A.push(`Comprobante: ${t.receipt_url}`),encodeURIComponent(A.join(`
`))},s=()=>{const d=i(),f=`https://wa.me/${n}?text=${d}`;window.open(f,"_blank"),r("/",{replace:!0}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Ms,{size:64,className:"mb-3"}),c.jsx("h2",{className:"text-2xl font-bold text-center",children:"¡Pedido Confirmado!"}),c.jsxs("p",{className:"text-green-100 mt-2",children:["Pedido #",t.id.slice(-6)]})]})}),c.jsxs("div",{className:"p-6 text-center",children:[c.jsxs("div",{className:"p-6 text-left",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Détails de la commande:"}),c.jsxs("div",{className:"space-y-2",children:[t.items.filter(d=>{var f;return!((f=d.nom_produit)!=null&&f.toLowerCase().includes("domicilio"))}).map((d,f)=>c.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[c.jsxs("span",{children:[d.quantite,"x ",d.nom_produit]}),c.jsx("span",{children:ge(d.quantite*d.prix_unitaire)})]},f)),t.subtotal!==void 0&&c.jsxs("div",{className:"flex justify-between items-center text-gray-700 border-t pt-2 mt-2",children:[c.jsx("span",{children:"Sous-total:"}),c.jsx("span",{children:ge(t.subtotal)})]}),t.total_discount&&t.total_discount>0&&c.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[c.jsx("span",{children:"Réduction totale:"}),c.jsxs("span",{children:["- ",ge(t.total_discount)]})]}),t.applied_promotions&&t.applied_promotions.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Promotions appliquées:"}),t.applied_promotions.map((d,f)=>c.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600 ml-2",children:[c.jsxs("span",{children:["- ",d.name]}),c.jsxs("span",{children:["- ",ge(d.discount_amount)]})]},f))]}),t.shipping_cost!==void 0&&t.shipping_cost>0&&c.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[c.jsx("span",{children:"Frais de livraison:"}),c.jsx("span",{children:ge(t.shipping_cost)})]}),t.shipping_cost===0&&((l=t.applied_promotions)==null?void 0:l.some(d=>d.type==="FREE_SHIPPING"))&&c.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[c.jsx("span",{children:"Livraison gratuite:"}),c.jsx("span",{children:ge(0)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-900 font-bold text-xl border-t pt-2 mt-2",children:[c.jsx("span",{children:"Total:"}),c.jsx("span",{children:ge(t.total)})]})]})]}),c.jsxs("button",{onClick:s,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-lg",children:[c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Enviar por WhatsApp"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Haz clic para enviar tu pedido por WhatsApp y ver el seguimiento"})]})]})})},If=8e3,sR="Domicilio",zC=e=>e.nom_produit===sR,tre=({isOpen:e,onClose:t,selectedProduct:n,onAddToCart:r})=>{var x;const[i,s]=b.useState(1),[l,d]=b.useState(""),[f,h]=b.useState([]);if(b.useEffect(()=>{e&&(s((n==null?void 0:n.quantite)||1),d((n==null?void 0:n.commentaire)||""),h((n==null?void 0:n.excluded_ingredients)||[]))},[e,n]),!e||!n)return null;const m=()=>{const _=n.product;r({id:`oi${Date.now()}`,produitRef:_.id,nom_produit:_.nom_produit,prix_unitaire:_.prix_vente,quantite:i,commentaire:l.trim()||void 0,excluded_ingredients:f.length>0?f:void 0})},g=_=>{f.includes(_)?h(f.filter(j=>j!==_)):h([...f,_])},v=((x=n.product.ingredients)==null?void 0:x.split(",").map(_=>_.trim()).filter(Boolean))||[];return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h2",{className:"text-[clamp(1.1rem,2.3vw,1.5rem)] font-bold leading-snug text-gray-800 break-words text-balance whitespace-normal [hyphens:auto]",children:n.product.nom_produit}),c.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("img",{src:n.product.image,alt:n.product.nom_produit,className:"w-full h-48 object-cover rounded-lg mb-4"}),c.jsx("p",{className:"text-gray-600 mb-4",children:n.product.description}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Precio: ",ge(n.product.prix_vente)]}),c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("button",{onClick:()=>s(Math.max(1,i-1)),className:"bg-gray-200 text-gray-700 rounded-l-lg px-3 py-1",children:"-"}),c.jsx("span",{className:"bg-gray-100 px-4 py-1",children:i}),c.jsx("button",{onClick:()=>s(i+1),className:"bg-gray-200 text-gray-700 rounded-r-lg px-3 py-1",children:"+"})]})]}),v.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes:"}),c.jsx("div",{className:"space-y-2",children:v.map((_,j)=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`ingredient-${j}`,checked:!f.includes(_),onChange:()=>g(_),className:"mr-2"}),c.jsx("label",{htmlFor:`ingredient-${j}`,className:"text-gray-700",children:_})]},j))})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"comment",className:"block font-bold text-gray-800 mb-2",children:"Comentarios adicionales:"}),c.jsx("textarea",{id:"comment",value:l,onChange:_=>d(_.target.value),className:"w-full border border-gray-300 rounded-lg p-2 text-gray-700",rows:3,placeholder:"Instrucciones especiales, alergias, etc."})]}),c.jsxs("button",{onClick:m,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-3 px-4 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Agregar al carrito - ",ge(n.product.prix_vente*i)]})]})})})},nre=({onOrderSubmitted:e})=>{const t=pa();Au();const[n,r]=b.useState([]),[i,s]=b.useState([]),[l,d]=b.useState(!0),[f,h]=b.useState(null),[m,g]=b.useState("all"),[v,x]=b.useState([]),[_,j]=b.useState(!1),[S,N]=b.useState(null),[O,C]=b.useState(""),[A,T]=b.useState(""),[k,R]=b.useState(""),[L,K]=b.useState("transferencia"),[B,F]=b.useState(null),[z,Q]=b.useState(!1),[H,X]=b.useState(!1),[I,$]=b.useState(null),[U,ee]=b.useState([]),[W,P]=b.useState(""),[M,G]=b.useState(""),[ne,se]=b.useState(""),[he,me]=b.useState(0),[$e,fe]=b.useState(!1),[de,we]=b.useState(!1),[le,Ve]=b.useState(8e4),[be,rt]=b.useState("pedir_en_linea");b.useEffect(()=>{L==="efectivo"&&K("transferencia")},[L]),b.useEffect(()=>{(async()=>{try{const[Se,Re]=await Promise.all([Ne.getProducts(),Ne.getCategories()]);r(Se),s(Re);try{const De=localStorage.getItem("customer-order-history");if(De){const Ae=JSON.parse(De);ee(Ae.slice(0,3))}}catch(De){console.error("Error fetching order history:",De)}}catch(Se){console.error("Error fetching data:",Se),h("Error al cargar los datos. Por favor, intenta de nuevo más tarde.")}finally{d(!1)}})()},[]);const ve=b.useMemo(()=>m==="all"?n:n.filter(ie=>ie.categoria_id===m),[n,m]),[je,ze]=b.useState({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]});b.useEffect(()=>{(async()=>{var $r;const Se=v.reduce((ln,En)=>ln+En.quantite*En.prix_unitaire,0);if(v.length===0){ze({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),we(!1);return}const Re={id:"temp",items:v,subtotal:Se,total:Se,total_discount:0,applied_promotions:[],promo_code:M||void 0,client_name:O,client_phone:A,client_address:k,shipping_cost:If,order_type:be,payment_method:L,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},De=await Nne(Re),Ae=De.total_discount||0,Ge=(($r=De.applied_promotions.find(ln=>{var En;return((En=ln.config)==null?void 0:En.promo_code)===M}))==null?void 0:$r.discount_amount)||0,tt=Ae-Ge;let ht=be==="pedir_en_linea"?If:0;const mr=De.applied_promotions.some(ln=>ln.type==="FREE_SHIPPING");mr&&(ht=0),we(mr);const ao=De.total+ht;ze({subtotal:Se,total:ao,automaticPromotionsDiscount:tt,promoCodeDiscount:Ge,deliveryFee:ht,appliedPromotions:De.applied_promotions})})()},[v,M,be,O,A,k,L]);const{total:At,subtotal:yt,promoCodeDiscount:bt,deliveryFee:_t}=je,Dn=ie=>{const Se=v.find(Re=>Re.produitRef===ie.id);N({product:ie,quantite:Se==null?void 0:Se.quantite,commentaire:Se==null?void 0:Se.commentaire,excluded_ingredients:Se==null?void 0:Se.excluded_ingredients}),j(!0)},Nt=ie=>{x(Se=>{const Re=Se.findIndex(De=>De.produitRef===ie.produitRef);if(Re>-1){const De=[...Se];return De[Re]={...De[Re],...ie},De}else return[...Se,ie]}),j(!1)},Wn=ie=>{x(Se=>Se.filter(Re=>Re.id!==ie))},In=ie=>{const Se=ie.items.filter(Re=>!zC(Re));x(Se)},Lr=async()=>{const ie=W.trim().toUpperCase();if(ie){if(M&&M===ie){se("Este código ya está aplicado.");return}P(ie),se(""),fe(!0);try{if(!await aR(ie)){se("Código promocional inválido o expirado.");return}G(ie)}catch(Se){console.error("Error validating promo code:",Se),se("No se pudo validar el código. Intenta nuevamente.")}finally{fe(!1)}}},pe=()=>{G(""),P(""),se("")},xe=async ie=>{ie.preventDefault(),Q(!0);let Se="";if(L==="transferencia"&&B)try{Se=await MA(B)}catch(De){console.error("Error uploading receipt:",De),h("Error al subir el comprobante de pago."),Q(!1);return}const Re={id:`ord_${Date.now()}`,items:v,clientInfo:{nom:O,telephone:A,adresse:k},shipping_cost:_t,order_type:be,payment_method:L,receipt_url:Se,subtotal:je.subtotal,total:je.total,total_discount:je.automaticPromotionsDiscount+je.promoCodeDiscount,promo_code:M||void 0,applied_promotions:je.appliedPromotions,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("finalOrder.total avant createOrder:",Re.total),console.log("orderTotals:",je);try{const De=await Ne.createOrder(Re);console.log("submitted.total après createOrder:",De.total),$(De),X(!0),oA(De.id,Date.now()+sA),e==null||e(De);try{const Ae=localStorage.getItem("customer-order-history"),Ge=Ae?JSON.parse(Ae):[],tt=[De,...Ge].slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(tt)),ee(tt.slice(0,3))}catch(Ae){console.error("Error updating order history:",Ae)}}catch(De){console.error("Error submitting order:",De),h("Error al enviar el pedido. Por favor, intenta de nuevo.")}finally{Q(!1)}};return c.jsxs("div",{className:"flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"flex-1 p-4 lg:p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 drop-shadow-md",children:"Realizar Pedido"}),c.jsxs("button",{type:"button",onClick:()=>t("/"),className:"inline-flex items-center text-sm font-semibold text-brand-primary hover:text-brand-primary/80 transition-colors",children:[c.jsx($A,{size:16,className:"mr-1"}),"Volver"]})]}),c.jsx(Zne,{}),c.jsxs("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-2",children:[c.jsx("button",{onClick:()=>g("all"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${m==="all"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:"Todos"}),i.map(ie=>c.jsx("button",{onClick:()=>g(ie.id),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${m===ie.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:ie.nom},ie.id))]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:ve.map(ie=>ie&&c.jsx(Jne,{product:ie,onClick:()=>Dn(ie)},ie.id))})]}),c.jsxs("div",{className:"lg:w-96 flex flex-col",children:[c.jsxs("div",{className:"bg-white p-4 lg:p-6 shadow-lg flex flex-col",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 drop-shadow-md mb-4",children:"Mon panier"}),U.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"Tus últimos pedidos"}),c.jsx("div",{className:"space-y-2",children:U.map(ie=>{let Se="Fecha no disponible";const Re=ie.created_at||ie.date_commande||ie.date_servido||ie.timestamp;if(Re)try{const Ae=new Date(Re);isNaN(Ae.getTime())||(Se=Ae.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}))}catch(Ae){console.error("Error parsing date:",Ae)}Se==="Fecha no disponible"&&(Se=new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}));const De=ie.items?ie.items.filter(Ae=>!zC(Ae)).reduce((Ae,Ge)=>Ae+Ge.quantite,0):0;return c.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 hover:border-yellow-500 transition-all",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["Pedido del ",Se]}),c.jsxs("p",{className:"text-xs text-gray-600",children:[De," article",De>1?"s":""," • ",ge(ie.total)]})]}),c.jsx("button",{onClick:()=>In(ie),className:"ml-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-3 py-1 rounded text-xs whitespace-nowrap transition-all",children:"Pedir de nuevo"})]},ie.id)})})]}),v.length===0?c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[c.jsx(YA,{size:48,className:"mb-3"}),c.jsx("p",{children:"Tu carrito está vacío."})]}):c.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:v.map(ie=>c.jsx("div",{className:"group relative mb-3 rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-4 text-white shadow-lg transition-transform hover:-translate-y-0.5",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("p",{className:"font-bold text-[clamp(1rem,2vw,1.3rem)] leading-snug text-white break-words text-balance whitespace-normal [hyphens:auto]",children:(ie==null?void 0:ie.nom_produit)||"Article inconnu"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-white/90",children:[c.jsxs("span",{className:"font-semibold",children:["Cantidad: ",ie.quantite]}),c.jsxs("span",{className:"font-semibold",children:["Precio unitario: ",ge(ie.prix_unitaire)]}),c.jsxs("span",{className:"font-semibold",children:["Total: ",ge(ie.prix_unitaire*ie.quantite)]})]}),ie.commentaire&&c.jsxs("p",{className:"text-sm text-white/90 italic bg-white/15 border-l-2 border-white/60 p-2 rounded",children:["💬 ",ie.commentaire]}),ie.excluded_ingredients&&ie.excluded_ingredients.length>0&&c.jsxs("p",{className:"text-sm text-white font-semibold bg-black/20 border-l-2 border-white/60 p-2 rounded",children:["🚫 Sin: ",ie.excluded_ingredients.join(", ")]})]}),c.jsx("button",{onClick:()=>Wn(ie.id),className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/15 text-white transition hover:bg-white/25","aria-label":"Eliminar artículo",children:c.jsx(Vi,{size:20})})]})},ie.id))}),v.length>0&&be==="pedir_en_linea"&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0",children:[c.jsx("p",{className:"font-medium text-gray-800",children:sR}),de?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("p",{className:"text-sm text-gray-400 line-through",children:ge(If)}),c.jsx("p",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):c.jsx("p",{className:"text-sm text-gray-600",children:ge(If)})]}),c.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"promoCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Promoción:"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",id:"promoCode",value:W,onChange:ie=>P(ie.target.value.toUpperCase()),placeholder:"Ingresa tu código",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2 uppercase"}),c.jsx("button",{type:"button",onClick:Lr,disabled:$e||!W.trim()||M===W,"aria-busy":$e,className:"rounded-md bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-2 font-bold text-white shadow-sm transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400 disabled:cursor-not-allowed disabled:opacity-50",children:$e?"Validando…":"Confirmar"})]}),ne&&c.jsx("p",{className:"mt-2 text-sm text-red-600",children:ne}),M&&c.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-green-700 font-medium",children:['✓ Código "',M,'" aplicado']}),c.jsx("button",{type:"button",onClick:pe,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Eliminar"})]})]}),je.appliedPromotions&&je.appliedPromotions.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm font-bold text-green-800 mb-2",children:"🎉 Promociones aplicadas:"}),je.appliedPromotions.map((ie,Se)=>{const Re=`- ${ge(ie.discount_amount)}`;return be==="a_emporter"?c.jsxs("div",{className:"mb-2 text-sm text-green-700",children:[c.jsx("p",{className:"font-semibold",children:ie.name}),c.jsx("p",{className:"font-semibold",children:Re})]},Se):c.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[c.jsx("span",{className:"text-green-700",children:ie.name}),c.jsx("span",{className:"font-semibold text-green-700",children:Re})]},Se)})]}),he>0&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("p",{className:"text-sm text-green-600",children:"Descuento por código promocional:"}),c.jsxs("p",{className:"text-sm font-bold text-green-600",children:["- ",ge(he)]})]}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("p",{className:"text-lg font-bold text-gray-800",children:"Total:"}),c.jsx("p",{className:"text-xl font-bold text-brand-primary",children:ge(At)})]}),c.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de pedido:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${be==="pedir_en_linea"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"orderType",value:"pedir_en_linea",checked:be==="pedir_en_linea",onChange:()=>rt("pedir_en_linea"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"🚚 Domicilio (con entrega)"})]}),c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${be==="a_emporter"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"orderType",value:"a_emporter",checked:be==="a_emporter",onChange:()=>rt("a_emporter"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"🏪 Para llevar (recoger en tienda)"})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:["Nombre: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"clientName",value:O,onChange:ie=>C(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientPhone",className:"block text-sm font-medium text-gray-700",children:["Teléfono: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",id:"clientPhone",value:A,onChange:ie=>T(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),be==="pedir_en_linea"&&c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:["Dirección: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"clientAddress",value:k,onChange:ie=>R(ie.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:3,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de pago:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${L==="transferencia"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"paymentMethod",value:"transferencia",checked:L==="transferencia",onChange:()=>K("transferencia"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"💰 Transferencia Bancaria"})]}),c.jsxs("label",{className:"flex items-center rounded-lg border-2 border-gray-200 bg-gray-100 p-3 opacity-70 cursor-not-allowed","aria-disabled":"true",children:[c.jsx("input",{type:"radio",name:"paymentMethod",value:"efectivo",checked:L==="efectivo",onChange:()=>{},disabled:!0,className:"form-radio text-gray-400"}),c.jsxs("span",{className:"ml-3 font-medium text-gray-500",children:[c.jsx("span",{children:"💵 Efectivo"}),c.jsx("span",{className:"block text-xs font-normal uppercase tracking-wide text-gray-500/80",children:"No disponible por el momento"})]})]})]})]}),L==="transferencia"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Comprobante de pago:"}),c.jsx("input",{type:"file",id:"paymentProof",onChange:ie=>F(ie.target.files?ie.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,application/pdf",required:!0})]}),c.jsx("button",{type:"submit",disabled:z||v.length===0||L==="transferencia"&&!B,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Enviando pedido...":"Confirmar Pedido"})]})]})]}),S&&c.jsx(tre,{isOpen:_,onClose:()=>j(!1),selectedProduct:S,onAddToCart:Nt}),I&&c.jsx(ere,{isOpen:H,order:I,onClose:()=>{X(!1),x([]),C(""),T(""),R(""),K("transferencia"),F(null),G(""),me(0)}})]})]})},rre=()=>c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center",children:[c.jsx("h1",{className:"text-9xl font-extrabold text-brand-primary tracking-widest",children:"404"}),c.jsx("div",{className:"bg-brand-accent px-2 text-sm rounded rotate-12 absolute",children:"Page Non Trouvée"}),c.jsx("p",{className:"text-2xl md:text-3xl font-light text-gray-700 mt-4",children:"Désolé, la page que vous recherchez n'existe pas."}),c.jsx(ub,{to:"/",className:"mt-8 px-8 py-3 bg-brand-primary text-brand-secondary font-semibold rounded-lg hover:bg-yellow-400 transition",children:"Retour à l'accueil"})]}),are=new Intl.NumberFormat("es-CO",{maximumFractionDigits:2}),ire=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),UC=e=>are.format(Number.isFinite(e)?e:0),ws=e=>ire.format(Number.isFinite(e)?Math.round(e):0),rl={all:"Toutes",efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",unknown:"Non spécifié"},qC={sur_place:"En el local",a_emporter:"Para llevar",pedir_en_linea:"Pedido en línea"},sre=()=>{const[e,t]=b.useState([]),[n,r]=b.useState([]),[i,s]=b.useState([]),[l,d]=b.useState([]),[f,h]=b.useState(!0),[m,g]=b.useState(null),[v,x]=b.useState(null),[_,j]=b.useState({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),S=b.useCallback(async()=>{h(!0);try{const[I,$,U,ee]=await Promise.all([Ne.getFinalizedOrders(),Ne.getSalesHistory(),Ne.getProducts(),Ne.getCategories()]);t([...I].sort((W,P)=>P.date_creation-W.date_creation)),r($),s(U),d(ee),g(null)}catch(I){console.error("Failed to fetch sales summary",I),g("Impossible de charger les données de ventes. Veuillez réessayer.")}finally{h(!1)}},[]);b.useEffect(()=>{S()},[S]),b.useEffect(()=>{const I=Ne.notifications.subscribe("orders_updated",()=>{S()});return()=>{I()}},[S]);const N=b.useMemo(()=>new Map(e.map(I=>[I.id,I])),[e]),O=b.useMemo(()=>{if(!_.startDate)return null;const I=new Date(_.startDate);return I.setHours(0,0,0,0),I.getTime()},[_.startDate]),C=b.useMemo(()=>{if(!_.endDate)return null;const I=new Date(_.endDate);return I.setHours(23,59,59,999),I.getTime()},[_.endDate]),A=b.useMemo(()=>n.filter(I=>{if(O!==null&&I.saleDate<O||C!==null&&I.saleDate>C||_.paymentMethod!=="all"&&I.paymentMethod!==_.paymentMethod||_.categoryId&&I.categoryId!==_.categoryId||_.productId&&I.productId!==_.productId)return!1;const $=N.get(I.orderId);return!(!$||_.orderType!=="all"&&$.type!==_.orderType||_.paymentMethod!=="all"&&$.payment_method&&$.payment_method!==_.paymentMethod)}),[n,O,C,_.paymentMethod,_.categoryId,_.productId,_.orderType,N]),T=b.useMemo(()=>{const I=new Map;return A.forEach($=>{const U=I.get($.orderId),ee=$.totalPrice??0,W=$.profit??0,P=$.quantity??0;if(!U){I.set($.orderId,{revenue:ee,profit:W,quantity:P,paymentMethod:$.paymentMethod,items:[{productId:$.productId,productName:$.productName,categoryName:$.categoryName,quantity:$.quantity,revenue:ee,profit:W}]});return}U.revenue+=ee,U.profit+=W,U.quantity+=P,!U.paymentMethod&&$.paymentMethod&&(U.paymentMethod=$.paymentMethod);const M=U.items.findIndex(G=>G.productId===$.productId);M>-1?U.items[M]={...U.items[M],quantity:U.items[M].quantity+$.quantity,revenue:U.items[M].revenue+ee,profit:U.items[M].profit+W}:U.items.push({productId:$.productId,productName:$.productName,categoryName:$.categoryName,quantity:$.quantity,revenue:ee,profit:W})}),I.forEach($=>{$.items.sort((U,ee)=>ee.revenue-U.revenue)}),I},[A]),k=b.useMemo(()=>e.filter(I=>T.has(I.id)).sort((I,$)=>$.date_creation-I.date_creation),[e,T]),R=b.useMemo(()=>{const I=A.reduce((P,M)=>P+(M.totalPrice??0),0),$=A.reduce((P,M)=>P+(M.totalCost??0),0),U=A.reduce((P,M)=>P+(M.profit??0),0),ee=A.reduce((P,M)=>P+(M.quantity??0),0),W=k.length;return{totalRevenue:I,totalCost:$,totalProfit:U,totalQuantity:ee,orderCount:W,averageOrderValue:W>0?I/W:0,averageItemsPerOrder:W>0?ee/W:0,profitMargin:I>0?U/I*100:0}},[A,k]),L=b.useMemo(()=>{const I=new Map;return A.forEach($=>{const U=$.productId,ee=I.get(U);if(!ee){I.set(U,{productId:$.productId,productName:$.productName,categoryName:$.categoryName,quantity:$.quantity,revenue:$.totalPrice??0,profit:$.profit??0});return}ee.quantity+=$.quantity,ee.revenue+=$.totalPrice??0,ee.profit+=$.profit??0}),Array.from(I.values()).sort(($,U)=>U.revenue-$.revenue)},[A]),K=b.useMemo(()=>{const I=new Map;return A.forEach($=>{const U=$.categoryId||"unknown",ee=I.get(U);if(!ee){I.set(U,{categoryName:$.categoryName||"Sin categoría",quantity:$.quantity,revenue:$.totalPrice??0,profit:$.profit??0});return}ee.quantity+=$.quantity,ee.revenue+=$.totalPrice??0,ee.profit+=$.profit??0}),Array.from(I.values()).sort(($,U)=>U.revenue-$.revenue)},[A]),B=b.useMemo(()=>{const I=new Map;return A.forEach($=>{const U=$.paymentMethod??"unknown",ee=I.get(U);if(!ee){I.set(U,{revenue:$.totalPrice??0,profit:$.profit??0,orders:new Set([$.orderId])});return}ee.revenue+=$.totalPrice??0,ee.profit+=$.profit??0,ee.orders.add($.orderId)}),Array.from(I.entries()).map(([$,U])=>({method:$,label:rl[$]??rl.unknown,revenue:U.revenue,profit:U.profit,orders:U.orders.size})).sort(($,U)=>U.revenue-$.revenue)},[A]),F=b.useMemo(()=>[...l].sort((I,$)=>I.nom.localeCompare($.nom,"es")),[l]),z=b.useMemo(()=>{const{categoryId:I}=_;return[...I?i.filter(U=>U.categoria_id===I):i].sort((U,ee)=>U.nom_produit.localeCompare(ee.nom_produit,"es"))},[i,_.categoryId]),Q=I=>{const{name:$,value:U}=I.target;j(ee=>{if($==="categoryId"){const W={...ee,categoryId:U,productId:ee.productId};if(U&&ee.productId){const P=i.find(M=>M.id===ee.productId);(!P||P.categoria_id!==U)&&(W.productId="")}return W}if($==="productId"){if(!U)return{...ee,productId:""};const W=i.find(P=>P.id===U);return{...ee,productId:U,categoryId:W?W.categoria_id:ee.categoryId}}return $==="paymentMethod"&&(U==="all"||U==="efectivo"||U==="transferencia"||U==="tarjeta")?{...ee,paymentMethod:U}:$==="orderType"&&(U==="all"||U==="sur_place"||U==="a_emporter"||U==="pedir_en_linea")?{...ee,orderType:U}:{...ee,[$]:U}}),x(null)},H=()=>{j({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),x(null)},X=()=>{if(A.length===0)return;const I=["Fecha","Pedido","Tipo","Mesa/Cliente","Producto","Categoría","Cantidad","Precio unitario","Ingresos","Costo","Beneficio","Método de pago"],$=A.map(M=>{const G=N.get(M.orderId),ne=G?qC[G.type]:"N/A",se=G?G.type==="sur_place"?G.table_nom||"N/A":G.client_name||G.client_address||"N/A":"N/A";return[new Date(M.saleDate).toLocaleString("es-CO"),M.orderId,ne,`"${se}"`,`"${M.productName}"`,M.categoryName||"N/A",M.quantity,ge(M.unitPrice??0),ge(M.totalPrice??0),ge(M.totalCost??0),ge(M.profit??0),rl[M.paymentMethod??"unknown"]??rl.unknown].join(",")}),U=[I.join(","),...$].join(`
`),ee=new Blob([`\uFEFF${U}`],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(ee),P=document.createElement("a");P.href=W,P.download=`resume_ventes_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(W)};return f?c.jsx("div",{className:"text-gray-800",children:"Chargement du résumé des ventes..."}):c.jsxs("div",{className:"space-y-6",children:[m&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:m}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filtres d'analyse"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:H,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:[c.jsx(U8,{size:16}),"Réinitialiser"]}),c.jsxs("button",{type:"button",onClick:X,className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-green-700",children:[c.jsx(T8,{size:16}),"Export CSV"]})]})]}),c.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de début"}),c.jsx("input",{type:"date",name:"startDate",value:_.startDate,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de fin"}),c.jsx("input",{type:"date",name:"endDate",value:_.endDate,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type de commande"}),c.jsxs("select",{name:"orderType",value:_.orderType,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"all",children:"Tous les types"}),c.jsx("option",{value:"sur_place",children:"En el local"}),c.jsx("option",{value:"a_emporter",children:"Para llevar"}),c.jsx("option",{value:"pedir_en_linea",children:"Pedido en línea"})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Méthode de paiement"}),c.jsxs("select",{name:"paymentMethod",value:_.paymentMethod,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"all",children:"Toutes"}),c.jsx("option",{value:"efectivo",children:"Efectivo"}),c.jsx("option",{value:"transferencia",children:"Transferencia"}),c.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),c.jsxs("select",{name:"categoryId",value:_.categoryId,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"",children:"Toutes"}),F.map(I=>c.jsx("option",{value:I.id,children:I.nom},I.id))]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Produit"}),c.jsxs("select",{name:"productId",value:_.productId,onChange:Q,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"",children:"Tous les produits"}),z.map(I=>c.jsx("option",{value:I.id,children:I.nom_produit},I.id))]})]})]})]}),c.jsx("section",{children:c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'affaires"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ge(R.totalRevenue)})]}),c.jsx("div",{className:"rounded-full bg-brand-primary/10 p-3 text-brand-primary",children:c.jsx(XA,{size:20})})]}),c.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Basé sur les articles correspondant aux filtres appliqués."})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bénéfice"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ge(R.totalProfit)})]}),c.jsx("div",{className:"rounded-full bg-emerald-500/10 p-3 text-emerald-600",children:c.jsx(S$,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Marge moyenne : ",UC(R.profitMargin),"%"]})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Commandes"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ws(R.orderCount)})]}),c.jsx("div",{className:"rounded-full bg-indigo-500/10 p-3 text-indigo-600",children:c.jsx(Bi,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Panier moyen : ",ge(R.averageOrderValue)]})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Articles vendus"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ws(R.totalQuantity)})]}),c.jsx("div",{className:"rounded-full bg-amber-500/10 p-3 text-amber-600",children:c.jsx(b2,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Moyenne par commande : ",UC(R.averageItemsPerOrder)]})]})]})}),c.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par méthode de paiement"}),c.jsx(u8,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Méthode"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"}),c.jsx("th",{className:"p-2 text-right",children:"Commandes"})]})}),c.jsx("tbody",{children:B.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):B.map(I=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:I.label}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.profit)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ws(I.orders)})]},I.method))})]})})]}),c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par catégorie"}),c.jsx(b2,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:K.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):K.map(I=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:I.categoryName}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ws(I.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.profit)})]},I.categoryName))})]})})]})]}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits les plus performants"}),c.jsx(Bi,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Produit"}),c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:L.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"p-4 text-center text-sm text-gray-500",children:"Aucun produit trouvé pour les filtres sélectionnés."})}):L.map(I=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:I.productName}),c.jsx("td",{className:"p-2 text-sm text-gray-700",children:I.categoryName||"Sin categoría"}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ws(I.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(I.profit)})]},I.productId))})]})})]}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Détails des commandes"}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-12 p-3"}),c.jsx("th",{className:"p-3",children:"Date"}),c.jsx("th",{className:"p-3",children:"Type"}),c.jsx("th",{className:"p-3",children:"Table/Client"}),c.jsx("th",{className:"p-3 text-right",children:"Articles"}),c.jsx("th",{className:"p-3 text-right",children:"Ventes"}),c.jsx("th",{className:"p-3 text-right",children:"Bénéfice"}),c.jsx("th",{className:"p-3",children:"Paiement"})]})}),c.jsx("tbody",{children:k.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"Aucune commande ne correspond aux filtres sélectionnés."})}):k.map(I=>{const $=T.get(I.id);if(!$)return null;const U=v===I.id,ee=I.type==="sur_place"?c.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[c.jsx(Zc,{size:12}),"En el local"]}):c.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800",children:[c.jsx(_b,{size:12}),qC[I.type]]}),W=I.type==="sur_place"?I.table_nom||"N/A":I.client_name||I.client_address||"N/A",P=rl[$.paymentMethod??I.payment_method??"unknown"]??rl.unknown;return c.jsxs(cr.Fragment,{children:[c.jsxs("tr",{onClick:()=>x(U?null:I.id),className:"cursor-pointer border-b transition hover:bg-gray-50",children:[c.jsx("td",{className:"p-3 align-top",children:U?c.jsx(UA,{size:16}):c.jsx(g8,{size:16})}),c.jsx("td",{className:"p-3 text-sm text-gray-700",children:new Date(I.date_creation).toLocaleString("es-CO")}),c.jsx("td",{className:"p-3",children:ee}),c.jsx("td",{className:"p-3 text-sm font-semibold text-gray-900",children:W}),c.jsx("td",{className:"p-3 text-right text-sm text-gray-700",children:ws($.quantity)}),c.jsx("td",{className:"p-3 text-right text-sm font-semibold text-gray-900",children:ge($.revenue)}),c.jsx("td",{className:"p-3 text-right text-sm font-semibold text-emerald-600",children:ge($.profit)}),c.jsx("td",{className:"p-3 text-sm text-gray-700",children:P})]}),U&&c.jsx("tr",{className:"bg-gray-50",children:c.jsx("td",{colSpan:8,className:"p-4",children:c.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Articles inclus (",$.items.length,")"]}),c.jsx("div",{className:"mt-3 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Produit"}),c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:$.items.map(M=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:M.productName}),c.jsx("td",{className:"p-2 text-sm text-gray-700",children:M.categoryName||"Sin categoría"}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ws(M.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(M.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ge(M.profit)})]},M.productId))})]})})]})})})]},I.id)})})]})})]})]})},Lf="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition hover:border-brand-primary/50 hover:text-brand-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary disabled:opacity-50",ore=({id:e,value:t,fallback:n,onChange:r,className:i,placeholder:s})=>{const l=b.useRef(null),[d,f]=b.useState(()=>((t==null?void 0:t.plainText)??n).trim().length===0),h=()=>{const O=l.current;if(!O){f(!0);return}const C=O.textContent??"";f(C.trim().length===0)};b.useEffect(()=>{const O=l.current;if(O){if(t&&typeof t.html=="string"){O.innerHTML!==t.html&&(O.innerHTML=t.html),h();return}O.textContent!==n&&(O.textContent=n,h())}},[t,n]);const m=()=>{const O=l.current;if(!O){r(null),f(!0);return}const C=O.innerHTML,A=O.innerText,T=jb({html:C,plainText:A});r(T),h()},g=O=>{var C;document.execCommand("styleWithCSS",!1,"false"),document.execCommand(O),(C=l.current)==null||C.focus(),m()},v=O=>{var A;const C=O.target.value;document.execCommand("styleWithCSS",!1,"true"),document.execCommand("foreColor",!1,C),(A=l.current)==null||A.focus(),m()},x=()=>{var O;document.execCommand("removeFormat"),document.execCommand("unlink"),(O=l.current)==null||O.focus(),m()},_=()=>{m()},j=()=>{m()},S=O=>{O.preventDefault();const C=O.clipboardData.getData("text/plain");document.execCommand("insertText",!1,C),m()},N=O=>{if((O.metaKey||O.ctrlKey)&&O.key.toLowerCase()==="b"){O.preventDefault(),g("bold");return}if((O.metaKey||O.ctrlKey)&&O.key.toLowerCase()==="i"){O.preventDefault(),g("italic");return}(O.metaKey||O.ctrlKey)&&O.key.toLowerCase()==="x"&&O.shiftKey&&(O.preventDefault(),g("strikeThrough"))};return c.jsxs("div",{className:`space-y-2 ${i??""}`,children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("button",{type:"button",className:Lf,onClick:()=>g("bold"),"aria-label":"Mettre en gras",children:c.jsx(e8,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsx("button",{type:"button",className:Lf,onClick:()=>g("italic"),"aria-label":"Mettre en italique",children:c.jsx(W8,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsx("button",{type:"button",className:Lf,onClick:()=>g("strikeThrough"),"aria-label":"Barrer",children:c.jsx(K$,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[c.jsx(g$,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Choisir une couleur"}),c.jsx("input",{type:"color",className:"h-8 w-8 cursor-pointer rounded-full border border-slate-200",onChange:v,"aria-label":"Sélectionner une couleur de texte"})]}),c.jsx("button",{type:"button",className:Lf,onClick:x,"aria-label":"Supprimer la mise en forme",children:c.jsx(da,{className:"h-4 w-4","aria-hidden":"true"})})]}),c.jsxs("div",{className:"relative",children:[s&&d&&c.jsx("div",{className:"pointer-events-none absolute left-4 top-3 text-sm text-slate-400",children:s}),c.jsx("div",{id:e,ref:l,className:"ui-textarea w-full min-h-[120px] whitespace-pre-wrap break-words px-4 py-3",contentEditable:!0,role:"textbox","aria-multiline":"true",suppressContentEditableWarning:!0,onInput:_,onBlur:j,onKeyDown:N,onPaste:S})]})]})},lre=["Inter","Poppins","Roboto","Montserrat","Playfair Display","Lora","Open Sans","Georgia, serif","Arial, sans-serif"],cre=["14px","16px","18px","20px","24px","clamp(1rem, 2vw, 1.5rem)"],oR=["#0f172a","#111827","#f8fafc","#ffffff","#e2e8f0","#f97316","transparent","currentColor"],ure=new Set(pz),dre=new Set(["navigation.style.background","hero.style.background","about.style.background","menu.style.background","findUs.style.background","footer.style.background"]),fre=new Set(["hero.backgroundImage","about.image","menu.image","navigation.brandLogo","navigation.staffLogo"]),hre={"navigation.brand":"Nom de la marque","navigation.brandLogo":"Logo principal","navigation.staffLogo":"Logo d'accès équipe","navigation.links.home":"Lien Accueil","navigation.links.about":"Lien À propos","navigation.links.menu":"Lien Menu","navigation.links.contact":"Lien Contact","navigation.links.loginCta":"Bouton d'accès staff","navigation.style.background":"Fond de la navigation","hero.title":"Titre du hero","hero.subtitle":"Sous-titre du hero","hero.ctaLabel":"Bouton principal du hero","hero.historyTitle":"Titre de l'historique","hero.reorderCtaLabel":"Bouton de réassort","hero.backgroundImage":"Image du hero","hero.style.background":"Fond du hero","about.title":"Titre À propos","about.description":"Texte À propos","about.image":"Image À propos","about.style.background":"Fond À propos","menu.title":"Titre du menu","menu.ctaLabel":"Bouton du menu","menu.loadingLabel":"Texte de chargement du menu","menu.image":"Image du menu","menu.style.background":"Fond du menu","findUs.title":"Titre Encuéntranos","findUs.addressLabel":"Libellé de l'adresse (Encuéntranos)","findUs.address":"Adresse (Encuéntranos)","findUs.cityLabel":"Libellé de contact","findUs.city":"Email (Encuéntranos)","findUs.hoursLabel":"Libellé des horaires","findUs.hours":"Horaires","findUs.mapLabel":"Libellé du lien carte","findUs.style.background":"Fond Encuéntranos","footer.text":"Texte du pied de page","footer.style.background":"Fond du pied de page"},mre={...hre},pre=[{id:"preview",label:"Aperçu"},{id:"custom",label:"Personnalisation"}],gre=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Om=e=>{var i;const{type:t,name:n}=e;if(t.startsWith("image/"))return"image";if(t.startsWith("video/"))return"video";if(t.startsWith("audio/"))return"audio";if(t.includes("font"))return"font";const r=(i=n.split(".").pop())==null?void 0:i.toLowerCase();return r&&["ttf","otf","woff","woff2"].includes(r)?"font":"raw"},$f=e=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(e):JSON.parse(JSON.stringify(e)),lR=(e,t,n)=>{const r=t.split("."),i=r.pop();if(!i)return;let s=e;r.forEach(l=>{if(s&&typeof s=="object"){const d=s[l];d&&typeof d=="object"?s[l]=Array.isArray(d)?[...d]:{...d}:s[l]={},s=s[l]}}),s&&typeof s=="object"&&(s[i]=n)},vre=(e,t,n)=>{const r={};n.fontFamily&&n.fontFamily.trim().length>0&&(r.fontFamily=n.fontFamily.trim()),n.fontSize&&n.fontSize.trim().length>0&&(r.fontSize=n.fontSize.trim()),n.textColor&&n.textColor.trim().length>0&&(r.textColor=n.textColor.trim()),n.backgroundColor&&n.backgroundColor.trim().length>0&&(r.backgroundColor=n.backgroundColor.trim());const i={...e.elementStyles};Object.keys(r).length===0?delete i[t]:i[t]=r,e.elementStyles=i},yre=(e,t,n)=>{const r={...e.elementRichText};n&&n.html.trim().length>0?r[t]=n:delete r[t],e.elementRichText=r},bre=(e,t,n)=>{const r=Fa(t),i={...e[r]},s={...i.style,background:{...n}};i.style=s,e[r]=i},xre=(e,t)=>{var s;const n=((s=e.assets)==null?void 0:s.library)??[],r=n.findIndex(l=>l.url===t.url||l.id===t.id),i=r>=0?n.map((l,d)=>d===r?t:l):[...n,t];e.assets={...e.assets,library:i}},cR=(e,t)=>{const n=t.split(".");let r=e;for(const i of n){if(!r||typeof r!="object")return"";r=r[i]}return typeof r=="string"?r:""},wre=(e,t)=>{const n=cR(e,t);return n.trim().length>0?n:null},_re=(e,t)=>e.elementStyles[t]??{},jre=(e,t)=>e.elementRichText[t]??null,Sre=(e,t)=>{const n=Fa(t);return e[n].style.background},Ow=(e,t)=>{const n=e.name.replace(/\.[^/.]+$/,"").trim()||"media",r=Om(e),i=r==="font"?Ob(n):n;return{id:gre(),name:i,url:t,format:e.type||"application/octet-stream",bytes:e.size,type:r,createdAt:new Date().toISOString()}},BC='a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])',Nre=typeof window<"u"?b.useLayoutEffect:b.useEffect,FC=e=>typeof window<"u"&&window.CSS&&typeof window.CSS.escape=="function"?window.CSS.escape(e):e.replace(/"/g,'\\"'),Ere=e=>{if(!e)return null;const{x:t,y:n,top:r,left:i,bottom:s,right:l,width:d,height:f}=e;return{x:t,y:n,top:r,left:i,bottom:s,right:l,width:d,height:f}},Cw=({title:e,onClose:t,children:n,footer:r,anchor:i,elementId:s})=>{const l=b.useId(),d=b.useRef(null),[f,h]=b.useState({top:0,left:0}),[m,g]=b.useState("top"),[v,x]=b.useState(!1),[_,j]=b.useState(!1),[S,N]=b.useState(null);b.useEffect(()=>{x(!0)},[]);const O=b.useCallback(()=>{if(typeof window>"u")return;const A=d.current;if(!A)return;const T=`[data-element-id="${FC(s)}"]`,k=document.querySelector(T),R=(k==null?void 0:k.getBoundingClientRect())??i,{width:L,height:K}=A.getBoundingClientRect(),B=document.documentElement.clientWidth,F=window.innerHeight,z=16,Q=12;if(!R){const P=Math.max(z,(B-L)/2),M=Math.max(z,(F-K)/2);h({top:M,left:P}),g("top"),j(!0),N(null);return}let H=R.top-K-Q,X="top";if(H<z&&(H=R.bottom+Q,X="bottom"),H+K>F-z){const P=R.top-z,M=F-R.bottom-z;P>M?(H=Math.max(z,R.top-K-Q),X="top"):(H=Math.min(F-K-z,R.bottom+Q),X="bottom")}const I=R.left+R.width/2-L/2,$=B-L-z,U=Math.max(z,Math.min(I,$));h({top:H,left:U}),g(X),j(!0);const ee=Math.max(U+12,Math.min(R.left+R.width/2,U+L-12)),W=X==="top"?H+K-6:H-6;N({top:W,left:ee-6})},[i,s]);if(Nre(()=>{v&&O()},[O,v]),b.useEffect(()=>{if(!v)return;const A=()=>O();window.addEventListener("scroll",A,!0),window.addEventListener("resize",A);const T=`[data-element-id="${FC(s)}"]`,k=document.querySelector(T),R=[];if(typeof ResizeObserver<"u"){const L=new ResizeObserver(()=>O());k&&L.observe(k);const K=d.current;K&&L.observe(K),R.push(L)}return()=>{window.removeEventListener("scroll",A,!0),window.removeEventListener("resize",A),R.forEach(L=>L.disconnect())}},[O,s,v]),b.useEffect(()=>{if(!v)return;const A=T=>{if(T.key==="Escape"){T.preventDefault(),t();return}if(T.key==="Tab"){const k=d.current;if(!k)return;const R=Array.from(k.querySelectorAll(BC)).filter(B=>B.tabIndex!==-1&&!B.hasAttribute("disabled")&&!B.getAttribute("aria-hidden"));if(R.length===0){T.preventDefault(),k.focus();return}const L=R[0],K=R[R.length-1];if(T.shiftKey){(document.activeElement===L||!k.contains(document.activeElement))&&(T.preventDefault(),K.focus());return}document.activeElement===K&&(T.preventDefault(),L.focus())}};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[t,v]),b.useEffect(()=>{if(!v)return;const A=T=>{const k=d.current;k&&(k.contains(T.target)||t())};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[t,v]),b.useEffect(()=>{if(!v)return;const A=d.current;if(!A)return;(A.querySelectorAll(BC)[0]??A).focus({preventScroll:!0})},[v]),typeof document>"u"||!v)return null;const C=c.jsxs("div",{className:"fixed inset-0 z-[60] pointer-events-none",children:[c.jsxs("div",{ref:d,role:"dialog","aria-modal":"true","aria-labelledby":l,tabIndex:-1,className:"pointer-events-auto flex w-[min(90vw,32rem)] flex-col overflow-hidden rounded-3xl bg-white shadow-2xl ring-1 ring-slate-200",style:{position:"absolute",top:f.top,left:f.left,opacity:_?1:0},children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4",children:[c.jsx("h2",{id:l,className:"text-lg font-semibold text-slate-900",children:e}),c.jsxs("button",{type:"button",onClick:t,className:"rounded-full p-1 text-slate-500 transition hover:text-slate-900 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary",children:[c.jsx(da,{className:"h-5 w-5","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Fermer"})]})]}),c.jsx("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-5",children:n}),c.jsx("div",{className:"flex items-center justify-end gap-3 border-t border-slate-200 bg-slate-50 px-6 py-4",children:r})]}),S?c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none absolute h-3 w-3 rotate-45 rounded-sm bg-white shadow-[0_0_0_1px_rgba(148,163,184,0.35)] ${m==="top"?"translate-y-[-4px]":"translate-y-[4px]"}`,style:{top:S.top,left:S.left,opacity:_?1:0}}):null]});return db.createPortal(C,document.body)},Ore=({element:e,label:t,draft:n,onApply:r,onClose:i,fontOptions:s,onAssetAdded:l,anchor:d})=>{const f=`${e.replace(/\./g,"-")}-text-form`,h=cR(n,e),m=jre(n,e),g=_re(n,e),[v,x]=b.useState(h),[_,j]=b.useState(m),[S,N]=b.useState(g.fontFamily??""),[O,C]=b.useState(g.fontSize??""),[A,T]=b.useState(g.textColor??""),[k,R]=b.useState(g.backgroundColor??""),[L,K]=b.useState(null),[B,F]=b.useState(!1);b.useEffect(()=>{x(h),j(m),N(g.fontFamily??""),C(g.fontSize??""),T(g.textColor??""),R(g.backgroundColor??"")},[h,m,g.fontFamily,g.fontSize,g.textColor,g.backgroundColor]);const z=X=>{X.preventDefault();const I=v;r($=>(lR($,e,I),yre($,e,_),vre($,e,{fontFamily:S,fontSize:O,textColor:A,backgroundColor:k}),$)),i()},Q=async X=>{var $;const I=($=X.target.files)==null?void 0:$[0];if(I){K(null),F(!0);try{const U=await lu(I,{tags:[Om(I)]}),ee=Ow(I,U);l(ee),N(ee.name)}catch(U){K(U instanceof Error?U.message:"Impossible de téléverser la police. Réessayez plus tard.")}finally{F(!1),X.target.value=""}}},H=c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:i,className:"ui-btn-secondary",children:"Annuler"}),c.jsx("button",{type:"submit",form:f,className:"ui-btn-primary",children:"Enregistrer"})]});return c.jsx(Cw,{title:`Personnaliser ${t}`,onClose:i,footer:H,anchor:d,elementId:e,children:c.jsxs("form",{id:f,onSubmit:z,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${f}-plain`,className:"block text-sm font-medium text-slate-700",children:"Texte de base"}),c.jsx("textarea",{id:`${f}-plain`,className:"ui-textarea mt-2 w-full",value:v,onChange:X=>{x(X.target.value),j(null)},rows:3})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mise en forme avancée"}),c.jsx(ore,{id:`${f}-rich`,value:_,fallback:v,onChange:X=>{j(X),X&&x(X.plainText)},className:"mt-2",placeholder:"Saisissez votre texte..."}),c.jsx("button",{type:"button",className:"mt-2 text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>j(null),children:"Supprimer la mise en forme personnalisée"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${f}-font`,className:"block text-sm font-medium text-slate-700",children:"Police"}),c.jsx("input",{id:`${f}-font`,className:"ui-input mt-2 w-full",value:S,onChange:X=>N(X.target.value),list:`${f}-font-options`,placeholder:"Ex: Poppins"}),c.jsx("datalist",{id:`${f}-font-options`,children:s.map(X=>c.jsx("option",{value:X},X))}),c.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:".woff,.woff2,.ttf,.otf",className:"absolute inset-0 cursor-pointer opacity-0",onChange:Q,disabled:B}),c.jsx(Ou,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une police"]}),B&&c.jsx(cu,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"})]}),L&&c.jsx("p",{className:"mt-2 text-sm text-amber-600",children:L})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${f}-size`,className:"block text-sm font-medium text-slate-700",children:"Taille du texte"}),c.jsx("input",{id:`${f}-size`,className:"ui-input mt-2 w-full",value:O,onChange:X=>C(X.target.value),list:`${f}-size-options`,placeholder:"Ex: 18px"}),c.jsx("datalist",{id:`${f}-size-options`,children:cre.map(X=>c.jsx("option",{value:X},X))})]})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${f}-text-color`,className:"block text-sm font-medium text-slate-700",children:"Couleur du texte"}),c.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[c.jsx("input",{id:`${f}-text-color`,className:"ui-input w-full",value:A,onChange:X=>T(X.target.value),placeholder:"Ex: #0f172a"}),c.jsx("input",{type:"color",className:"h-10 w-10 rounded border border-slate-200",value:A||"#000000",onChange:X=>T(X.target.value),"aria-label":"Choisir la couleur du texte"})]}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:oR.map(X=>c.jsx("button",{type:"button",onClick:()=>T(X),className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:X==="transparent"?"#ffffff":X},title:X},X))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${f}-bg-color`,className:"block text-sm font-medium text-slate-700",children:"Couleur de fond"}),c.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[c.jsx("input",{id:`${f}-bg-color`,className:"ui-input w-full",value:k,onChange:X=>R(X.target.value),placeholder:"Ex: rgba(255,255,255,0.8)"}),c.jsx("input",{type:"color",className:"h-10 w-10 rounded border border-slate-200",value:k||"#ffffff",onChange:X=>R(X.target.value),"aria-label":"Choisir la couleur d'arrière-plan"})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-4",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Laissez un champ vide pour hériter du style par défaut."}),c.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>{N(""),C(""),T(""),R("")},children:"Réinitialiser le style"})]})]})})},Cre=({element:e,label:t,draft:n,onApply:r,onClose:i,onAssetAdded:s,anchor:l})=>{const d=`${e.replace(/\./g,"-")}-image-form`,f=wre(n,e)??"",[h,m]=b.useState(f),[g,v]=b.useState(null),[x,_]=b.useState(!1);b.useEffect(()=>{m(f)},[f]);const j=C=>{C.preventDefault();const A=h.trim(),T=Ya(A)??(A.length>0?A:null);r(k=>(lR(k,e,T),k)),i()},S=async C=>{var T;const A=(T=C.target.files)==null?void 0:T[0];if(A){v(null),_(!0);try{const k=await lu(A,{tags:[Om(A)]}),R=Ow(A,k);s(R),m(k)}catch(k){v(k instanceof Error?k.message:"Téléversement impossible. Vérifiez votre connexion.")}finally{_(!1),C.target.value=""}}},N=c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:i,className:"ui-btn-secondary",children:"Annuler"}),c.jsx("button",{type:"submit",form:d,className:"ui-btn-primary",children:"Enregistrer"})]}),O=h.trim();return c.jsx(Cw,{title:`Personnaliser ${t}`,onClose:i,footer:N,anchor:l,elementId:e,children:c.jsxs("form",{id:d,onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${d}-input`,className:"block text-sm font-medium text-slate-700",children:"URL de l'image"}),c.jsx("input",{id:`${d}-input`,className:"ui-input mt-2 w-full",value:h,onChange:C=>m(C.target.value),placeholder:"https://..."}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Fournissez une URL Cloudinary ou téléversez un fichier pour l'ajouter automatiquement."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:S,disabled:x}),c.jsx(Ou,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer un média"]}),x&&c.jsx(cu,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("button",{type:"button",onClick:()=>m(""),className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",children:"Supprimer le média"})]}),g&&c.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[c.jsx(ca,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),c.jsx("p",{children:g})]}),O&&c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:c.jsx("img",{src:O,alt:"Aperçu",className:"h-56 w-full object-cover"})})]})})},Are=({element:e,label:t,draft:n,onApply:r,onClose:i,onAssetAdded:s,anchor:l})=>{const d=`${e.replace(/\./g,"-")}-background-form`,f=Sre(n,e),[h,m]=b.useState(f.type),[g,v]=b.useState(f.color),[x,_]=b.useState(f.image??""),[j,S]=b.useState(null),[N,O]=b.useState(!1);b.useEffect(()=>{m(f.type),v(f.color),_(f.image??"")},[f.type,f.color,f.image]);const C=R=>{R.preventDefault();const L=g.trim()||"transparent",K=x.trim(),B=Ya(K)??(K.length>0?K:null);r(F=>(bre(F,e,{type:h,color:L,image:h==="image"?B:null}),F)),i()},A=async R=>{var K;const L=(K=R.target.files)==null?void 0:K[0];if(L){S(null),O(!0);try{const B=await lu(L,{tags:[Om(L)]}),F=Ow(L,B);s(F),_(B),m("image")}catch(B){S(B instanceof Error?B.message:"Téléversement impossible.")}finally{O(!1),R.target.value=""}}},T=c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",onClick:i,className:"ui-btn-secondary",children:"Annuler"}),c.jsx("button",{type:"submit",form:d,className:"ui-btn-primary",children:"Enregistrer"})]}),k=x.trim();return c.jsx(Cw,{title:`Personnaliser ${t}`,onClose:i,footer:T,anchor:l,elementId:e,children:c.jsxs("form",{id:d,onSubmit:C,className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${h==="color"?"ring-2 ring-brand-primary":""}`,onClick:()=>m("color"),children:"Couleur"}),c.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${h==="image"?"ring-2 ring-brand-primary":""}`,onClick:()=>m("image"),children:"Image"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${d}-color`,className:"block text-sm font-medium text-slate-700",children:"Couleur"}),c.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[c.jsx("input",{id:`${d}-color`,className:"ui-input w-full",value:g,onChange:R=>v(R.target.value),placeholder:"Ex: rgba(15,23,42,0.75)"}),c.jsx("input",{type:"color",className:"h-10 w-10 rounded border border-slate-200",value:g||"#ffffff",onChange:R=>v(R.target.value),"aria-label":"Choisir la couleur d'arrière-plan"})]}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:oR.map(R=>c.jsx("button",{type:"button",onClick:()=>v(R),className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:R==="transparent"?"#ffffff":R},title:R},R))})]}),h==="image"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`${d}-image`,className:"block text-sm font-medium text-slate-700",children:"URL de l'image"}),c.jsx("input",{id:`${d}-image`,className:"ui-input mt-2 w-full",value:x,onChange:R=>_(R.target.value),placeholder:"https://..."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 cursor-pointer opacity-0",onChange:A,disabled:N}),c.jsx(Ou,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une image"]}),N&&c.jsx(cu,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("button",{type:"button",onClick:()=>_(""),className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",children:"Retirer l'image"})]}),j&&c.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[c.jsx(ca,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),c.jsx("p",{children:j})]}),k&&c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:c.jsx("img",{src:k,alt:"Aperçu",className:"h-48 w-full object-cover"})})]})]})})},kre=()=>{const{content:e,loading:t,error:n,updateContent:r}=Au(),[i,s]=b.useState(()=>e?$f(e):null),[l,d]=b.useState(null),[f,h]=b.useState(null),[m,g]=b.useState("custom"),[v,x]=b.useState(null),[_,j]=b.useState(!1),[S,N]=b.useState(null),[O,C]=b.useState(null),[A,T]=b.useState([]),[k,R]=b.useState(!1),[L,K]=b.useState(null);b.useEffect(()=>{e&&s($f(e))},[e]),b.useEffect(()=>{let U=!0;return(async()=>{R(!0),K(null);try{const W=await Ne.getBestSellerProducts();U&&T(W)}catch(W){U&&K(W instanceof Error?W.message:"Impossible de charger les produits mis en avant.")}finally{U&&R(!1)}})(),()=>{U=!1}},[]),b.useEffect(()=>{if(!O)return;const U=setTimeout(()=>C(null),4e3);return()=>clearTimeout(U)},[O]);const B=b.useCallback(U=>{s(ee=>{if(!ee)return ee;const W=$f(ee);return U(W)})},[]),F=b.useCallback(U=>{s(ee=>{if(!ee)return ee;const W=$f(ee);return xre(W,U),W})},[]),z=b.useCallback((U,ee)=>{d(U),h(ee.zone),x(Ere(ee.anchor))},[]),Q=b.useCallback(()=>{d(null),h(null),x(null)},[]),H=async()=>{j(!0),N(null),C(null);try{if(!i)throw new Error("Le brouillon est indisponible.");const U=await r(i);s(U),C("Modifications enregistrées avec succès.")}catch(U){N(U instanceof Error?U.message:"Une erreur est survenue lors de la sauvegarde.")}finally{j(!1)}},X=b.useMemo(()=>{const U=Array.from(lre);if(!i)return U;const ee=i.assets.library.filter(W=>W.type==="font").map(W=>Ob(W.name));return Array.from(new Set([...U,...ee]))},[i]),I=l?mre[l]??l:null,$=l?dre.has(l)?"background":fre.has(l)?"image":(ure.has(l),"text"):null;return t?c.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[c.jsx(cu,{className:"h-10 w-10 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Chargement du contenu du site…"})]}):!e||!i?c.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[c.jsx(ca,{className:"h-6 w-6 text-amber-500","aria-hidden":"true"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Le contenu du site est en cours d'initialisation…"})]}):c.jsxs("div",{className:"space-y-8 px-4 sm:px-6 lg:px-0",children:[c.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Site public"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Cliquez sur l'icône en forme de crayon pour personnaliser chaque bloc de contenu, image ou logo."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[O&&c.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-emerald-50 px-4 py-2 text-sm text-emerald-700",children:[c.jsx(x8,{className:"h-4 w-4","aria-hidden":"true"}),O]}),S&&c.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-amber-50 px-4 py-2 text-sm text-amber-700",children:[c.jsx(ca,{className:"h-4 w-4","aria-hidden":"true"}),S]}),c.jsx("button",{type:"button",onClick:H,className:"ui-btn-primary",disabled:_,children:_?"Enregistrement…":"Enregistrer les modifications"})]})]}),n&&c.jsxs("div",{className:"flex items-start gap-3 rounded-3xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[c.jsx(ca,{className:"h-5 w-5","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{children:n}),c.jsx("p",{className:"mt-1",children:"Les valeurs affichées correspondent à la configuration par défaut."})]})]}),c.jsx("nav",{className:"flex w-full items-center gap-2 overflow-x-auto rounded-full bg-slate-100 p-1",children:pre.map(U=>c.jsx("button",{type:"button",onClick:()=>g(U.id),className:`flex-1 rounded-full px-4 py-2 text-sm font-medium transition ${m===U.id?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:U.label},U.id))}),c.jsx("div",{children:m==="preview"?c.jsx("div",{className:"mx-auto w-full max-w-6xl",children:c.jsx("div",{className:"rounded-[2.5rem] border border-slate-200 bg-slate-50 p-6",children:c.jsx(A2,{content:i,bestSellerProducts:A,onEdit:()=>{},activeZone:null,showEditButtons:!1})})}):c.jsxs("div",{className:"space-y-4",children:[L&&c.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[c.jsx(ca,{className:"h-5 w-5","aria-hidden":"true"}),c.jsx("p",{children:L})]}),c.jsx("div",{className:"mx-auto w-full max-w-6xl",children:c.jsx(A2,{content:i,bestSellerProducts:A,onEdit:(U,ee)=>z(U,ee),activeZone:f})}),k&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[c.jsx(cu,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Chargement des produits populaires…"]})]})}),l&&$==="text"&&I&&c.jsx(Ore,{element:l,label:I,draft:i,onApply:B,onClose:Q,fontOptions:X,onAssetAdded:F,anchor:v}),l&&$==="image"&&I&&c.jsx(Cre,{element:l,label:I,draft:i,onApply:B,onClose:Q,onAssetAdded:F,anchor:v}),l&&$==="background"&&I&&c.jsx(Are,{element:l,label:I,draft:i,onApply:B,onClose:Q,onAssetAdded:F,anchor:v})]})},uR=({onLogout:e})=>{const t=pa(),n=cr.useCallback(()=>{e&&e(),t("/login",{replace:!0})},[t,e]);return c.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Accès non autorisé"}),c.jsx("p",{className:"text-base text-gray-600",children:"Votre rôle ne dispose actuellement d'aucune page accessible. Veuillez contacter un administrateur ou revenir à l'écran de connexion."})]}),c.jsx("button",{type:"button",onClick:n,className:"rounded-md bg-brand-primary px-6 py-3 text-white transition hover:bg-brand-primary/90 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",children:"Retour à la connexion"})]})},Tre=[{path:"/dashboard",permissionKey:"/dashboard",Component:Bte},{path:"/para-llevar",permissionKey:"/para-llevar",Component:une},{path:"/ventes",permissionKey:"/ventes",Component:Vte},{path:"/commande/:tableId",permissionKey:"/ventes",Component:ane},{path:"/cocina",permissionKey:"/cocina",Component:cne},{path:"/resume-ventes",permissionKey:"/resume-ventes",Component:sre},{path:"/ingredients",permissionKey:"/ingredients",Component:dne},{path:"/produits",permissionKey:"/produits",Component:pne},{path:"/promotions",permissionKey:"/promotions",Component:Wne},{path:Va,permissionKey:Va,Component:kre}],dR=()=>c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-primary"})}),fR=({children:e,permissionKey:t})=>{var d;const{role:n,loading:r,logout:i}=ga();if(r)return c.jsx(dR,{});if(!n)return c.jsx(Xf,{to:"/",replace:!0});const s=t?(d=n.permissions)==null?void 0:d[t]:void 0;if(!(t?ah(s):!0)){const f=Eb(n);return f?c.jsx(Xf,{to:f,replace:!0}):c.jsx(uR,{onLogout:i})}return e},Pre=()=>{const{role:e,loading:t,logout:n}=ga(),[,r]=b.useState(()=>{const s=Qf();return s?s.orderId:null});if(Au(),b.useEffect(()=>{const s=()=>{const l=Qf();r(l?l.orderId:null)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),t)return c.jsx(dR,{});if(!e)return c.jsx(EU,{});const i=Eb(e);return i?c.jsx(Xf,{to:i,replace:!0}):c.jsx(uR,{onLogout:n})},Mre=()=>c.jsx(fR,{children:c.jsx(hU,{})}),Rre=()=>c.jsxs(R4,{children:[c.jsx(_s,{path:"/",element:c.jsx(Pre,{})}),c.jsx(_s,{path:"/login",element:c.jsx(Xf,{to:"/",replace:!0})}),c.jsx(_s,{path:"/commande-client",element:c.jsx(nre,{})}),c.jsx(_s,{element:c.jsx(Mre,{}),children:Tre.map(({path:e,permissionKey:t,Component:n})=>c.jsx(_s,{path:e,element:c.jsx(fR,{permissionKey:t,children:c.jsx(n,{})})},e))}),c.jsx(_s,{path:"*",element:c.jsx(rre,{})})]}),Dre=()=>c.jsx(oU,{children:c.jsx(rI,{children:c.jsx(Rre,{})})}),hR=document.getElementById("root");if(!hR)throw new Error("Could not find root element to mount to");const Ire=U5.createRoot(hR);Ire.render(c.jsx(cr.StrictMode,{children:c.jsx(Dre,{})}));
