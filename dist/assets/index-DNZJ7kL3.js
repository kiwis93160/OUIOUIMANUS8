var L4=Object.defineProperty;var $4=(e,t,n)=>t in e?L4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wg=(e,t,n)=>$4(e,typeof t!="symbol"?t+"":t,n);function z4(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function U4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Xg={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function q4(){if(TS)return Kc;TS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var d in i)d!=="key"&&(s[d]=i[d])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Kc.Fragment=t,Kc.jsx=n,Kc.jsxs=n,Kc}var PS;function B4(){return PS||(PS=1,Xg.exports=q4()),Xg.exports}var c=B4(),Qg={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function F4(){if(MS)return qe;MS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function N(T,I,U){this.props=T,this.context=I,this.refs=S,this.updater=U||j}N.prototype.isReactComponent={},N.prototype.setState=function(T,I){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,I,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=N.prototype;function C(T,I,U){this.props=T,this.context=I,this.refs=S,this.updater=U||j}var k=C.prototype=new E;k.constructor=C,_(k,N.prototype),k.isPureReactComponent=!0;var A=Array.isArray;function R(){}var D={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function G(T,I,U){var te=U.ref;return{$$typeof:e,type:T,key:I,ref:te!==void 0?te:null,props:U}}function K(T,I){return G(T.type,I,T.props)}function B(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function L(T){var I={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(U){return I[U]})}var V=/\/+/g;function H(T,I){return typeof T=="object"&&T!==null&&T.key!=null?L(""+T.key):I.toString(36)}function se(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(R,R):(T.status="pending",T.then(function(I){T.status==="pending"&&(T.status="fulfilled",T.value=I)},function(I){T.status==="pending"&&(T.status="rejected",T.reason=I)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function M(T,I,U,te,re){var ce=typeof T;(ce==="undefined"||ce==="boolean")&&(T=null);var he=!1;if(T===null)he=!0;else switch(ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(T.$$typeof){case e:case t:he=!0;break;case m:return he=T._init,M(he(T._payload),I,U,te,re)}}if(he)return re=re(T),he=te===""?"."+H(T,0):te,A(re)?(U="",he!=null&&(U=he.replace(V,"$&/")+"/"),M(re,I,U,"",function(ge){return ge})):re!=null&&(B(re)&&(re=K(re,U+(re.key==null||T&&T.key===re.key?"":(""+re.key).replace(V,"$&/")+"/")+he)),I.push(re)),1;he=0;var Ne=te===""?".":te+":";if(A(T))for(var de=0;de<T.length;de++)te=T[de],ce=Ne+H(te,de),he+=M(te,I,U,ce,re);else if(de=x(T),typeof de=="function")for(T=de.call(T),de=0;!(te=T.next()).done;)te=te.value,ce=Ne+H(te,de++),he+=M(te,I,U,ce,re);else if(ce==="object"){if(typeof T.then=="function")return M(se(T),I,U,te,re);throw I=String(T),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return he}function z(T,I,U){if(T==null)return T;var te=[],re=0;return M(T,te,"","",function(ce){return I.call(U,ce,re++)}),te}function q(T){if(T._status===-1){var I=T._result;I=I(),I.then(function(U){(T._status===0||T._status===-1)&&(T._status=1,T._result=U)},function(U){(T._status===0||T._status===-1)&&(T._status=2,T._result=U)}),T._status===-1&&(T._status=0,T._result=I)}if(T._status===1)return T._result.default;throw T._result}var J=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},X={map:z,forEach:function(T,I,U){z(T,function(){I.apply(this,arguments)},U)},count:function(T){var I=0;return z(T,function(){I++}),I},toArray:function(T){return z(T,function(I){return I})||[]},only:function(T){if(!B(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return qe.Activity=g,qe.Children=X,qe.Component=N,qe.Fragment=n,qe.Profiler=i,qe.PureComponent=C,qe.StrictMode=r,qe.Suspense=f,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qe.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},qe.cache=function(T){return function(){return T.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(T,I,U){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var te=_({},T.props),re=T.key;if(I!=null)for(ce in I.key!==void 0&&(re=""+I.key),I)!$.call(I,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&I.ref===void 0||(te[ce]=I[ce]);var ce=arguments.length-2;if(ce===1)te.children=U;else if(1<ce){for(var he=Array(ce),Ne=0;Ne<ce;Ne++)he[Ne]=arguments[Ne+2];te.children=he}return G(T.type,re,te)},qe.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:s,_context:T},T},qe.createElement=function(T,I,U){var te,re={},ce=null;if(I!=null)for(te in I.key!==void 0&&(ce=""+I.key),I)$.call(I,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(re[te]=I[te]);var he=arguments.length-2;if(he===1)re.children=U;else if(1<he){for(var Ne=Array(he),de=0;de<he;de++)Ne[de]=arguments[de+2];re.children=Ne}if(T&&T.defaultProps)for(te in he=T.defaultProps,he)re[te]===void 0&&(re[te]=he[te]);return G(T,ce,re)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(T){return{$$typeof:d,render:T}},qe.isValidElement=B,qe.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:q}},qe.memo=function(T,I){return{$$typeof:h,type:T,compare:I===void 0?null:I}},qe.startTransition=function(T){var I=D.T,U={};D.T=U;try{var te=T(),re=D.S;re!==null&&re(U,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(R,J)}catch(ce){J(ce)}finally{I!==null&&U.types!==null&&(I.types=U.types),D.T=I}},qe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qe.use=function(T){return D.H.use(T)},qe.useActionState=function(T,I,U){return D.H.useActionState(T,I,U)},qe.useCallback=function(T,I){return D.H.useCallback(T,I)},qe.useContext=function(T){return D.H.useContext(T)},qe.useDebugValue=function(){},qe.useDeferredValue=function(T,I){return D.H.useDeferredValue(T,I)},qe.useEffect=function(T,I){return D.H.useEffect(T,I)},qe.useEffectEvent=function(T){return D.H.useEffectEvent(T)},qe.useId=function(){return D.H.useId()},qe.useImperativeHandle=function(T,I,U){return D.H.useImperativeHandle(T,I,U)},qe.useInsertionEffect=function(T,I){return D.H.useInsertionEffect(T,I)},qe.useLayoutEffect=function(T,I){return D.H.useLayoutEffect(T,I)},qe.useMemo=function(T,I){return D.H.useMemo(T,I)},qe.useOptimistic=function(T,I){return D.H.useOptimistic(T,I)},qe.useReducer=function(T,I,U){return D.H.useReducer(T,I,U)},qe.useRef=function(T){return D.H.useRef(T)},qe.useState=function(T){return D.H.useState(T)},qe.useSyncExternalStore=function(T,I,U){return D.H.useSyncExternalStore(T,I,U)},qe.useTransition=function(){return D.H.useTransition()},qe.version="19.2.0",qe}var RS;function Ul(){return RS||(RS=1,Qg.exports=F4()),Qg.exports}var b=Ul();const pr=aa(b),H4=z4({__proto__:null,default:pr},[b]);var Jg={exports:{}},Gc={},Zg={exports:{}},ev={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS;function K4(){return DS||(DS=1,(function(e){function t(M,z){var q=M.length;M.push(z);e:for(;0<q;){var J=q-1>>>1,X=M[J];if(0<i(X,z))M[J]=z,M[q]=X,q=J;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var z=M[0],q=M.pop();if(q!==z){M[0]=q;e:for(var J=0,X=M.length,T=X>>>1;J<T;){var I=2*(J+1)-1,U=M[I],te=I+1,re=M[te];if(0>i(U,q))te<X&&0>i(re,U)?(M[J]=re,M[te]=q,J=te):(M[J]=U,M[I]=q,J=I);else if(te<X&&0>i(re,q))M[J]=re,M[te]=q,J=te;else break e}}return z}function i(M,z){var q=M.sortIndex-z.sortIndex;return q!==0?q:M.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var f=[],h=[],m=1,g=null,v=3,x=!1,j=!1,_=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(M){for(var z=n(h);z!==null;){if(z.callback===null)r(h);else if(z.startTime<=M)r(h),z.sortIndex=z.expirationTime,t(f,z);else break;z=n(h)}}function A(M){if(_=!1,k(M),!j)if(n(f)!==null)j=!0,R||(R=!0,L());else{var z=n(h);z!==null&&se(A,z.startTime-M)}}var R=!1,D=-1,$=5,G=-1;function K(){return S?!0:!(e.unstable_now()-G<$)}function B(){if(S=!1,R){var M=e.unstable_now();G=M;var z=!0;try{e:{j=!1,_&&(_=!1,E(D),D=-1),x=!0;var q=v;try{t:{for(k(M),g=n(f);g!==null&&!(g.expirationTime>M&&K());){var J=g.callback;if(typeof J=="function"){g.callback=null,v=g.priorityLevel;var X=J(g.expirationTime<=M);if(M=e.unstable_now(),typeof X=="function"){g.callback=X,k(M),z=!0;break t}g===n(f)&&r(f),k(M)}else r(f);g=n(f)}if(g!==null)z=!0;else{var T=n(h);T!==null&&se(A,T.startTime-M),z=!1}}break e}finally{g=null,v=q,x=!1}z=void 0}}finally{z?L():R=!1}}}var L;if(typeof C=="function")L=function(){C(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=B,L=function(){H.postMessage(null)}}else L=function(){N(B,0)};function se(M,z){D=N(function(){M(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(M){switch(v){case 1:case 2:case 3:var z=3;break;default:z=v}var q=v;v=z;try{return M()}finally{v=q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=v;v=M;try{return z()}finally{v=q}},e.unstable_scheduleCallback=function(M,z,q){var J=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,M){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=q+X,M={id:m++,callback:z,priorityLevel:M,startTime:q,expirationTime:X,sortIndex:-1},q>J?(M.sortIndex=q,t(h,M),n(f)===null&&M===n(h)&&(_?(E(D),D=-1):_=!0,se(A,q-J))):(M.sortIndex=X,t(f,M),j||x||(j=!0,R||(R=!0,L()))),M},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(M){var z=v;return function(){var q=v;v=z;try{return M.apply(this,arguments)}finally{v=q}}}})(ev)),ev}var IS;function G4(){return IS||(IS=1,Zg.exports=K4()),Zg.exports}var tv={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function Y4(){if(LS)return Pn;LS=1;var e=Ul();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,m)},Pn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},Pn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Pn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Pn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,g=d(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):m==="script"&&r.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Pn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=d(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Pn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=d(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Pn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=d(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Pn.requestFormReset=function(f){r.d.r(f)},Pn.unstable_batchedUpdates=function(f,h){return f(h)},Pn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},Pn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Pn.version="19.2.0",Pn}var $S;function tk(){if($S)return tv.exports;$S=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tv.exports=Y4(),tv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function V4(){if(zS)return Gc;zS=1;var e=G4(),t=Ul(),n=tk();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var u=a,p=o;;){var y=u.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===u)return f(y),a;if(w===p)return f(y),o;w=w.sibling}throw Error(r(188))}if(u.return!==p.return)u=y,p=w;else{for(var O=!1,P=y.child;P;){if(P===u){O=!0,u=y,p=w;break}if(P===p){O=!0,p=y,u=w;break}P=P.sibling}if(!O){for(P=w.child;P;){if(P===u){O=!0,u=w,p=y;break}if(P===p){O=!0,p=w,u=y;break}P=P.sibling}if(!O)throw Error(r(189))}}if(u.alternate!==p)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var V=Symbol.for("react.client.reference");function H(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===V?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case N:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList";case G:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case j:return"Portal";case C:return a.displayName||"Context";case E:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return o=a.displayName||null,o!==null?o:H(a.type)||"Memo";case $:o=a._payload,a=a._init;try{return H(a(o))}catch{}}return null}var se=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},J=[],X=-1;function T(a){return{current:a}}function I(a){0>X||(a.current=J[X],J[X]=null,X--)}function U(a,o){X++,J[X]=a.current,a.current=o}var te=T(null),re=T(null),ce=T(null),he=T(null);function Ne(a,o){switch(U(ce,o),U(re,a),U(te,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?eS(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=eS(o),a=tS(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}I(te),U(te,a)}function de(){I(te),I(re),I(ce)}function ge(a){a.memoizedState!==null&&U(he,a);var o=te.current,u=tS(o,a.type);o!==u&&(U(re,a),U(te,u))}function ie(a){re.current===a&&(I(te),I(re)),he.current===a&&(I(he),qc._currentValue=q)}var Q,Ce;function Re(a){if(Q===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Q=o&&o[1]||"",Ce=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+a+Ce}var ut=!1;function we(a,o){if(!a||ut)return"";ut=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(oe){var ne=oe}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(oe){ne=oe}a.call(fe.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),O=w[0],P=w[1];if(O&&P){var F=O.split(`
`),ee=P.split(`
`);for(y=p=0;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;for(;y<ee.length&&!ee[y].includes("DetermineComponentFrameRoot");)y++;if(p===F.length||y===ee.length)for(p=F.length-1,y=ee.length-1;1<=p&&0<=y&&F[p]!==ee[y];)y--;for(;1<=p&&0<=y;p--,y--)if(F[p]!==ee[y]){if(p!==1||y!==1)do if(p--,y--,0>y||F[p]!==ee[y]){var le=`
`+F[p].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=p&&0<=y);break}}}finally{ut=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Re(u):""}function be(a,o){switch(a.tag){case 26:case 27:case 5:return Re(a.type);case 16:return Re("Lazy");case 13:return a.child!==o&&o!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return we(a.type,!1);case 11:return we(a.type.render,!1);case 1:return we(a.type,!0);case 31:return Re("Activity");default:return""}}function ze(a){try{var o="",u=null;do o+=be(a,u),u=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Et=Object.prototype.hasOwnProperty,et=e.unstable_scheduleCallback,dt=e.unstable_cancelCallback,Vt=e.unstable_shouldYield,Fr=e.unstable_requestPaint,Xe=e.unstable_now,jn=e.unstable_getCurrentPriorityLevel,er=e.unstable_ImmediatePriority,sn=e.unstable_UserBlockingPriority,me=e.unstable_NormalPriority,_e=e.unstable_LowPriority,De=e.unstable_IdlePriority,rt=e.log,Qe=e.unstable_setDisableYieldValue,ft=null,Ue=null;function at(a){if(typeof rt=="function"&&Qe(a),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(ft,a)}catch{}}var ht=Math.clz32?Math.clz32:hi,kt=Math.log,tr=Math.LN2;function hi(a){return a>>>=0,a===0?32:31-(kt(a)/tr|0)|0}var Hr=256,In=262144,xr=4194304;function Mt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function pe(a,o,u){var p=a.pendingLanes;if(p===0)return 0;var y=0,w=a.suspendedLanes,O=a.pingedLanes;a=a.warmLanes;var P=p&134217727;return P!==0?(p=P&~w,p!==0?y=Mt(p):(O&=P,O!==0?y=Mt(O):u||(u=P&~a,u!==0&&(y=Mt(u))))):(P=p&~w,P!==0?y=Mt(P):O!==0?y=Mt(O):u||(u=p&~a,u!==0&&(y=Mt(u)))),y===0?0:o!==0&&o!==y&&(o&w)===0&&(w=y&-y,u=o&-o,w>=u||w===32&&(u&4194048)!==0)?o:y}function Le(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function yt(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var a=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),a}function ke(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function jt(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function qn(a,o,u,p,y,w){var O=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var P=a.entanglements,F=a.expirationTimes,ee=a.hiddenUpdates;for(u=O&~u;0<u;){var le=31-ht(u),fe=1<<le;P[le]=0,F[le]=-1;var ne=ee[le];if(ne!==null)for(ee[le]=null,le=0;le<ne.length;le++){var oe=ne[le];oe!==null&&(oe.lane&=-536870913)}u&=~fe}p!==0&&ja(a,p,0),w!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=w&~(O&~o))}function ja(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-ht(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|u&261930}function tc(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var p=31-ht(u),y=1<<p;y&o|a[p]&o&&(a[p]|=o),u&=~y}}function sd(a,o){var u=o&-o;return u=(u&42)!==0?1:go(u),(u&(a.suspendedLanes|o))!==0?0:u}function go(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Sa(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function mi(){var a=z.p;return a!==0?a:(a=window.event,a===void 0?32:SS(a.type))}function Uw(a,o){var u=z.p;try{return z.p=a,o()}finally{z.p=u}}var pi=Math.random().toString(36).slice(2),Sn="__reactFiber$"+pi,Bn="__reactProps$"+pi,vo="__reactContainer$"+pi,Um="__reactEvents$"+pi,ER="__reactListeners$"+pi,OR="__reactHandles$"+pi,qw="__reactResources$"+pi,nc="__reactMarker$"+pi;function qm(a){delete a[Sn],delete a[Bn],delete a[Um],delete a[ER],delete a[OR]}function yo(a){var o=a[Sn];if(o)return o;for(var u=a.parentNode;u;){if(o=u[vo]||u[Sn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=lS(a);a!==null;){if(u=a[Sn])return u;a=lS(a)}return o}a=u,u=a.parentNode}return null}function bo(a){if(a=a[Sn]||a[vo]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function rc(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function xo(a){var o=a[qw];return o||(o=a[qw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function mn(a){a[nc]=!0}var Bw=new Set,Fw={};function cs(a,o){wo(a,o),wo(a+"Capture",o)}function wo(a,o){for(Fw[a]=o,a=0;a<o.length;a++)Bw.add(o[a])}var CR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hw={},Kw={};function kR(a){return Et.call(Kw,a)?!0:Et.call(Hw,a)?!1:CR.test(a)?Kw[a]=!0:(Hw[a]=!0,!1)}function od(a,o,u){if(kR(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function ld(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function Na(a,o,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+p)}}function wr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Gw(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function AR(a,o,u){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,w=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(O){u=""+O,w.call(this,O)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Bm(a){if(!a._valueTracker){var o=Gw(a)?"checked":"value";a._valueTracker=AR(a,o,""+a[o])}}function Yw(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return a&&(p=Gw(a)?a.checked?"true":"false":a.value),a=p,a!==u?(o.setValue(a),!0):!1}function cd(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var TR=/[\n"\\]/g;function _r(a){return a.replace(TR,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Fm(a,o,u,p,y,w,O,P){a.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.type=O:a.removeAttribute("type"),o!=null?O==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+wr(o)):a.value!==""+wr(o)&&(a.value=""+wr(o)):O!=="submit"&&O!=="reset"||a.removeAttribute("value"),o!=null?Hm(a,O,wr(o)):u!=null?Hm(a,O,wr(u)):p!=null&&a.removeAttribute("value"),y==null&&w!=null&&(a.defaultChecked=!!w),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.name=""+wr(P):a.removeAttribute("name")}function Vw(a,o,u,p,y,w,O,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),o!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){Bm(a);return}u=u!=null?""+wr(u):"",o=o!=null?""+wr(o):u,P||o===a.value||(a.value=o),a.defaultValue=o}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=P?a.checked:!!p,a.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(a.name=O),Bm(a)}function Hm(a,o,u){o==="number"&&cd(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function _o(a,o,u,p){if(a=a.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<a.length;u++)y=o.hasOwnProperty("$"+a[u].value),a[u].selected!==y&&(a[u].selected=y),y&&p&&(a[u].defaultSelected=!0)}else{for(u=""+wr(u),o=null,y=0;y<a.length;y++){if(a[y].value===u){a[y].selected=!0,p&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function Ww(a,o,u){if(o!=null&&(o=""+wr(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+wr(u):""}function Xw(a,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(r(92));if(se(p)){if(1<p.length)throw Error(r(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=wr(o),a.defaultValue=u,p=a.textContent,p===u&&p!==""&&p!==null&&(a.value=p),Bm(a)}function jo(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var PR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qw(a,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,u):typeof u!="number"||u===0||PR.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function Jw(a,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var y in o)p=o[y],o.hasOwnProperty(y)&&u[y]!==p&&Qw(a,y,p)}else for(var w in o)o.hasOwnProperty(w)&&Qw(a,w,o[w])}function Km(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),RR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ud(a){return RR.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ea(){}var Gm=null;function Ym(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var So=null,No=null;function Zw(a){var o=bo(a);if(o&&(a=o.stateNode)){var u=a[Bn]||null;e:switch(a=o.stateNode,o.type){case"input":if(Fm(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+_r(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==a&&p.form===a.form){var y=p[Bn]||null;if(!y)throw Error(r(90));Fm(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===a.form&&Yw(p)}break e;case"textarea":Ww(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&_o(a,!!u.multiple,o,!1)}}}var Vm=!1;function e_(a,o,u){if(Vm)return a(o,u);Vm=!0;try{var p=a(o);return p}finally{if(Vm=!1,(So!==null||No!==null)&&(Qd(),So&&(o=So,a=No,No=So=null,Zw(o),a)))for(o=0;o<a.length;o++)Zw(a[o])}}function ac(a,o){var u=a.stateNode;if(u===null)return null;var p=u[Bn]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=!1;if(Oa)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){Wm=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{Wm=!1}var gi=null,Xm=null,dd=null;function t_(){if(dd)return dd;var a,o=Xm,u=o.length,p,y="value"in gi?gi.value:gi.textContent,w=y.length;for(a=0;a<u&&o[a]===y[a];a++);var O=u-a;for(p=1;p<=O&&o[u-p]===y[w-p];p++);return dd=y.slice(a,1<p?1-p:void 0)}function fd(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function hd(){return!0}function n_(){return!1}function Fn(a){function o(u,p,y,w,O){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var P in a)a.hasOwnProperty(P)&&(u=a[P],this[P]=u?u(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?hd:n_,this.isPropagationStopped=n_,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=hd)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=hd)},persist:function(){},isPersistent:hd}),o}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=Fn(us),sc=g({},us,{view:0,detail:0}),DR=Fn(sc),Qm,Jm,oc,pd=g({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ep,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==oc&&(oc&&a.type==="mousemove"?(Qm=a.screenX-oc.screenX,Jm=a.screenY-oc.screenY):Jm=Qm=0,oc=a),Qm)},movementY:function(a){return"movementY"in a?a.movementY:Jm}}),r_=Fn(pd),IR=g({},pd,{dataTransfer:0}),LR=Fn(IR),$R=g({},sc,{relatedTarget:0}),Zm=Fn($R),zR=g({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),UR=Fn(zR),qR=g({},us,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),BR=Fn(qR),FR=g({},us,{data:0}),a_=Fn(FR),HR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=GR[a])?!!o[a]:!1}function ep(){return YR}var VR=g({},sc,{key:function(a){if(a.key){var o=HR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=fd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?KR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ep,charCode:function(a){return a.type==="keypress"?fd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?fd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),WR=Fn(VR),XR=g({},pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i_=Fn(XR),QR=g({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ep}),JR=Fn(QR),ZR=g({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),eD=Fn(ZR),tD=g({},pd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),nD=Fn(tD),rD=g({},us,{newState:0,oldState:0}),aD=Fn(rD),iD=[9,13,27,32],tp=Oa&&"CompositionEvent"in window,lc=null;Oa&&"documentMode"in document&&(lc=document.documentMode);var sD=Oa&&"TextEvent"in window&&!lc,s_=Oa&&(!tp||lc&&8<lc&&11>=lc),o_=" ",l_=!1;function c_(a,o){switch(a){case"keyup":return iD.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u_(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Eo=!1;function oD(a,o){switch(a){case"compositionend":return u_(o);case"keypress":return o.which!==32?null:(l_=!0,o_);case"textInput":return a=o.data,a===o_&&l_?null:a;default:return null}}function lD(a,o){if(Eo)return a==="compositionend"||!tp&&c_(a,o)?(a=t_(),dd=Xm=gi=null,Eo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return s_&&o.locale!=="ko"?null:o.data;default:return null}}var cD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d_(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!cD[a.type]:o==="textarea"}function f_(a,o,u,p){So?No?No.push(p):No=[p]:So=p,o=af(o,"onChange"),0<o.length&&(u=new md("onChange","change",null,u,p),a.push({event:u,listeners:o}))}var cc=null,uc=null;function uD(a){Vj(a,0)}function gd(a){var o=rc(a);if(Yw(o))return a}function h_(a,o){if(a==="change")return o}var m_=!1;if(Oa){var np;if(Oa){var rp="oninput"in document;if(!rp){var p_=document.createElement("div");p_.setAttribute("oninput","return;"),rp=typeof p_.oninput=="function"}np=rp}else np=!1;m_=np&&(!document.documentMode||9<document.documentMode)}function g_(){cc&&(cc.detachEvent("onpropertychange",v_),uc=cc=null)}function v_(a){if(a.propertyName==="value"&&gd(uc)){var o=[];f_(o,uc,a,Ym(a)),e_(uD,o)}}function dD(a,o,u){a==="focusin"?(g_(),cc=o,uc=u,cc.attachEvent("onpropertychange",v_)):a==="focusout"&&g_()}function fD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return gd(uc)}function hD(a,o){if(a==="click")return gd(o)}function mD(a,o){if(a==="input"||a==="change")return gd(o)}function pD(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var nr=typeof Object.is=="function"?Object.is:pD;function dc(a,o){if(nr(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!Et.call(o,y)||!nr(a[y],o[y]))return!1}return!0}function y_(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function b_(a,o){var u=y_(a);a=0;for(var p;u;){if(u.nodeType===3){if(p=a+u.textContent.length,a<=o&&p>=o)return{node:u,offset:o-a};a=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=y_(u)}}function x_(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?x_(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function w_(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=cd(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=cd(a.document)}return o}function ap(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var gD=Oa&&"documentMode"in document&&11>=document.documentMode,Oo=null,ip=null,fc=null,sp=!1;function __(a,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;sp||Oo==null||Oo!==cd(p)||(p=Oo,"selectionStart"in p&&ap(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),fc&&dc(fc,p)||(fc=p,p=af(ip,"onSelect"),0<p.length&&(o=new md("onSelect","select",null,o,u),a.push({event:o,listeners:p}),o.target=Oo)))}function ds(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var Co={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},op={},j_={};Oa&&(j_=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function fs(a){if(op[a])return op[a];if(!Co[a])return a;var o=Co[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in j_)return op[a]=o[u];return a}var S_=fs("animationend"),N_=fs("animationiteration"),E_=fs("animationstart"),vD=fs("transitionrun"),yD=fs("transitionstart"),bD=fs("transitioncancel"),O_=fs("transitionend"),C_=new Map,lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lp.push("scrollEnd");function Kr(a,o){C_.set(a,o),cs(o,[a])}var vd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},jr=[],ko=0,cp=0;function yd(){for(var a=ko,o=cp=ko=0;o<a;){var u=jr[o];jr[o++]=null;var p=jr[o];jr[o++]=null;var y=jr[o];jr[o++]=null;var w=jr[o];if(jr[o++]=null,p!==null&&y!==null){var O=p.pending;O===null?y.next=y:(y.next=O.next,O.next=y),p.pending=y}w!==0&&k_(u,y,w)}}function bd(a,o,u,p){jr[ko++]=a,jr[ko++]=o,jr[ko++]=u,jr[ko++]=p,cp|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function up(a,o,u,p){return bd(a,o,u,p),xd(a)}function hs(a,o){return bd(a,null,null,o),xd(a)}function k_(a,o,u){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u);for(var y=!1,w=a.return;w!==null;)w.childLanes|=u,p=w.alternate,p!==null&&(p.childLanes|=u),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(y=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,y&&o!==null&&(y=31-ht(u),a=w.hiddenUpdates,p=a[y],p===null?a[y]=[o]:p.push(o),o.lane=u|536870912),w):null}function xd(a){if(50<Rc)throw Rc=0,bg=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Ao={};function xD(a,o,u,p){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(a,o,u,p){return new xD(a,o,u,p)}function dp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ca(a,o){var u=a.alternate;return u===null?(u=rr(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function A_(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function wd(a,o,u,p,y,w){var O=0;if(p=a,typeof a=="function")dp(a)&&(O=1);else if(typeof a=="string")O=N4(a,u,te.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case G:return a=rr(31,u,o,y),a.elementType=G,a.lanes=w,a;case _:return ms(u.children,y,w,o);case S:O=8,y|=24;break;case N:return a=rr(12,u,o,y|2),a.elementType=N,a.lanes=w,a;case A:return a=rr(13,u,o,y),a.elementType=A,a.lanes=w,a;case R:return a=rr(19,u,o,y),a.elementType=R,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:O=10;break e;case E:O=9;break e;case k:O=11;break e;case D:O=14;break e;case $:O=16,p=null;break e}O=29,u=Error(r(130,a===null?"null":typeof a,"")),p=null}return o=rr(O,u,o,y),o.elementType=a,o.type=p,o.lanes=w,o}function ms(a,o,u,p){return a=rr(7,a,p,o),a.lanes=u,a}function fp(a,o,u){return a=rr(6,a,null,o),a.lanes=u,a}function T_(a){var o=rr(18,null,null,0);return o.stateNode=a,o}function hp(a,o,u){return o=rr(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var P_=new WeakMap;function Sr(a,o){if(typeof a=="object"&&a!==null){var u=P_.get(a);return u!==void 0?u:(o={value:a,source:o,stack:ze(o)},P_.set(a,o),o)}return{value:a,source:o,stack:ze(o)}}var To=[],Po=0,_d=null,hc=0,Nr=[],Er=0,vi=null,oa=1,la="";function ka(a,o){To[Po++]=hc,To[Po++]=_d,_d=a,hc=o}function M_(a,o,u){Nr[Er++]=oa,Nr[Er++]=la,Nr[Er++]=vi,vi=a;var p=oa;a=la;var y=32-ht(p)-1;p&=~(1<<y),u+=1;var w=32-ht(o)+y;if(30<w){var O=y-y%5;w=(p&(1<<O)-1).toString(32),p>>=O,y-=O,oa=1<<32-ht(o)+y|u<<y|p,la=w+a}else oa=1<<w|u<<y|p,la=a}function mp(a){a.return!==null&&(ka(a,1),M_(a,1,0))}function pp(a){for(;a===_d;)_d=To[--Po],To[Po]=null,hc=To[--Po],To[Po]=null;for(;a===vi;)vi=Nr[--Er],Nr[Er]=null,la=Nr[--Er],Nr[Er]=null,oa=Nr[--Er],Nr[Er]=null}function R_(a,o){Nr[Er++]=oa,Nr[Er++]=la,Nr[Er++]=vi,oa=o.id,la=o.overflow,vi=a}var Nn=null,At=null,tt=!1,yi=null,Or=!1,gp=Error(r(519));function bi(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mc(Sr(o,a)),gp}function D_(a){var o=a.stateNode,u=a.type,p=a.memoizedProps;switch(o[Sn]=a,o[Bn]=p,u){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(u=0;u<Ic.length;u++)We(Ic[u],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),Vw(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),Xw(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||Jj(o.textContent,u)?(p.popover!=null&&(We("beforetoggle",o),We("toggle",o)),p.onScroll!=null&&We("scroll",o),p.onScrollEnd!=null&&We("scrollend",o),p.onClick!=null&&(o.onclick=Ea),o=!0):o=!1,o||bi(a,!0)}function I_(a){for(Nn=a.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Nn=Nn.return}}function Mo(a){if(a!==Nn)return!1;if(!tt)return I_(a),tt=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Rg(a.type,a.memoizedProps)),u=!u),u&&At&&bi(a),I_(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));At=oS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));At=oS(a)}else o===27?(o=At,Mi(a.type)?(a=zg,zg=null,At=a):At=o):At=Nn?kr(a.stateNode.nextSibling):null;return!0}function ps(){At=Nn=null,tt=!1}function vp(){var a=yi;return a!==null&&(Yn===null?Yn=a:Yn.push.apply(Yn,a),yi=null),a}function mc(a){yi===null?yi=[a]:yi.push(a)}var yp=T(null),gs=null,Aa=null;function xi(a,o,u){U(yp,o._currentValue),o._currentValue=u}function Ta(a){a._currentValue=yp.current,I(yp)}function bp(a,o,u){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===u)break;a=a.return}}function xp(a,o,u,p){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var w=y.dependencies;if(w!==null){var O=y.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=y;for(var F=0;F<o.length;F++)if(P.context===o[F]){w.lanes|=u,P=w.alternate,P!==null&&(P.lanes|=u),bp(w.return,u,a),p||(O=null);break e}w=P.next}}else if(y.tag===18){if(O=y.return,O===null)throw Error(r(341));O.lanes|=u,w=O.alternate,w!==null&&(w.lanes|=u),bp(O,u,a),O=null}else O=y.child;if(O!==null)O.return=y;else for(O=y;O!==null;){if(O===a){O=null;break}if(y=O.sibling,y!==null){y.return=O.return,O=y;break}O=O.return}y=O}}function Ro(a,o,u,p){a=null;for(var y=o,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var O=y.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var P=y.type;nr(y.pendingProps.value,O.value)||(a!==null?a.push(P):a=[P])}}else if(y===he.current){if(O=y.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(qc):a=[qc])}y=y.return}a!==null&&xp(o,a,u,p),o.flags|=262144}function jd(a){for(a=a.firstContext;a!==null;){if(!nr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function vs(a){gs=a,Aa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function En(a){return L_(gs,a)}function Sd(a,o){return gs===null&&vs(a),L_(a,o)}function L_(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Aa===null){if(a===null)throw Error(r(308));Aa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Aa=Aa.next=o;return u}var wD=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},_D=e.unstable_scheduleCallback,jD=e.unstable_NormalPriority,Wt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wp(){return{controller:new wD,data:new Map,refCount:0}}function pc(a){a.refCount--,a.refCount===0&&_D(jD,function(){a.controller.abort()})}var gc=null,_p=0,Do=0,Io=null;function SD(a,o){if(gc===null){var u=gc=[];_p=0,Do=Ng(),Io={status:"pending",value:void 0,then:function(p){u.push(p)}}}return _p++,o.then($_,$_),o}function $_(){if(--_p===0&&gc!==null){Io!==null&&(Io.status="fulfilled");var a=gc;gc=null,Do=0,Io=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ND(a,o){var u=[],p={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(p.status="rejected",p.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),p}var z_=M.S;M.S=function(a,o){_j=Xe(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&SD(a,o),z_!==null&&z_(a,o)};var ys=T(null);function jp(){var a=ys.current;return a!==null?a:St.pooledCache}function Nd(a,o){o===null?U(ys,ys.current):U(ys,o.pool)}function U_(){var a=jp();return a===null?null:{parent:Wt._currentValue,pool:a}}var Lo=Error(r(460)),Sp=Error(r(474)),Ed=Error(r(542)),Od={then:function(){}};function q_(a){return a=a.status,a==="fulfilled"||a==="rejected"}function B_(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(Ea,Ea),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,H_(a),a;default:if(typeof o.status=="string")o.then(Ea,Ea);else{if(a=St,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=p}},function(p){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,H_(a),a}throw xs=o,Lo}}function bs(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(xs=u,Lo):u}}var xs=null;function F_(){if(xs===null)throw Error(r(459));var a=xs;return xs=null,a}function H_(a){if(a===Lo||a===Ed)throw Error(r(483))}var $o=null,vc=0;function Cd(a){var o=vc;return vc+=1,$o===null&&($o=[]),B_($o,a,o)}function yc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function kd(a,o){throw o.$$typeof===v?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function K_(a){function o(W,Y){if(a){var Z=W.deletions;Z===null?(W.deletions=[Y],W.flags|=16):Z.push(Y)}}function u(W,Y){if(!a)return null;for(;Y!==null;)o(W,Y),Y=Y.sibling;return null}function p(W){for(var Y=new Map;W!==null;)W.key!==null?Y.set(W.key,W):Y.set(W.index,W),W=W.sibling;return Y}function y(W,Y){return W=Ca(W,Y),W.index=0,W.sibling=null,W}function w(W,Y,Z){return W.index=Z,a?(Z=W.alternate,Z!==null?(Z=Z.index,Z<Y?(W.flags|=67108866,Y):Z):(W.flags|=67108866,Y)):(W.flags|=1048576,Y)}function O(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function P(W,Y,Z,ue){return Y===null||Y.tag!==6?(Y=fp(Z,W.mode,ue),Y.return=W,Y):(Y=y(Y,Z),Y.return=W,Y)}function F(W,Y,Z,ue){var Me=Z.type;return Me===_?le(W,Y,Z.props.children,ue,Z.key):Y!==null&&(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===$&&bs(Me)===Y.type)?(Y=y(Y,Z.props),yc(Y,Z),Y.return=W,Y):(Y=wd(Z.type,Z.key,Z.props,null,W.mode,ue),yc(Y,Z),Y.return=W,Y)}function ee(W,Y,Z,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=hp(Z,W.mode,ue),Y.return=W,Y):(Y=y(Y,Z.children||[]),Y.return=W,Y)}function le(W,Y,Z,ue,Me){return Y===null||Y.tag!==7?(Y=ms(Z,W.mode,ue,Me),Y.return=W,Y):(Y=y(Y,Z),Y.return=W,Y)}function fe(W,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=fp(""+Y,W.mode,Z),Y.return=W,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Z=wd(Y.type,Y.key,Y.props,null,W.mode,Z),yc(Z,Y),Z.return=W,Z;case j:return Y=hp(Y,W.mode,Z),Y.return=W,Y;case $:return Y=bs(Y),fe(W,Y,Z)}if(se(Y)||L(Y))return Y=ms(Y,W.mode,Z,null),Y.return=W,Y;if(typeof Y.then=="function")return fe(W,Cd(Y),Z);if(Y.$$typeof===C)return fe(W,Sd(W,Y),Z);kd(W,Y)}return null}function ne(W,Y,Z,ue){var Me=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Me!==null?null:P(W,Y,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return Z.key===Me?F(W,Y,Z,ue):null;case j:return Z.key===Me?ee(W,Y,Z,ue):null;case $:return Z=bs(Z),ne(W,Y,Z,ue)}if(se(Z)||L(Z))return Me!==null?null:le(W,Y,Z,ue,null);if(typeof Z.then=="function")return ne(W,Y,Cd(Z),ue);if(Z.$$typeof===C)return ne(W,Y,Sd(W,Z),ue);kd(W,Z)}return null}function oe(W,Y,Z,ue,Me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return W=W.get(Z)||null,P(Y,W,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return W=W.get(ue.key===null?Z:ue.key)||null,F(Y,W,ue,Me);case j:return W=W.get(ue.key===null?Z:ue.key)||null,ee(Y,W,ue,Me);case $:return ue=bs(ue),oe(W,Y,Z,ue,Me)}if(se(ue)||L(ue))return W=W.get(Z)||null,le(Y,W,ue,Me,null);if(typeof ue.then=="function")return oe(W,Y,Z,Cd(ue),Me);if(ue.$$typeof===C)return oe(W,Y,Z,Sd(Y,ue),Me);kd(Y,ue)}return null}function Oe(W,Y,Z,ue){for(var Me=null,it=null,Ae=Y,He=Y=0,Ze=null;Ae!==null&&He<Z.length;He++){Ae.index>He?(Ze=Ae,Ae=null):Ze=Ae.sibling;var st=ne(W,Ae,Z[He],ue);if(st===null){Ae===null&&(Ae=Ze);break}a&&Ae&&st.alternate===null&&o(W,Ae),Y=w(st,Y,He),it===null?Me=st:it.sibling=st,it=st,Ae=Ze}if(He===Z.length)return u(W,Ae),tt&&ka(W,He),Me;if(Ae===null){for(;He<Z.length;He++)Ae=fe(W,Z[He],ue),Ae!==null&&(Y=w(Ae,Y,He),it===null?Me=Ae:it.sibling=Ae,it=Ae);return tt&&ka(W,He),Me}for(Ae=p(Ae);He<Z.length;He++)Ze=oe(Ae,W,He,Z[He],ue),Ze!==null&&(a&&Ze.alternate!==null&&Ae.delete(Ze.key===null?He:Ze.key),Y=w(Ze,Y,He),it===null?Me=Ze:it.sibling=Ze,it=Ze);return a&&Ae.forEach(function($i){return o(W,$i)}),tt&&ka(W,He),Me}function $e(W,Y,Z,ue){if(Z==null)throw Error(r(151));for(var Me=null,it=null,Ae=Y,He=Y=0,Ze=null,st=Z.next();Ae!==null&&!st.done;He++,st=Z.next()){Ae.index>He?(Ze=Ae,Ae=null):Ze=Ae.sibling;var $i=ne(W,Ae,st.value,ue);if($i===null){Ae===null&&(Ae=Ze);break}a&&Ae&&$i.alternate===null&&o(W,Ae),Y=w($i,Y,He),it===null?Me=$i:it.sibling=$i,it=$i,Ae=Ze}if(st.done)return u(W,Ae),tt&&ka(W,He),Me;if(Ae===null){for(;!st.done;He++,st=Z.next())st=fe(W,st.value,ue),st!==null&&(Y=w(st,Y,He),it===null?Me=st:it.sibling=st,it=st);return tt&&ka(W,He),Me}for(Ae=p(Ae);!st.done;He++,st=Z.next())st=oe(Ae,W,He,st.value,ue),st!==null&&(a&&st.alternate!==null&&Ae.delete(st.key===null?He:st.key),Y=w(st,Y,He),it===null?Me=st:it.sibling=st,it=st);return a&&Ae.forEach(function(I4){return o(W,I4)}),tt&&ka(W,He),Me}function wt(W,Y,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===_&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:e:{for(var Me=Z.key;Y!==null;){if(Y.key===Me){if(Me=Z.type,Me===_){if(Y.tag===7){u(W,Y.sibling),ue=y(Y,Z.props.children),ue.return=W,W=ue;break e}}else if(Y.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===$&&bs(Me)===Y.type){u(W,Y.sibling),ue=y(Y,Z.props),yc(ue,Z),ue.return=W,W=ue;break e}u(W,Y);break}else o(W,Y);Y=Y.sibling}Z.type===_?(ue=ms(Z.props.children,W.mode,ue,Z.key),ue.return=W,W=ue):(ue=wd(Z.type,Z.key,Z.props,null,W.mode,ue),yc(ue,Z),ue.return=W,W=ue)}return O(W);case j:e:{for(Me=Z.key;Y!==null;){if(Y.key===Me)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){u(W,Y.sibling),ue=y(Y,Z.children||[]),ue.return=W,W=ue;break e}else{u(W,Y);break}else o(W,Y);Y=Y.sibling}ue=hp(Z,W.mode,ue),ue.return=W,W=ue}return O(W);case $:return Z=bs(Z),wt(W,Y,Z,ue)}if(se(Z))return Oe(W,Y,Z,ue);if(L(Z)){if(Me=L(Z),typeof Me!="function")throw Error(r(150));return Z=Me.call(Z),$e(W,Y,Z,ue)}if(typeof Z.then=="function")return wt(W,Y,Cd(Z),ue);if(Z.$$typeof===C)return wt(W,Y,Sd(W,Z),ue);kd(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(u(W,Y.sibling),ue=y(Y,Z),ue.return=W,W=ue):(u(W,Y),ue=fp(Z,W.mode,ue),ue.return=W,W=ue),O(W)):u(W,Y)}return function(W,Y,Z,ue){try{vc=0;var Me=wt(W,Y,Z,ue);return $o=null,Me}catch(Ae){if(Ae===Lo||Ae===Ed)throw Ae;var it=rr(29,Ae,null,W.mode);return it.lanes=ue,it.return=W,it}finally{}}}var ws=K_(!0),G_=K_(!1),wi=!1;function Np(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ep(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function _i(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ji(a,o,u){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,o=xd(a),k_(a,null,u),o}return bd(a,p,o,u),xd(a)}function bc(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,tc(a,u)}}function Op(a,o){var u=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?y=w=O:w=w.next=O,u=u.next}while(u!==null);w===null?y=w=o:w=w.next=o}else y=w=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var Cp=!1;function xc(){if(Cp){var a=Io;if(a!==null)throw a}}function wc(a,o,u,p){Cp=!1;var y=a.updateQueue;wi=!1;var w=y.firstBaseUpdate,O=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var F=P,ee=F.next;F.next=null,O===null?w=ee:O.next=ee,O=F;var le=a.alternate;le!==null&&(le=le.updateQueue,P=le.lastBaseUpdate,P!==O&&(P===null?le.firstBaseUpdate=ee:P.next=ee,le.lastBaseUpdate=F))}if(w!==null){var fe=y.baseState;O=0,le=ee=F=null,P=w;do{var ne=P.lane&-536870913,oe=ne!==P.lane;if(oe?(Je&ne)===ne:(p&ne)===ne){ne!==0&&ne===Do&&(Cp=!0),le!==null&&(le=le.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Oe=a,$e=P;ne=o;var wt=u;switch($e.tag){case 1:if(Oe=$e.payload,typeof Oe=="function"){fe=Oe.call(wt,fe,ne);break e}fe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=$e.payload,ne=typeof Oe=="function"?Oe.call(wt,fe,ne):Oe,ne==null)break e;fe=g({},fe,ne);break e;case 2:wi=!0}}ne=P.callback,ne!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=y.callbacks,oe===null?y.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:P.tag,payload:P.payload,callback:P.callback,next:null},le===null?(ee=le=oe,F=fe):le=le.next=oe,O|=ne;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;oe=P,P=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);le===null&&(F=fe),y.baseState=F,y.firstBaseUpdate=ee,y.lastBaseUpdate=le,w===null&&(y.shared.lanes=0),Ci|=O,a.lanes=O,a.memoizedState=fe}}function Y_(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function V_(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Y_(u[a],o)}var zo=T(null),Ad=T(0);function W_(a,o){a=Ua,U(Ad,a),U(zo,o),Ua=a|o.baseLanes}function kp(){U(Ad,Ua),U(zo,zo.current)}function Ap(){Ua=Ad.current,I(zo),I(Ad)}var ar=T(null),Cr=null;function Si(a){var o=a.alternate;U(Ht,Ht.current&1),U(ar,a),Cr===null&&(o===null||zo.current!==null||o.memoizedState!==null)&&(Cr=a)}function Tp(a){U(Ht,Ht.current),U(ar,a),Cr===null&&(Cr=a)}function X_(a){a.tag===22?(U(Ht,Ht.current),U(ar,a),Cr===null&&(Cr=a)):Ni()}function Ni(){U(Ht,Ht.current),U(ar,ar.current)}function ir(a){I(ar),Cr===a&&(Cr=null),I(Ht)}var Ht=T(0);function Td(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Lg(u)||$g(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pa=0,Fe=null,bt=null,Xt=null,Pd=!1,Uo=!1,_s=!1,Md=0,_c=0,qo=null,ED=0;function Bt(){throw Error(r(321))}function Pp(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!nr(a[u],o[u]))return!1;return!0}function Mp(a,o,u,p,y,w){return Pa=w,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,M.H=a===null||a.memoizedState===null?M1:Vp,_s=!1,w=u(p,y),_s=!1,Uo&&(w=J_(o,u,p,y)),Q_(a),w}function Q_(a){M.H=Nc;var o=bt!==null&&bt.next!==null;if(Pa=0,Xt=bt=Fe=null,Pd=!1,_c=0,qo=null,o)throw Error(r(300));a===null||Qt||(a=a.dependencies,a!==null&&jd(a)&&(Qt=!0))}function J_(a,o,u,p){Fe=a;var y=0;do{if(Uo&&(qo=null),_c=0,Uo=!1,25<=y)throw Error(r(301));if(y+=1,Xt=bt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}M.H=R1,w=o(u,p)}while(Uo);return w}function OD(){var a=M.H,o=a.useState()[0];return o=typeof o.then=="function"?jc(o):o,a=a.useState()[0],(bt!==null?bt.memoizedState:null)!==a&&(Fe.flags|=1024),o}function Rp(){var a=Md!==0;return Md=0,a}function Dp(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function Ip(a){if(Pd){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Pd=!1}Pa=0,Xt=bt=Fe=null,Uo=!1,_c=Md=0,qo=null}function Ln(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Fe.memoizedState=Xt=a:Xt=Xt.next=a,Xt}function Kt(){if(bt===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=bt.next;var o=Xt===null?Fe.memoizedState:Xt.next;if(o!==null)Xt=o,bt=a;else{if(a===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));bt=a,a={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Xt===null?Fe.memoizedState=Xt=a:Xt=Xt.next=a}return Xt}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jc(a){var o=_c;return _c+=1,qo===null&&(qo=[]),a=B_(qo,a,o),o=Fe,(Xt===null?o.memoizedState:Xt.next)===null&&(o=o.alternate,M.H=o===null||o.memoizedState===null?M1:Vp),a}function Dd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return jc(a);if(a.$$typeof===C)return En(a)}throw Error(r(438,String(a)))}function Lp(a){var o=null,u=Fe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=Fe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Rd(),Fe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),p=0;p<a;p++)u[p]=K;return o.index++,u}function Ma(a,o){return typeof o=="function"?o(a):o}function Id(a){var o=Kt();return $p(o,bt,a)}function $p(a,o,u){var p=a.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=u;var y=a.baseQueue,w=p.pending;if(w!==null){if(y!==null){var O=y.next;y.next=w.next,w.next=O}o.baseQueue=y=w,p.pending=null}if(w=a.baseState,y===null)a.memoizedState=w;else{o=y.next;var P=O=null,F=null,ee=o,le=!1;do{var fe=ee.lane&-536870913;if(fe!==ee.lane?(Je&fe)===fe:(Pa&fe)===fe){var ne=ee.revertLane;if(ne===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),fe===Do&&(le=!0);else if((Pa&ne)===ne){ee=ee.next,ne===Do&&(le=!0);continue}else fe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},F===null?(P=F=fe,O=w):F=F.next=fe,Fe.lanes|=ne,Ci|=ne;fe=ee.action,_s&&u(w,fe),w=ee.hasEagerState?ee.eagerState:u(w,fe)}else ne={lane:fe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},F===null?(P=F=ne,O=w):F=F.next=ne,Fe.lanes|=fe,Ci|=fe;ee=ee.next}while(ee!==null&&ee!==o);if(F===null?O=w:F.next=P,!nr(w,a.memoizedState)&&(Qt=!0,le&&(u=Io,u!==null)))throw u;a.memoizedState=w,a.baseState=O,a.baseQueue=F,p.lastRenderedState=w}return y===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function zp(a){var o=Kt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var p=u.dispatch,y=u.pending,w=o.memoizedState;if(y!==null){u.pending=null;var O=y=y.next;do w=a(w,O.action),O=O.next;while(O!==y);nr(w,o.memoizedState)||(Qt=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),u.lastRenderedState=w}return[w,p]}function Z_(a,o,u){var p=Fe,y=Kt(),w=tt;if(w){if(u===void 0)throw Error(r(407));u=u()}else u=o();var O=!nr((bt||y).memoizedState,u);if(O&&(y.memoizedState=u,Qt=!0),y=y.queue,Bp(n1.bind(null,p,y,a),[a]),y.getSnapshot!==o||O||Xt!==null&&Xt.memoizedState.tag&1){if(p.flags|=2048,Bo(9,{destroy:void 0},t1.bind(null,p,y,u,o),null),St===null)throw Error(r(349));w||(Pa&127)!==0||e1(p,o,u)}return u}function e1(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Fe.updateQueue,o===null?(o=Rd(),Fe.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function t1(a,o,u,p){o.value=u,o.getSnapshot=p,r1(o)&&a1(a)}function n1(a,o,u){return u(function(){r1(o)&&a1(a)})}function r1(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!nr(a,u)}catch{return!0}}function a1(a){var o=hs(a,2);o!==null&&Vn(o,a,2)}function Up(a){var o=Ln();if(typeof a=="function"){var u=a;if(a=u(),_s){at(!0);try{u()}finally{at(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:a},o}function i1(a,o,u,p){return a.baseState=u,$p(a,bt,typeof p=="function"?p:Ma)}function CD(a,o,u,p,y){if(zd(a))throw Error(r(485));if(a=o.action,a!==null){var w={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};M.T!==null?u(!0):w.isTransition=!1,p(w),u=o.pending,u===null?(w.next=o.pending=w,s1(o,w)):(w.next=u.next,o.pending=u.next=w)}}function s1(a,o){var u=o.action,p=o.payload,y=a.state;if(o.isTransition){var w=M.T,O={};M.T=O;try{var P=u(y,p),F=M.S;F!==null&&F(O,P),o1(a,o,P)}catch(ee){qp(a,o,ee)}finally{w!==null&&O.types!==null&&(w.types=O.types),M.T=w}}else try{w=u(y,p),o1(a,o,w)}catch(ee){qp(a,o,ee)}}function o1(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){l1(a,o,p)},function(p){return qp(a,o,p)}):l1(a,o,u)}function l1(a,o,u){o.status="fulfilled",o.value=u,c1(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,s1(a,u)))}function qp(a,o,u){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,c1(o),o=o.next;while(o!==p)}a.action=null}function c1(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function u1(a,o){return o}function d1(a,o){if(tt){var u=St.formState;if(u!==null){e:{var p=Fe;if(tt){if(At){t:{for(var y=At,w=Or;y.nodeType!==8;){if(!w){y=null;break t}if(y=kr(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){At=kr(y.nextSibling),p=y.data==="F!";break e}}bi(p)}p=!1}p&&(o=u[0])}}return u=Ln(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u1,lastRenderedState:o},u.queue=p,u=A1.bind(null,Fe,p),p.dispatch=u,p=Up(!1),w=Yp.bind(null,Fe,!1,p.queue),p=Ln(),y={state:o,dispatch:null,action:a,pending:null},p.queue=y,u=CD.bind(null,Fe,y,w,u),y.dispatch=u,p.memoizedState=a,[o,u,!1]}function f1(a){var o=Kt();return h1(o,bt,a)}function h1(a,o,u){if(o=$p(a,o,u1)[0],a=Id(Ma)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=jc(o)}catch(O){throw O===Lo?Ed:O}else p=o;o=Kt();var y=o.queue,w=y.dispatch;return u!==o.memoizedState&&(Fe.flags|=2048,Bo(9,{destroy:void 0},kD.bind(null,y,u),null)),[p,w,a]}function kD(a,o){a.action=o}function m1(a){var o=Kt(),u=bt;if(u!==null)return h1(o,u,a);Kt(),o=o.memoizedState,u=Kt();var p=u.queue.dispatch;return u.memoizedState=a,[o,p,!1]}function Bo(a,o,u,p){return a={tag:a,create:u,deps:p,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=Rd(),Fe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(p=u.next,u.next=a,a.next=p,o.lastEffect=a),a}function p1(){return Kt().memoizedState}function Ld(a,o,u,p){var y=Ln();Fe.flags|=a,y.memoizedState=Bo(1|o,{destroy:void 0},u,p===void 0?null:p)}function $d(a,o,u,p){var y=Kt();p=p===void 0?null:p;var w=y.memoizedState.inst;bt!==null&&p!==null&&Pp(p,bt.memoizedState.deps)?y.memoizedState=Bo(o,w,u,p):(Fe.flags|=a,y.memoizedState=Bo(1|o,w,u,p))}function g1(a,o){Ld(8390656,8,a,o)}function Bp(a,o){$d(2048,8,a,o)}function AD(a){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=Rd(),Fe.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function v1(a){var o=Kt().memoizedState;return AD({ref:o,nextImpl:a}),function(){if((ct&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function y1(a,o){return $d(4,2,a,o)}function b1(a,o){return $d(4,4,a,o)}function x1(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function w1(a,o,u){u=u!=null?u.concat([a]):null,$d(4,4,x1.bind(null,o,a),u)}function Fp(){}function _1(a,o){var u=Kt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&Pp(o,p[1])?p[0]:(u.memoizedState=[a,o],a)}function j1(a,o){var u=Kt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&Pp(o,p[1]))return p[0];if(p=a(),_s){at(!0);try{a()}finally{at(!1)}}return u.memoizedState=[p,o],p}function Hp(a,o,u){return u===void 0||(Pa&1073741824)!==0&&(Je&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=Sj(),Fe.lanes|=a,Ci|=a,u)}function S1(a,o,u,p){return nr(u,o)?u:zo.current!==null?(a=Hp(a,u,p),nr(a,o)||(Qt=!0),a):(Pa&42)===0||(Pa&1073741824)!==0&&(Je&261930)===0?(Qt=!0,a.memoizedState=u):(a=Sj(),Fe.lanes|=a,Ci|=a,o)}function N1(a,o,u,p,y){var w=z.p;z.p=w!==0&&8>w?w:8;var O=M.T,P={};M.T=P,Yp(a,!1,o,u);try{var F=y(),ee=M.S;if(ee!==null&&ee(P,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=ND(F,p);Sc(a,o,le,lr(a))}else Sc(a,o,p,lr(a))}catch(fe){Sc(a,o,{then:function(){},status:"rejected",reason:fe},lr())}finally{z.p=w,O!==null&&P.types!==null&&(O.types=P.types),M.T=O}}function TD(){}function Kp(a,o,u,p){if(a.tag!==5)throw Error(r(476));var y=E1(a).queue;N1(a,y,o,q,u===null?TD:function(){return O1(a),u(p)})}function E1(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:q},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function O1(a){var o=E1(a);o.next===null&&(o=a.alternate.memoizedState),Sc(a,o.next.queue,{},lr())}function Gp(){return En(qc)}function C1(){return Kt().memoizedState}function k1(){return Kt().memoizedState}function PD(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=lr();a=_i(u);var p=ji(o,a,u);p!==null&&(Vn(p,o,u),bc(p,o,u)),o={cache:wp()},a.payload=o;return}o=o.return}}function MD(a,o,u){var p=lr();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zd(a)?T1(o,u):(u=up(a,o,u,p),u!==null&&(Vn(u,a,p),P1(u,o,p)))}function A1(a,o,u){var p=lr();Sc(a,o,u,p)}function Sc(a,o,u,p){var y={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(zd(a))T1(o,y);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var O=o.lastRenderedState,P=w(O,u);if(y.hasEagerState=!0,y.eagerState=P,nr(P,O))return bd(a,o,y,0),St===null&&yd(),!1}catch{}finally{}if(u=up(a,o,y,p),u!==null)return Vn(u,a,p),P1(u,o,p),!0}return!1}function Yp(a,o,u,p){if(p={lane:2,revertLane:Ng(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},zd(a)){if(o)throw Error(r(479))}else o=up(a,u,p,2),o!==null&&Vn(o,a,2)}function zd(a){var o=a.alternate;return a===Fe||o!==null&&o===Fe}function T1(a,o){Uo=Pd=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function P1(a,o,u){if((u&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,u|=p,o.lanes=u,tc(a,u)}}var Nc={readContext:En,use:Dd,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};Nc.useEffectEvent=Bt;var M1={readContext:En,use:Dd,useCallback:function(a,o){return Ln().memoizedState=[a,o===void 0?null:o],a},useContext:En,useEffect:g1,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,Ld(4194308,4,x1.bind(null,o,a),u)},useLayoutEffect:function(a,o){return Ld(4194308,4,a,o)},useInsertionEffect:function(a,o){Ld(4,2,a,o)},useMemo:function(a,o){var u=Ln();o=o===void 0?null:o;var p=a();if(_s){at(!0);try{a()}finally{at(!1)}}return u.memoizedState=[p,o],p},useReducer:function(a,o,u){var p=Ln();if(u!==void 0){var y=u(o);if(_s){at(!0);try{u(o)}finally{at(!1)}}}else y=o;return p.memoizedState=p.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},p.queue=a,a=a.dispatch=MD.bind(null,Fe,a),[p.memoizedState,a]},useRef:function(a){var o=Ln();return a={current:a},o.memoizedState=a},useState:function(a){a=Up(a);var o=a.queue,u=A1.bind(null,Fe,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:Fp,useDeferredValue:function(a,o){var u=Ln();return Hp(u,a,o)},useTransition:function(){var a=Up(!1);return a=N1.bind(null,Fe,a.queue,!0,!1),Ln().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var p=Fe,y=Ln();if(tt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),St===null)throw Error(r(349));(Je&127)!==0||e1(p,o,u)}y.memoizedState=u;var w={value:u,getSnapshot:o};return y.queue=w,g1(n1.bind(null,p,w,a),[a]),p.flags|=2048,Bo(9,{destroy:void 0},t1.bind(null,p,w,u,o),null),u},useId:function(){var a=Ln(),o=St.identifierPrefix;if(tt){var u=la,p=oa;u=(p&~(1<<32-ht(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Md++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=ED++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Gp,useFormState:d1,useActionState:d1,useOptimistic:function(a){var o=Ln();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Yp.bind(null,Fe,!0,u),u.dispatch=o,[a,o]},useMemoCache:Lp,useCacheRefresh:function(){return Ln().memoizedState=PD.bind(null,Fe)},useEffectEvent:function(a){var o=Ln(),u={impl:a};return o.memoizedState=u,function(){if((ct&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Vp={readContext:En,use:Dd,useCallback:_1,useContext:En,useEffect:Bp,useImperativeHandle:w1,useInsertionEffect:y1,useLayoutEffect:b1,useMemo:j1,useReducer:Id,useRef:p1,useState:function(){return Id(Ma)},useDebugValue:Fp,useDeferredValue:function(a,o){var u=Kt();return S1(u,bt.memoizedState,a,o)},useTransition:function(){var a=Id(Ma)[0],o=Kt().memoizedState;return[typeof a=="boolean"?a:jc(a),o]},useSyncExternalStore:Z_,useId:C1,useHostTransitionStatus:Gp,useFormState:f1,useActionState:f1,useOptimistic:function(a,o){var u=Kt();return i1(u,bt,a,o)},useMemoCache:Lp,useCacheRefresh:k1};Vp.useEffectEvent=v1;var R1={readContext:En,use:Dd,useCallback:_1,useContext:En,useEffect:Bp,useImperativeHandle:w1,useInsertionEffect:y1,useLayoutEffect:b1,useMemo:j1,useReducer:zp,useRef:p1,useState:function(){return zp(Ma)},useDebugValue:Fp,useDeferredValue:function(a,o){var u=Kt();return bt===null?Hp(u,a,o):S1(u,bt.memoizedState,a,o)},useTransition:function(){var a=zp(Ma)[0],o=Kt().memoizedState;return[typeof a=="boolean"?a:jc(a),o]},useSyncExternalStore:Z_,useId:C1,useHostTransitionStatus:Gp,useFormState:m1,useActionState:m1,useOptimistic:function(a,o){var u=Kt();return bt!==null?i1(u,bt,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:k1};R1.useEffectEvent=v1;function Wp(a,o,u,p){o=a.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Xp={enqueueSetState:function(a,o,u){a=a._reactInternals;var p=lr(),y=_i(p);y.payload=o,u!=null&&(y.callback=u),o=ji(a,y,p),o!==null&&(Vn(o,a,p),bc(o,a,p))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var p=lr(),y=_i(p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ji(a,y,p),o!==null&&(Vn(o,a,p),bc(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=lr(),p=_i(u);p.tag=2,o!=null&&(p.callback=o),o=ji(a,p,u),o!==null&&(Vn(o,a,u),bc(o,a,u))}};function D1(a,o,u,p,y,w,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,w,O):o.prototype&&o.prototype.isPureReactComponent?!dc(u,p)||!dc(y,w):!0}function I1(a,o,u,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==a&&Xp.enqueueReplaceState(o,o.state,null)}function js(a,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(a=a.defaultProps){u===o&&(u=g({},u));for(var y in a)u[y]===void 0&&(u[y]=a[y])}return u}function L1(a){vd(a)}function $1(a){console.error(a)}function z1(a){vd(a)}function Ud(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function U1(a,o,u){try{var p=a.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Qp(a,o,u){return u=_i(u),u.tag=3,u.payload={element:null},u.callback=function(){Ud(a,o)},u}function q1(a){return a=_i(a),a.tag=3,a}function B1(a,o,u,p){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var w=p.value;a.payload=function(){return y(w)},a.callback=function(){U1(o,u,p)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(a.callback=function(){U1(o,u,p),typeof y!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var P=p.stack;this.componentDidCatch(p.value,{componentStack:P!==null?P:""})})}function RD(a,o,u,p,y){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&Ro(o,u,y,!0),u=ar.current,u!==null){switch(u.tag){case 31:case 13:return Cr===null?Jd():u.alternate===null&&Ft===0&&(Ft=3),u.flags&=-257,u.flags|=65536,u.lanes=y,p===Od?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),_g(a,p,y)),!1;case 22:return u.flags|=65536,p===Od?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),_g(a,p,y)),!1}throw Error(r(435,u.tag))}return _g(a,p,y),Jd(),!1}if(tt)return o=ar.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,p!==gp&&(a=Error(r(422),{cause:p}),mc(Sr(a,u)))):(p!==gp&&(o=Error(r(423),{cause:p}),mc(Sr(o,u))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,p=Sr(p,u),y=Qp(a.stateNode,p,y),Op(a,y),Ft!==4&&(Ft=2)),!1;var w=Error(r(520),{cause:p});if(w=Sr(w,u),Mc===null?Mc=[w]:Mc.push(w),Ft!==4&&(Ft=2),o===null)return!0;p=Sr(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=y&-y,u.lanes|=a,a=Qp(u.stateNode,p,a),Op(u,a),!1;case 1:if(o=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ki===null||!ki.has(w))))return u.flags|=65536,y&=-y,u.lanes|=y,y=q1(y),B1(y,a,u,p),Op(u,y),!1}u=u.return}while(u!==null);return!1}var Jp=Error(r(461)),Qt=!1;function On(a,o,u,p){o.child=a===null?G_(o,null,u,p):ws(o,a.child,u,p)}function F1(a,o,u,p,y){u=u.render;var w=o.ref;if("ref"in p){var O={};for(var P in p)P!=="ref"&&(O[P]=p[P])}else O=p;return vs(o),p=Mp(a,o,u,O,w,y),P=Rp(),a!==null&&!Qt?(Dp(a,o,y),Ra(a,o,y)):(tt&&P&&mp(o),o.flags|=1,On(a,o,p,y),o.child)}function H1(a,o,u,p,y){if(a===null){var w=u.type;return typeof w=="function"&&!dp(w)&&w.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=w,K1(a,o,w,p,y)):(a=wd(u.type,null,p,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(w=a.child,!sg(a,y)){var O=w.memoizedProps;if(u=u.compare,u=u!==null?u:dc,u(O,p)&&a.ref===o.ref)return Ra(a,o,y)}return o.flags|=1,a=Ca(w,p),a.ref=o.ref,a.return=o,o.child=a}function K1(a,o,u,p,y){if(a!==null){var w=a.memoizedProps;if(dc(w,p)&&a.ref===o.ref)if(Qt=!1,o.pendingProps=p=w,sg(a,y))(a.flags&131072)!==0&&(Qt=!0);else return o.lanes=a.lanes,Ra(a,o,y)}return Zp(a,o,u,p,y)}function G1(a,o,u,p){var y=p.children,w=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|u:u,a!==null){for(p=o.child=a.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~w}else p=0,o.child=null;return Y1(a,o,w,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Nd(o,w!==null?w.cachePool:null),w!==null?W_(o,w):kp(),X_(o);else return p=o.lanes=536870912,Y1(a,o,w!==null?w.baseLanes|u:u,u,p)}else w!==null?(Nd(o,w.cachePool),W_(o,w),Ni(),o.memoizedState=null):(a!==null&&Nd(o,null),kp(),Ni());return On(a,o,y,u),o.child}function Ec(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Y1(a,o,u,p,y){var w=jp();return w=w===null?null:{parent:Wt._currentValue,pool:w},o.memoizedState={baseLanes:u,cachePool:w},a!==null&&Nd(o,null),kp(),X_(o),a!==null&&Ro(a,o,p,!0),o.childLanes=y,null}function qd(a,o){return o=Fd({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function V1(a,o,u){return ws(o,a.child,null,u),a=qd(o,o.pendingProps),a.flags|=2,ir(o),o.memoizedState=null,a}function DD(a,o,u){var p=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(tt){if(p.mode==="hidden")return a=qd(o,p),o.lanes=536870912,Ec(null,a);if(Tp(o),(a=At)?(a=sS(a,Or),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:vi!==null?{id:oa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},u=T_(a),u.return=o,o.child=u,Nn=o,At=null)):a=null,a===null)throw bi(o);return o.lanes=536870912,null}return qd(o,p)}var w=a.memoizedState;if(w!==null){var O=w.dehydrated;if(Tp(o),y)if(o.flags&256)o.flags&=-257,o=V1(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(Qt||Ro(a,o,u,!1),y=(u&a.childLanes)!==0,Qt||y){if(p=St,p!==null&&(O=sd(p,u),O!==0&&O!==w.retryLane))throw w.retryLane=O,hs(a,O),Vn(p,a,O),Jp;Jd(),o=V1(a,o,u)}else a=w.treeContext,At=kr(O.nextSibling),Nn=o,tt=!0,yi=null,Or=!1,a!==null&&R_(o,a),o=qd(o,p),o.flags|=4096;return o}return a=Ca(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Bd(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function Zp(a,o,u,p,y){return vs(o),u=Mp(a,o,u,p,void 0,y),p=Rp(),a!==null&&!Qt?(Dp(a,o,y),Ra(a,o,y)):(tt&&p&&mp(o),o.flags|=1,On(a,o,u,y),o.child)}function W1(a,o,u,p,y,w){return vs(o),o.updateQueue=null,u=J_(o,p,u,y),Q_(a),p=Rp(),a!==null&&!Qt?(Dp(a,o,w),Ra(a,o,w)):(tt&&p&&mp(o),o.flags|=1,On(a,o,u,w),o.child)}function X1(a,o,u,p,y){if(vs(o),o.stateNode===null){var w=Ao,O=u.contextType;typeof O=="object"&&O!==null&&(w=En(O)),w=new u(p,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Xp,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=p,w.state=o.memoizedState,w.refs={},Np(o),O=u.contextType,w.context=typeof O=="object"&&O!==null?En(O):Ao,w.state=o.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(Wp(o,u,O,p),w.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Xp.enqueueReplaceState(w,w.state,null),wc(o,p,w,y),xc(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){w=o.stateNode;var P=o.memoizedProps,F=js(u,P);w.props=F;var ee=w.context,le=u.contextType;O=Ao,typeof le=="object"&&le!==null&&(O=En(le));var fe=u.getDerivedStateFromProps;le=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||ee!==O)&&I1(o,w,p,O),wi=!1;var ne=o.memoizedState;w.state=ne,wc(o,p,w,y),xc(),ee=o.memoizedState,P||ne!==ee||wi?(typeof fe=="function"&&(Wp(o,u,fe,p),ee=o.memoizedState),(F=wi||D1(o,u,F,p,ne,ee,O))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=ee),w.props=p,w.state=ee,w.context=O,p=F):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{w=o.stateNode,Ep(a,o),O=o.memoizedProps,le=js(u,O),w.props=le,fe=o.pendingProps,ne=w.context,ee=u.contextType,F=Ao,typeof ee=="object"&&ee!==null&&(F=En(ee)),P=u.getDerivedStateFromProps,(ee=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==fe||ne!==F)&&I1(o,w,p,F),wi=!1,ne=o.memoizedState,w.state=ne,wc(o,p,w,y),xc();var oe=o.memoizedState;O!==fe||ne!==oe||wi||a!==null&&a.dependencies!==null&&jd(a.dependencies)?(typeof P=="function"&&(Wp(o,u,P,p),oe=o.memoizedState),(le=wi||D1(o,u,le,p,ne,oe,F)||a!==null&&a.dependencies!==null&&jd(a.dependencies))?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,oe,F),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,oe,F)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===a.memoizedProps&&ne===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&ne===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=oe),w.props=p,w.state=oe,w.context=F,p=le):(typeof w.componentDidUpdate!="function"||O===a.memoizedProps&&ne===a.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===a.memoizedProps&&ne===a.memoizedState||(o.flags|=1024),p=!1)}return w=p,Bd(a,o),p=(o.flags&128)!==0,w||p?(w=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,a!==null&&p?(o.child=ws(o,a.child,null,y),o.child=ws(o,null,u,y)):On(a,o,u,y),o.memoizedState=w.state,a=o.child):a=Ra(a,o,y),a}function Q1(a,o,u,p){return ps(),o.flags|=256,On(a,o,u,p),o.child}var eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tg(a){return{baseLanes:a,cachePool:U_()}}function ng(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=or),a}function J1(a,o,u){var p=o.pendingProps,y=!1,w=(o.flags&128)!==0,O;if((O=w)||(O=a!==null&&a.memoizedState===null?!1:(Ht.current&2)!==0),O&&(y=!0,o.flags&=-129),O=(o.flags&32)!==0,o.flags&=-33,a===null){if(tt){if(y?Si(o):Ni(),(a=At)?(a=sS(a,Or),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:vi!==null?{id:oa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},u=T_(a),u.return=o,o.child=u,Nn=o,At=null)):a=null,a===null)throw bi(o);return $g(a)?o.lanes=32:o.lanes=536870912,null}var P=p.children;return p=p.fallback,y?(Ni(),y=o.mode,P=Fd({mode:"hidden",children:P},y),p=ms(p,y,u,null),P.return=o,p.return=o,P.sibling=p,o.child=P,p=o.child,p.memoizedState=tg(u),p.childLanes=ng(a,O,u),o.memoizedState=eg,Ec(null,p)):(Si(o),rg(o,P))}var F=a.memoizedState;if(F!==null&&(P=F.dehydrated,P!==null)){if(w)o.flags&256?(Si(o),o.flags&=-257,o=ag(a,o,u)):o.memoizedState!==null?(Ni(),o.child=a.child,o.flags|=128,o=null):(Ni(),P=p.fallback,y=o.mode,p=Fd({mode:"visible",children:p.children},y),P=ms(P,y,u,null),P.flags|=2,p.return=o,P.return=o,p.sibling=P,o.child=p,ws(o,a.child,null,u),p=o.child,p.memoizedState=tg(u),p.childLanes=ng(a,O,u),o.memoizedState=eg,o=Ec(null,p));else if(Si(o),$g(P)){if(O=P.nextSibling&&P.nextSibling.dataset,O)var ee=O.dgst;O=ee,p=Error(r(419)),p.stack="",p.digest=O,mc({value:p,source:null,stack:null}),o=ag(a,o,u)}else if(Qt||Ro(a,o,u,!1),O=(u&a.childLanes)!==0,Qt||O){if(O=St,O!==null&&(p=sd(O,u),p!==0&&p!==F.retryLane))throw F.retryLane=p,hs(a,p),Vn(O,a,p),Jp;Lg(P)||Jd(),o=ag(a,o,u)}else Lg(P)?(o.flags|=192,o.child=a.child,o=null):(a=F.treeContext,At=kr(P.nextSibling),Nn=o,tt=!0,yi=null,Or=!1,a!==null&&R_(o,a),o=rg(o,p.children),o.flags|=4096);return o}return y?(Ni(),P=p.fallback,y=o.mode,F=a.child,ee=F.sibling,p=Ca(F,{mode:"hidden",children:p.children}),p.subtreeFlags=F.subtreeFlags&65011712,ee!==null?P=Ca(ee,P):(P=ms(P,y,u,null),P.flags|=2),P.return=o,p.return=o,p.sibling=P,o.child=p,Ec(null,p),p=o.child,P=a.child.memoizedState,P===null?P=tg(u):(y=P.cachePool,y!==null?(F=Wt._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=U_(),P={baseLanes:P.baseLanes|u,cachePool:y}),p.memoizedState=P,p.childLanes=ng(a,O,u),o.memoizedState=eg,Ec(a.child,p)):(Si(o),u=a.child,a=u.sibling,u=Ca(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,a!==null&&(O=o.deletions,O===null?(o.deletions=[a],o.flags|=16):O.push(a)),o.child=u,o.memoizedState=null,u)}function rg(a,o){return o=Fd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Fd(a,o){return a=rr(22,a,null,o),a.lanes=0,a}function ag(a,o,u){return ws(o,a.child,null,u),a=rg(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Z1(a,o,u){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),bp(a.return,o,u)}function ig(a,o,u,p,y,w){var O=a.memoizedState;O===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y,treeForkCount:w}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=p,O.tail=u,O.tailMode=y,O.treeForkCount=w)}function ej(a,o,u){var p=o.pendingProps,y=p.revealOrder,w=p.tail;p=p.children;var O=Ht.current,P=(O&2)!==0;if(P?(O=O&1|2,o.flags|=128):O&=1,U(Ht,O),On(a,o,p,u),p=tt?hc:0,!P&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Z1(a,u,o);else if(a.tag===19)Z1(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)a=u.alternate,a!==null&&Td(a)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),ig(o,!1,y,u,w,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&Td(a)===null){o.child=y;break}a=y.sibling,y.sibling=u,u=y,y=a}ig(o,!0,u,null,w,p);break;case"together":ig(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function Ra(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),Ci|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(Ro(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,u=Ca(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Ca(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function sg(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&jd(a)))}function ID(a,o,u){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),xi(o,Wt,a.memoizedState.cache),ps();break;case 27:case 5:ge(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:xi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Tp(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Si(o),o.flags|=128,null):(u&o.child.childLanes)!==0?J1(a,o,u):(Si(o),a=Ra(a,o,u),a!==null?a.sibling:null);Si(o);break;case 19:var y=(a.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(Ro(a,o,u,!1),p=(u&o.childLanes)!==0),y){if(p)return ej(a,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),U(Ht,Ht.current),p)break;return null;case 22:return o.lanes=0,G1(a,o,u,o.pendingProps);case 24:xi(o,Wt,a.memoizedState.cache)}return Ra(a,o,u)}function tj(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)Qt=!0;else{if(!sg(a,u)&&(o.flags&128)===0)return Qt=!1,ID(a,o,u);Qt=(a.flags&131072)!==0}else Qt=!1,tt&&(o.flags&1048576)!==0&&M_(o,hc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=bs(o.elementType),o.type=a,typeof a=="function")dp(a)?(p=js(a,p),o.tag=1,o=X1(null,o,a,p,u)):(o.tag=0,o=Zp(null,o,a,p,u));else{if(a!=null){var y=a.$$typeof;if(y===k){o.tag=11,o=F1(null,o,a,p,u);break e}else if(y===D){o.tag=14,o=H1(null,o,a,p,u);break e}}throw o=H(a)||a,Error(r(306,o,""))}}return o;case 0:return Zp(a,o,o.type,o.pendingProps,u);case 1:return p=o.type,y=js(p,o.pendingProps),X1(a,o,p,y,u);case 3:e:{if(Ne(o,o.stateNode.containerInfo),a===null)throw Error(r(387));p=o.pendingProps;var w=o.memoizedState;y=w.element,Ep(a,o),wc(o,p,null,u);var O=o.memoizedState;if(p=O.cache,xi(o,Wt,p),p!==w.cache&&xp(o,[Wt],u,!0),xc(),p=O.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:O.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=Q1(a,o,p,u);break e}else if(p!==y){y=Sr(Error(r(424)),o),mc(y),o=Q1(a,o,p,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(At=kr(a.firstChild),Nn=o,tt=!0,yi=null,Or=!0,u=G_(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ps(),p===y){o=Ra(a,o,u);break e}On(a,o,p,u)}o=o.child}return o;case 26:return Bd(a,o),a===null?(u=fS(o.type,null,o.pendingProps,null))?o.memoizedState=u:tt||(u=o.type,a=o.pendingProps,p=sf(ce.current).createElement(u),p[Sn]=o,p[Bn]=a,Cn(p,u,a),mn(p),o.stateNode=p):o.memoizedState=fS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return ge(o),a===null&&tt&&(p=o.stateNode=cS(o.type,o.pendingProps,ce.current),Nn=o,Or=!0,y=At,Mi(o.type)?(zg=y,At=kr(p.firstChild)):At=y),On(a,o,o.pendingProps.children,u),Bd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&tt&&((y=p=At)&&(p=f4(p,o.type,o.pendingProps,Or),p!==null?(o.stateNode=p,Nn=o,At=kr(p.firstChild),Or=!1,y=!0):y=!1),y||bi(o)),ge(o),y=o.type,w=o.pendingProps,O=a!==null?a.memoizedProps:null,p=w.children,Rg(y,w)?p=null:O!==null&&Rg(y,O)&&(o.flags|=32),o.memoizedState!==null&&(y=Mp(a,o,OD,null,null,u),qc._currentValue=y),Bd(a,o),On(a,o,p,u),o.child;case 6:return a===null&&tt&&((a=u=At)&&(u=h4(u,o.pendingProps,Or),u!==null?(o.stateNode=u,Nn=o,At=null,a=!0):a=!1),a||bi(o)),null;case 13:return J1(a,o,u);case 4:return Ne(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=ws(o,null,p,u):On(a,o,p,u),o.child;case 11:return F1(a,o,o.type,o.pendingProps,u);case 7:return On(a,o,o.pendingProps,u),o.child;case 8:return On(a,o,o.pendingProps.children,u),o.child;case 12:return On(a,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,xi(o,o.type,p.value),On(a,o,p.children,u),o.child;case 9:return y=o.type._context,p=o.pendingProps.children,vs(o),y=En(y),p=p(y),o.flags|=1,On(a,o,p,u),o.child;case 14:return H1(a,o,o.type,o.pendingProps,u);case 15:return K1(a,o,o.type,o.pendingProps,u);case 19:return ej(a,o,u);case 31:return DD(a,o,u);case 22:return G1(a,o,u,o.pendingProps);case 24:return vs(o),p=En(Wt),a===null?(y=jp(),y===null&&(y=St,w=wp(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=u),y=w),o.memoizedState={parent:p,cache:y},Np(o),xi(o,Wt,y)):((a.lanes&u)!==0&&(Ep(a,o),wc(o,null,null,u),xc()),y=a.memoizedState,w=o.memoizedState,y.parent!==p?(y={parent:p,cache:p},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),xi(o,Wt,p)):(p=w.cache,xi(o,Wt,p),p!==y.cache&&xp(o,[Wt],u,!0))),On(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Da(a){a.flags|=4}function og(a,o,u,p,y){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(Cj())a.flags|=8192;else throw xs=Od,Sp}else a.flags&=-16777217}function nj(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!vS(o))if(Cj())a.flags|=8192;else throw xs=Od,Sp}function Hd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ye():536870912,a.lanes|=o,Go|=o)}function Oc(a,o){if(!tt)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Tt(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,p=0;if(o)for(var y=a.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=p,a.childLanes=u,o}function LD(a,o,u){var p=o.pendingProps;switch(pp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(o),null;case 1:return Tt(o),null;case 3:return u=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),Ta(Wt),de(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Mo(o)?Da(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vp())),Tt(o),null;case 26:var y=o.type,w=o.memoizedState;return a===null?(Da(o),w!==null?(Tt(o),nj(o,w)):(Tt(o),og(o,y,null,p,u))):w?w!==a.memoizedState?(Da(o),Tt(o),nj(o,w)):(Tt(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&Da(o),Tt(o),og(o,y,a,p,u)),null;case 27:if(ie(o),u=ce.current,y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Da(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Tt(o),null}a=te.current,Mo(o)?D_(o):(a=cS(y,p,u),o.stateNode=a,Da(o))}return Tt(o),null;case 5:if(ie(o),y=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Da(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Tt(o),null}if(w=te.current,Mo(o))D_(o);else{var O=sf(ce.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?O.createElement("select",{is:p.is}):O.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?O.createElement(y,{is:p.is}):O.createElement(y)}}w[Sn]=o,w[Bn]=p;e:for(O=o.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===o)break e;for(;O.sibling===null;){if(O.return===null||O.return===o)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}o.stateNode=w;e:switch(Cn(w,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Da(o)}}return Tt(o),og(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&Da(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(r(166));if(a=ce.current,Mo(o)){if(a=o.stateNode,u=o.memoizedProps,p=null,y=Nn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}a[Sn]=o,a=!!(a.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||Jj(a.nodeValue,u)),a||bi(o,!0)}else a=sf(a).createTextNode(p),a[Sn]=o,o.stateNode=a}return Tt(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(p=Mo(o),u!==null){if(a===null){if(!p)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Sn]=o}else ps(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),a=!1}else u=vp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(ir(o),o):(ir(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Tt(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Mo(o),p!==null&&p.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Sn]=o}else ps(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),y=!1}else y=vp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(ir(o),o):(ir(o),null)}return ir(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,a=a!==null&&a.memoizedState!==null,u&&(p=o.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),Hd(o,o.updateQueue),Tt(o),null);case 4:return de(),a===null&&kg(o.stateNode.containerInfo),Tt(o),null;case 10:return Ta(o.type),Tt(o),null;case 19:if(I(Ht),p=o.memoizedState,p===null)return Tt(o),null;if(y=(o.flags&128)!==0,w=p.rendering,w===null)if(y)Oc(p,!1);else{if(Ft!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(w=Td(a),w!==null){for(o.flags|=128,Oc(p,!1),a=w.updateQueue,o.updateQueue=a,Hd(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)A_(u,a),u=u.sibling;return U(Ht,Ht.current&1|2),tt&&ka(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&Xe()>Wd&&(o.flags|=128,y=!0,Oc(p,!1),o.lanes=4194304)}else{if(!y)if(a=Td(w),a!==null){if(o.flags|=128,y=!0,a=a.updateQueue,o.updateQueue=a,Hd(o,a),Oc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!tt)return Tt(o),null}else 2*Xe()-p.renderingStartTime>Wd&&u!==536870912&&(o.flags|=128,y=!0,Oc(p,!1),o.lanes=4194304);p.isBackwards?(w.sibling=o.child,o.child=w):(a=p.last,a!==null?a.sibling=w:o.child=w,p.last=w)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Xe(),a.sibling=null,u=Ht.current,U(Ht,y?u&1|2:u&1),tt&&ka(o,p.treeForkCount),a):(Tt(o),null);case 22:case 23:return ir(o),Ap(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(Tt(o),o.subtreeFlags&6&&(o.flags|=8192)):Tt(o),u=o.updateQueue,u!==null&&Hd(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),a!==null&&I(ys),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ta(Wt),Tt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function $D(a,o){switch(pp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ta(Wt),de(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ie(o),null;case 31:if(o.memoizedState!==null){if(ir(o),o.alternate===null)throw Error(r(340));ps()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(ir(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ps()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return I(Ht),null;case 4:return de(),null;case 10:return Ta(o.type),null;case 22:case 23:return ir(o),Ap(),a!==null&&I(ys),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ta(Wt),null;case 25:return null;default:return null}}function rj(a,o){switch(pp(o),o.tag){case 3:Ta(Wt),de();break;case 26:case 27:case 5:ie(o);break;case 4:de();break;case 31:o.memoizedState!==null&&ir(o);break;case 13:ir(o);break;case 19:I(Ht);break;case 10:Ta(o.type);break;case 22:case 23:ir(o),Ap(),a!==null&&I(ys);break;case 24:Ta(Wt)}}function Cc(a,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&a)===a){p=void 0;var w=u.create,O=u.inst;p=w(),O.destroy=p}u=u.next}while(u!==y)}}catch(P){pt(o,o.return,P)}}function Ei(a,o,u){try{var p=o.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&a)===a){var O=p.inst,P=O.destroy;if(P!==void 0){O.destroy=void 0,y=o;var F=u,ee=P;try{ee()}catch(le){pt(y,F,le)}}}p=p.next}while(p!==w)}}catch(le){pt(o,o.return,le)}}function aj(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{V_(o,u)}catch(p){pt(a,a.return,p)}}}function ij(a,o,u){u.props=js(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(p){pt(a,o,p)}}function kc(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof u=="function"?a.refCleanup=u(p):u.current=p}}catch(y){pt(a,o,y)}}function ca(a,o){var u=a.ref,p=a.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(y){pt(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){pt(a,o,y)}else u.current=null}function sj(a){var o=a.type,u=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(y){pt(a,a.return,y)}}function lg(a,o,u){try{var p=a.stateNode;s4(p,a.type,u,o),p[Bn]=o}catch(y){pt(a,a.return,y)}}function oj(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Mi(a.type)||a.tag===4}function cg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||oj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Mi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ug(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ea));else if(p!==4&&(p===27&&Mi(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(ug(a,o,u),a=a.sibling;a!==null;)ug(a,o,u),a=a.sibling}function Kd(a,o,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(p!==4&&(p===27&&Mi(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Kd(a,o,u),a=a.sibling;a!==null;)Kd(a,o,u),a=a.sibling}function lj(a){var o=a.stateNode,u=a.memoizedProps;try{for(var p=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Cn(o,p,u),o[Sn]=a,o[Bn]=u}catch(w){pt(a,a.return,w)}}var Ia=!1,Jt=!1,dg=!1,cj=typeof WeakSet=="function"?WeakSet:Set,pn=null;function zD(a,o){if(a=a.containerInfo,Pg=hf,a=w_(a),ap(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var O=0,P=-1,F=-1,ee=0,le=0,fe=a,ne=null;t:for(;;){for(var oe;fe!==u||y!==0&&fe.nodeType!==3||(P=O+y),fe!==w||p!==0&&fe.nodeType!==3||(F=O+p),fe.nodeType===3&&(O+=fe.nodeValue.length),(oe=fe.firstChild)!==null;)ne=fe,fe=oe;for(;;){if(fe===a)break t;if(ne===u&&++ee===y&&(P=O),ne===w&&++le===p&&(F=O),(oe=fe.nextSibling)!==null)break;fe=ne,ne=fe.parentNode}fe=oe}u=P===-1||F===-1?null:{start:P,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mg={focusedElem:a,selectionRange:u},hf=!1,pn=o;pn!==null;)if(o=pn,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,pn=a;else for(;pn!==null;){switch(o=pn,w=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)y=a[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,u=o,y=w.memoizedProps,w=w.memoizedState,p=u.stateNode;try{var Oe=js(u.type,y);a=p.getSnapshotBeforeUpdate(Oe,w),p.__reactInternalSnapshotBeforeUpdate=a}catch($e){pt(u,u.return,$e)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Ig(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Ig(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,pn=a;break}pn=o.return}}function uj(a,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:$a(a,u),p&4&&Cc(5,u);break;case 1:if($a(a,u),p&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(O){pt(u,u.return,O)}else{var y=js(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(O){pt(u,u.return,O)}}p&64&&aj(u),p&512&&kc(u,u.return);break;case 3:if($a(a,u),p&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{V_(a,o)}catch(O){pt(u,u.return,O)}}break;case 27:o===null&&p&4&&lj(u);case 26:case 5:$a(a,u),o===null&&p&4&&sj(u),p&512&&kc(u,u.return);break;case 12:$a(a,u);break;case 31:$a(a,u),p&4&&hj(a,u);break;case 13:$a(a,u),p&4&&mj(a,u),p&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=VD.bind(null,u),m4(a,u))));break;case 22:if(p=u.memoizedState!==null||Ia,!p){o=o!==null&&o.memoizedState!==null||Jt,y=Ia;var w=Jt;Ia=p,(Jt=o)&&!w?za(a,u,(u.subtreeFlags&8772)!==0):$a(a,u),Ia=y,Jt=w}break;case 30:break;default:$a(a,u)}}function dj(a){var o=a.alternate;o!==null&&(a.alternate=null,dj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&qm(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Rt=null,Hn=!1;function La(a,o,u){for(u=u.child;u!==null;)fj(a,o,u),u=u.sibling}function fj(a,o,u){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ft,u)}catch{}switch(u.tag){case 26:Jt||ca(u,o),La(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Jt||ca(u,o);var p=Rt,y=Hn;Mi(u.type)&&(Rt=u.stateNode,Hn=!1),La(a,o,u),$c(u.stateNode),Rt=p,Hn=y;break;case 5:Jt||ca(u,o);case 6:if(p=Rt,y=Hn,Rt=null,La(a,o,u),Rt=p,Hn=y,Rt!==null)if(Hn)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(u.stateNode)}catch(w){pt(u,o,w)}else try{Rt.removeChild(u.stateNode)}catch(w){pt(u,o,w)}break;case 18:Rt!==null&&(Hn?(a=Rt,aS(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),el(a)):aS(Rt,u.stateNode));break;case 4:p=Rt,y=Hn,Rt=u.stateNode.containerInfo,Hn=!0,La(a,o,u),Rt=p,Hn=y;break;case 0:case 11:case 14:case 15:Ei(2,u,o),Jt||Ei(4,u,o),La(a,o,u);break;case 1:Jt||(ca(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&ij(u,o,p)),La(a,o,u);break;case 21:La(a,o,u);break;case 22:Jt=(p=Jt)||u.memoizedState!==null,La(a,o,u),Jt=p;break;default:La(a,o,u)}}function hj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{el(a)}catch(u){pt(o,o.return,u)}}}function mj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{el(a)}catch(u){pt(o,o.return,u)}}function UD(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new cj),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new cj),o;default:throw Error(r(435,a.tag))}}function Gd(a,o){var u=UD(a);o.forEach(function(p){if(!u.has(p)){u.add(p);var y=WD.bind(null,a,p);p.then(y,y)}})}function Kn(a,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p],w=a,O=o,P=O;e:for(;P!==null;){switch(P.tag){case 27:if(Mi(P.type)){Rt=P.stateNode,Hn=!1;break e}break;case 5:Rt=P.stateNode,Hn=!1;break e;case 3:case 4:Rt=P.stateNode.containerInfo,Hn=!0;break e}P=P.return}if(Rt===null)throw Error(r(160));fj(w,O,y),Rt=null,Hn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)pj(o,a),o=o.sibling}var Gr=null;function pj(a,o){var u=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Kn(o,a),Gn(a),p&4&&(Ei(3,a,a.return),Cc(3,a),Ei(5,a,a.return));break;case 1:Kn(o,a),Gn(a),p&512&&(Jt||u===null||ca(u,u.return)),p&64&&Ia&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var y=Gr;if(Kn(o,a),Gn(a),p&512&&(Jt||u===null||ca(u,u.return)),p&4){var w=u!==null?u.memoizedState:null;if(p=a.memoizedState,u===null)if(p===null)if(a.stateNode===null){e:{p=a.type,u=a.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":w=y.getElementsByTagName("title")[0],(!w||w[nc]||w[Sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(p),y.head.insertBefore(w,y.querySelector("head > title"))),Cn(w,p,u),w[Sn]=a,mn(w),p=w;break e;case"link":var O=pS("link","href",y).get(p+(u.href||""));if(O){for(var P=0;P<O.length;P++)if(w=O[P],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(P,1);break t}}w=y.createElement(p),Cn(w,p,u),y.head.appendChild(w);break;case"meta":if(O=pS("meta","content",y).get(p+(u.content||""))){for(P=0;P<O.length;P++)if(w=O[P],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(P,1);break t}}w=y.createElement(p),Cn(w,p,u),y.head.appendChild(w);break;default:throw Error(r(468,p))}w[Sn]=a,mn(w),p=w}a.stateNode=p}else gS(y,a.type,a.stateNode);else a.stateNode=mS(y,p,a.memoizedProps);else w!==p?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,p===null?gS(y,a.type,a.stateNode):mS(y,p,a.memoizedProps)):p===null&&a.stateNode!==null&&lg(a,a.memoizedProps,u.memoizedProps)}break;case 27:Kn(o,a),Gn(a),p&512&&(Jt||u===null||ca(u,u.return)),u!==null&&p&4&&lg(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Kn(o,a),Gn(a),p&512&&(Jt||u===null||ca(u,u.return)),a.flags&32){y=a.stateNode;try{jo(y,"")}catch(Oe){pt(a,a.return,Oe)}}p&4&&a.stateNode!=null&&(y=a.memoizedProps,lg(a,y,u!==null?u.memoizedProps:y)),p&1024&&(dg=!0);break;case 6:if(Kn(o,a),Gn(a),p&4){if(a.stateNode===null)throw Error(r(162));p=a.memoizedProps,u=a.stateNode;try{u.nodeValue=p}catch(Oe){pt(a,a.return,Oe)}}break;case 3:if(cf=null,y=Gr,Gr=of(o.containerInfo),Kn(o,a),Gr=y,Gn(a),p&4&&u!==null&&u.memoizedState.isDehydrated)try{el(o.containerInfo)}catch(Oe){pt(a,a.return,Oe)}dg&&(dg=!1,gj(a));break;case 4:p=Gr,Gr=of(a.stateNode.containerInfo),Kn(o,a),Gn(a),Gr=p;break;case 12:Kn(o,a),Gn(a);break;case 31:Kn(o,a),Gn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Gd(a,p)));break;case 13:Kn(o,a),Gn(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Vd=Xe()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Gd(a,p)));break;case 22:y=a.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,ee=Ia,le=Jt;if(Ia=ee||y,Jt=le||F,Kn(o,a),Jt=le,Ia=ee,Gn(a),p&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||F||Ia||Jt||Ss(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){F=u=o;try{if(w=F.stateNode,y)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{P=F.stateNode;var fe=F.memoizedProps.style,ne=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;P.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Oe){pt(F,F.return,Oe)}}}else if(o.tag===6){if(u===null){F=o;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Oe){pt(F,F.return,Oe)}}}else if(o.tag===18){if(u===null){F=o;try{var oe=F.stateNode;y?iS(oe,!0):iS(F.stateNode,!1)}catch(Oe){pt(F,F.return,Oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Gd(a,u))));break;case 19:Kn(o,a),Gn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Gd(a,p)));break;case 30:break;case 21:break;default:Kn(o,a),Gn(a)}}function Gn(a){var o=a.flags;if(o&2){try{for(var u,p=a.return;p!==null;){if(oj(p)){u=p;break}p=p.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,w=cg(a);Kd(a,w,y);break;case 5:var O=u.stateNode;u.flags&32&&(jo(O,""),u.flags&=-33);var P=cg(a);Kd(a,P,O);break;case 3:case 4:var F=u.stateNode.containerInfo,ee=cg(a);ug(a,ee,F);break;default:throw Error(r(161))}}catch(le){pt(a,a.return,le)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function gj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;gj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function $a(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)uj(a,o.alternate,o),o=o.sibling}function Ss(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ei(4,o,o.return),Ss(o);break;case 1:ca(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&ij(o,o.return,u),Ss(o);break;case 27:$c(o.stateNode);case 26:case 5:ca(o,o.return),Ss(o);break;case 22:o.memoizedState===null&&Ss(o);break;case 30:Ss(o);break;default:Ss(o)}a=a.sibling}}function za(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,y=a,w=o,O=w.flags;switch(w.tag){case 0:case 11:case 15:za(y,w,u),Cc(4,w);break;case 1:if(za(y,w,u),p=w,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ee){pt(p,p.return,ee)}if(p=w,y=p.updateQueue,y!==null){var P=p.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Y_(F[y],P)}catch(ee){pt(p,p.return,ee)}}u&&O&64&&aj(w),kc(w,w.return);break;case 27:lj(w);case 26:case 5:za(y,w,u),u&&p===null&&O&4&&sj(w),kc(w,w.return);break;case 12:za(y,w,u);break;case 31:za(y,w,u),u&&O&4&&hj(y,w);break;case 13:za(y,w,u),u&&O&4&&mj(y,w);break;case 22:w.memoizedState===null&&za(y,w,u),kc(w,w.return);break;case 30:break;default:za(y,w,u)}o=o.sibling}}function fg(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&pc(u))}function hg(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&pc(a))}function Yr(a,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vj(a,o,u,p),o=o.sibling}function vj(a,o,u,p){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Yr(a,o,u,p),y&2048&&Cc(9,o);break;case 1:Yr(a,o,u,p);break;case 3:Yr(a,o,u,p),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&pc(a)));break;case 12:if(y&2048){Yr(a,o,u,p),a=o.stateNode;try{var w=o.memoizedProps,O=w.id,P=w.onPostCommit;typeof P=="function"&&P(O,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){pt(o,o.return,F)}}else Yr(a,o,u,p);break;case 31:Yr(a,o,u,p);break;case 13:Yr(a,o,u,p);break;case 23:break;case 22:w=o.stateNode,O=o.alternate,o.memoizedState!==null?w._visibility&2?Yr(a,o,u,p):Ac(a,o):w._visibility&2?Yr(a,o,u,p):(w._visibility|=2,Fo(a,o,u,p,(o.subtreeFlags&10256)!==0||!1)),y&2048&&fg(O,o);break;case 24:Yr(a,o,u,p),y&2048&&hg(o.alternate,o);break;default:Yr(a,o,u,p)}}function Fo(a,o,u,p,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=a,O=o,P=u,F=p,ee=O.flags;switch(O.tag){case 0:case 11:case 15:Fo(w,O,P,F,y),Cc(8,O);break;case 23:break;case 22:var le=O.stateNode;O.memoizedState!==null?le._visibility&2?Fo(w,O,P,F,y):Ac(w,O):(le._visibility|=2,Fo(w,O,P,F,y)),y&&ee&2048&&fg(O.alternate,O);break;case 24:Fo(w,O,P,F,y),y&&ee&2048&&hg(O.alternate,O);break;default:Fo(w,O,P,F,y)}o=o.sibling}}function Ac(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,p=o,y=p.flags;switch(p.tag){case 22:Ac(u,p),y&2048&&fg(p.alternate,p);break;case 24:Ac(u,p),y&2048&&hg(p.alternate,p);break;default:Ac(u,p)}o=o.sibling}}var Tc=8192;function Ho(a,o,u){if(a.subtreeFlags&Tc)for(a=a.child;a!==null;)yj(a,o,u),a=a.sibling}function yj(a,o,u){switch(a.tag){case 26:Ho(a,o,u),a.flags&Tc&&a.memoizedState!==null&&E4(u,Gr,a.memoizedState,a.memoizedProps);break;case 5:Ho(a,o,u);break;case 3:case 4:var p=Gr;Gr=of(a.stateNode.containerInfo),Ho(a,o,u),Gr=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=Tc,Tc=16777216,Ho(a,o,u),Tc=p):Ho(a,o,u));break;default:Ho(a,o,u)}}function bj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Pc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];pn=p,wj(p,a)}bj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)xj(a),a=a.sibling}function xj(a){switch(a.tag){case 0:case 11:case 15:Pc(a),a.flags&2048&&Ei(9,a,a.return);break;case 3:Pc(a);break;case 12:Pc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Yd(a)):Pc(a);break;default:Pc(a)}}function Yd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];pn=p,wj(p,a)}bj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ei(8,o,o.return),Yd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Yd(o));break;default:Yd(o)}a=a.sibling}}function wj(a,o){for(;pn!==null;){var u=pn;switch(u.tag){case 0:case 11:case 15:Ei(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:pc(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,pn=p;else e:for(u=a;pn!==null;){p=pn;var y=p.sibling,w=p.return;if(dj(p),p===u){pn=null;break e}if(y!==null){y.return=w,pn=y;break e}pn=w}}}var qD={getCacheForType:function(a){var o=En(Wt),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return En(Wt).controller.signal}},BD=typeof WeakMap=="function"?WeakMap:Map,ct=0,St=null,Ve=null,Je=0,mt=0,sr=null,Oi=!1,Ko=!1,mg=!1,Ua=0,Ft=0,Ci=0,Ns=0,pg=0,or=0,Go=0,Mc=null,Yn=null,gg=!1,Vd=0,_j=0,Wd=1/0,Xd=null,ki=null,on=0,Ai=null,Yo=null,qa=0,vg=0,yg=null,jj=null,Rc=0,bg=null;function lr(){return(ct&2)!==0&&Je!==0?Je&-Je:M.T!==null?Ng():mi()}function Sj(){if(or===0)if((Je&536870912)===0||tt){var a=In;In<<=1,(In&3932160)===0&&(In=262144),or=a}else or=536870912;return a=ar.current,a!==null&&(a.flags|=32),or}function Vn(a,o,u){(a===St&&(mt===2||mt===9)||a.cancelPendingCommit!==null)&&(Vo(a,0),Ti(a,Je,or,!1)),jt(a,u),((ct&2)===0||a!==St)&&(a===St&&((ct&2)===0&&(Ns|=u),Ft===4&&Ti(a,Je,or,!1)),ua(a))}function Nj(a,o,u){if((ct&6)!==0)throw Error(r(327));var p=!u&&(o&127)===0&&(o&a.expiredLanes)===0||Le(a,o),y=p?KD(a,o):wg(a,o,!0),w=p;do{if(y===0){Ko&&!p&&Ti(a,o,0,!1);break}else{if(u=a.current.alternate,w&&!FD(u)){y=wg(a,o,!1),w=!1;continue}if(y===2){if(w=o,a.errorRecoveryDisabledLanes&w)var O=0;else O=a.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){o=O;e:{var P=a;y=Mc;var F=P.current.memoizedState.isDehydrated;if(F&&(Vo(P,O).flags|=256),O=wg(P,O,!1),O!==2){if(mg&&!F){P.errorRecoveryDisabledLanes|=w,Ns|=w,y=4;break e}w=Yn,Yn=y,w!==null&&(Yn===null?Yn=w:Yn.push.apply(Yn,w))}y=O}if(w=!1,y!==2)continue}}if(y===1){Vo(a,0),Ti(a,o,0,!0);break}e:{switch(p=a,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ti(p,o,or,!Oi);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Vd+300-Xe(),10<y)){if(Ti(p,o,or,!Oi),pe(p,0,!0)!==0)break e;qa=o,p.timeoutHandle=nS(Ej.bind(null,p,u,Yn,Xd,gg,o,or,Ns,Go,Oi,w,"Throttled",-0,0),y);break e}Ej(p,u,Yn,Xd,gg,o,or,Ns,Go,Oi,w,null,-0,0)}}break}while(!0);ua(a)}function Ej(a,o,u,p,y,w,O,P,F,ee,le,fe,ne,oe){if(a.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ea},yj(o,w,fe);var Oe=(w&62914560)===w?Vd-Xe():(w&4194048)===w?_j-Xe():0;if(Oe=O4(fe,Oe),Oe!==null){qa=w,a.cancelPendingCommit=Oe(Rj.bind(null,a,o,w,u,p,y,O,P,F,le,fe,null,ne,oe)),Ti(a,w,O,!ee);return}}Rj(a,o,w,u,p,y,O,P,F)}function FD(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var y=u[p],w=y.getSnapshot;y=y.value;try{if(!nr(w(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ti(a,o,u,p){o&=~pg,o&=~Ns,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var y=o;0<y;){var w=31-ht(y),O=1<<w;p[w]=-1,y&=~O}u!==0&&ja(a,u,o)}function Qd(){return(ct&6)===0?(Dc(0),!1):!0}function xg(){if(Ve!==null){if(mt===0)var a=Ve.return;else a=Ve,Aa=gs=null,Ip(a),$o=null,vc=0,a=Ve;for(;a!==null;)rj(a.alternate,a),a=a.return;Ve=null}}function Vo(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,c4(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),qa=0,xg(),St=a,Ve=u=Ca(a.current,null),Je=o,mt=0,sr=null,Oi=!1,Ko=Le(a,o),mg=!1,Go=or=pg=Ns=Ci=Ft=0,Yn=Mc=null,gg=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var y=31-ht(p),w=1<<y;o|=a[y],p&=~w}return Ua=o,yd(),u}function Oj(a,o){Fe=null,M.H=Nc,o===Lo||o===Ed?(o=F_(),mt=3):o===Sp?(o=F_(),mt=4):mt=o===Jp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,sr=o,Ve===null&&(Ft=1,Ud(a,Sr(o,a.current)))}function Cj(){var a=ar.current;return a===null?!0:(Je&4194048)===Je?Cr===null:(Je&62914560)===Je||(Je&536870912)!==0?a===Cr:!1}function kj(){var a=M.H;return M.H=Nc,a===null?Nc:a}function Aj(){var a=M.A;return M.A=qD,a}function Jd(){Ft=4,Oi||(Je&4194048)!==Je&&ar.current!==null||(Ko=!0),(Ci&134217727)===0&&(Ns&134217727)===0||St===null||Ti(St,Je,or,!1)}function wg(a,o,u){var p=ct;ct|=2;var y=kj(),w=Aj();(St!==a||Je!==o)&&(Xd=null,Vo(a,o)),o=!1;var O=Ft;e:do try{if(mt!==0&&Ve!==null){var P=Ve,F=sr;switch(mt){case 8:xg(),O=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(o=!0);var ee=mt;if(mt=0,sr=null,Wo(a,P,F,ee),u&&Ko){O=0;break e}break;default:ee=mt,mt=0,sr=null,Wo(a,P,F,ee)}}HD(),O=Ft;break}catch(le){Oj(a,le)}while(!0);return o&&a.shellSuspendCounter++,Aa=gs=null,ct=p,M.H=y,M.A=w,Ve===null&&(St=null,Je=0,yd()),O}function HD(){for(;Ve!==null;)Tj(Ve)}function KD(a,o){var u=ct;ct|=2;var p=kj(),y=Aj();St!==a||Je!==o?(Xd=null,Wd=Xe()+500,Vo(a,o)):Ko=Le(a,o);e:do try{if(mt!==0&&Ve!==null){o=Ve;var w=sr;t:switch(mt){case 1:mt=0,sr=null,Wo(a,o,w,1);break;case 2:case 9:if(q_(w)){mt=0,sr=null,Pj(o);break}o=function(){mt!==2&&mt!==9||St!==a||(mt=7),ua(a)},w.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:q_(w)?(mt=0,sr=null,Pj(o)):(mt=0,sr=null,Wo(a,o,w,7));break;case 5:var O=null;switch(Ve.tag){case 26:O=Ve.memoizedState;case 5:case 27:var P=Ve;if(O?vS(O):P.stateNode.complete){mt=0,sr=null;var F=P.sibling;if(F!==null)Ve=F;else{var ee=P.return;ee!==null?(Ve=ee,Zd(ee)):Ve=null}break t}}mt=0,sr=null,Wo(a,o,w,5);break;case 6:mt=0,sr=null,Wo(a,o,w,6);break;case 8:xg(),Ft=6;break e;default:throw Error(r(462))}}GD();break}catch(le){Oj(a,le)}while(!0);return Aa=gs=null,M.H=p,M.A=y,ct=u,Ve!==null?0:(St=null,Je=0,yd(),Ft)}function GD(){for(;Ve!==null&&!Vt();)Tj(Ve)}function Tj(a){var o=tj(a.alternate,a,Ua);a.memoizedProps=a.pendingProps,o===null?Zd(a):Ve=o}function Pj(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=W1(u,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=W1(u,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:Ip(o);default:rj(u,o),o=Ve=A_(o,Ua),o=tj(u,o,Ua)}a.memoizedProps=a.pendingProps,o===null?Zd(a):Ve=o}function Wo(a,o,u,p){Aa=gs=null,Ip(o),$o=null,vc=0;var y=o.return;try{if(RD(a,y,o,u,Je)){Ft=1,Ud(a,Sr(u,a.current)),Ve=null;return}}catch(w){if(y!==null)throw Ve=y,w;Ft=1,Ud(a,Sr(u,a.current)),Ve=null;return}o.flags&32768?(tt||p===1?a=!0:Ko||(Je&536870912)!==0?a=!1:(Oi=a=!0,(p===2||p===9||p===3||p===6)&&(p=ar.current,p!==null&&p.tag===13&&(p.flags|=16384))),Mj(o,a)):Zd(o)}function Zd(a){var o=a;do{if((o.flags&32768)!==0){Mj(o,Oi);return}a=o.return;var u=LD(o.alternate,o,Ua);if(u!==null){Ve=u;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ft===0&&(Ft=5)}function Mj(a,o){do{var u=$D(a.alternate,a);if(u!==null){u.flags&=32767,Ve=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=u}while(a!==null);Ft=6,Ve=null}function Rj(a,o,u,p,y,w,O,P,F){a.cancelPendingCommit=null;do ef();while(on!==0);if((ct&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(w=o.lanes|o.childLanes,w|=cp,qn(a,u,w,O,P,F),a===St&&(Ve=St=null,Je=0),Yo=o,Ai=a,qa=u,vg=w,yg=y,jj=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,XD(me,function(){return zj(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=M.T,M.T=null,y=z.p,z.p=2,O=ct,ct|=4;try{zD(a,o,u)}finally{ct=O,z.p=y,M.T=p}}on=1,Dj(),Ij(),Lj()}}function Dj(){if(on===1){on=0;var a=Ai,o=Yo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=M.T,M.T=null;var p=z.p;z.p=2;var y=ct;ct|=4;try{pj(o,a);var w=Mg,O=w_(a.containerInfo),P=w.focusedElem,F=w.selectionRange;if(O!==P&&P&&P.ownerDocument&&x_(P.ownerDocument.documentElement,P)){if(F!==null&&ap(P)){var ee=F.start,le=F.end;if(le===void 0&&(le=ee),"selectionStart"in P)P.selectionStart=ee,P.selectionEnd=Math.min(le,P.value.length);else{var fe=P.ownerDocument||document,ne=fe&&fe.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),Oe=P.textContent.length,$e=Math.min(F.start,Oe),wt=F.end===void 0?$e:Math.min(F.end,Oe);!oe.extend&&$e>wt&&(O=wt,wt=$e,$e=O);var W=b_(P,$e),Y=b_(P,wt);if(W&&Y&&(oe.rangeCount!==1||oe.anchorNode!==W.node||oe.anchorOffset!==W.offset||oe.focusNode!==Y.node||oe.focusOffset!==Y.offset)){var Z=fe.createRange();Z.setStart(W.node,W.offset),oe.removeAllRanges(),$e>wt?(oe.addRange(Z),oe.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),oe.addRange(Z))}}}}for(fe=[],oe=P;oe=oe.parentNode;)oe.nodeType===1&&fe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<fe.length;P++){var ue=fe[P];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}hf=!!Pg,Mg=Pg=null}finally{ct=y,z.p=p,M.T=u}}a.current=o,on=2}}function Ij(){if(on===2){on=0;var a=Ai,o=Yo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=M.T,M.T=null;var p=z.p;z.p=2;var y=ct;ct|=4;try{uj(a,o.alternate,o)}finally{ct=y,z.p=p,M.T=u}}on=3}}function Lj(){if(on===4||on===3){on=0,Fr();var a=Ai,o=Yo,u=qa,p=jj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?on=5:(on=0,Yo=Ai=null,$j(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(ki=null),Sa(u),o=o.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ft,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=M.T,y=z.p,z.p=2,M.T=null;try{for(var w=a.onRecoverableError,O=0;O<p.length;O++){var P=p[O];w(P.value,{componentStack:P.stack})}}finally{M.T=o,z.p=y}}(qa&3)!==0&&ef(),ua(a),y=a.pendingLanes,(u&261930)!==0&&(y&42)!==0?a===bg?Rc++:(Rc=0,bg=a):Rc=0,Dc(0)}}function $j(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,pc(o)))}function ef(){return Dj(),Ij(),Lj(),zj()}function zj(){if(on!==5)return!1;var a=Ai,o=vg;vg=0;var u=Sa(qa),p=M.T,y=z.p;try{z.p=32>u?32:u,M.T=null,u=yg,yg=null;var w=Ai,O=qa;if(on=0,Yo=Ai=null,qa=0,(ct&6)!==0)throw Error(r(331));var P=ct;if(ct|=4,xj(w.current),vj(w,w.current,O,u),ct=P,Dc(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ft,w)}catch{}return!0}finally{z.p=y,M.T=p,$j(a,o)}}function Uj(a,o,u){o=Sr(u,o),o=Qp(a.stateNode,o,2),a=ji(a,o,2),a!==null&&(jt(a,2),ua(a))}function pt(a,o,u){if(a.tag===3)Uj(a,a,u);else for(;o!==null;){if(o.tag===3){Uj(o,a,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ki===null||!ki.has(p))){a=Sr(u,a),u=q1(2),p=ji(o,u,2),p!==null&&(B1(u,p,o,a),jt(p,2),ua(p));break}}o=o.return}}function _g(a,o,u){var p=a.pingCache;if(p===null){p=a.pingCache=new BD;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(mg=!0,y.add(u),a=YD.bind(null,a,o,u),o.then(a,a))}function YD(a,o,u){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,St===a&&(Je&u)===u&&(Ft===4||Ft===3&&(Je&62914560)===Je&&300>Xe()-Vd?(ct&2)===0&&Vo(a,0):pg|=u,Go===Je&&(Go=0)),ua(a)}function qj(a,o){o===0&&(o=ye()),a=hs(a,o),a!==null&&(jt(a,o),ua(a))}function VD(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),qj(a,u)}function WD(a,o){var u=0;switch(a.tag){case 31:case 13:var p=a.stateNode,y=a.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(o),qj(a,u)}function XD(a,o){return et(a,o)}var tf=null,Xo=null,jg=!1,nf=!1,Sg=!1,Pi=0;function ua(a){a!==Xo&&a.next===null&&(Xo===null?tf=Xo=a:Xo=Xo.next=a),nf=!0,jg||(jg=!0,JD())}function Dc(a,o){if(!Sg&&nf){Sg=!0;do for(var u=!1,p=tf;p!==null;){if(a!==0){var y=p.pendingLanes;if(y===0)var w=0;else{var O=p.suspendedLanes,P=p.pingedLanes;w=(1<<31-ht(42|a)+1)-1,w&=y&~(O&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,Kj(p,w))}else w=Je,w=pe(p,p===St?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||Le(p,w)||(u=!0,Kj(p,w));p=p.next}while(u);Sg=!1}}function QD(){Bj()}function Bj(){nf=jg=!1;var a=0;Pi!==0&&l4()&&(a=Pi);for(var o=Xe(),u=null,p=tf;p!==null;){var y=p.next,w=Fj(p,o);w===0?(p.next=null,u===null?tf=y:u.next=y,y===null&&(Xo=u)):(u=p,(a!==0||(w&3)!==0)&&(nf=!0)),p=y}on!==0&&on!==5||Dc(a),Pi!==0&&(Pi=0)}function Fj(a,o){for(var u=a.suspendedLanes,p=a.pingedLanes,y=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var O=31-ht(w),P=1<<O,F=y[O];F===-1?((P&u)===0||(P&p)!==0)&&(y[O]=yt(P,o)):F<=o&&(a.expiredLanes|=P),w&=~P}if(o=St,u=Je,u=pe(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,u===0||a===o&&(mt===2||mt===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&dt(p),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Le(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(p!==null&&dt(p),Sa(u)){case 2:case 8:u=sn;break;case 32:u=me;break;case 268435456:u=De;break;default:u=me}return p=Hj.bind(null,a),u=et(u,p),a.callbackPriority=o,a.callbackNode=u,o}return p!==null&&p!==null&&dt(p),a.callbackPriority=2,a.callbackNode=null,2}function Hj(a,o){if(on!==0&&on!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(ef()&&a.callbackNode!==u)return null;var p=Je;return p=pe(a,a===St?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(Nj(a,p,o),Fj(a,Xe()),a.callbackNode!=null&&a.callbackNode===u?Hj.bind(null,a):null)}function Kj(a,o){if(ef())return null;Nj(a,o,!0)}function JD(){u4(function(){(ct&6)!==0?et(er,QD):Bj()})}function Ng(){if(Pi===0){var a=Do;a===0&&(a=Hr,Hr<<=1,(Hr&261888)===0&&(Hr=256)),Pi=a}return Pi}function Gj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ud(""+a)}function Yj(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function ZD(a,o,u,p,y){if(o==="submit"&&u&&u.stateNode===y){var w=Gj((y[Bn]||null).action),O=p.submitter;O&&(o=(o=O[Bn]||null)?Gj(o.formAction):O.getAttribute("formAction"),o!==null&&(w=o,O=null));var P=new md("action","action",null,p,y);a.push({event:P,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Pi!==0){var F=O?Yj(y,O):new FormData(y);Kp(u,{pending:!0,data:F,method:y.method,action:w},null,F)}}else typeof w=="function"&&(P.preventDefault(),F=O?Yj(y,O):new FormData(y),Kp(u,{pending:!0,data:F,method:y.method,action:w},w,F))},currentTarget:y}]})}}for(var Eg=0;Eg<lp.length;Eg++){var Og=lp[Eg],e4=Og.toLowerCase(),t4=Og[0].toUpperCase()+Og.slice(1);Kr(e4,"on"+t4)}Kr(S_,"onAnimationEnd"),Kr(N_,"onAnimationIteration"),Kr(E_,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(vD,"onTransitionRun"),Kr(yD,"onTransitionStart"),Kr(bD,"onTransitionCancel"),Kr(O_,"onTransitionEnd"),wo("onMouseEnter",["mouseout","mouseover"]),wo("onMouseLeave",["mouseout","mouseover"]),wo("onPointerEnter",["pointerout","pointerover"]),wo("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function Vj(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var p=a[u],y=p.event;p=p.listeners;e:{var w=void 0;if(o)for(var O=p.length-1;0<=O;O--){var P=p[O],F=P.instance,ee=P.currentTarget;if(P=P.listener,F!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=ee;try{w(y)}catch(le){vd(le)}y.currentTarget=null,w=F}else for(O=0;O<p.length;O++){if(P=p[O],F=P.instance,ee=P.currentTarget,P=P.listener,F!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=ee;try{w(y)}catch(le){vd(le)}y.currentTarget=null,w=F}}}}function We(a,o){var u=o[Um];u===void 0&&(u=o[Um]=new Set);var p=a+"__bubble";u.has(p)||(Wj(o,a,2,!1),u.add(p))}function Cg(a,o,u){var p=0;o&&(p|=4),Wj(u,a,p,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function kg(a){if(!a[rf]){a[rf]=!0,Bw.forEach(function(u){u!=="selectionchange"&&(n4.has(u)||Cg(u,!1,a),Cg(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[rf]||(o[rf]=!0,Cg("selectionchange",!1,o))}}function Wj(a,o,u,p){switch(SS(o)){case 2:var y=A4;break;case 8:y=T4;break;default:y=Hg}u=y.bind(null,o,u,a),y=void 0,!Wm||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?a.addEventListener(o,u,{capture:!0,passive:y}):a.addEventListener(o,u,!0):y!==void 0?a.addEventListener(o,u,{passive:y}):a.addEventListener(o,u,!1)}function Ag(a,o,u,p,y){var w=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var P=p.stateNode.containerInfo;if(P===y)break;if(O===4)for(O=p.return;O!==null;){var F=O.tag;if((F===3||F===4)&&O.stateNode.containerInfo===y)return;O=O.return}for(;P!==null;){if(O=yo(P),O===null)return;if(F=O.tag,F===5||F===6||F===26||F===27){p=w=O;continue e}P=P.parentNode}}p=p.return}e_(function(){var ee=w,le=Ym(u),fe=[];e:{var ne=C_.get(a);if(ne!==void 0){var oe=md,Oe=a;switch(a){case"keypress":if(fd(u)===0)break e;case"keydown":case"keyup":oe=WR;break;case"focusin":Oe="focus",oe=Zm;break;case"focusout":Oe="blur",oe=Zm;break;case"beforeblur":case"afterblur":oe=Zm;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=LR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=JR;break;case S_:case N_:case E_:oe=UR;break;case O_:oe=eD;break;case"scroll":case"scrollend":oe=DR;break;case"wheel":oe=nD;break;case"copy":case"cut":case"paste":oe=BR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=i_;break;case"toggle":case"beforetoggle":oe=aD}var $e=(o&4)!==0,wt=!$e&&(a==="scroll"||a==="scrollend"),W=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var Y=ee,Z;Y!==null;){var ue=Y;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||W===null||(ue=ac(Y,W),ue!=null&&$e.push(Lc(Y,ue,Z))),wt)break;Y=Y.return}0<$e.length&&(ne=new oe(ne,Oe,null,u,le),fe.push({event:ne,listeners:$e}))}}if((o&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",ne&&u!==Gm&&(Oe=u.relatedTarget||u.fromElement)&&(yo(Oe)||Oe[vo]))break e;if((oe||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(Oe=u.relatedTarget||u.toElement,oe=ee,Oe=Oe?yo(Oe):null,Oe!==null&&(wt=s(Oe),$e=Oe.tag,Oe!==wt||$e!==5&&$e!==27&&$e!==6)&&(Oe=null)):(oe=null,Oe=ee),oe!==Oe)){if($e=r_,ue="onMouseLeave",W="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&($e=i_,ue="onPointerLeave",W="onPointerEnter",Y="pointer"),wt=oe==null?ne:rc(oe),Z=Oe==null?ne:rc(Oe),ne=new $e(ue,Y+"leave",oe,u,le),ne.target=wt,ne.relatedTarget=Z,ue=null,yo(le)===ee&&($e=new $e(W,Y+"enter",Oe,u,le),$e.target=Z,$e.relatedTarget=wt,ue=$e),wt=ue,oe&&Oe)t:{for($e=r4,W=oe,Y=Oe,Z=0,ue=W;ue;ue=$e(ue))Z++;ue=0;for(var Me=Y;Me;Me=$e(Me))ue++;for(;0<Z-ue;)W=$e(W),Z--;for(;0<ue-Z;)Y=$e(Y),ue--;for(;Z--;){if(W===Y||Y!==null&&W===Y.alternate){$e=W;break t}W=$e(W),Y=$e(Y)}$e=null}else $e=null;oe!==null&&Xj(fe,ne,oe,$e,!1),Oe!==null&&wt!==null&&Xj(fe,wt,Oe,$e,!0)}}e:{if(ne=ee?rc(ee):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var it=h_;else if(d_(ne))if(m_)it=mD;else{it=fD;var Ae=dD}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Km(ee.elementType)&&(it=h_):it=hD;if(it&&(it=it(a,ee))){f_(fe,it,u,le);break e}Ae&&Ae(a,ne,ee),a==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Hm(ne,"number",ne.value)}switch(Ae=ee?rc(ee):window,a){case"focusin":(d_(Ae)||Ae.contentEditable==="true")&&(Oo=Ae,ip=ee,fc=null);break;case"focusout":fc=ip=Oo=null;break;case"mousedown":sp=!0;break;case"contextmenu":case"mouseup":case"dragend":sp=!1,__(fe,u,le);break;case"selectionchange":if(gD)break;case"keydown":case"keyup":__(fe,u,le)}var He;if(tp)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Eo?c_(a,u)&&(Ze="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ze="onCompositionStart");Ze&&(s_&&u.locale!=="ko"&&(Eo||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Eo&&(He=t_()):(gi=le,Xm="value"in gi?gi.value:gi.textContent,Eo=!0)),Ae=af(ee,Ze),0<Ae.length&&(Ze=new a_(Ze,a,null,u,le),fe.push({event:Ze,listeners:Ae}),He?Ze.data=He:(He=u_(u),He!==null&&(Ze.data=He)))),(He=sD?oD(a,u):lD(a,u))&&(Ze=af(ee,"onBeforeInput"),0<Ze.length&&(Ae=new a_("onBeforeInput","beforeinput",null,u,le),fe.push({event:Ae,listeners:Ze}),Ae.data=He)),ZD(fe,a,ee,u,le)}Vj(fe,o)})}function Lc(a,o,u){return{instance:a,listener:o,currentTarget:u}}function af(a,o){for(var u=o+"Capture",p=[];a!==null;){var y=a,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=ac(a,u),y!=null&&p.unshift(Lc(a,y,w)),y=ac(a,o),y!=null&&p.push(Lc(a,y,w))),a.tag===3)return p;a=a.return}return[]}function r4(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Xj(a,o,u,p,y){for(var w=o._reactName,O=[];u!==null&&u!==p;){var P=u,F=P.alternate,ee=P.stateNode;if(P=P.tag,F!==null&&F===p)break;P!==5&&P!==26&&P!==27||ee===null||(F=ee,y?(ee=ac(u,w),ee!=null&&O.unshift(Lc(u,ee,F))):y||(ee=ac(u,w),ee!=null&&O.push(Lc(u,ee,F)))),u=u.return}O.length!==0&&a.push({event:o,listeners:O})}var a4=/\r\n?/g,i4=/\u0000|\uFFFD/g;function Qj(a){return(typeof a=="string"?a:""+a).replace(a4,`
`).replace(i4,"")}function Jj(a,o){return o=Qj(o),Qj(a)===o}function xt(a,o,u,p,y,w){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||jo(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&jo(a,""+p);break;case"className":ld(a,"class",p);break;case"tabIndex":ld(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ld(a,u,p);break;case"style":Jw(a,p,w);break;case"data":if(o!=="object"){ld(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=ud(""+p),a.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(o!=="input"&&xt(a,o,"name",y.name,y,null),xt(a,o,"formEncType",y.formEncType,y,null),xt(a,o,"formMethod",y.formMethod,y,null),xt(a,o,"formTarget",y.formTarget,y,null)):(xt(a,o,"encType",y.encType,y,null),xt(a,o,"method",y.method,y,null),xt(a,o,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=ud(""+p),a.setAttribute(u,p);break;case"onClick":p!=null&&(a.onclick=Ea);break;case"onScroll":p!=null&&We("scroll",a);break;case"onScrollEnd":p!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}u=ud(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""+p):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":p===!0?a.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,p):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(u,p):a.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(u):a.setAttribute(u,p);break;case"popover":We("beforetoggle",a),We("toggle",a),od(a,"popover",p);break;case"xlinkActuate":Na(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Na(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Na(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Na(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Na(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Na(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Na(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Na(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Na(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":od(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=MR.get(u)||u,od(a,u,p))}}function Tg(a,o,u,p,y,w){switch(u){case"style":Jw(a,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof p=="string"?jo(a,p):(typeof p=="number"||typeof p=="bigint")&&jo(a,""+p);break;case"onScroll":p!=null&&We("scroll",a);break;case"onScrollEnd":p!=null&&We("scrollend",a);break;case"onClick":p!=null&&(a.onclick=Ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fw.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),w=a[Bn]||null,w=w!=null?w[u]:null,typeof w=="function"&&a.removeEventListener(o,w,y),typeof p=="function")){typeof w!="function"&&w!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,p,y);break e}u in a?a[u]=p:p===!0?a.setAttribute(u,""):od(a,u,p)}}}function Cn(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var p=!1,y=!1,w;for(w in u)if(u.hasOwnProperty(w)){var O=u[w];if(O!=null)switch(w){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(a,o,w,O,u,null)}}y&&xt(a,o,"srcSet",u.srcSet,u,null),p&&xt(a,o,"src",u.src,u,null);return;case"input":We("invalid",a);var P=w=O=y=null,F=null,ee=null;for(p in u)if(u.hasOwnProperty(p)){var le=u[p];if(le!=null)switch(p){case"name":y=le;break;case"type":O=le;break;case"checked":F=le;break;case"defaultChecked":ee=le;break;case"value":w=le;break;case"defaultValue":P=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:xt(a,o,p,le,u,null)}}Vw(a,w,P,F,ee,O,y,!1);return;case"select":We("invalid",a),p=O=w=null;for(y in u)if(u.hasOwnProperty(y)&&(P=u[y],P!=null))switch(y){case"value":w=P;break;case"defaultValue":O=P;break;case"multiple":p=P;default:xt(a,o,y,P,u,null)}o=w,u=O,a.multiple=!!p,o!=null?_o(a,!!p,o,!1):u!=null&&_o(a,!!p,u,!0);return;case"textarea":We("invalid",a),w=y=p=null;for(O in u)if(u.hasOwnProperty(O)&&(P=u[O],P!=null))switch(O){case"value":p=P;break;case"defaultValue":y=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:xt(a,o,O,P,u,null)}Xw(a,p,y,w);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(p=u[F],p!=null))switch(F){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:xt(a,o,F,p,u,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(p=0;p<Ic.length;p++)We(Ic[p],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in u)if(u.hasOwnProperty(ee)&&(p=u[ee],p!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(a,o,ee,p,u,null)}return;default:if(Km(o)){for(le in u)u.hasOwnProperty(le)&&(p=u[le],p!==void 0&&Tg(a,o,le,p,u,void 0));return}}for(P in u)u.hasOwnProperty(P)&&(p=u[P],p!=null&&xt(a,o,P,p,u,null))}function s4(a,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,O=null,P=null,F=null,ee=null,le=null;for(oe in u){var fe=u[oe];if(u.hasOwnProperty(oe)&&fe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":F=fe;default:p.hasOwnProperty(oe)||xt(a,o,oe,null,p,fe)}}for(var ne in p){var oe=p[ne];if(fe=u[ne],p.hasOwnProperty(ne)&&(oe!=null||fe!=null))switch(ne){case"type":w=oe;break;case"name":y=oe;break;case"checked":ee=oe;break;case"defaultChecked":le=oe;break;case"value":O=oe;break;case"defaultValue":P=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:oe!==fe&&xt(a,o,ne,oe,p,fe)}}Fm(a,O,P,F,ee,le,w,y);return;case"select":oe=O=P=ne=null;for(w in u)if(F=u[w],u.hasOwnProperty(w)&&F!=null)switch(w){case"value":break;case"multiple":oe=F;default:p.hasOwnProperty(w)||xt(a,o,w,null,p,F)}for(y in p)if(w=p[y],F=u[y],p.hasOwnProperty(y)&&(w!=null||F!=null))switch(y){case"value":ne=w;break;case"defaultValue":P=w;break;case"multiple":O=w;default:w!==F&&xt(a,o,y,w,p,F)}o=P,u=O,p=oe,ne!=null?_o(a,!!u,ne,!1):!!p!=!!u&&(o!=null?_o(a,!!u,o,!0):_o(a,!!u,u?[]:"",!1));return;case"textarea":oe=ne=null;for(P in u)if(y=u[P],u.hasOwnProperty(P)&&y!=null&&!p.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:xt(a,o,P,null,p,y)}for(O in p)if(y=p[O],w=u[O],p.hasOwnProperty(O)&&(y!=null||w!=null))switch(O){case"value":ne=y;break;case"defaultValue":oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&xt(a,o,O,y,p,w)}Ww(a,ne,oe);return;case"option":for(var Oe in u)if(ne=u[Oe],u.hasOwnProperty(Oe)&&ne!=null&&!p.hasOwnProperty(Oe))switch(Oe){case"selected":a.selected=!1;break;default:xt(a,o,Oe,null,p,ne)}for(F in p)if(ne=p[F],oe=u[F],p.hasOwnProperty(F)&&ne!==oe&&(ne!=null||oe!=null))switch(F){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:xt(a,o,F,ne,p,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in u)ne=u[$e],u.hasOwnProperty($e)&&ne!=null&&!p.hasOwnProperty($e)&&xt(a,o,$e,null,p,ne);for(ee in p)if(ne=p[ee],oe=u[ee],p.hasOwnProperty(ee)&&ne!==oe&&(ne!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:xt(a,o,ee,ne,p,oe)}return;default:if(Km(o)){for(var wt in u)ne=u[wt],u.hasOwnProperty(wt)&&ne!==void 0&&!p.hasOwnProperty(wt)&&Tg(a,o,wt,void 0,p,ne);for(le in p)ne=p[le],oe=u[le],!p.hasOwnProperty(le)||ne===oe||ne===void 0&&oe===void 0||Tg(a,o,le,ne,p,oe);return}}for(var W in u)ne=u[W],u.hasOwnProperty(W)&&ne!=null&&!p.hasOwnProperty(W)&&xt(a,o,W,null,p,ne);for(fe in p)ne=p[fe],oe=u[fe],!p.hasOwnProperty(fe)||ne===oe||ne==null&&oe==null||xt(a,o,fe,ne,p,oe)}function Zj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o4(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var y=u[p],w=y.transferSize,O=y.initiatorType,P=y.duration;if(w&&P&&Zj(O)){for(O=0,P=y.responseEnd,p+=1;p<u.length;p++){var F=u[p],ee=F.startTime;if(ee>P)break;var le=F.transferSize,fe=F.initiatorType;le&&Zj(fe)&&(F=F.responseEnd,O+=le*(F<P?1:(P-ee)/(F-ee)))}if(--p,o+=8*(w+O)/(y.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Pg=null,Mg=null;function sf(a){return a.nodeType===9?a:a.ownerDocument}function eS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tS(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Rg(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Dg=null;function l4(){var a=window.event;return a&&a.type==="popstate"?a===Dg?!1:(Dg=a,!0):(Dg=null,!1)}var nS=typeof setTimeout=="function"?setTimeout:void 0,c4=typeof clearTimeout=="function"?clearTimeout:void 0,rS=typeof Promise=="function"?Promise:void 0,u4=typeof queueMicrotask=="function"?queueMicrotask:typeof rS<"u"?function(a){return rS.resolve(null).then(a).catch(d4)}:nS;function d4(a){setTimeout(function(){throw a})}function Mi(a){return a==="head"}function aS(a,o){var u=o,p=0;do{var y=u.nextSibling;if(a.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(p===0){a.removeChild(y),el(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")$c(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,$c(u);for(var w=u.firstChild;w;){var O=w.nextSibling,P=w.nodeName;w[nc]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=O}}else u==="body"&&$c(a.ownerDocument.body);u=y}while(u);el(o)}function iS(a,o){var u=a;a=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=p}while(u)}function Ig(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Ig(u),qm(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function f4(a,o,u,p){for(;a.nodeType===1;){var y=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[nc])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=kr(a.nextSibling),a===null)break}return null}function h4(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=kr(a.nextSibling),a===null))return null;return a}function sS(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=kr(a.nextSibling),a===null))return null;return a}function Lg(a){return a.data==="$?"||a.data==="$~"}function $g(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function m4(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function kr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var zg=null;function oS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return kr(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function lS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function cS(a,o,u){switch(o=sf(u),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function $c(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);qm(a)}var Ar=new Map,uS=new Set;function of(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ba=z.d;z.d={f:p4,r:g4,D:v4,C:y4,L:b4,m:x4,X:_4,S:w4,M:j4};function p4(){var a=Ba.f(),o=Qd();return a||o}function g4(a){var o=bo(a);o!==null&&o.tag===5&&o.type==="form"?O1(o):Ba.r(a)}var Qo=typeof document>"u"?null:document;function dS(a,o,u){var p=Qo;if(p&&typeof o=="string"&&o){var y=_r(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),uS.has(y)||(uS.add(y),a={rel:a,crossOrigin:u,href:o},p.querySelector(y)===null&&(o=p.createElement("link"),Cn(o,"link",a),mn(o),p.head.appendChild(o)))}}function v4(a){Ba.D(a),dS("dns-prefetch",a,null)}function y4(a,o){Ba.C(a,o),dS("preconnect",a,o)}function b4(a,o,u){Ba.L(a,o,u);var p=Qo;if(p&&a&&o){var y='link[rel="preload"][as="'+_r(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+_r(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+_r(u.imageSizes)+'"]')):y+='[href="'+_r(a)+'"]';var w=y;switch(o){case"style":w=Jo(a);break;case"script":w=Zo(a)}Ar.has(w)||(a=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),Ar.set(w,a),p.querySelector(y)!==null||o==="style"&&p.querySelector(zc(w))||o==="script"&&p.querySelector(Uc(w))||(o=p.createElement("link"),Cn(o,"link",a),mn(o),p.head.appendChild(o)))}}function x4(a,o){Ba.m(a,o);var u=Qo;if(u&&a){var p=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+_r(p)+'"][href="'+_r(a)+'"]',w=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Zo(a)}if(!Ar.has(w)&&(a=g({rel:"modulepreload",href:a},o),Ar.set(w,a),u.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Uc(w)))return}p=u.createElement("link"),Cn(p,"link",a),mn(p),u.head.appendChild(p)}}}function w4(a,o,u){Ba.S(a,o,u);var p=Qo;if(p&&a){var y=xo(p).hoistableStyles,w=Jo(a);o=o||"default";var O=y.get(w);if(!O){var P={loading:0,preload:null};if(O=p.querySelector(zc(w)))P.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},u),(u=Ar.get(w))&&Ug(a,u);var F=O=p.createElement("link");mn(F),Cn(F,"link",a),F._p=new Promise(function(ee,le){F.onload=ee,F.onerror=le}),F.addEventListener("load",function(){P.loading|=1}),F.addEventListener("error",function(){P.loading|=2}),P.loading|=4,lf(O,o,p)}O={type:"stylesheet",instance:O,count:1,state:P},y.set(w,O)}}}function _4(a,o){Ba.X(a,o);var u=Qo;if(u&&a){var p=xo(u).hoistableScripts,y=Zo(a),w=p.get(y);w||(w=u.querySelector(Uc(y)),w||(a=g({src:a,async:!0},o),(o=Ar.get(y))&&qg(a,o),w=u.createElement("script"),mn(w),Cn(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function j4(a,o){Ba.M(a,o);var u=Qo;if(u&&a){var p=xo(u).hoistableScripts,y=Zo(a),w=p.get(y);w||(w=u.querySelector(Uc(y)),w||(a=g({src:a,async:!0,type:"module"},o),(o=Ar.get(y))&&qg(a,o),w=u.createElement("script"),mn(w),Cn(w,"link",a),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function fS(a,o,u,p){var y=(y=ce.current)?of(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Jo(u.href),u=xo(y).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=Jo(u.href);var w=xo(y).hoistableStyles,O=w.get(a);if(O||(y=y.ownerDocument||y,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,O),(w=y.querySelector(zc(a)))&&!w._p&&(O.instance=w,O.state.loading=5),Ar.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ar.set(a,u),w||S4(y,a,u,O.state))),o&&p===null)throw Error(r(528,""));return O}if(o&&p!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Zo(u),u=xo(y).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Jo(a){return'href="'+_r(a)+'"'}function zc(a){return'link[rel="stylesheet"]['+a+"]"}function hS(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function S4(a,o,u,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Cn(o,"link",u),mn(o),a.head.appendChild(o))}function Zo(a){return'[src="'+_r(a)+'"]'}function Uc(a){return"script[async]"+a}function mS(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+_r(u.href)+'"]');if(p)return o.instance=p,mn(p),p;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),mn(p),Cn(p,"style",y),lf(p,u.precedence,a),o.instance=p;case"stylesheet":y=Jo(u.href);var w=a.querySelector(zc(y));if(w)return o.state.loading|=4,o.instance=w,mn(w),w;p=hS(u),(y=Ar.get(y))&&Ug(p,y),w=(a.ownerDocument||a).createElement("link"),mn(w);var O=w;return O._p=new Promise(function(P,F){O.onload=P,O.onerror=F}),Cn(w,"link",p),o.state.loading|=4,lf(w,u.precedence,a),o.instance=w;case"script":return w=Zo(u.src),(y=a.querySelector(Uc(w)))?(o.instance=y,mn(y),y):(p=u,(y=Ar.get(w))&&(p=g({},u),qg(p,y)),a=a.ownerDocument||a,y=a.createElement("script"),mn(y),Cn(y,"link",p),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,lf(p,u.precedence,a));return o.instance}function lf(a,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,w=y,O=0;O<p.length;O++){var P=p[O];if(P.dataset.precedence===o)w=P;else if(w!==y)break}w?w.parentNode.insertBefore(a,w.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function Ug(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function qg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var cf=null;function pS(a,o,u){if(cf===null){var p=new Map,y=cf=new Map;y.set(u,p)}else y=cf,p=y.get(u),p||(p=new Map,y.set(u,p));if(p.has(a))return p;for(p.set(a,null),u=u.getElementsByTagName(a),y=0;y<u.length;y++){var w=u[y];if(!(w[nc]||w[Sn]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(o)||"";O=a+O;var P=p.get(O);P?P.push(w):p.set(O,[w])}}return p}function gS(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function N4(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function vS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function E4(a,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Jo(p.href),w=o.querySelector(zc(y));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=uf.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=w,mn(w);return}w=o.ownerDocument||o,p=hS(p),(y=Ar.get(y))&&Ug(p,y),w=w.createElement("link"),mn(w);var O=w;O._p=new Promise(function(P,F){O.onload=P,O.onerror=F}),Cn(w,"link",p),u.instance=w}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=uf.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var Bg=0;function O4(a,o){return a.stylesheets&&a.count===0&&ff(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var p=setTimeout(function(){if(a.stylesheets&&ff(a,a.stylesheets),a.unsuspend){var w=a.unsuspend;a.unsuspend=null,w()}},6e4+o);0<a.imgBytes&&Bg===0&&(Bg=62500*o4());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&ff(a,a.stylesheets),a.unsuspend)){var w=a.unsuspend;a.unsuspend=null,w()}},(a.imgBytes>Bg?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function uf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ff(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var df=null;function ff(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,df=new Map,o.forEach(C4,a),df=null,uf.call(a))}function C4(a,o){if(!(o.state.loading&4)){var u=df.get(a);if(u)var p=u.get(null);else{u=new Map,df.set(a,u);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var O=y[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),p=O)}p&&u.set(null,p)}y=o.instance,O=y.getAttribute("data-precedence"),w=u.get(O)||p,w===p&&u.set(null,y),u.set(O,y),this.count++,p=uf.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),w?w.parentNode.insertBefore(y,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var qc={$$typeof:C,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function k4(a,o,u,p,y,w,O,P,F){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function yS(a,o,u,p,y,w,O,P,F,ee,le,fe){return a=new k4(a,o,u,O,F,ee,le,fe,P),o=1,w===!0&&(o|=24),w=rr(3,null,null,o),a.current=w,w.stateNode=a,o=wp(),o.refCount++,a.pooledCache=o,o.refCount++,w.memoizedState={element:p,isDehydrated:u,cache:o},Np(w),a}function bS(a){return a?(a=Ao,a):Ao}function xS(a,o,u,p,y,w){y=bS(y),p.context===null?p.context=y:p.pendingContext=y,p=_i(o),p.payload={element:u},w=w===void 0?null:w,w!==null&&(p.callback=w),u=ji(a,p,o),u!==null&&(Vn(u,a,o),bc(u,a,o))}function wS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function Fg(a,o){wS(a,o),(a=a.alternate)&&wS(a,o)}function _S(a){if(a.tag===13||a.tag===31){var o=hs(a,67108864);o!==null&&Vn(o,a,67108864),Fg(a,67108864)}}function jS(a){if(a.tag===13||a.tag===31){var o=lr();o=go(o);var u=hs(a,o);u!==null&&Vn(u,a,o),Fg(a,o)}}var hf=!0;function A4(a,o,u,p){var y=M.T;M.T=null;var w=z.p;try{z.p=2,Hg(a,o,u,p)}finally{z.p=w,M.T=y}}function T4(a,o,u,p){var y=M.T;M.T=null;var w=z.p;try{z.p=8,Hg(a,o,u,p)}finally{z.p=w,M.T=y}}function Hg(a,o,u,p){if(hf){var y=Kg(p);if(y===null)Ag(a,o,p,mf,u),NS(a,p);else if(M4(y,a,o,u,p))p.stopPropagation();else if(NS(a,p),o&4&&-1<P4.indexOf(a)){for(;y!==null;){var w=bo(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=Mt(w.pendingLanes);if(O!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;O;){var F=1<<31-ht(O);P.entanglements[1]|=F,O&=~F}ua(w),(ct&6)===0&&(Wd=Xe()+500,Dc(0))}}break;case 31:case 13:P=hs(w,2),P!==null&&Vn(P,w,2),Qd(),Fg(w,2)}if(w=Kg(p),w===null&&Ag(a,o,p,mf,u),w===y)break;y=w}y!==null&&p.stopPropagation()}else Ag(a,o,p,null,u)}}function Kg(a){return a=Ym(a),Gg(a)}var mf=null;function Gg(a){if(mf=null,a=yo(a),a!==null){var o=s(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=l(o),a!==null)return a;a=null}else if(u===31){if(a=d(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return mf=a,null}function SS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case er:return 2;case sn:return 8;case me:case _e:return 32;case De:return 268435456;default:return 32}default:return 32}}var Yg=!1,Ri=null,Di=null,Ii=null,Bc=new Map,Fc=new Map,Li=[],P4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NS(a,o){switch(a){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Bc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(o.pointerId)}}function Hc(a,o,u,p,y,w){return a===null||a.nativeEvent!==w?(a={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},o!==null&&(o=bo(o),o!==null&&_S(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function M4(a,o,u,p,y){switch(o){case"focusin":return Ri=Hc(Ri,a,o,u,p,y),!0;case"dragenter":return Di=Hc(Di,a,o,u,p,y),!0;case"mouseover":return Ii=Hc(Ii,a,o,u,p,y),!0;case"pointerover":var w=y.pointerId;return Bc.set(w,Hc(Bc.get(w)||null,a,o,u,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Fc.set(w,Hc(Fc.get(w)||null,a,o,u,p,y)),!0}return!1}function ES(a){var o=yo(a.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){a.blockedOn=o,Uw(a.priority,function(){jS(u)});return}}else if(o===31){if(o=d(u),o!==null){a.blockedOn=o,Uw(a.priority,function(){jS(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function pf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=Kg(a.nativeEvent);if(u===null){u=a.nativeEvent;var p=new u.constructor(u.type,u);Gm=p,u.target.dispatchEvent(p),Gm=null}else return o=bo(u),o!==null&&_S(o),a.blockedOn=u,!1;o.shift()}return!0}function OS(a,o,u){pf(a)&&u.delete(o)}function R4(){Yg=!1,Ri!==null&&pf(Ri)&&(Ri=null),Di!==null&&pf(Di)&&(Di=null),Ii!==null&&pf(Ii)&&(Ii=null),Bc.forEach(OS),Fc.forEach(OS)}function gf(a,o){a.blockedOn===o&&(a.blockedOn=null,Yg||(Yg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,R4)))}var vf=null;function CS(a){vf!==a&&(vf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){vf===a&&(vf=null);for(var o=0;o<a.length;o+=3){var u=a[o],p=a[o+1],y=a[o+2];if(typeof p!="function"){if(Gg(p||u)===null)continue;break}var w=bo(u);w!==null&&(a.splice(o,3),o-=3,Kp(w,{pending:!0,data:y,method:u.method,action:p},p,y))}}))}function el(a){function o(F){return gf(F,a)}Ri!==null&&gf(Ri,a),Di!==null&&gf(Di,a),Ii!==null&&gf(Ii,a),Bc.forEach(o),Fc.forEach(o);for(var u=0;u<Li.length;u++){var p=Li[u];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Li.length&&(u=Li[0],u.blockedOn===null);)ES(u),u.blockedOn===null&&Li.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var y=u[p],w=u[p+1],O=y[Bn]||null;if(typeof w=="function")O||CS(u);else if(O){var P=null;if(w&&w.hasAttribute("formAction")){if(y=w,O=w[Bn]||null)P=O.formAction;else if(Gg(y)!==null)continue}else P=O.action;typeof P=="function"?u[p+1]=P:(u.splice(p,3),p-=3),CS(u)}}}function kS(){function a(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return y=O})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Vg(a){this._internalRoot=a}yf.prototype.render=Vg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,p=lr();xS(u,p,a,o,null,null)},yf.prototype.unmount=Vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;xS(a.current,2,null,a,null,null),Qd(),o[vo]=null}};function yf(a){this._internalRoot=a}yf.prototype.unstable_scheduleHydration=function(a){if(a){var o=mi();a={blockedOn:null,target:a,priority:o};for(var u=0;u<Li.length&&o!==0&&o<Li[u].priority;u++);Li.splice(u,0,a),u===0&&ES(a)}};var AS=t.version;if(AS!=="19.2.0")throw Error(r(527,AS,"19.2.0"));z.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var D4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{ft=bf.inject(D4),Ue=bf}catch{}}return Gc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var u=!1,p="",y=L1,w=$1,O=z1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError)),o=yS(a,1,!1,null,null,u,p,null,y,w,O,kS),a[vo]=o.current,kg(a),new Vg(o)},Gc.hydrateRoot=function(a,o,u){if(!i(a))throw Error(r(299));var p=!1,y="",w=L1,O=$1,P=z1,F=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),o=yS(a,1,!0,o,u??null,p,y,F,w,O,P,kS),o.context=bS(null),u=o.current,p=lr(),p=go(p),y=_i(p),y.callback=null,ji(u,y,p),u=p,o.current.lanes=u,jt(o,u),ua(o),a[vo]=o.current,kg(a),new yf(o)},Gc.version="19.2.0",Gc}var US;function W4(){if(US)return Jg.exports;US=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jg.exports=V4(),Jg.exports}var X4=W4();const Q4=aa(X4);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qS="popstate";function J4(e={}){function t(r,i){let{pathname:s,search:l,hash:d}=r.location;return Xy("",{pathname:s,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vu(i)}return e5(t,n,null,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ra(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z4(){return Math.random().toString(36).substring(2,10)}function BS(e,t){return{usr:e.state,key:e.key,idx:t}}function Xy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ql(t):t,state:n,key:t&&t.key||r||Z4()}}function vu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ql(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function e5(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,d="POP",f=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){d="POP";let S=m(),N=S==null?null:S-h;h=S,f&&f({action:d,location:_.location,delta:N})}function v(S,N){d="PUSH";let E=Xy(_.location,S,N);h=m()+1;let C=BS(E,h),k=_.createHref(E);try{l.pushState(C,"",k)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(k)}s&&f&&f({action:d,location:_.location,delta:1})}function x(S,N){d="REPLACE";let E=Xy(_.location,S,N);h=m();let C=BS(E,h),k=_.createHref(E);l.replaceState(C,"",k),s&&f&&f({action:d,location:_.location,delta:0})}function j(S){return t5(S)}let _={get action(){return d},get location(){return e(i,l)},listen(S){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(qS,g),f=S,()=>{i.removeEventListener(qS,g),f=null}},createHref(S){return t(i,S)},createURL:j,encodeLocation(S){let N=j(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:x,go(S){return l.go(S)}};return _}function t5(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:vu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function nk(e,t,n="/"){return n5(e,t,n,!1)}function n5(e,t,n,r){let i=typeof t=="string"?ql(t):t,s=Za(i.pathname||"/",n);if(s==null)return null;let l=rk(e);r5(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let h=m5(s);d=f5(l[f],h,r)}return d}function rk(e,t=[],n=[],r="",i=!1){let s=(l,d,f=i,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&f)return;Lt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Wa([r,m.relativePath]),v=n.concat(m);l.children&&l.children.length>0&&(Lt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),rk(l.children,t,v,g,f)),!(l.path==null&&!l.index)&&t.push({path:g,score:u5(g,l.index),routesMeta:v})};return e.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,d);else for(let h of ak(l.path))s(l,d,!0,h)}),t}function ak(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=ak(r.join("/")),d=[];return d.push(...l.map(f=>f===""?s:[s,f].join("/"))),i&&d.push(...l),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function r5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:d5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var a5=/^:[\w-]+$/,i5=3,s5=2,o5=1,l5=10,c5=-2,FS=e=>e==="*";function u5(e,t){let n=e.split("/"),r=n.length;return n.some(FS)&&(r+=c5),t&&(r+=s5),n.filter(i=>!FS(i)).reduce((i,s)=>i+(a5.test(s)?i5:s===""?o5:l5),r)}function d5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function f5(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],h=d===r.length-1,m=s==="/"?t:t.slice(s.length)||"/",g=lh({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),v=f.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=lh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Wa([s,g.pathname]),pathnameBase:y5(Wa([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Wa([s,g.pathnameBase]))}return l}function lh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=h5(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},v)=>{if(m==="*"){let j=d[v]||"";l=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const x=d[v];return g&&!x?h[m]=void 0:h[m]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:e}}function h5(e,t=!1,n=!0){ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function m5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ra(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function p5(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ql(e):e;return{pathname:n?n.startsWith("/")?n:g5(n,t):t,search:b5(r),hash:x5(i)}}function g5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nv(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function pb(e){let t=v5(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function gb(e,t,n,r=!1){let i;typeof e=="string"?i=ql(e):(i={...e},Lt(!i.pathname||!i.pathname.includes("?"),nv("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),nv("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),nv("#","search","hash",i)));let s=e===""||i.pathname==="",l=s?"/":i.pathname,d;if(l==null)d=n;else{let g=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?t[g]:"/"}let f=p5(i,d),h=l&&l!=="/"&&l.endsWith("/"),m=(s||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}var Wa=e=>e.join("/").replace(/\/\/+/g,"/"),y5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function w5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ik=["POST","PUT","PATCH","DELETE"];new Set(ik);var _5=["GET",...ik];new Set(_5);var Bl=b.createContext(null);Bl.displayName="DataRouter";var nm=b.createContext(null);nm.displayName="DataRouterState";b.createContext(!1);var sk=b.createContext({isTransitioning:!1});sk.displayName="ViewTransition";var j5=b.createContext(new Map);j5.displayName="Fetchers";var S5=b.createContext(null);S5.displayName="Await";var ia=b.createContext(null);ia.displayName="Navigation";var Pu=b.createContext(null);Pu.displayName="Location";var Ur=b.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var vb=b.createContext(null);vb.displayName="RouteError";function N5(e,{relative:t}={}){Lt(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(ia),{hash:i,pathname:s,search:l}=Mu(e,{relative:t}),d=s;return n!=="/"&&(d=s==="/"?n:Wa([n,s])),r.createHref({pathname:d,search:l,hash:i})}function Fl(){return b.useContext(Pu)!=null}function ns(){return Lt(Fl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Pu).location}var ok="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lk(e){b.useContext(ia).static||b.useLayoutEffect(e)}function wa(){let{isDataRoute:e}=b.useContext(Ur);return e?q5():E5()}function E5(){Lt(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Bl),{basename:t,navigator:n}=b.useContext(ia),{matches:r}=b.useContext(Ur),{pathname:i}=ns(),s=JSON.stringify(pb(r)),l=b.useRef(!1);return lk(()=>{l.current=!0}),b.useCallback((f,h={})=>{if(ra(l.current,ok),!l.current)return;if(typeof f=="number"){n.go(f);return}let m=gb(f,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Wa([t,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[t,n,s,i,e])}var O5=b.createContext(null);function C5(e){let t=b.useContext(Ur).outlet;return b.useMemo(()=>t&&b.createElement(O5.Provider,{value:e},t),[t,e])}function k5(){let{matches:e}=b.useContext(Ur),t=e[e.length-1];return t?t.params:{}}function Mu(e,{relative:t}={}){let{matches:n}=b.useContext(Ur),{pathname:r}=ns(),i=JSON.stringify(pb(n));return b.useMemo(()=>gb(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function A5(e,t){return ck(e,t)}function ck(e,t,n,r,i){var E;Lt(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=b.useContext(ia),{matches:l}=b.useContext(Ur),d=l[l.length-1],f=d?d.params:{},h=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let C=g&&g.path||"";uk(h,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=ns(),x;if(t){let C=typeof t=="string"?ql(t):t;Lt(m==="/"||((E=C.pathname)==null?void 0:E.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=v;let j=x.pathname||"/",_=j;if(m!=="/"){let C=m.replace(/^\//,"").split("/");_="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=nk(e,{pathname:_});ra(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ra(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=D5(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Wa([m,s.encodeLocation?s.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:Wa([m,s.encodeLocation?s.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,n,r,i);return t&&N?b.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function T5(){let e=U5(),t=w5(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,l)}var P5=b.createElement(T5,null),M5=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(Ur.Provider,{value:this.props.routeContext},b.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function R5({routeContext:e,match:t,children:n}){let r=b.useContext(Bl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Ur.Provider,{value:e},n)}function D5(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=n==null?void 0:n.errors;if(l!=null){let h=s.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Lt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let d=!1,f=-1;if(n)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:g,errors:v}=n,x=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||x){d=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((h,m,g)=>{let v,x=!1,j=null,_=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||P5,d&&(f<0&&g===0?(uk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):f===g&&(x=!0,_=m.route.hydrateFallbackElement||null)));let S=t.concat(s.slice(0,g+1)),N=()=>{let E;return v?E=j:x?E=_:m.route.Component?E=b.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=h,b.createElement(R5,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:E})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?b.createElement(M5,{location:n.location,revalidation:n.revalidation,component:j,error:v,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):N()},null)}function yb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I5(e){let t=b.useContext(Bl);return Lt(t,yb(e)),t}function L5(e){let t=b.useContext(nm);return Lt(t,yb(e)),t}function $5(e){let t=b.useContext(Ur);return Lt(t,yb(e)),t}function bb(e){let t=$5(e),n=t.matches[t.matches.length-1];return Lt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function z5(){return bb("useRouteId")}function U5(){var r;let e=b.useContext(vb),t=L5("useRouteError"),n=bb("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function q5(){let{router:e}=I5("useNavigate"),t=bb("useNavigate"),n=b.useRef(!1);return lk(()=>{n.current=!0}),b.useCallback(async(i,s={})=>{ra(n.current,ok),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var HS={};function uk(e,t,n){!t&&!HS[e]&&(HS[e]=!0,ra(!1,n))}b.memo(B5);function B5({routes:e,future:t,state:n,unstable_onError:r}){return ck(e,void 0,n,r,t)}function ch({to:e,replace:t,state:n,relative:r}){Lt(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=b.useContext(ia);ra(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(Ur),{pathname:l}=ns(),d=wa(),f=gb(e,pb(s),l,r==="path"),h=JSON.stringify(f);return b.useEffect(()=>{d(JSON.parse(h),{replace:t,state:n,relative:r})},[d,h,r,t,n]),null}function F5(e){return C5(e.context)}function Ps(e){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function H5({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Lt(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:l,navigator:i,static:s,future:{}}),[l,i,s]);typeof n=="string"&&(n=ql(n));let{pathname:f="/",search:h="",hash:m="",state:g=null,key:v="default"}=n,x=b.useMemo(()=>{let j=Za(f,l);return j==null?null:{location:{pathname:j,search:h,hash:m,state:g,key:v},navigationType:r}},[l,f,h,m,g,v,r]);return ra(x!=null,`<Router basename="${l}"> is not able to match the URL "${f}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:b.createElement(ia.Provider,{value:d},b.createElement(Pu.Provider,{children:t,value:x}))}function K5({children:e,location:t}){return A5(Qy(e),t)}function Qy(e,t=[]){let n=[];return b.Children.forEach(e,(r,i)=>{if(!b.isValidElement(r))return;let s=[...t,i];if(r.type===b.Fragment){n.push.apply(n,Qy(r.props.children,s));return}Lt(r.type===Ps,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Qy(r.props.children,s)),n.push(l)}),n}var Jf="get",Zf="application/x-www-form-urlencoded";function rm(e){return e!=null&&typeof e.tagName=="string"}function G5(e){return rm(e)&&e.tagName.toLowerCase()==="button"}function Y5(e){return rm(e)&&e.tagName.toLowerCase()==="form"}function V5(e){return rm(e)&&e.tagName.toLowerCase()==="input"}function W5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function X5(e,t){return e.button===0&&(!t||t==="_self")&&!W5(e)}var xf=null;function Q5(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var J5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rv(e){return e!=null&&!J5.has(e)?(ra(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zf}"`),null):e}function Z5(e,t){let n,r,i,s,l;if(Y5(e)){let d=e.getAttribute("action");r=d?Za(d,t):null,n=e.getAttribute("method")||Jf,i=rv(e.getAttribute("enctype"))||Zf,s=new FormData(e)}else if(G5(e)||V5(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||d.getAttribute("action");if(r=f?Za(f,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||Jf,i=rv(e.getAttribute("formenctype"))||rv(d.getAttribute("enctype"))||Zf,s=new FormData(d,e),!Q5()){let{name:h,type:m,value:g}=e;if(m==="image"){let v=h?`${h}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else h&&s.append(h,g)}}else{if(rm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Jf,r=null,i=Zf,l=e}return s&&i==="text/plain"&&(l=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eI(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Za(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function tI(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function rI(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let l=await tI(s,n);return l.links?l.links():[]}return[]}));return oI(r.flat(1).filter(nI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function KS(e,t,n,r,i,s){let l=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,d=(f,h)=>{var m;return n[h].pathname!==f.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return s==="assets"?t.filter((f,h)=>l(f,h)||d(f,h)):s==="data"?t.filter((f,h)=>{var g;let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(l(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function aI(e,t,{includeHydrateFallback:n}={}){return iI(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function iI(e){return[...new Set(e)]}function sI(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function oI(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(sI(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function dk(){let e=b.useContext(Bl);return xb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function lI(){let e=b.useContext(nm);return xb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var wb=b.createContext(void 0);wb.displayName="FrameworkContext";function fk(){let e=b.useContext(wb);return xb(e,"You must render this element inside a <HydratedRouter> element"),e}function cI(e,t){let n=b.useContext(wb),[r,i]=b.useState(!1),[s,l]=b.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=t,v=b.useRef(null);b.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let _=N=>{N.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),b.useEffect(()=>{if(r){let _=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(_)}}},[r]);let x=()=>{i(!0)},j=()=>{i(!1),l(!1)};return n?e!=="intent"?[s,v,{}]:[s,v,{onFocus:Yc(d,x),onBlur:Yc(f,j),onMouseEnter:Yc(h,x),onMouseLeave:Yc(m,j),onTouchStart:Yc(g,x)}]:[!1,v,{}]}function Yc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function uI({page:e,...t}){let{router:n}=dk(),r=b.useMemo(()=>nk(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(fI,{page:e,matches:r,...t}):null}function dI(e){let{manifest:t,routeModules:n}=fk(),[r,i]=b.useState([]);return b.useEffect(()=>{let s=!1;return rI(e,t,n).then(l=>{s||i(l)}),()=>{s=!0}},[e,t,n]),r}function fI({page:e,matches:t,...n}){let r=ns(),{manifest:i,routeModules:s}=fk(),{basename:l}=dk(),{loaderData:d,matches:f}=lI(),h=b.useMemo(()=>KS(e,t,f,i,r,"data"),[e,t,f,i,r]),m=b.useMemo(()=>KS(e,t,f,i,r,"assets"),[e,t,f,i,r]),g=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let j=new Set,_=!1;if(t.forEach(N=>{var C;let E=i.routes[N.route.id];!E||!E.hasLoader||(!h.some(k=>k.route.id===N.route.id)&&N.route.id in d&&((C=s[N.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?_=!0:j.add(N.route.id))}),j.size===0)return[];let S=eI(e,l,"data");return _&&j.size>0&&S.searchParams.set("_routes",t.filter(N=>j.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[l,d,r,i,h,t,e,s]),v=b.useMemo(()=>aI(m,i),[m,i]),x=dI(m);return b.createElement(b.Fragment,null,g.map(j=>b.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),v.map(j=>b.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),x.map(({key:j,link:_})=>b.createElement("link",{key:j,nonce:n.nonce,..._})))}function hI(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var hk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hk&&(window.__reactRouterVersion="7.9.4")}catch{}function mI({basename:e,children:t,window:n}){let r=b.useRef();r.current==null&&(r.current=J4({window:n,v5Compat:!0}));let i=r.current,[s,l]=b.useState({action:i.action,location:i.location}),d=b.useCallback(f=>{b.startTransition(()=>l(f))},[l]);return b.useLayoutEffect(()=>i.listen(d),[i,d]),b.createElement(H5,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var mk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_b=b.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:l,state:d,target:f,to:h,preventScrollReset:m,viewTransition:g,...v},x){let{basename:j}=b.useContext(ia),_=typeof h=="string"&&mk.test(h),S,N=!1;if(typeof h=="string"&&_&&(S=h,hk))try{let G=new URL(window.location.href),K=h.startsWith("//")?new URL(G.protocol+h):new URL(h),B=Za(K.pathname,j);K.origin===G.origin&&B!=null?h=B+K.search+K.hash:N=!0}catch{ra(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=N5(h,{relative:i}),[C,k,A]=cI(r,v),R=vI(h,{replace:l,state:d,target:f,preventScrollReset:m,relative:i,viewTransition:g});function D(G){t&&t(G),G.defaultPrevented||R(G)}let $=b.createElement("a",{...v,...A,href:S||E,onClick:N||s?t:D,ref:hI(x,k),target:f,"data-discover":!_&&n==="render"?"true":void 0});return C&&!_?b.createElement(b.Fragment,null,$,b.createElement(uI,{page:E})):$});_b.displayName="Link";var Jy=b.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:l,viewTransition:d,children:f,...h},m){let g=Mu(l,{relative:h.relative}),v=ns(),x=b.useContext(nm),{navigator:j,basename:_}=b.useContext(ia),S=x!=null&&_I(g)&&d===!0,N=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,E=v.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(E=E.toLowerCase(),C=C?C.toLowerCase():null,N=N.toLowerCase()),C&&_&&(C=Za(C,_)||C);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let A=E===N||!i&&E.startsWith(N)&&E.charAt(k)==="/",R=C!=null&&(C===N||!i&&C.startsWith(N)&&C.charAt(N.length)==="/"),D={isActive:A,isPending:R,isTransitioning:S},$=A?t:void 0,G;typeof r=="function"?G=r(D):G=[r,A?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let K=typeof s=="function"?s(D):s;return b.createElement(_b,{...h,"aria-current":$,className:G,ref:m,style:K,to:l,viewTransition:d},typeof f=="function"?f(D):f)});Jy.displayName="NavLink";var pI=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:l=Jf,action:d,onSubmit:f,relative:h,preventScrollReset:m,viewTransition:g,...v},x)=>{let j=xI(),_=wI(d,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",N=typeof d=="string"&&mk.test(d),E=C=>{if(f&&f(C),C.defaultPrevented)return;C.preventDefault();let k=C.nativeEvent.submitter,A=(k==null?void 0:k.getAttribute("formmethod"))||l;j(k||C.currentTarget,{fetcherKey:t,method:A,navigate:n,replace:i,state:s,relative:h,preventScrollReset:m,viewTransition:g})};return b.createElement("form",{ref:x,method:S,action:_,onSubmit:r?f:E,...v,"data-discover":!N&&e==="render"?"true":void 0})});pI.displayName="Form";function gI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pk(e){let t=b.useContext(Bl);return Lt(t,gI(e)),t}function vI(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:l}={}){let d=wa(),f=ns(),h=Mu(e,{relative:s});return b.useCallback(m=>{if(X5(m,t)){m.preventDefault();let g=n!==void 0?n:vu(f)===vu(h);d(e,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:l})}},[f,d,h,n,r,t,e,i,s,l])}var yI=0,bI=()=>`__${String(++yI)}__`;function xI(){let{router:e}=pk("useSubmit"),{basename:t}=b.useContext(ia),n=z5();return b.useCallback(async(r,i={})=>{let{action:s,method:l,encType:d,formData:f,body:h}=Z5(r,t);if(i.navigate===!1){let m=i.fetcherKey||bI();await e.fetch(m,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function wI(e,{relative:t}={}){let{basename:n}=b.useContext(ia),r=b.useContext(Ur);Lt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Mu(e||".",{relative:t})},l=ns();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),f=d.getAll("index");if(f.some(m=>m==="")){d.delete("index"),f.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();s.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Wa([n,s.pathname])),vu(s)}function _I(e,{relative:t}={}){let n=b.useContext(sk);Lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=pk("useViewTransitionState"),i=Mu(e,{relative:t});if(!n.isTransitioning)return!1;let s=Za(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Za(n.nextLocation.pathname,r)||n.nextLocation.pathname;return lh(i.pathname,l)!=null||lh(i.pathname,s)!=null}var gk=tk();const Zy="active-customer-order",e0="active-customer-order-id",vk=1440*60*1e3,jI=e=>{if(!e)return null;try{const t=JSON.parse(e);if(t&&typeof t.orderId=="string"&&t.orderId.trim().length>0)return t}catch(t){console.error("Failed to parse stored active order",t)}return null},yu=e=>{if(!(typeof window>"u"))try{if(!e){window.localStorage.removeItem(Zy),window.localStorage.removeItem(e0);return}window.localStorage.setItem(Zy,JSON.stringify(e)),window.localStorage.removeItem(e0)}catch(t){console.error("Failed to persist active order",t)}},uh=()=>{if(typeof window>"u")return null;const e=jI(window.localStorage.getItem(Zy));if(e)return e.expiresAt&&e.expiresAt<=Date.now()?(yu(null),null):e;const t=window.localStorage.getItem(e0);if(t&&t.trim().length>0){const n={orderId:t};return yu(n),n}return null},yk=(e,t)=>{if(!e){yu(null);return}yu(t?{orderId:e,expiresAt:t}:{orderId:e})},bk=()=>{yu(null)},SI="modulepreload",NI=function(e){return"/"+e},GS={},Ru=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(n.map(h=>{if(h=NI(h),h in GS)return;GS[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":SI,m||(v.as="script"),v.crossOrigin="",v.href=h,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((x,j)=>{v.addEventListener("load",x),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return t().catch(s)})},EI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ru(async()=>{const{default:r}=await Promise.resolve().then(()=>Hl);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class jb extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class YS extends jb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class VS extends jb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class WS extends jb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var t0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(t0||(t0={}));var OI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class CI{constructor(t,{headers:n={},customFetch:r,region:i=t0.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=EI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return OI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:l,body:d,signal:f}=r;let h={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let v;d&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(h["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(h["Content-Type"]="application/json",v=JSON.stringify(d)));const x=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:f}).catch(N=>{throw N.name==="AbortError"?N:new YS(N)}),j=x.headers.get("x-relay-error");if(j&&j==="true")throw new VS(x);if(!x.ok)throw new WS(x);let _=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield x.json():_==="application/octet-stream"?S=yield x.blob():_==="text/event-stream"?S=x:_==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new YS(s)}:{data:null,error:s,response:s instanceof WS||s instanceof VS?s.context:void 0}}})}}var gn={},tl={},nl={},rl={},al={},il={},kI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nl=kI();const AI=Nl.fetch,xk=Nl.fetch.bind(Nl),wk=Nl.Headers,TI=Nl.Request,PI=Nl.Response,Hl=Object.freeze(Object.defineProperty({__proto__:null,Headers:wk,Request:TI,Response:PI,default:xk,fetch:AI},Symbol.toStringTag,{value:"Module"})),MI=U4(Hl);var wf={},XS;function _k(){if(XS)return wf;XS=1,Object.defineProperty(wf,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return wf.default=e,wf}var QS;function jk(){if(QS)return il;QS=1;var e=il&&il.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(il,"__esModule",{value:!0});const t=e(MI),n=e(_k());class r{constructor(s){var l,d;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(l=s.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=s.signal,this.isMaybeSingle=(d=s.isMaybeSingle)!==null&&d!==void 0?d:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,l){return this.headers=new Headers(this.headers),this.headers.set(s,l),this}then(s,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,g,v,x;let j=null,_=null,S=null,N=h.status,E=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?_=R:_=JSON.parse(R))}const k=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),A=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");k&&A&&A.length>1&&(S=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(j={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,N=406,E="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const k=await h.text();try{j=JSON.parse(k),Array.isArray(j)&&h.status===404&&(_=[],j=null,N=200,E="OK")}catch{h.status===404&&k===""?(N=204,E="No Content"):j={message:k}}if(j&&this.isMaybeSingle&&(!((x=j==null?void 0:j.details)===null||x===void 0)&&x.includes("0 rows"))&&(j=null,N=200,E="OK"),j&&this.shouldThrowOnError)throw new n.default(j)}return{error:j,data:_,count:S,status:N,statusText:E}});return this.shouldThrowOnError||(f=f.catch(h=>{var m,g,v;return{error:{message:`${(m=h==null?void 0:h.name)!==null&&m!==void 0?m:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h==null?void 0:h.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(s,l)}returns(){return this}overrideTypes(){return this}}return il.default=r,il}var JS;function Sk(){if(JS)return al;JS=1;var e=al&&al.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(al,"__esModule",{value:!0});const t=e(jk());class n extends t.default{select(i){let s=!1;const l=(i??"*").split("").map(d=>/\s/.test(d)&&!s?"":(d==='"'&&(s=!s),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:l,foreignTable:d,referencedTable:f=d}={}){const h=f?`${f}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${i}.${s?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:l=s}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,s,{foreignTable:l,referencedTable:d=l}={}){const f=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:l=!1,buffers:d=!1,wal:f=!1,format:h="text"}={}){var m;const g=[i?"analyze":null,s?"verbose":null,l?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return al.default=n,al}var ZS;function Sb(){if(ZS)return rl;ZS=1;var e=rl&&rl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rl,"__esModule",{value:!0});const t=e(Sk());class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${f}fts${h}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return rl.default=n,rl}var e2;function Nk(){if(e2)return nl;e2=1;var e=nl&&nl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nl,"__esModule",{value:!0});const t=e(Sb());class n{constructor(i,{headers:s={},schema:l,fetch:d}){this.url=i,this.headers=new Headers(s),this.schema=l,this.fetch=d}select(i,s){const{head:l=!1,count:d}=s??{},f=l?"HEAD":"GET";let h=!1;const m=(i??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:l=!0}={}){var d;const f="POST";if(s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(h.length>0){const m=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:l=!1,count:d,defaultToNull:f=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(g.length>0){const v=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:s}={}){var l;const d="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var s;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return nl.default=n,nl}var t2;function RI(){if(t2)return tl;t2=1;var e=tl&&tl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(tl,"__esModule",{value:!0});const t=e(Nk()),n=e(Sb());class r{constructor(s,{headers:l={},schema:d,fetch:f}={}){this.url=s,this.headers=new Headers(l),this.schemaName=d,this.fetch=f}from(s){const l=new URL(`${this.url}/${s}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,l={},{head:d=!1,get:f=!1,count:h}={}){var m;let g;const v=new URL(`${this.url}/rpc/${s}`);let x;d||f?(g=d?"HEAD":"GET",Object.entries(l).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{v.searchParams.append(_,S)})):(g="POST",x=l);const j=new Headers(this.headers);return h&&j.set("Prefer",`count=${h}`),new n.default({method:g,url:v,headers:j,schema:this.schemaName,body:x,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return tl.default=r,tl}var n2;function DI(){if(n2)return gn;n2=1;var e=gn&&gn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(gn,"__esModule",{value:!0}),gn.PostgrestError=gn.PostgrestBuilder=gn.PostgrestTransformBuilder=gn.PostgrestFilterBuilder=gn.PostgrestQueryBuilder=gn.PostgrestClient=void 0;const t=e(RI());gn.PostgrestClient=t.default;const n=e(Nk());gn.PostgrestQueryBuilder=n.default;const r=e(Sb());gn.PostgrestFilterBuilder=r.default;const i=e(Sk());gn.PostgrestTransformBuilder=i.default;const s=e(jk());gn.PostgrestBuilder=s.default;const l=e(_k());return gn.PostgrestError=l.default,gn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:l.default},gn}var II=DI();const LI=aa(II),{PostgrestClient:$I,PostgrestQueryBuilder:Gre,PostgrestFilterBuilder:Yre,PostgrestTransformBuilder:Vre,PostgrestBuilder:Wre,PostgrestError:Xre}=LI;class zI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const UI="2.75.0",qI=`realtime-js/${UI}`,BI="1.0.0",n0=1e4,FI=1e3,HI=100;var lu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lu||(lu={}));var ln;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ln||(ln={}));var Wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Wr||(Wr={}));var r0;(function(e){e.websocket="websocket"})(r0||(r0={}));var qs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(qs||(qs={}));class KI{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let l=this.HEADER_LENGTH+2;const d=r.decode(t.slice(l,l+i));l=l+i;const f=r.decode(t.slice(l,l+s));l=l+s;const h=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:d,event:f,payload:h}}}class Ek{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ot||(Ot={}));const r2=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=GI(l,e,t,i),s),{}):{}},GI=(e,t,n,r)=>{const i=t.find(d=>d.name===e),s=i==null?void 0:i.type,l=n[e];return s&&!r.includes(s)?Ok(s,l):a0(l)},Ok=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return XI(t,n)}switch(e){case Ot.bool:return YI(t);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return VI(t);case Ot.json:case Ot.jsonb:return WI(t);case Ot.timestamp:return QI(t);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return a0(t);default:return a0(t)}},a0=e=>e,YI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},VI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},WI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},XI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const l=e.slice(1,n);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(d=>Ok(t,d))}return e},QI=e=>typeof e=="string"?e.replace(" ","T"):e,Ck=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class av{constructor(t,n,r={},i=n0){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var a2;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(a2||(a2={}));class cu{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cu.syncState(this.state,i,s,l),this.pendingDiffs.forEach(f=>{this.state=cu.syncDiff(this.state,f,s,l)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=cu.syncDiff(this.state,i,s,l),d())}),this.onJoin((i,s,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:l})}),this.onLeave((i,s,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),l=this.transformState(n),d={},f={};return this.map(s,(h,m)=>{l[h]||(f[h]=m)}),this.map(l,(h,m)=>{const g=s[h];if(g){const v=m.map(S=>S.presence_ref),x=g.map(S=>S.presence_ref),j=m.filter(S=>x.indexOf(S.presence_ref)<0),_=g.filter(S=>v.indexOf(S.presence_ref)<0);j.length>0&&(d[h]=j),_.length>0&&(f[h]=_)}else d[h]=m}),this.syncDiff(s,{joins:d,leaves:f},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(d,f)=>{var h;const m=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(f),m.length>0){const g=t[d].map(x=>x.presence_ref),v=m.filter(x=>g.indexOf(x.presence_ref)<0);t[d].unshift(...v)}r(d,m,f)}),this.map(l,(d,f)=>{let h=t[d];if(!h)return;const m=f.map(g=>g.presence_ref);h=h.filter(g=>m.indexOf(g.presence_ref)<0),t[d]=h,i(d,h,f),h.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i2;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(i2||(i2={}));var uu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(uu||(uu={}));var Ha;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ha||(Ha={}));class Nb{constructor(t,n={config:{}},r){var i,s;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new av(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new Ek(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ln.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new cu(this),this.broadcastEndpointURL=Ck(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ln.closed){const{config:{broadcast:l,presence:d,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},v={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Ha.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Ha.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){t==null||t(Ha.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(j=_==null?void 0:_.length)!==null&&j!==void 0?j:0,N=[];for(let E=0;E<S;E++){const C=_[E],{filter:{event:k,schema:A,table:R,filter:D}}=C,$=x&&x[E];if($&&$.event===k&&$.schema===A&&$.table===R&&$.filter===D)N.push(Object.assign(Object.assign({},C),{id:$.id}));else{this.unsubscribe(),this.state=ln.errored,t==null||t(Ha.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Ha.SUBSCRIBED);return}}).receive("error",x=>{this.state=ln.errored,t==null||t(Ha.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ha.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ln.joined&&t===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:l}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,d,f;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ln.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new av(this,Wr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ln.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new av(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>HI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const l=t.toLocaleLowerCase(),{close:d,error:f,leave:h,join:m}=Wr;if(r&&[d,f,h,m].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var j,_,S;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(_=x.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(v,r)):(s=this.bindings[l])===null||s===void 0||s.filter(x=>{var j,_,S,N,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const k=x.id,A=(j=x.filter)===null||j===void 0?void 0:j.event;return k&&((_=n.ids)===null||_===void 0?void 0:_.includes(k))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const k=(E=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return k==="*"||k===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:_,table:S,commit_timestamp:N,type:E,errors:C}=j;v=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:N,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}x.callback(v,r)})}_isClosed(){return this.state===ln.closed}_isJoined(){return this.state===ln.joined}_isJoining(){return this.state===ln.joining}_isLeaving(){return this.state===ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Nb.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wr.close,{},t)}_onError(t){this._on(Wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=r2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=r2(t.columns,t.old_record)),n}}const iv=()=>{},_f={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},JI=[1e3,2e3,5e3,1e4],ZI=1e4,e6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class t6{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=n0,this.transport=null,this.heartbeatIntervalMs=_f.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iv,this.ref=0,this.reconnectTimer=null,this.logger=iv,this.conn=null,this.sendBuffer=[],this.serializer=new KI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...l)=>Ru(async()=>{const{default:d}=await Promise.resolve().then(()=>Hl);return{default:d}},void 0).then(({default:d})=>d(...l)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...l)=>s(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${r0.websocket}`,this.httpEndpoint=Ck(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:BI}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lu.connecting:return qs.Connecting;case lu.open:return qs.Open;case lu.closing:return qs.Closing;default:return qs.Closed}}isConnected(){return this.connectionState()===qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Nb(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,l=()=>{this.encode(t,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(FI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},_f.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:l}=n,d=l?`(${l})`:"",f=s.status||"";this.log("receive",`${f} ${r} ${i} ${d}`.trim(),s),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,s,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([e6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:qI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ek(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_f.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,l,d,f,h,m;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:n0,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:_f.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:iv,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(g=>JI[g-1]||ZI),this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:((g,v)=>v(JSON.stringify(g))),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Eb extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class n6 extends Eb{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class i0 extends Eb{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var r6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};const kk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ru(async()=>{const{default:r}=await Promise.resolve().then(()=>Hl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},a6=()=>r6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ru(()=>Promise.resolve().then(()=>Hl),void 0)).Response:Response}),s0=e=>{if(Array.isArray(e))return e.map(n=>s0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=s0(r)}),t},i6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var co=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};const sv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),s6=(e,t,n)=>co(void 0,void 0,void 0,function*(){const r=yield a6();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,l=(i==null?void 0:i.statusCode)||s+"";t(new n6(sv(i),s,l))}).catch(i=>{t(new i0(sv(i),i))}):t(new i0(sv(e),e))}),o6=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(i6(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function Du(e,t,n,r,i,s){return co(this,void 0,void 0,function*(){return new Promise((l,d)=>{e(n,o6(t,r,i,s)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>s6(f,d,r))})})}function dh(e,t,n,r){return co(this,void 0,void 0,function*(){return Du(e,"GET",t,n,r)})}function fa(e,t,n,r,i){return co(this,void 0,void 0,function*(){return Du(e,"POST",t,r,i,n)})}function o0(e,t,n,r,i){return co(this,void 0,void 0,function*(){return Du(e,"PUT",t,r,i,n)})}function l6(e,t,n,r){return co(this,void 0,void 0,function*(){return Du(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ak(e,t,n,r,i){return co(this,void 0,void 0,function*(){return Du(e,"DELETE",t,r,i,n)})}var c6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class u6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return c6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tn(t))return{data:null,error:t};throw t}})}}var d6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class f6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new u6(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return d6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tn(t))return{data:null,error:t};throw t}})}}var Wn=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};const h6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},s2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class m6{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=kk(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Wn(this,void 0,void 0,function*(){try{let s;const l=Object.assign(Object.assign({},s2),i);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),f&&s.append("metadata",this.encodeMetadata(f)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",l.cacheControl),f&&s.append("metadata",this.encodeMetadata(f))):(s=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),i!=null&&i.headers&&(d=Object.assign(Object.assign({},d),i.headers));const h=this._removeEmptyFolders(n),m=this._getFinalPath(h),g=yield(t=="PUT"?o0:fa)(this.fetch,`${this.url}/object/${m}`,s,Object.assign({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(tn(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Wn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),l=this._getFinalPath(s),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",n);try{let f;const h=Object.assign({upsert:s2.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const g=yield o0(this.fetch,d.toString(),f,{headers:m});return{data:{path:s,fullPath:g.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(tn(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,n){return Wn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield fa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+s.url),d=l.searchParams.get("token");if(!d)throw new Eb("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Wn(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Wn(this,void 0,void 0,function*(){try{return{data:{path:(yield fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Wn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield fa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${l}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Wn(this,void 0,void 0,function*(){try{const i=yield fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=s?`?${s}`:"",d=this._getFinalPath(t),f=()=>dh(this.fetch,`${this.url}/${i}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new f6(f,this.shouldThrowOnError)}info(t){return Wn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield dh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:s0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}})}exists(t){return Wn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield l6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tn(r)&&r instanceof i0){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&i.push(f);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${h}`)}}}remove(t){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ak(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Wn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},h6),n),{prefix:t||""});return{data:yield fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}listV2(t,n){return Wn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield fa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const p6="2.75.0",g6={"X-Client-Info":`storage-js/${p6}`};var sl=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class v6{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g6),n),this.fetch=kk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return sl(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tn(t))return{data:null,error:t};throw t}})}getBucket(t){return sl(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}})}createBucket(t){return sl(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tn(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return sl(this,void 0,void 0,function*(){try{return{data:yield o0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return sl(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return sl(this,void 0,void 0,function*(){try{return{data:yield Ak(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}})}}class y6 extends v6{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new m6(this.url,this.headers,t,this.fetch)}}const b6="2.75.0";let ru="";typeof Deno<"u"?ru="deno":typeof document<"u"?ru="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ru="react-native":ru="node";const x6={"X-Client-Info":`supabase-js-${ru}/${b6}`},w6={headers:x6},_6={schema:"public"},j6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},S6={};var N6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};const E6=e=>{let t;return e?t=e:typeof fetch>"u"?t=xk:t=fetch,(...n)=>t(...n)},O6=()=>typeof Headers>"u"?wk:Headers,C6=(e,t,n)=>{const r=E6(n),i=O6();return(s,l)=>N6(void 0,void 0,void 0,function*(){var d;const f=(d=yield t())!==null&&d!==void 0?d:e;let h=new i(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(s,Object.assign(Object.assign({},l),{headers:h}))})};var k6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};function A6(e){return e.endsWith("/")?e:e+"/"}function T6(e,t){var n,r;const{db:i,auth:s,realtime:l,global:d}=e,{db:f,auth:h,realtime:m,global:g}=t,v={db:Object.assign(Object.assign({},f),i),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>k6(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function P6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(A6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Tk="2.75.0",pl=30*1e3,l0=3,ov=l0*pl,M6="http://localhost:9999",R6="supabase.auth.token",D6={"X-Client-Info":`gotrue-js/${Tk}`},c0="X-Supabase-Api-Version",Pk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,L6=600*1e3;class bu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $6 extends bu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function z6(e){return Ie(e)&&e.name==="AuthApiError"}class Bs extends bu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class rs extends bu{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Fi extends rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function U6(e){return Ie(e)&&e.name==="AuthSessionMissingError"}class ol extends rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jf extends rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sf extends rs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q6(e){return Ie(e)&&e.name==="AuthImplicitGrantRedirectError"}class o2 extends rs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class u0 extends rs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function lv(e){return Ie(e)&&e.name==="AuthRetryableFetchError"}class l2 extends rs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class d0 extends rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),c2=` 	
\r=`.split(""),B6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<c2.length;t+=1)e[c2[t].charCodeAt(0)]=-2;for(let t=0;t<fh.length;t+=1)e[fh[t].charCodeAt(0)]=t;return e})();function u2(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(fh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(fh[r]),t.queuedBits-=6}}function Mk(e,t,n){const r=B6[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function d2(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=l=>{K6(l,r,n)};for(let l=0;l<e.length;l+=1)Mk(e.charCodeAt(l),i,s);return t.join("")}function F6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function H6(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}F6(r,t)}}function K6(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function xl(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Mk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function G6(e){const t=[];return H6(e,n=>t.push(n)),new Uint8Array(t)}function Gs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>u2(i,n,r)),u2(null,n,r),t.join("")}function Y6(e){return Math.round(Date.now()/1e3)+e}function V6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const cr=()=>typeof window<"u"&&typeof document<"u",Es={tested:!1,writable:!1},Rk=()=>{if(!cr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Es.tested)return Es.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Es.tested=!0,Es.writable=!0}catch{Es.tested=!0,Es.writable=!1}return Es.writable};function W6(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const Dk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ru(async()=>{const{default:r}=await Promise.resolve().then(()=>Hl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},X6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",gl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Os=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zi=async(e,t)=>{await e.removeItem(t)};class am{constructor(){this.promise=new am.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}am.promiseConstructor=Promise;function cv(e){const t=e.split(".");if(t.length!==3)throw new d0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!I6.test(t[r]))throw new d0("JWT not in base64url format");return{header:JSON.parse(d2(t[0])),payload:JSON.parse(d2(t[1])),signature:xl(t[2]),raw:{header:t[0],payload:t[1]}}}async function Q6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function J6(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){r(l);return}}catch(l){if(!t(s,l)){i(l);return}}})()})}function Z6(e){return("0"+e.toString(16)).substr(-2)}function eL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,Z6).join("")}async function tL(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function nL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await tL(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ll(e,t,n=!1){const r=eL();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await gl(e,`${t}-code-verifier`,i);const s=await nL(r);return[s,r===s?"plain":"s256"]}const rL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aL(e){const t=e.headers.get(c0);if(!t||!t.match(rL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sL(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cl(e){if(!oL.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uv(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function f2(e){return JSON.parse(JSON.stringify(e))}var lL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cL=[502,503,504];async function h2(e){var t;if(!X6(e))throw new u0(Ms(e),0);if(cL.includes(e.status))throw new u0(Ms(e),e.status);let n;try{n=await e.json()}catch(s){throw new Bs(Ms(s),s)}let r;const i=aL(e);if(i&&i.getTime()>=Pk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new l2(Ms(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new l2(Ms(n),e.status,n.weak_password.reasons);throw new $6(Ms(n),e.status||500,r)}const uL=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Be(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[c0]||(s[c0]=Pk["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await dL(e,t,n+d,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function dL(e,t,n,r,i,s){const l=uL(t,r,i,s);let d;try{d=await e(n,Object.assign({},l))}catch(f){throw console.error(f),new u0(Ms(f),0)}if(d.ok||await h2(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(f){await h2(f)}}function Vr(e){var t;let n=null;mL(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Y6(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function m2(e){const t=Vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fL(e){return{data:e,error:null}}function hL(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,l=lL(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},f=Object.assign({},l);return{data:{properties:d,user:f},error:null}}function p2(e){return e}function mL(e){return e.access_token&&e.refresh_token&&e.expires_in}const dv=["global","local","others"];var pL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class gL{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Dk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=dv[0]){if(dv.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dv.join(", ")}`);try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=pL(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:hL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},m=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:p2});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(f=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ie(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){cl(t);try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){cl(t);try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Wi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){cl(t);try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){cl(t.userId);try{const{data:n,error:r}=await Be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(t){cl(t.userId),cl(t.id);try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,s,l,d,f;try{const h={nextPage:null,lastPage:0,total:0},m=await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:p2});if(m.error)throw m.error;const g=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(f=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return x.length>0&&(x.forEach(j=>{const _=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);h[`${S}Page`]=_}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Ie(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}function g2(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ul={debug:!!(globalThis&&Rk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ik extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vL extends Ik{}async function yL(e,t,n){ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ul.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ul.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vL(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ul.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function bL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xL(e){return parseInt(e,16)}function wL(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function _L(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:l,notBefore:d,requestId:f,resources:h,scheme:m,uri:g,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=Lk(e.address),j=m?`${m}://${r}`:r,_=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${x}

${_}`;let N=`URI: ${g}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(i&&(N+=`
Expiration Time: ${i.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),f&&(N+=`
Request ID: ${f}`),h){let E=`
Resources:`;for(const C of h){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}N+=E}return`${S}
${N}`}class en extends Error{constructor({message:t,code:n,cause:r,name:i}){var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class hh extends en{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function jL({error:e,options:t}){var n,r,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new en({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new en({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new en({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new en({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new en({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new en({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new en({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new en({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(zk(l)){if(s.rp.id!==l)return new en({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new en({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new en({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new en({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new en({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function SL({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new en({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new en({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(zk(r)){if(n.rpId!==r)return new en({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new en({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new en({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new en({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var $k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class NL{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const EL=new NL;function OL(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=$k(e,["challenge","user","excludeCredentials"]),s=xl(t).buffer,l=Object.assign(Object.assign({},n),{id:xl(n.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:s,user:l});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];d.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:xl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function CL(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=$k(e,["challenge","allowCredentials"]),i=xl(t).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const d=n[l];s.allowCredentials[l]=Object.assign(Object.assign({},d),{id:xl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function kL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Gs(new Uint8Array(e.response.attestationObject)),clientDataJSON:Gs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function AL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Gs(new Uint8Array(i.authenticatorData)),clientDataJSON:Gs(new Uint8Array(i.clientDataJSON)),signature:Gs(new Uint8Array(i.signature)),userHandle:i.userHandle?Gs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function zk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function v2(){var e,t;return!!(cr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function TL(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hh("Browser returned unexpected credential type",t)}:{data:null,error:new hh("Empty credential response",t)}}catch(t){return{data:null,error:jL({error:t,options:e})}}}async function PL(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hh("Browser returned unexpected credential type",t)}:{data:null,error:new hh("Empty credential response",t)}}catch(t){return{data:null,error:SL({error:t,options:e})}}}const ML={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},RL={userVerification:"preferred",hints:["security-key"]};function mh(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const s in i){const l=i[s];if(l!==void 0)if(Array.isArray(l))r[s]=l;else if(n(l))r[s]=l;else if(t(l)){const d=r[s];t(d)?r[s]=mh(d,l):r[s]=mh(l)}else r[s]=l}return r}function DL(e,t){return mh(ML,e,t||{})}function IL(e,t){return mh(RL,e,t||{})}class LL{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},s){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:d};const f=i??EL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=DL(l.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:m,error:g}=await TL({publicKey:h,signal:f});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const h=IL(l.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:m,error:g}=await PL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:f}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new bu("rpId is required for WebAuthn authentication")};try{if(!v2())return{data:null,error:new Bs("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!l)return{data:null,error:d};const{webauthn:f}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new bu("rpId is required for WebAuthn registration")};try{if(!v2())return{data:null,error:new Bs("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ie(l)?{data:null,error:l}:{data:null,error:new Bs("Unexpected error in register",l)}}}}bL();const $L={url:M6,storageKey:R6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function y2(e,t,n){return await n()}const dl={};class xu{get jwks(){var t,n;return(n=(t=dl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){dl[this.storageKey]=Object.assign(Object.assign({},dl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=dl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){dl[this.storageKey]=Object.assign(Object.assign({},dl[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xu.nextInstanceID,xu.nextInstanceID+=1,this.instanceID>0&&cr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},$L),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new gL({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Dk(i.fetch),this.lock=i.lock||y2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:cr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yL:this.lock=y2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new LL(this)},this.persistSession?(i.storage?this.storage=i.storage:Rk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=g2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=g2(this.memoryStorage)),cr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Tk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=W6(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),cr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),q6(s)){const f=(t=s.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:l,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new Bs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Vr}),{data:l,error:d}=s;if(d||!l)return{data:{user:null,session:null},error:d};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:m,password:g,options:v}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await ll(this.storage,this.storageKey)),s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:g,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:j},xform:Vr})}else if("phone"in t){const{phone:m,password:g,options:v}=t;s=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Vr})}else throw new jf("You must provide either an email or phone number and a password");const{data:l,error:d}=s;if(d||!l)return{data:{user:null,session:null},error:d};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:l,options:d}=t;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:m2})}else if("phone"in t){const{phone:s,password:l,options:d}=t;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:m2})}else throw new jf("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ol}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,s,l,d,f,h,m,g,v;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:_,wallet:S,statement:N,options:E}=t;let C;if(cr())if(typeof S=="object")C=S;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")C=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const k=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href),A=await C.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Lk(A[0]);let D=(r=E==null?void 0:E.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const G=await C.request({method:"eth_chainId"});D=xL(G)}const $={domain:k.host,address:R,statement:N,uri:k.href,version:"1",chainId:D,nonce:(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=E==null?void 0:E.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.resources};x=_L($),j=await C.request({method:"personal_sign",params:[wL(x),R]})}try{const{data:_,error:S}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Vr});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ol}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(Ie(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(t){var n,r,i,s,l,d,f,h,m,g,v,x;let j,_;if("message"in t)j=t.message,_=t.signature;else{const{chain:S,wallet:N,statement:E,options:C}=t;let k;if(cr())if(typeof N=="object")k=N;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))k=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=N}const A=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const R=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),E?{statement:E}:null));let D;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")D=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)D=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)j=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),_=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${A.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=C==null?void 0:C.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(m=C==null?void 0:C.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const R=await k.signMessage(new TextEncoder().encode(j),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=R}}try{const{data:S,error:N}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Gs(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Vr});if(N)throw N;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new ol}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:N})}catch(S){if(Ie(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const n=await Os(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:l}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Vr});if(await zi(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ol}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:l})}catch(s){if(Ie(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:l}=t,d=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vr}),{data:f,error:h}=d;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new ol}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,l;try{if("email"in t){const{email:d,options:f}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await ll(this.storage,this.storageKey));const{error:g}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:d,options:f}=t,{data:h,error:m}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m}}throw new jf("You must provide either an email or phone number.")}catch(d){if(Ie(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:d}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Vr});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,l=null;return this.flowType==="pkce"&&([s,l]=await ll(this.storage,this.storageKey)),await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:fL})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fi;const{error:i}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:l}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:l,error:d}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d}}throw new jf("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ov:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Os(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=uv()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,h,m)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,m))})}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wi}):await this._useSession(async n=>{var r,i,s;const{data:l,error:d}=n;if(d)throw d;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Wi})})}catch(n){if(Ie(n))return U6(n)&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Fi;const l=i.session;let d=null,f=null;this.flowType==="pkce"&&t.email!=null&&([d,f]=await ll(this.storage,this.storageKey));const{data:h,error:m}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:f}),jwt:l.access_token,xform:Wi});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fi;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:l}=cv(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:d,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};s=d}else{const{data:d,error:f}=await this._getUser(t.access_token);if(f)throw f;s={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:d}=n;if(d)throw d;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fi;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!cr())throw new Sf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new o2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new o2("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:l,expires_in:d,expires_at:f,token_type:h}=t;if(!s||!d||!l||!h)throw new Sf("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let v=m+g;f&&(v=parseInt(f));const x=v-m;x*1e3<=pl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${g}s`);const j=v-g;m-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,m):m-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,m);const{data:_,error:S}=await this._getUser(s);if(S)throw S;const N={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:v,refresh_token:l,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Os(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(z6(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=V6(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ll(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var l,d,f,h,m;const{data:g,error:v}=s;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return cr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:l,provider:d,token:f,access_token:h,nonce:m}=t,g=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:f,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vr}),{data:v,error:x}=g;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new ol}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)throw l;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await J6(async i=>(i>0&&await Q6(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vr})),(i,s)=>{const l=200*Math.pow(2,i);return s&&lv(s)&&Date.now()+l-r<pl})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),cr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Os(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await gl(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:uv()}else if(i&&!i.user&&!i.user){const l=await Os(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await zi(this.storage,this.storageKey+"-user"),await gl(this.storage,this.storageKey,i)):i.user=uv()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ov;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${ov}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),lv(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(i.access_token);!d&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new am;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Fi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const d={data:s.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(s){if(this._debug(i,"error",s),Ie(s)){const l={data:null,error:s};return lv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(f){s.push(f)}});if(await Promise.all(l),s.length>0){for(let d=0;d<s.length;d+=1)console.error(s[d]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await gl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=f2(i);await gl(this.storage,this.storageKey,s)}else{const i=f2(n);await gl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await zi(this.storage,this.storageKey),await zi(this.storage,this.storageKey+"-code-verifier"),await zi(this.storage,this.storageKey+"-user"),this.userStorage&&await zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&cr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),pl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/pl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${pl}ms, refresh threshold is ${l0} ticks`),i<=l0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ik)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,l]=await ll(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(d.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:h}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?kL(t.webauthn.credential_response):AL(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:f}=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:OL(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:CL(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=cv(i.access_token);let d=null;l.aal&&(d=l.aal);let f=d;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const m=l.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(d=>d.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(d=>d.kid===t),r&&this.jwks_cached_at+L6>i)return r;const{data:s,error:l}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(d=>d.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};r=x.session.access_token}const{header:i,payload:s,signature:l,raw:{header:d,payload:f}}=cv(r);n!=null&&n.allowExpired||iL(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:s,header:i,signature:l},error:null}}const m=sL(i.alg),g=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,G6(`${d}.${f}`)))throw new d0("Invalid JWT signature");return{data:{claims:s,header:i,signature:l},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}xu.nextInstanceID=0;const zL=xu;class UL extends zL{constructor(t){super(t)}}var qL=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function d(m){try{h(r.next(m))}catch(g){l(g)}}function f(m){try{h(r.throw(m))}catch(g){l(g)}}function h(m){m.done?s(m.value):i(m.value).then(d,f)}h((r=r.apply(e,t||[])).next())})};class BL{constructor(t,n,r){var i,s,l;this.supabaseUrl=t,this.supabaseKey=n;const d=P6(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,h={db:_6,realtime:S6,auth:Object.assign(Object.assign({},j6),{storageKey:f}),global:w6},m=T6(r??{},h);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=C6(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new $I(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new y6(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new CI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return qL(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:l,flowType:d,lock:f,debug:h},m,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UL({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),m),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:d,lock:f,debug:h,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new t6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FL=(e,t,n)=>new BL(e,t,n);function HL(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}HL()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Uk="Supabase client is not available in this offline build. Install @supabase/supabase-js in production.",qk=()=>{const e=Promise.reject(new Error(Uk));return new Proxy({},{get(t,n){return n==="then"||n==="catch"||n==="finally"?e[n].bind(e):()=>qk()}})},KL=()=>{const e=qk(),t=async()=>{throw new Error(Uk)};return{from(){return e},functions:{invoke:t},auth:{signInWithPassword:t,signOut:t,getSession:t}}},GL=e=>{try{const t=new URL(e),n=t.pathname.replace(/\/+$/,"");if(n&&n!=="/"){const r=n===""?"/":n;throw new Error(`VITE_SUPABASE_URL must point to the project root (e.g. https://xxxx.supabase.co). Remove the path "${r}" to avoid cross-origin errors.`)}return t.origin}catch(t){const n=t instanceof Error?` ${t.message}`:"";throw new Error(`Invalid VITE_SUPABASE_URL provided.${n}`.trim())}},YL=()=>KL();let f0;try{{const r=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(Boolean);throw new Error(`Missing Supabase environment variables: ${r.join(", ")}`)}const n=GL(void 0);f0=FL(n,void 0,{auth:{persistSession:!1}})}catch(e){const t=e instanceof Error?e.message:"Unknown error while creating the Supabase client.";console.warn("Supabase client disabled. Falling back to the offline stub. Operations depending on Supabase will fail until the environment is configured.",t),f0=YL()}const xe=f0,VL={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},WL=VL,XL="https://api.cloudinary.com/v1_1",QL="cloudinary.com",JL=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"),Ob=e=>JL(e).toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,""),Bk=()=>Math.random().toString(36).slice(2,10),du=(e,t)=>e&&Ob(e)||t,na=e=>{const t=WL[e];if(typeof t!="string")return;const n=t.trim();return n.length>0?n:void 0},b2=(e,t)=>{const n=na(e);if(!n)throw new Error(`Configuration Cloudinary manquante: définissez la variable d'environnement ${e} pour ${t}.`);return n},Cb=async(e,{folder:t,uploadPreset:n,publicId:r,tags:i})=>{var g;const s=b2("VITE_CLOUDINARY_CLOUD_NAME","les téléversements de médias"),l=n??b2("VITE_CLOUDINARY_UPLOAD_PRESET","les téléversements de médias"),d=l,f=new FormData;f.append("file",e),f.append("upload_preset",l),t&&f.append("folder",t),r&&f.append("public_id",r),i!=null&&i.length&&f.append("tags",i.join(","));const h=await fetch(`${XL}/${s}/auto/upload`,{method:"POST",body:f}),m=await h.json();if(!h.ok||m.error){const v=(g=m.error)==null?void 0:g.message;throw v&&/upload preset/i.test(v)?new Error(`Le preset Cloudinary "${d}" est introuvable ou ne permet pas les téléversements non signés. Vérifiez sa configuration dans votre console Cloudinary (Settings → Upload → Upload presets).`):new Error(v??`Échec du téléversement Cloudinary (statut ${h.status}).`)}if(!m.secure_url&&!m.url)throw new Error("Cloudinary n'a pas renvoyé d'URL sécurisée pour le fichier téléversé.");return m.secure_url??m.url},ei=e=>{const t=e==null?void 0:e.trim();if(!t)return null;try{const n=new URL(t);return n.protocol!=="https:"||!n.hostname.endsWith(QL)?null:t}catch{return null}},ZL=na("VITE_CLOUDINARY_DEFAULT_PRODUCT_IMAGE")??"",x2=ZL,Fk=e=>{const t=ei(e);return t||x2||""},e$=async(e,t)=>{const n=na("VITE_CLOUDINARY_PRODUCTS_FOLDER")??"products",r=na("VITE_CLOUDINARY_UPLOAD_PRESET_PRODUCTS")??na("VITE_CLOUDINARY_UPLOAD_PRESET"),i=t?Ob(t):void 0,s=i?`${i}-${Bk()}`:void 0;return Cb(e,{folder:du(n,"products"),uploadPreset:r,publicId:s,tags:["product"]})},t$=()=>du(na("VITE_CLOUDINARY_CUSTOM_FOLDER")??"Custom","Custom"),El=async(e,t)=>{const n=t$(),r=na("VITE_CLOUDINARY_UPLOAD_PRESET_CUSTOM")??na("VITE_CLOUDINARY_UPLOAD_PRESET"),i=(t==null?void 0:t.publicId)??(e instanceof File&&e.name?Ob(e.name.replace(/\.[^/.]+$/,"")):void 0),s=i?`${i}-${Bk()}`:void 0,l=Array.from(new Set(["customization","custom-folder",...(t==null?void 0:t.tags)??[]]));return Cb(e,{folder:n,uploadPreset:r,publicId:s,tags:l})},Hk=async(e,t)=>{const n=na("VITE_CLOUDINARY_RECEIPTS_FOLDER")??"receipts",r=na("VITE_CLOUDINARY_UPLOAD_PRESET_RECEIPTS")??na("VITE_CLOUDINARY_UPLOAD_PRESET"),i=[du(n,"receipts")];return t!=null&&t.orderId?i.push(`order-${du(t.orderId,"commande")}`):t!=null&&t.customerReference&&i.push(`customer-${du(t.customerReference,"client")}`),Cb(e,{folder:i.join("/"),uploadPreset:r,tags:["payment","receipt"]})},Kk="ouiouipos:role-logins",Gk=()=>{if(typeof window>"u"||!window.localStorage)throw new Error("Local storage is not available for role login tracking.");return window.localStorage},n$=e=>{if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(n=>{if(!n||typeof n!="object")return null;const{roleId:r,roleName:i,loginAt:s}=n;if(typeof r!="string"||typeof i!="string"||typeof s!="string")return null;const l=Date.parse(s);return Number.isNaN(l)?null:{roleId:r,roleName:i,loginAt:new Date(l).toISOString()}}).filter(n=>!!n).sort((n,r)=>Date.parse(n.loginAt)-Date.parse(r.loginAt)):[]}catch(t){return console.warn("Unable to parse stored role logins, clearing history.",t),[]}},kb=()=>{const t=Gk().getItem(Kk);return n$(t)},Yk=e=>{Gk().setItem(Kk,JSON.stringify(e.slice(-500)))},w2=async(e,t,n)=>{const r=n??new Date().toISOString(),i={roleId:e,roleName:t,loginAt:r};try{const s=kb();s.push(i),Yk(s)}catch(s){console.warn("Unable to persist role login locally.",s)}return i},_2=async e=>{const t=Date.parse(e);if(Number.isNaN(t))throw new Error("Invalid start date provided when fetching role logins.");return kb().filter(r=>Date.parse(r.loginAt)>=t)},j2=e=>{try{const t=Date.parse(e);if(Number.isNaN(t))return;const n=kb().filter(r=>Date.parse(r.loginAt)>=t);Yk(n)}catch(t){console.warn("Unable to prune stored role logins.",t)}};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a$=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),S2=e=>{const t=a$(e);return t.charAt(0).toUpperCase()+t.slice(1)},Vk=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),i$=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...d},f)=>b.createElement("svg",{ref:f,...s$,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Vk("lucide",i),...!s&&!i$(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,m])=>b.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(e,t)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(o$,{ref:s,iconNode:t,className:Vk(`lucide-${r$(S2(e))}`,`lucide-${e}`,r),...i}));return n.displayName=S2(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Ab=je("armchair",l$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Wk=je("arrow-left",c$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],d$=je("bold",u$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],h$=je("brush",f$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],p$=je("calendar-days",m$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],v$=je("calendar",g$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]],b$=je("chart-area",y$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],w$=je("chart-column",x$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],j$=je("check",_$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Xk=je("chef-hat",S$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qk=je("chevron-down",N$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],O$=je("chevron-right",E$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Jk=je("chevron-up",C$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fs=je("circle-check-big",k$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T$=je("circle-check",A$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],M$=je("circle-minus",P$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Tb=je("circle-plus",R$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],I$=je("circle-question-mark",D$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$$=je("circle-x",L$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ti=je("clock",z$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],q$=je("copy",U$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],im=je("dollar-sign",B$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],H$=je("download",F$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Zk=je("ellipsis-vertical",K$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Y$=je("external-link",G$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],W$=je("eye-off",V$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h0=je("eye",X$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],eA=je("file-text",Q$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],Z$=je("funnel-x",J$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],N2=je("gift",e8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],n8=je("grip-vertical",t8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M12 3V2",key:"ar7q03"}],["path",{d:"m15.4 17.4 3.2-2.8a2 2 0 1 1 2.8 2.9l-3.6 3.3c-.7.8-1.7 1.2-2.8 1.2h-4c-1.1 0-2.1-.4-2.8-1.2l-1.302-1.464A1 1 0 0 0 6.151 19H5",key:"n2g93r"}],["path",{d:"M2 14h12a2 2 0 0 1 0 4h-2",key:"1o2jem"}],["path",{d:"M4 10h16",key:"img6z1"}],["path",{d:"M5 10a7 7 0 0 1 14 0",key:"1ega1o"}],["path",{d:"M5 14v6a1 1 0 0 1-1 1H2",key:"1hescx"}]],a8=je("hand-platter",r8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],s8=je("info",i8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],l8=je("italic",o8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],E2=je("layers",c8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d8=je("layout-dashboard",u8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ol=je("loader-circle",f8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],m8=je("log-in",h8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],g8=je("log-out",p8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tA=je("mail",v8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],wl=je("map-pin",y8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],nA=je("menu",b8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rA=je("message-square",x8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M5 12h14",key:"1ays0h"}]],aA=je("minus",w8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],j8=je("package-check",_8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],N8=je("package-plus",S8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ji=je("package",E8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],C8=je("palette",O8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],A8=je("pen",k8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],P8=je("pencil",T8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Iu=je("percent",M8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],eh=je("phone",R8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],I8=je("piggy-bank",D8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lu=je("plus",L8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],th=je("receipt",$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],U8=je("refresh-cw",z8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],B8=je("save",q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pb=je("search",F8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],K8=je("send",H8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y8=je("settings",G8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],W8=je("shield",V8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Mb=je("shopping-bag",X8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],iA=je("shopping-cart",Q8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],sA=je("soup",J8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oA=je("square-pen",Z8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],tz=je("strikethrough",ez);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ph=je("tag",nz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],as=je("trash-2",rz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],lA=je("trending-up",az);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ta=je("triangle-alert",iz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],oz=je("truck",sz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Kl=je("upload",lz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uz=je("user-check",cz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fu=je("user",dz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],m0=je("users",fz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],mz=je("utensils-crossed",hz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],gz=je("utensils",pz);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Xa=je("x",vz),ni="/site-customizer",Qn=[{name:"Dashboard",href:"/dashboard",icon:d8,permissionKey:"/dashboard"},{name:"À Emporter",href:"/para-llevar",icon:Mb,permissionKey:"/para-llevar"},{name:"Plan de Salle",href:"/ventes",icon:Ab,permissionKey:"/ventes"},{name:"Cuisine",href:"/cocina",icon:sA,permissionKey:"/cocina"},{name:"Personnalisation",href:ni,icon:h$,permissionKey:ni},{name:"Produits",href:"/produits",icon:mz,permissionKey:"/produits"},{name:"Ingrédients",href:"/ingredients",icon:Ji,permissionKey:"/ingredients"},{name:"Promotions",href:"/promotions",icon:Iu,permissionKey:"/promotions"},{name:"Résumé Ventes",href:"/resume-ventes",icon:b$,permissionKey:"/resume-ventes"}],cA={ADMIN:"admin"},Qs="__home_page",yz=e=>{if(e.status!=="active")return!1;const t=new Date,n=e.conditions;if(n.start_date){const r=new Date(n.start_date);if(t<r)return!1}if(n.end_date){const r=new Date(n.end_date);if(t>r)return!1}return!(n.usage_limit&&e.usage_count>=n.usage_limit)},bz=e=>{const t=new Date,n=e.conditions;if(n.days_of_week&&n.days_of_week.length>0){const r=t.getDay();if(!n.days_of_week.includes(r))return!1}if(n.time_range){const r=t.getHours(),i=t.getMinutes(),s=r*60+i,[l,d]=n.time_range.start_time.split(":").map(Number),[f,h]=n.time_range.end_time.split(":").map(Number),m=l*60+d,g=f*60+h;if(s<m||s>g)return!1}return!0},$u=["review1","review2","review3","review4","review5","review6","review7"],xz=["name","handle","timeAgo","message","highlight","highlightCaption","location","badgeLabel","postImageAlt"],wz=["avatarUrl","highlightImageUrl","postImageUrl"],_z=["navigation.brand","navigation.brandLogo","navigation.staffLogo","navigation.links.home","navigation.links.about","navigation.links.menu","navigation.links.contact","navigation.links.loginCta","navigation.style.background","hero.title","hero.subtitle","hero.ctaLabel","hero.historyTitle","hero.reorderCtaLabel","hero.backgroundImage","about.title","about.description","about.image","about.style.background","menu.title","menu.ctaLabel","menu.loadingLabel","menu.image","menu.style.background","instagramReviews.title","instagramReviews.subtitle","instagramReviews.image","instagramReviews.style.background","findUs.title","findUs.addressLabel","findUs.address","findUs.cityLabel","findUs.city","findUs.hoursLabel","findUs.hours","findUs.mapLabel","findUs.style.background","footer.text","footer.style.background"],jz=[...xz,...wz],Sz=$u.flatMap(e=>jz.map(t=>`instagramReviews.reviews.${e}.${t}`)),zu=[..._z,...Sz],Nz=zu.filter(e=>!e.endsWith(".style.background")&&!e.endsWith(".image")&&!e.endsWith(".avatarUrl")&&!e.endsWith(".highlightImageUrl")&&!e.endsWith(".postImageUrl")&&e!=="hero.backgroundImage"&&e!=="navigation.brandLogo"&&e!=="navigation.staffLogo"),Ez=new Set(["STRONG","EM","S","STRIKE","SPAN","BR","DIV","P","B","I"]),Oz=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Cz=/^rgba?\((\s*\d{1,3}\s*,){2}\s*\d{1,3}\s*(,\s*(0|1|0?\.\d+))?\s*\)$/,uA=typeof window<"u"&&typeof document<"u",kz=e=>{const t=e.trim().replace(/"|'/g,"");return Oz.test(t)?t.toLowerCase():Cz.test(t)?t.replace(/\s+/g,""):null},Az=e=>{const t=e.parentNode;if(!t){e.remove();return}for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},Tz=e=>{const n={B:"strong",I:"em",STRIKE:"s"}[e.tagName];if(!n)return e;const r=document.createElement(n);for(;e.firstChild;)r.appendChild(e.firstChild);return e.replaceWith(r),r},dA=e=>{if(!Ez.has(e.tagName)){Az(e);return}const t=Tz(e);if(Array.from(t.attributes).forEach(n=>{n.name!=="style"&&t.removeAttribute(n.name)}),t.hasAttribute("style")){const i=(t.getAttribute("style")??"").split(";").map(s=>s.trim()).filter(Boolean).find(s=>s.toLowerCase().startsWith("color"));if(i){const[,s]=i.split(":"),l=s?kz(s):null;l?t.setAttribute("style",`color: ${l}`):t.removeAttribute("style")}else t.removeAttribute("style")}Array.from(t.childNodes).forEach(n=>{var r;if(n.nodeType===Node.COMMENT_NODE){(r=n.parentNode)==null||r.removeChild(n);return}n.nodeType===Node.ELEMENT_NODE&&dA(n)})},Pz=e=>e.replace(/<\/?(?!br\b)[^>]+>/gi,"").replace(/\r\n|\r|\n/g,"<br>").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),Mz=e=>{const t=e??"";if(t.trim().length===0)return"";if(!uA)return Pz(t).trim();const n=document.createElement("template");return n.innerHTML=t,Array.from(n.content.childNodes).forEach(r=>{var i;if(r.nodeType===Node.COMMENT_NODE){(i=r.parentNode)==null||i.removeChild(r);return}r.nodeType===Node.ELEMENT_NODE&&dA(r)}),n.innerHTML.trim()},Rz=e=>{if(!uA)return e.replace(/<[^>]+>/g,"");const t=document.createElement("template");return t.innerHTML=e,t.content.textContent??""},O2=e=>e.replace(/[\u200B\u200C\u200D\uFEFF]/g,"").replace(/\r\n/g,`
`),Rb=e=>{if(!e)return null;const t=Mz(e.html??""),n=O2(e.plainText??""),r=O2(Rz(t)),i=n.trim().length>0?n:r;return t.trim().length===0&&i.trim().length===0?null:{html:t,plainText:i}},Dz={review1:{name:"Laura Méndez",handle:"@laurita.eats",timeAgo:"hace 2 días",message:"No puedo con la originalidad de estos tacos al pastor: cada mordisco tiene un giro gourmet brutal. La salsa cheddar queda cremosa sin empalagar y el toque crujiente lo es todo.",highlight:"Story « Taco Tuesday »",highlightCaption:"Guardado en Destacadas",location:"Bogotá · Servicio nocturno",badgeLabel:"Instagram",postImageAlt:"Assiette de tacos colorés garnis d'herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1521305916504-4a1121188589?auto=format&fit=crop&w=640&q=80"},review2:{name:"Camila Torres",handle:"@camigoesout",timeAgo:"hace 5 días",message:"Estas arepas son lo más: combinan ingredientes súper frescos con un toque gourmet creativo. La mezcla dulce-salado y esa salsa cheddar para remojar me tuvieron feliz todo el brunch.",highlight:"Reel « Brunch entre amigas »",highlightCaption:"Comentarios llenos de antojos",location:"Medellín · Brunch de domingo",badgeLabel:"Instagram",postImageAlt:"Gros plan sur des arepas dorées et une sauce maison.",avatarUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?auto=format&fit=crop&w=640&q=80"},review3:{name:"Sebastián Ruiz",handle:"@ruizhungry",timeAgo:"hace 1 semana",message:"Armamos un afterwork aquí y fue un hit: combos originales, porciones generosas y un crunch brutal en cada bocado. La salsa cheddar se volvió tema de conversación.",highlight:"Post « Team Afterwork »",highlightCaption:"Reacciones de la oficina",location:"Barranquilla · Terraza privada",badgeLabel:"Instagram",postImageAlt:"Table conviviale avec plusieurs plats mexicains et des boissons fraîches.",avatarUrl:"https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=640&q=80"},review4:{name:"Valentina Ríos",handle:"@valen.foodnotes",timeAgo:"hace 2 semanas",message:"El menú tiene un mood gourmet sin perder lo reconfortante: masa crocante, cheddar fundido y combinaciones de ingredientes que se sienten pensadas con cariño. Increíble experiencia.",highlight:"Carousel « Night Out »",highlightCaption:"Comentarios fijados",location:"Cali · Cena casual",badgeLabel:"Instagram",postImageAlt:"Pizza gourmande avec fromage coulant et herbes fraîches.",avatarUrl:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=640&q=80"},review5:{name:"Alejandro Pérez",handle:"@alexlovesfood",timeAgo:"hace 3 semanas",message:"Vine por curiosidad y me quedé por la originalidad del menú: el cheddar baña la burger justo como me gusta y el pan crujiente aguanta toda la salsa. Asociaciones de sabores top.",highlight:"Live « Burger Night »",highlightCaption:"Chat lleno de elogios",location:"Bogotá · Servicio takeout",badgeLabel:"Instagram",postImageAlt:"Burger gourmet avec sauce et frites croustillantes.",avatarUrl:"https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=640&q=80"},review6:{name:"Juliana Gómez",handle:"@julie.foodstories",timeAgo:"hace 1 mes",message:"Pedimos catering para un cumpleaños y fue éxito total: tacos mini, dips calientes y una mesa que se veía divina para fotos. Todo llegó puntual y con instrucciones claras.",highlight:"Story « Fiesta privada »",highlightCaption:"Reseñas con confeti",location:"Cartagena · Evento privado",badgeLabel:"Instagram",postImageAlt:"Buffet coloré avec tacos, dips et accompagnements.",avatarUrl:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=640&q=80"},review7:{name:"Manuela Herrera",handle:"@manuelatryit",timeAgo:"hace 6 semanas",message:"Amo que tengan opciones veggies sin perder el toque cheddar: las quesadillas con hongos y maíz dulce son mi nueva obsesión. Además, la atención es rapidísima.",highlight:"Reel « Veggie Lovers »",highlightCaption:"Comentarios verdes y felices",location:"Bogotá · Servicio para llevar",badgeLabel:"Instagram",postImageAlt:"Quesadillas dorées servies avec salsa verde.",avatarUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=320&q=80",highlightImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=320&q=80",postImageUrl:"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=640&q=80"}},Ke=e=>e.trim(),Db=e=>typeof e=="string"&&e.trim().length>0,fA=(e,t)=>Db(e)?e.trim():t,hA=(e,t)=>Db(e)?e.trim():t,hu=(e,t)=>Db(e)?e.trim():t,Ge=(e,t)=>{if(typeof e!="string")return t;const n=e.trim();return n.length>0?n:t},ma=(e,t)=>e===void 0?t??null:e===null?null:ei(e)??t??null,pa=e=>ei(e)??null,mA=/^([01]\d|2[0-3]):([0-5]\d)$/,C2=(e,t)=>{if(typeof e!="string")return t;const n=e.trim();return mA.test(n)?n:t},k2=(e,t)=>{if(typeof e!="string")return t;const n=e.trim();return mA.test(n)?n:t},Iz=(e,t)=>{const n={};return $u.forEach(r=>{const i=t[r],s=(e==null?void 0:e[r])??{};n[r]={name:Ge(s==null?void 0:s.name,i.name),handle:Ge(s==null?void 0:s.handle,i.handle),timeAgo:Ge(s==null?void 0:s.timeAgo,i.timeAgo),message:Ge(s==null?void 0:s.message,i.message),highlight:Ge(s==null?void 0:s.highlight,i.highlight),highlightCaption:Ge(s==null?void 0:s.highlightCaption,i.highlightCaption),location:Ge(s==null?void 0:s.location,i.location),badgeLabel:Ge(s==null?void 0:s.badgeLabel,i.badgeLabel),postImageAlt:Ge(s==null?void 0:s.postImageAlt,i.postImageAlt),avatarUrl:ma(s==null?void 0:s.avatarUrl,i.avatarUrl),highlightImageUrl:ma(s==null?void 0:s.highlightImageUrl,i.highlightImageUrl),postImageUrl:ma(s==null?void 0:s.postImageUrl,i.postImageUrl)}}),n},Lz=e=>{const t={};return $u.forEach(n=>{const r=(e==null?void 0:e[n])??{};t[n]={name:Ke((r==null?void 0:r.name)??""),handle:Ke((r==null?void 0:r.handle)??""),timeAgo:Ke((r==null?void 0:r.timeAgo)??""),message:Ke((r==null?void 0:r.message)??""),highlight:Ke((r==null?void 0:r.highlight)??""),highlightCaption:Ke((r==null?void 0:r.highlightCaption)??""),location:Ke((r==null?void 0:r.location)??""),badgeLabel:Ke((r==null?void 0:r.badgeLabel)??""),postImageAlt:Ke((r==null?void 0:r.postImageAlt)??""),avatarUrl:pa(r==null?void 0:r.avatarUrl),highlightImageUrl:pa(r==null?void 0:r.highlightImageUrl),postImageUrl:pa(r==null?void 0:r.postImageUrl)}}),t},Nf=e=>{if(typeof e!="string")return;const t=e.trim();return t.length>0?t:void 0},pA=e=>{if(!e)return null;const t=Nf(e.textColor??null),n=Nf(e.fontFamily??null),r=Nf(e.fontSize??null),i=Nf(e.backgroundColor??null),s={};return t&&(s.textColor=t),n&&(s.fontFamily=n),r&&(s.fontSize=r),i&&(s.backgroundColor=i),Object.keys(s).length>0?s:null},$z=(e,t)=>{const n=e??t,r={};return zu.forEach(i=>{const s=pA(n[i]??null);s&&(r[i]=s)}),r},zz=(e,t)=>{const n=e??t,r={};return zu.forEach(i=>{const s=pA(n[i]??null);s&&(r[i]=s)}),r},Uz=(e,t)=>{const n=e??t,r={};return zu.forEach(i=>{const s=n[i],l=Rb(s??null);l&&(r[i]=l)}),r},qz=(e,t)=>{const n=e??t,r={};return zu.forEach(i=>{const s=n[i],l=Rb(s??null);l&&(r[i]=l)}),r},Bz=["image","video","audio","font","raw"],Fz=()=>`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,Hz=e=>Bz.includes(e)?e:"raw",Kz=e=>{if(typeof e=="string"){const t=Date.parse(e);if(!Number.isNaN(t))return new Date(t).toISOString()}return new Date().toISOString()},Gz=e=>{const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<0?0:Math.round(t)},gA=e=>{if(!e)return null;const t=ei(e.url??void 0);if(!t)return null;const n=typeof e.id=="string"&&e.id.trim().length>0?e.id.trim():Fz(),r=typeof e.name=="string"&&e.name.trim().length>0?e.name.trim():n,i=typeof e.format=="string"&&e.format.trim().length>0?e.format.trim():"application/octet-stream",s=Hz(e.type),l=Gz(e.bytes),d=Kz(e.createdAt);return{id:n,name:r,url:t,format:i,bytes:l,type:s,createdAt:d}},Yz=(e,t)=>e?{library:Array.isArray(e.library)?e.library.map(r=>gA(r)).filter(Boolean):t.library}:t,Vz=(e,t)=>{const n=e??t;return{library:Array.isArray(n.library)?n.library.map(i=>gA(i)).filter(Boolean):t.library}},vA={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#f1f5f9"},yA={background:{type:"image",color:"#0f172a",image:"https://picsum.photos/seed/tacosbg/1920/1080"},fontFamily:"Inter",fontSize:"18px",textColor:"#f8fafc"},bA={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},xA={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},wA={background:{type:"color",color:"#ffffff",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#111827"},_A={background:{type:"color",color:"#f8fafc",image:null},fontFamily:"Inter",fontSize:"16px",textColor:"#0f172a"},jA={background:{type:"color",color:"#0f172a",image:null},fontFamily:"Inter",fontSize:"14px",textColor:"#e2e8f0"},Ib={library:[]},SA={},NA={},Cs=(e,t)=>{var s,l,d,f;const n=((s=e==null?void 0:e.background)==null?void 0:s.type)==="image"?"image":"color",r=hu((l=e==null?void 0:e.background)==null?void 0:l.color,t.background.color),i=n==="image"?ma(((d=e==null?void 0:e.background)==null?void 0:d.image)??void 0,t.background.image):null;return{background:{type:n,color:n==="color"?r:hu((f=e==null?void 0:e.background)==null?void 0:f.color,t.background.color),image:n==="image"?i:null},fontFamily:fA((e==null?void 0:e.fontFamily)??null,t.fontFamily),fontSize:hA((e==null?void 0:e.fontSize)??null,t.fontSize),textColor:hu((e==null?void 0:e.textColor)??null,t.textColor)}},ks=(e,t)=>{var s,l,d;const n=((s=e==null?void 0:e.background)==null?void 0:s.type)==="image"?"image":"color",r=hu(((l=e==null?void 0:e.background)==null?void 0:l.color)??null,t.background.color),i=n==="image"?pa(((d=e==null?void 0:e.background)==null?void 0:d.image)??null):null;return{background:{type:n,color:r,image:n==="image"?i:null},fontFamily:fA((e==null?void 0:e.fontFamily)??null,t.fontFamily),fontSize:hA((e==null?void 0:e.fontSize)??null,t.fontSize),textColor:hu((e==null?void 0:e.textColor)??null,t.textColor)}},no={navigation:{brand:"OUIOUITACOS",brandLogo:"/logo-brand.svg",staffLogo:"/logo-staff.svg",links:{home:"Accueil",about:"À propos",menu:"Menu",contact:"Contact",loginCta:"Staff Login"},style:vA},hero:{title:"Le Goût Authentique du Mexique",subtitle:"Des tacos préparés avec passion, des ingrédients frais et une touche de tradition pour un voyage gustatif inoubliable.",ctaLabel:"Commander en ligne",backgroundImage:"https://picsum.photos/seed/tacosbg/1920/1080",historyTitle:"Vos dernières commandes",reorderCtaLabel:"Commander à nouveau",style:yA},about:{title:"Notre Histoire",description:"Fondé par des passionnés de la cuisine mexicaine, OUIOUITACOS est né d'un désir simple : partager le goût authentique des tacos faits maison. Chaque recette est un héritage familial, chaque ingrédient est choisi avec soin, et chaque plat est préparé avec le cœur. Venez découvrir une explosion de saveurs qui vous transportera directement dans les rues de Mexico.",image:null,style:bA},menu:{title:"Nos Best-sellers",ctaLabel:"Voir le menu complet & Commander",loadingLabel:"Chargement du menu...",image:null,style:xA},instagramReviews:{title:"Ils nous adorent sur Instagram",subtitle:"Des foodies de toute la Colombie partagent leur coup de cœur pour notre cuisine : ambiance solaire, service attentionné et assiettes qui brillent autant que leurs stories.",image:"https://picsum.photos/seed/instagramreviews/600/600",style:wA,reviews:$u.reduce((e,t)=>(e[t]={...Dz[t]},e),{})},findUs:{title:"Encuéntranos",addressLabel:"Dirección",address:`Cra. 53 #75-98
Barranquilla, Atlántico
Colombie`,cityLabel:"Email",city:"hola@ouiouipos.co",hoursLabel:"Horarios",hours:"Lunes a domingo · 11h00 - 23h00",mapLabel:"Ver en Google Maps",mapUrl:"https://www.google.com/maps?q=OUIOUITACOS%2C%20Cra%2053%20%2375-98%2C%20Barranquilla%2C%20Atl%C3%A1ntico%2C%20Colombie",style:_A},footer:{text:"Tous droits réservés.",style:jA},onlineOrdering:{schedule:{startTime:"11:00",endTime:"23:00"},closedTitle:"Commandes en ligne indisponibles",closedSubtitle:"Revenez durant nos horaires de service pour commander vos plats préférés."},elementStyles:SA,elementRichText:NA,assets:Ib},p0=e=>{var n,r,i,s,l,d,f,h,m,g,v,x,j,_,S,N,E,C,k,A,R,D,$,G,K,B,L,V,H,se,M,z,q,J,X,T,I,U,te,re,ce,he,Ne,de,ge,ie,Q;const t=no;return{navigation:{brand:Ge((n=e==null?void 0:e.navigation)==null?void 0:n.brand,t.navigation.brand),brandLogo:ma((r=e==null?void 0:e.navigation)==null?void 0:r.brandLogo,t.navigation.brandLogo),staffLogo:ma((i=e==null?void 0:e.navigation)==null?void 0:i.staffLogo,t.navigation.staffLogo),links:{home:Ge((l=(s=e==null?void 0:e.navigation)==null?void 0:s.links)==null?void 0:l.home,t.navigation.links.home),about:Ge((f=(d=e==null?void 0:e.navigation)==null?void 0:d.links)==null?void 0:f.about,t.navigation.links.about),menu:Ge((m=(h=e==null?void 0:e.navigation)==null?void 0:h.links)==null?void 0:m.menu,t.navigation.links.menu),contact:Ge((v=(g=e==null?void 0:e.navigation)==null?void 0:g.links)==null?void 0:v.contact,t.navigation.links.contact),loginCta:Ge((j=(x=e==null?void 0:e.navigation)==null?void 0:x.links)==null?void 0:j.loginCta,t.navigation.links.loginCta)},style:Cs((_=e==null?void 0:e.navigation)==null?void 0:_.style,t.navigation.style)},hero:{title:Ge((S=e==null?void 0:e.hero)==null?void 0:S.title,t.hero.title),subtitle:Ge((N=e==null?void 0:e.hero)==null?void 0:N.subtitle,t.hero.subtitle),ctaLabel:Ge((E=e==null?void 0:e.hero)==null?void 0:E.ctaLabel,t.hero.ctaLabel),backgroundImage:ma((C=e==null?void 0:e.hero)==null?void 0:C.backgroundImage,t.hero.backgroundImage),historyTitle:Ge((k=e==null?void 0:e.hero)==null?void 0:k.historyTitle,t.hero.historyTitle),reorderCtaLabel:Ge((A=e==null?void 0:e.hero)==null?void 0:A.reorderCtaLabel,t.hero.reorderCtaLabel),style:Cs((R=e==null?void 0:e.hero)==null?void 0:R.style,t.hero.style)},about:{title:Ge((D=e==null?void 0:e.about)==null?void 0:D.title,t.about.title),description:Ge(($=e==null?void 0:e.about)==null?void 0:$.description,t.about.description),image:ma((G=e==null?void 0:e.about)==null?void 0:G.image,t.about.image),style:Cs((K=e==null?void 0:e.about)==null?void 0:K.style,t.about.style)},menu:{title:Ge((B=e==null?void 0:e.menu)==null?void 0:B.title,t.menu.title),ctaLabel:Ge((L=e==null?void 0:e.menu)==null?void 0:L.ctaLabel,t.menu.ctaLabel),loadingLabel:Ge((V=e==null?void 0:e.menu)==null?void 0:V.loadingLabel,t.menu.loadingLabel),image:ma((H=e==null?void 0:e.menu)==null?void 0:H.image,t.menu.image),style:Cs((se=e==null?void 0:e.menu)==null?void 0:se.style,t.menu.style)},instagramReviews:{title:Ge((M=e==null?void 0:e.instagramReviews)==null?void 0:M.title,t.instagramReviews.title),subtitle:Ge((z=e==null?void 0:e.instagramReviews)==null?void 0:z.subtitle,t.instagramReviews.subtitle),image:ma((q=e==null?void 0:e.instagramReviews)==null?void 0:q.image,t.instagramReviews.image),style:Cs((J=e==null?void 0:e.instagramReviews)==null?void 0:J.style,t.instagramReviews.style),reviews:Iz(((X=e==null?void 0:e.instagramReviews)==null?void 0:X.reviews)??null,t.instagramReviews.reviews)},findUs:{title:Ge((T=e==null?void 0:e.findUs)==null?void 0:T.title,t.findUs.title),addressLabel:Ge((I=e==null?void 0:e.findUs)==null?void 0:I.addressLabel,t.findUs.addressLabel),address:Ge((U=e==null?void 0:e.findUs)==null?void 0:U.address,t.findUs.address),cityLabel:Ge((te=e==null?void 0:e.findUs)==null?void 0:te.cityLabel,t.findUs.cityLabel),city:Ge((re=e==null?void 0:e.findUs)==null?void 0:re.city,t.findUs.city),hoursLabel:Ge((ce=e==null?void 0:e.findUs)==null?void 0:ce.hoursLabel,t.findUs.hoursLabel),hours:Ge((he=e==null?void 0:e.findUs)==null?void 0:he.hours,t.findUs.hours),mapLabel:Ge((Ne=e==null?void 0:e.findUs)==null?void 0:Ne.mapLabel,t.findUs.mapLabel),mapUrl:Ge((de=e==null?void 0:e.findUs)==null?void 0:de.mapUrl,t.findUs.mapUrl),style:Cs((ge=e==null?void 0:e.findUs)==null?void 0:ge.style,t.findUs.style)},footer:{text:Ge((ie=e==null?void 0:e.footer)==null?void 0:ie.text,t.footer.text),style:Cs((Q=e==null?void 0:e.footer)==null?void 0:Q.style,t.footer.style)},onlineOrdering:Wz(e==null?void 0:e.onlineOrdering,t.onlineOrdering),elementStyles:$z((e==null?void 0:e.elementStyles)??null,t.elementStyles),elementRichText:Uz((e==null?void 0:e.elementRichText)??null,t.elementRichText),assets:Yz((e==null?void 0:e.assets)??null,Ib)}},Wz=(e,t)=>{var n,r;return{schedule:{startTime:C2(((n=e==null?void 0:e.schedule)==null?void 0:n.startTime)??null,t.schedule.startTime),endTime:C2(((r=e==null?void 0:e.schedule)==null?void 0:r.endTime)??null,t.schedule.endTime)},closedTitle:Ge((e==null?void 0:e.closedTitle)??null,t.closedTitle),closedSubtitle:Ge((e==null?void 0:e.closedSubtitle)??null,t.closedSubtitle)}},Xz=e=>({navigation:{brand:Ke(e.navigation.brand),brandLogo:pa(e.navigation.brandLogo)??null,staffLogo:pa(e.navigation.staffLogo)??null,links:{home:Ke(e.navigation.links.home),about:Ke(e.navigation.links.about),menu:Ke(e.navigation.links.menu),contact:Ke(e.navigation.links.contact),loginCta:Ke(e.navigation.links.loginCta)},style:ks(e.navigation.style,vA)},hero:{title:Ke(e.hero.title),subtitle:Ke(e.hero.subtitle),ctaLabel:Ke(e.hero.ctaLabel),backgroundImage:pa(e.hero.backgroundImage),historyTitle:Ke(e.hero.historyTitle),reorderCtaLabel:Ke(e.hero.reorderCtaLabel),style:ks(e.hero.style,yA)},about:{title:Ke(e.about.title),description:Ke(e.about.description),image:pa(e.about.image),style:ks(e.about.style,bA)},menu:{title:Ke(e.menu.title),ctaLabel:Ke(e.menu.ctaLabel),loadingLabel:Ke(e.menu.loadingLabel),image:pa(e.menu.image),style:ks(e.menu.style,xA)},instagramReviews:{title:Ke(e.instagramReviews.title),subtitle:Ke(e.instagramReviews.subtitle),image:pa(e.instagramReviews.image),style:ks(e.instagramReviews.style,wA),reviews:Lz(e.instagramReviews.reviews??null)},findUs:{title:Ke(e.findUs.title),addressLabel:Ke(e.findUs.addressLabel),address:Ke(e.findUs.address),cityLabel:Ke(e.findUs.cityLabel),city:Ke(e.findUs.city),hoursLabel:Ke(e.findUs.hoursLabel),hours:Ke(e.findUs.hours),mapLabel:Ke(e.findUs.mapLabel),mapUrl:Ke(e.findUs.mapUrl),style:ks(e.findUs.style,_A)},footer:{text:Ke(e.footer.text),style:ks(e.footer.style,jA)},onlineOrdering:{schedule:{startTime:k2(e.onlineOrdering.schedule.startTime,no.onlineOrdering.schedule.startTime),endTime:k2(e.onlineOrdering.schedule.endTime,no.onlineOrdering.schedule.endTime)},closedTitle:Ke(e.onlineOrdering.closedTitle),closedSubtitle:Ke(e.onlineOrdering.closedSubtitle)},elementStyles:zz(e.elementStyles,SA),elementRichText:qz(e.elementRichText,NA),assets:Vz(e.assets,Ib)}),Gi={},nh=e=>{Gi[e]&&Gi[e].forEach(t=>t())};let _l=null;const A2="site_content",Qz="default",Jz=()=>{if(!(_l||typeof xe.channel!="function"))try{_l=xe.channel("orders-updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>nh("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},()=>nh("orders_updated")).on("postgres_changes",{event:"*",schema:"public",table:"restaurant_tables"},()=>nh("orders_updated")).subscribe(e=>{(e==="CHANNEL_ERROR"||e==="CLOSED"||e==="TIMED_OUT")&&(_l=null)})}catch(e){console.warn("Failed to subscribe to real-time order updates",e)}},Ye=e=>{if(e.error)throw new Error(e.error.message);return e.data},Hs=e=>{if(e.error&&e.status!==406)throw new Error(e.error.message);return e.data??null},Ir=e=>{if(e)return new Date(e).getTime()},Xr=e=>{if(e==null)return;if(typeof e=="number")return e;const t=Number(e);return Number.isFinite(t)?t:void 0},vl=e=>{if(e!==void 0)return e===null?null:new Date(e).toISOString()},gh=(e,t)=>e.reduce((n,r)=>{const i=t.get(r.ingredient_id);if(!i)return n;let s=i.prix_unitaire;return(i.unite==="kg"||i.unite==="L")&&(s=s/1e3),n+s*r.qte_utilisee},0),Zz=e=>{if(!e)return{permissions:{},homePage:void 0};const{[Qs]:t,...n}=e;return{permissions:n,homePage:typeof t=="string"?t:void 0}},T2=(e,t)=>{const n={...e};return t?n[Qs]=t:delete n[Qs],n},eU=e=>{if(!e)return!1;const t=e.trim().toLowerCase();return t===cA.ADMIN||t==="administrateur"},tU=(e,t)=>{const n={...e};return ni in n||(n[ni]=eU(t)?"editor":"none"),n},Vc=(e,t)=>{const{permissions:n,homePage:r}=Zz(e.permissions),i=tU(n,e.name),s={id:e.id,name:e.name,homePage:r,permissions:i};return t&&e.pin&&(s.pin=e.pin),s},P2=e=>e!=null&&e.content?p0(e.content):null,rh=e=>({id:e.id,nom:e.nom,unite:e.unite,stock_minimum:e.stock_minimum,stock_actuel:e.stock_actuel,prix_unitaire:e.prix_unitaire}),g0=e=>({id:e.id,nom:e.nom}),nU=e=>({ingredient_id:e.ingredient_id,qte_utilisee:e.qte_utilisee}),Hi=(e,t)=>{const n=(e.product_recipes??[]).map(nU),r={id:e.id,nom_produit:e.nom_produit,description:e.description??void 0,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:Fk(e.image),recipe:n,is_best_seller:e.is_best_seller??!1,best_seller_rank:e.best_seller_rank??null};return t&&(r.cout_revient=gh(n,t)),r},Rs=e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),EA=e=>({id:e.id,produitRef:e.produit_id,nom_produit:e.nom_produit,prix_unitaire:Xr(e.prix_unitaire)??0,quantite:e.quantite,excluded_ingredients:e.excluded_ingredients??[],commentaire:e.commentaire??"",estado:e.estado,date_envoi:Ir(e.date_envoi)}),rU=(e,t)=>e.length!==t.length?!1:e.every((n,r)=>n===t[r]),aU=(e,t)=>{if(e.produitRef!==t.produitRef||e.nom_produit!==t.nom_produit||e.prix_unitaire!==t.prix_unitaire||e.quantite!==t.quantite||e.commentaire!==t.commentaire||e.estado!==t.estado)return!1;const n=[...e.excluded_ingredients].sort(),r=[...t.excluded_ingredients].sort();return rU(n,r)},iU=(e,t)=>{const n=[...t],r=[];return e.forEach(i=>{const s=n.findIndex(l=>aU(l,i));s!==-1&&r.push(n.splice(s,1)[0])}),[...r,...n]},Fa=e=>{const t=(e.order_items??[]).map(EA),n=Xr(e.total),r=Xr(e.profit),i={id:e.id,type:e.type,table_id:e.table_id??void 0,table_nom:e.table_nom??void 0,couverts:e.couverts??0,statut:e.statut,estado_cocina:e.estado_cocina,date_creation:Ir(e.date_creation)??Date.now(),date_envoi_cuisine:Ir(e.date_envoi_cuisine),date_listo_cuisine:Ir(e.date_listo_cuisine),date_servido:Ir(e.date_servido),payment_status:e.payment_status,items:t,total:n??0,profit:r,payment_method:e.payment_method??void 0,payment_receipt_url:e.payment_receipt_url??void 0,receipt_url:e.receipt_url??void 0};return(e.client_nom||e.client_telephone||e.client_adresse)&&(i.clientInfo={nom:e.client_nom??"",telephone:e.client_telephone??"",adresse:e.client_adresse??void 0}),i.subtotal=Xr(e.subtotal)??0,i.total_discount=Xr(e.total_discount)??0,i.promo_code=e.promo_code??void 0,i.applied_promotions=e.applied_promotions?typeof e.applied_promotions=="string"?JSON.parse(e.applied_promotions):e.applied_promotions:[],i},v0=e=>{const t=e.items.map(j=>Math.max(0,j.prix_unitaire)*Math.max(0,j.quantite)),n=t.reduce((j,_)=>j+_,0),r=Math.max(e.subtotal??0,0),i=n>0?n:r,s=Math.max(e.total_discount??0,0),l=i>0?Math.min(s,i):0,d=t.map(j=>{if(i<=0||j<=0||l<=0)return 0;const _=j/i*l;return Math.min(j,_)}),f=d.reduce((j,_)=>j+_,0),h=l-f;if(Math.abs(h)>1e-6&&d.length>0){const j=d.length-1,_=t[j],S=Math.min(_,Math.max(0,d[j]+h));d[j]=S}const m=d.map((j,_)=>{const S=t[_]-j;return S>0?S:0}),g=m.reduce((j,_)=>j+_,0),v=typeof e.shipping_cost=="number"?e.shipping_cost:0,x=e.total??Math.max(g+v,0);return{grossPerItem:t,discountPerItem:d,netPerItem:m,subtotalBeforeDiscount:i,totalDiscount:l,netRevenueFromItems:g,totalRevenue:x}},sU=e=>({id:e.id,orderId:e.order_id,productId:e.product_id,productName:e.product_name,categoryId:e.category_id,categoryName:e.category_name,quantity:e.quantity,unitPrice:e.unit_price,totalPrice:e.total_price,unitCost:e.unit_cost,totalCost:e.total_cost,profit:e.profit,paymentMethod:e.payment_method??void 0,saleDate:Ir(e.sale_date)??Date.now()}),oU=(e,t)=>{if(!e.commande_id)return"libre";const n=t==null?void 0:t.estado_cocina;return!n||n==="no_enviado"?"libre":n==="listo"?"para_entregar":n==="servido"||n==="entregada"?"para_pagar":e.statut==="para_entregar"||e.statut==="para_pagar"?e.statut:"en_cuisine"},y0=(e,t)=>{const n=e.commande_id?t.get(e.commande_id):void 0,r={id:e.id,nom:e.nom,capacite:e.capacite,statut:oU(e,n),commandeId:e.commande_id??void 0,couverts:e.commande_id?e.couverts??void 0:void 0};return r.commandeId&&n&&(r.estado_cocina=n.estado_cocina,r.date_envoi_cuisine=n.date_envoi_cuisine),r},M2=async e=>{if(!e.commande_id)return y0(e,new Map);const t=await xe.from("orders").select("id, estado_cocina, date_envoi_cuisine").eq("id",e.commande_id).maybeSingle(),n=Hs(t),r=n?new Map([[n.id,{estado_cocina:n.estado_cocina,date_envoi_cuisine:Ir(n.date_envoi_cuisine)}]]):new Map;return y0(e,r)},Ki=()=>xe.from("orders").select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        order_items (
          id,
          order_id,
          produit_id,
          nom_produit,
          prix_unitaire,
          quantite,
          excluded_ingredients,
          commentaire,
          estado,
          date_envoi
        ),
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).order("date_creation",{ascending:!1}),lU=(e,t)=>`
        id,
        nom_produit,
        description,
        prix_vente,
        categoria_id,
        estado,
        image${e?`,
        is_best_seller,
        best_seller_rank`:""}${t?`,
        product_recipes (
          ingredient_id,
          qte_utilisee
        )`:""}
      `,R2=e=>{const t=(e==null?void 0:e.includeBestSellerColumns)!==!1,n=(e==null?void 0:e.includeRecipes)!==!1;let r=xe.from("products").select(lU(t,n));return e!=null&&e.orderBy?r=r.order(e.orderBy.column,{ascending:e.orderBy.ascending??!0,nullsFirst:e.orderBy.nullsFirst}):r=r.order("nom_produit"),r},cU=e=>{if(!(e!=null&&e.message))return!1;const t=e.message.toLowerCase();return t.includes("does not exist")&&t.includes("column")&&(t.includes("is_best_seller")||t.includes("best_seller_rank"))},Ks=async(e,t)=>{let r=await e(R2({...t,includeBestSellerColumns:!0}),!0);return cU(r.error)&&(r=await e(R2({...t,includeBestSellerColumns:!1}),!1)),r},uU=e=>e==="sur_place"||e==="a_emporter"||e==="pedir_en_linea"?e:"a_emporter",dU=e=>e==="en_cours"||e==="finalisee"||e==="pendiente_validacion"?e:"pendiente_validacion",fU=e=>e==="paid"||e==="unpaid"?e:"unpaid",hU=e=>{if(!e)return null;const t=e.trim().toLowerCase();return t==="tarjeta"||t==="card"||t==="credit_card"||t==="debit_card"||t==="carte"||t==="carte_bancaire"||t==="pago_online"||t==="online"?"tarjeta":t==="efectivo"||t==="cash"||t==="liquide"||t==="contado"?"efectivo":t==="transferencia"||t==="transfer"||t==="bank_transfer"||t==="transfert"?"transferencia":null},Zt=async e=>{const t=await Ki().eq("id",e).maybeSingle(),n=Hs(t);return n?Fa(n):null},yl=async()=>{const e=await xe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").order("nom");return Ye(e).map(rh)},mU=e=>e?typeof e=="string"?e.toLowerCase().includes("permission"):e instanceof Error?e.message.toLowerCase().includes("permission"):typeof e=="object"&&"message"in e?String(e.message??"").toLowerCase().includes("permission"):!1:!1,fv=async e=>{try{return await yl()}catch(t){if(mU(t))return console.warn(`[api.${e}] Impossible de récupérer les ingrédients (permissions insuffisantes). Poursuite avec une liste vide.`,t),[];throw t}},ah=async()=>{const e=await xe.from("categories").select("id, nom").order("nom");return Ye(e).map(g0)},D2=async()=>{const e=await xe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").order("nom"),t=Ye(e),n=t.map(i=>i.commande_id).filter(i=>!!i);let r=new Map;if(n.length>0){const i=await xe.from("orders").select("id, estado_cocina, date_envoi_cuisine").in("id",n),s=Ye(i);r=new Map(s.map(l=>[l.id,{estado_cocina:l.estado_cocina,date_envoi_cuisine:Ir(l.date_envoi_cuisine)}]))}return t.map(i=>y0(i,r))},mu=(e=new Date)=>{const t=new Date(e);return t.setHours(5,0,0,0),e<t&&t.setDate(t.getDate()-1),t},pU={week:{days:7,label:"7 derniers jours"},month:{days:30,label:"30 derniers jours"}},gU=e=>{const t=pU[e],n=new Date(mu());n.setDate(n.getDate()+1);const r=new Date(n);return r.setDate(r.getDate()-t.days),{config:t,start:r,end:n}},I2=async e=>{if(!e.items.length)return await xe.from("sales").delete().eq("order_id",e.id),await xe.from("orders").update({profit:0}).eq("id",e.id),0;const t=Array.from(new Set(e.items.map(j=>j.produitRef))),n=t.length>0?Ks(j=>j.in("id",t)):Ks(j=>j.limit(0)),[r,i,s]=await Promise.all([ah(),yl(),n]),l=new Map(i.map(j=>[j.id,j])),d=new Map(r.map(j=>[j.id,j.nom]));let f=[];t.length>0&&(f=Ye(s));const h=new Map(f.map(j=>{const _=Hi(j,l);return[_.id,_]})),m=vl(e.date_servido)??new Date().toISOString(),g=v0(e),v=e.items.map((j,_)=>({item:j,index:_})).filter(({item:j})=>Rs(j.produitRef)).map(({item:j,index:_})=>{const S=h.get(j.produitRef),N=S?gh(S.recipe,l):0,E=(S==null?void 0:S.categoria_id)??"unknown",C=S?d.get(E)??"Sans catégorie":"Sans catégorie",k=g.netPerItem[_]??j.prix_unitaire*j.quantite,A=j.quantite>0?k/j.quantite:0,R=N*j.quantite,D=k-R;return{order_id:e.id,product_id:j.produitRef,product_name:j.nom_produit,category_id:E,category_name:C,quantity:j.quantite,unit_price:A,total_price:k,unit_cost:N,total_cost:R,profit:D,payment_method:e.payment_method??null,sale_date:m}}),x=v.reduce((j,_)=>j+_.profit,0);return await xe.from("sales").delete().eq("order_id",e.id),await xe.from("sales").insert(v),await xe.from("orders").update({profit:x}).eq("id",e.id),x},ha={subscribe:(e,t)=>(Gi[e]||(Gi[e]=[]),Gi[e].push(t),e==="orders_updated"&&Jz(),()=>{var n;Gi[e]=(Gi[e]??[]).filter(r=>r!==t),e==="orders_updated"&&((n=Gi[e])==null?void 0:n.length)===0&&_l&&(typeof xe.removeChannel=="function"&&xe.removeChannel(_l),_l=null)}),publish:e=>{nh(e)}},zt=e=>{(e==null?void 0:e.includeNotifications)!==!1&&ha.publish("notifications_updated"),ha.publish("orders_updated")},Se={notifications:ha,getSiteContent:async()=>{const e=await xe.from(A2).select("id, content, updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle(),t=Hs(e);return P2(t)},updateSiteContent:async e=>{const t=Xz(e),n=await xe.from(A2).upsert({id:Qz,content:t},{onConflict:"id"}).select("id, content, updated_at").single(),r=Ye(n),i=P2(r);if(!i)throw new Error("Contenu du site introuvable après la mise à jour.");return i},getRoles:async()=>{const e=await xe.from("roles").select("id, name, pin, permissions").order("name");return Ye(e).map(n=>Vc(n,!0))},getRoleById:async e=>{const t=await xe.from("roles").select("id, name, permissions").eq("id",e).maybeSingle(),n=Hs(t);return n?Vc(n,!1):null},createRole:async e=>{const t=await xe.from("roles").insert({name:e.name,pin:e.pin,permissions:T2(e.permissions,e.homePage)}).select("id, name, pin, permissions").single(),n=Ye(t);return ha.publish("notifications_updated"),Vc(n,!0)},updateRole:async(e,t)=>{const n=await xe.from("roles").update({name:t.name,pin:t.pin,permissions:T2(t.permissions,t.homePage)}).eq("id",e).select("id, name, pin, permissions").single(),r=Ye(n);return ha.publish("notifications_updated"),Vc(r,!0)},deleteRole:async e=>{const t=await xe.from("roles").delete().eq("id",e);Ye(t),ha.publish("notifications_updated")},loginWithPin:async e=>{const t=await xe.from("roles").select("id, name, permissions").eq("pin",e).maybeSingle(),n=Hs(t);if(!n)return null;const r=Vc(n,!1);try{await w2(r.id,r.name)}catch(i){console.warn("Failed to enregistrer la connexion du rôle",i)}return r},getDashboardStats:async(e="week")=>{var ut;const{config:t,start:n,end:r}=gU(e),i=n.toISOString(),s=r.toISOString(),l=new Date(n);l.setDate(l.getDate()-t.days);const d=l.toISOString(),h=mu().toISOString(),[m,g,v,x,j,_]=await Promise.all([D2(),yl(),ah(),Ks(we=>we),Ki().eq("statut","finalisee").gte("date_creation",h),Ki().eq("statut","finalisee").gte("date_creation",d).lt("date_creation",s)]),N=Ye(j).map(Fa),C=Ye(_).map(Fa),k=C.filter(we=>we.date_creation>=n.getTime()),A=C.filter(we=>we.date_creation<n.getTime()),R=new Map(g.map(we=>[we.id,we])),D=Ye(x),$=new Map(D.map(we=>{const be=Hi(we,R);return[be.id,be]})),G=new Map(v.map(we=>[we.id,we.nom])),K=new Map,B=we=>{const be=K.get(we.id);if(be)return be;const ze=v0(we);return K.set(we.id,ze),ze},L=we=>we.reduce((be,ze)=>{const Et=B(ze);return be+ze.items.reduce((et,dt,Vt)=>{const Fr=$.get(dt.produitRef),Xe=Fr?gh(Fr.recipe,R):0,jn=Et.netPerItem[Vt]??dt.prix_unitaire*dt.quantite;return et+(jn-Xe*dt.quantite)},0)},0),V=vl((ut=N[0])==null?void 0:ut.date_servido)??new Date().toISOString(),H=N.flatMap(we=>{const be=B(we);return we.items.map((ze,Et)=>{const et=$.get(ze.produitRef),dt=et?gh(et.recipe,R):0,Vt=(et==null?void 0:et.categoria_id)??"unknown",Fr=et?G.get(Vt)??"Sans catégorie":"Sans catégorie",Xe=be.netPerItem[Et]??ze.prix_unitaire*ze.quantite,jn=ze.quantite>0?Xe/ze.quantite:0,er=dt*ze.quantite,sn=Xe-er;return{order_id:we.id,product_id:ze.produitRef,product_name:ze.nom_produit,category_id:Vt,category_name:Fr,quantity:ze.quantite,unit_price:jn,total_price:Xe,unit_cost:dt,total_cost:er,profit:sn,payment_method:we.payment_method??null,sale_date:V}})}),se=N.reduce((we,be)=>we+B(be).totalRevenue,0);H.reduce((we,be)=>we+be.profit,0),N.reduce((we,be)=>we+(be.couverts??0),0),N.length>0&&se/N.length;const M=k.reduce((we,be)=>we+B(be).totalRevenue,0),z=A.reduce((we,be)=>we+B(be).totalRevenue,0),q=L(k),J=L(A),X=k.reduce((we,be)=>we+(be.couverts??0),0),T=A.reduce((we,be)=>we+(be.couverts??0),0),I=k.length>0?M/k.length:0,U=k.length,te=A.length,re=new Map;k.forEach(we=>{const be=B(we);we.items.forEach((ze,Et)=>{const et=$.get(ze.produitRef),dt=et?G.get(et.categoria_id)??"Sans catégorie":"Sans catégorie",Vt=be.netPerItem[Et]??ze.prix_unitaire*ze.quantite;re.set(dt,(re.get(dt)??0)+Vt)})});const ce=Array.from(re.entries()).map(([we,be])=>({name:we,value:be})),he=[...k].sort((we,be)=>be.date_creation-we.date_creation).slice(0,5),Ne=Array.from($.values()).filter(we=>we.is_best_seller).sort((we,be)=>{const ze=we.best_seller_rank??Number.POSITIVE_INFINITY,Et=be.best_seller_rank??Number.POSITIVE_INFINITY;return ze===Et?we.nom_produit.localeCompare(be.nom_produit):ze-Et}).slice(0,6),de=m.filter(we=>we.statut!=="libre").length,ge=m.reduce((we,be)=>we+(be.couverts??0),0),ie=N.filter(we=>we.estado_cocina==="recibido").length,Q=g.filter(we=>we.stock_actuel<=we.stock_minimum),Ce=(we,be,ze)=>{const Et=be.getTime(),et=ze.getTime();return we.reduce((dt,Vt)=>Vt.date_creation>=Et&&Vt.date_creation<et?dt+B(Vt).totalRevenue:dt,0)},Re=Array.from({length:t.days}).map((we,be)=>{const ze=new Date(n);ze.setDate(ze.getDate()+be);const Et=new Date(ze);Et.setDate(Et.getDate()+1);const et=new Date(l);et.setDate(et.getDate()+be);const dt=new Date(et);return dt.setDate(dt.getDate()+1),{name:t.days===7?be===t.days-1?"Auj":`J-${t.days-1-be}`:ze.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),ventes:Ce(k,ze,Et),ventesPeriodePrecedente:Ce(A,et,dt)}});return{period:e,periodLabel:t.label,periodStart:i,periodEnd:s,ventesPeriode:M,ventesPeriodePrecedente:z,beneficePeriode:q,beneficePeriodePrecedente:J,clientsPeriode:X,clientsPeriodePrecedente:T,panierMoyen:I,commandesPeriode:U,commandesPeriodePrecedente:te,tablesOccupees:de,clientsActuels:ge,commandesEnCuisine:ie,ingredientsStockBas:Q,ventesPeriodeSeries:Re,ventesParCategorie:ce,recentOrders:he,bestSellerProducts:Ne}},getSalesByProduct:async e=>{const t=h=>{if(h)return typeof h=="string"?h:h.toISOString()},n=t(e==null?void 0:e.start)??mu().toISOString(),r=t(e==null?void 0:e.end);let i=xe.from("sales").select("product_id, product_name, total_price").gte("sale_date",n);r&&(i=i.lt("sale_date",r));const s=await i,l=Ye(s),d=new Map;l.forEach(h=>{const m=d.get(h.product_id)??{name:h.product_name,value:0};m.value+=h.total_price,d.set(h.product_id,m)});const f=Array.from(d.values()).sort((h,m)=>m.value-h.value);if(f.length>6){const h=f.slice(0,6),m=f.slice(6).reduce((g,v)=>g+v.value,0);return[...h,{name:"Autres",value:m}]}return f},getTables:async()=>D2(),createTable:async e=>{const t=await xe.from("restaurant_tables").insert({nom:e.nom,capacite:e.capacite,couverts:e.couverts??null}).select("id, nom, capacite, statut, commande_id, couverts").single(),n=Ye(t);return zt(),M2(n)},updateTable:async(e,t)=>{const n={};t.nom!==void 0&&(n.nom=t.nom),t.capacite!==void 0&&(n.capacite=t.capacite),t.couverts!==void 0&&(n.couverts=t.couverts??null);const r=await xe.from("restaurant_tables").update(n).eq("id",e).select("id, nom, capacite, statut, commande_id, couverts").single(),i=Ye(r);return zt(),M2(i)},deleteTable:async e=>{const t=await xe.from("restaurant_tables").delete().eq("id",e);Ye(t),zt()},getIngredients:async()=>yl(),getProducts:async()=>{const[e,t]=await Promise.all([Ks(i=>i.neq("estado","archive")),fv("getProducts")]),n=Ye(e),r=t.length>0?new Map(t.map(i=>[i.id,i])):void 0;return n.map(i=>Hi(i,r))},getProductById:async e=>{const[t,n]=await Promise.all([Ks(s=>s.eq("id",e).maybeSingle()),fv("getProductById")]),r=Hs(t);if(!r)return null;const i=n.length>0?new Map(n.map(s=>[s.id,s])):void 0;return Hi(r,i)},getBestSellerProducts:async()=>{const[e,t]=await Promise.all([Ks((i,s)=>s?i.eq("is_best_seller",!0).order("best_seller_rank",{ascending:!0,nullsFirst:!1}).limit(6):i.limit(0),{includeRecipes:!1}),fv("getBestSellerProducts")]),n=Ye(e),r=t.length>0?new Map(t.map(i=>[i.id,i])):void 0;return n.filter(i=>i.estado!=="archive").sort((i,s)=>{const l=i.best_seller_rank??Number.POSITIVE_INFINITY,d=s.best_seller_rank??Number.POSITIVE_INFINITY;return l-d}).map(i=>Hi(i,r)).filter(i=>i.is_best_seller).slice(0,6)},getCategories:async()=>ah(),addProduct:async e=>{const t=ei(e.image),n=await xe.from("products").insert({nom_produit:e.nom_produit,description:e.description??null,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:t,is_best_seller:e.is_best_seller??!1,best_seller_rank:e.is_best_seller?e.best_seller_rank:null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image, is_best_seller, best_seller_rank").single(),r=Ye(n);return e.recipe.length>0&&await xe.from("product_recipes").insert(e.recipe.map(i=>({product_id:r.id,ingredient_id:i.ingredient_id,qte_utilisee:i.qte_utilisee}))),zt(),Hi({...r,product_recipes:e.recipe.map(i=>({ingredient_id:i.ingredient_id,qte_utilisee:i.qte_utilisee}))})},createProduct:async(e,t)=>{let n;t&&(n=await xe.storage.from("product-images").upload(`${e.nom_produit}-${Date.now()}`,t).then(s=>{var l;if(s.error)throw s.error;return(l=s.data)==null?void 0:l.path}));const r=await xe.from("products").insert({nom_produit:e.nom_produit,description:e.description??null,prix_vente:e.prix_vente,categoria_id:e.categoria_id,estado:e.estado,image:n??null}).select("id, nom_produit, description, prix_vente, categoria_id, estado, image").single(),i=Ye(r);return e.recipe.length>0&&await xe.from("product_recipes").insert(e.recipe.map(s=>({product_id:i.id,ingredient_id:s.ingredient_id,qte_utilisee:s.qte_utilisee}))),zt(),Hi({...i,product_recipes:e.recipe.map(s=>({...s,product_id:i.id}))})},updateProduct:async(e,t,n)=>{let r;n?r=await xe.storage.from("product-images").upload(`${t.nom_produit??e}-${Date.now()}`,n).then(l=>{var d;if(l.error)throw l.error;return(d=l.data)==null?void 0:d.path}):"image"in t&&t.image===null&&(r=null);const i={};t.nom_produit!==void 0&&(i.nom_produit=t.nom_produit),t.description!==void 0&&(i.description=t.description),t.prix_vente!==void 0&&(i.prix_vente=t.prix_vente),t.categoria_id!==void 0&&(i.categoria_id=t.categoria_id),t.estado!==void 0&&(i.estado=t.estado),r!==void 0&&(i.image=r),Object.keys(i).length>0&&await xe.from("products").update(i).eq("id",e),t.recipe&&(await xe.from("product_recipes").delete().eq("product_id",e),t.recipe.length>0&&await xe.from("product_recipes").insert(t.recipe.map(l=>({product_id:e,ingredient_id:l.ingredient_id,qte_utilisee:l.qte_utilisee})))),zt();const s=await Se.getProductById(e);if(!s)throw new Error("Product not found after update");return s},deleteProduct:async e=>{const t=await Se.getProductById(e);if(t!=null&&t.image){const n=t.image.split("/").pop();n&&await xe.storage.from("product-images").remove([n])}await xe.from("product_recipes").delete().eq("product_id",e),await xe.from("products").delete().eq("id",e),zt()},createCategory:async e=>{const t=await xe.from("categories").insert(e).select("id, nom").single(),n=Ye(t);return zt(),g0(n)},updateCategory:async(e,t)=>{const n=await xe.from("categories").update(t).eq("id",e).select("id, nom").single(),r=Ye(n);return zt(),g0(r)},deleteCategory:async e=>{await xe.from("categories").delete().eq("id",e),zt()},createIngredient:async e=>{const t=await xe.from("ingredients").insert({nom:e.nom,unite:e.unite,stock_minimum:e.stock_minimum,stock_actuel:0,prix_unitaire:0}).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),n=Ye(t);return ha.publish("notifications_updated"),rh(n)},updateIngredient:async(e,t)=>{const n=await xe.from("ingredients").update(t).eq("id",e).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),r=Ye(n);return ha.publish("notifications_updated"),rh(r)},resupplyIngredient:async(e,t,n)=>{if(!Number.isFinite(t)||t<=0)throw new Error("Quantity must be a positive number");if(!Number.isFinite(n)||n<0)throw new Error("Unit price must be a non-negative number");const r=await xe.from("ingredients").select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").eq("id",e).single(),i=Ye(r),s=Xr(i.stock_actuel)??0,l=Xr(i.prix_unitaire)??0,d=Number(t),f=s+d,h=s*l+d*n,m=f>0?h/f:0,g=await xe.from("ingredients").update({stock_actuel:f,prix_unitaire:m}).eq("id",e).select("id, nom, unite, stock_minimum, stock_actuel, prix_unitaire").single(),v=Ye(g),x=await xe.from("purchases").insert({ingredient_id:e,quantite_achetee:d,prix_total:d*n,date_achat:new Date().toISOString()});if(x.error)throw new Error(x.error.message);return ha.publish("notifications_updated"),rh(v)},deleteIngredient:async e=>{const t=await xe.from("product_recipes").select("ingredient_id, product_id, qte_utilisee").eq("ingredient_id",e).limit(1),{data:n}=t;return n&&n.length>0?{success:!1}:(await xe.from("ingredients").delete().eq("id",e),ha.publish("notifications_updated"),{success:!0})},getKitchenOrders:async()=>{const e=await Ki().eq("estado_cocina","recibido"),n=Ye(e).map(Fa),r=[];return n.forEach(i=>{const s=i.items.filter(d=>d.estado==="enviado");if(s.length===0)return;s.reduce((d,f)=>{const h=f.date_envoi??i.date_envoi_cuisine??i.date_creation,m=d.get(h)??[];return m.push(f),d.set(h,m),d},new Map).forEach((d,f)=>{r.push({...i,items:d,date_envoi_cuisine:f,ticketKey:`${i.id}-${f}`})})}),r.sort((i,s)=>{const l=i.date_envoi_cuisine??i.date_creation,d=s.date_envoi_cuisine??s.date_creation;return l-d})},getTakeawayOrders:async()=>{const e=await Ki().in("type",["a_emporter","pedir_en_linea"]),n=Ye(e).map(Fa);return{pending:n.filter(r=>r.statut==="pendiente_validacion"&&r.estado_cocina==="no_enviado"),ready:n.filter(r=>r.estado_cocina==="listo")}},getOrderById:async e=>await Zt(e)??void 0,createOrGetOrderByTableId:async(e,t)=>{const n=await xe.from("restaurant_tables").select("id, nom, capacite, statut, commande_id, couverts").eq("id",e).maybeSingle(),r=Hs(n);if(!r)throw new Error("Table not found");if(r.commande_id){const h=await Zt(r.commande_id);if(h)return h}const i=(t==null?void 0:t.couverts)??r.couverts??null;if(!Number.isInteger(i)||i<=0)throw new Error("Le nombre de couverts sélectionné est requis pour ouvrir la table.");const s=i,l=new Date().toISOString(),d=await xe.from("orders").insert({type:"sur_place",table_id:r.id,table_nom:r.nom,couverts:s,statut:"en_cours",estado_cocina:"no_enviado",date_creation:l,payment_status:"unpaid",total:0}).select("*").single(),f=Ye(d);return await xe.from("restaurant_tables").update({statut:"en_cuisine",commande_id:f.id,couverts:s}).eq("id",e),zt(),Fa(f)},cancelUnsentTableOrder:async e=>{const t=await Zt(e);!t||t.estado_cocina!=="no_enviado"||t.items.some(r=>r.estado!=="en_attente")||(await xe.from("order_items").delete().eq("order_id",e),await xe.from("orders").delete().eq("id",e),t.table_id&&await xe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",t.table_id),zt())},addOrderItems:async(e,t)=>{const n=new Date().toISOString(),r=t.map(s=>({...s,order_id:e,estado:"en_attente",date_envoi:n}));await xe.from("order_items").insert(r),zt();const i=await Zt(e);if(!i)throw new Error("Order not found after adding items");return i},updateOrderItems:async(e,t)=>{const n=await Zt(e);if(!n)throw new Error("Order not found");const r=new Set(n.items.map(m=>m.id)),i=new Set(t.map(m=>m.id)),s=t.filter(m=>!r.has(m.id)),l=t.filter(m=>r.has(m.id)),d=n.items.filter(m=>!i.has(m.id)),f=new Date().toISOString();s.length>0&&await xe.from("order_items").insert(s.map(m=>({...m,order_id:e,estado:"en_attente",date_envoi:f}))),l.length>0&&await Promise.all(l.map(m=>xe.from("order_items").update({produit_id:m.produitRef,nom_produit:m.nom_produit,prix_unitaire:m.prix_unitaire,quantite:m.quantite,excluded_ingredients:m.excluded_ingredients??[],commentaire:m.commentaire,estado:m.estado??"en_attente",date_envoi:m.date_envoi?new Date(m.date_envoi).toISOString():f}).eq("id",m.id))),d.length>0&&await xe.from("order_items").delete().in("id",d.map(m=>m.id)),zt();const h=await Zt(e);if(!h)throw new Error("Order not found after item update");return h},updateOrder:async(e,t,n)=>{const{items:r,clientInfo:i,removedItemIds:s=[],...l}=t;let d=[];if(r){const v=await Zt(e);if(!v)throw new Error("Order not found");d=v.items;const x=new Set(d.map(S=>S.id)),j=r.filter(S=>!Rs(S.id)||!x.has(S.id)),_=r.filter(S=>Rs(S.id)&&x.has(S.id));j.length>0&&await xe.from("order_items").insert(j.map(S=>({...Rs(S.id)?{id:S.id}:{},order_id:e,produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients??[],commentaire:S.commentaire??null,estado:S.estado??"en_attente",date_envoi:S.date_envoi?new Date(S.date_envoi).toISOString():null}))),_.length>0&&await Promise.all(_.map(S=>xe.from("order_items").update({produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients??[],commentaire:S.commentaire??null,estado:S.estado??"en_attente",date_envoi:S.date_envoi?new Date(S.date_envoi).toISOString():null}).eq("id",S.id)))}const f={};l.type&&(f.type=l.type),l.table_id!==void 0&&(f.table_id=l.table_id),l.table_nom!==void 0&&(f.table_nom=l.table_nom),l.couverts!==void 0&&(f.couverts=l.couverts),l.statut&&(f.statut=l.statut),l.estado_cocina&&(f.estado_cocina=l.estado_cocina),l.payment_status&&(f.payment_status=l.payment_status),l.payment_method!==void 0&&(f.payment_method=l.payment_method),l.payment_receipt_url!==void 0&&(f.payment_receipt_url=l.payment_receipt_url),l.receipt_url!==void 0&&(f.receipt_url=l.receipt_url),l.total!==void 0&&(f.total=l.total),l.profit!==void 0&&(f.profit=l.profit),l.date_creation!==void 0&&(f.date_creation=vl(l.date_creation)),l.date_envoi_cuisine!==void 0&&(f.date_envoi_cuisine=vl(l.date_envoi_cuisine)),l.date_listo_cuisine!==void 0&&(f.date_listo_cuisine=vl(l.date_listo_cuisine)),l.date_servido!==void 0&&(f.date_servido=vl(l.date_servido)),r&&(f.total=r.reduce((v,x)=>v+x.prix_unitaire*x.quantite,0));const h=new Set((r??[]).map(v=>v.id)),m=new Set;s.filter(v=>Rs(v)).forEach(v=>m.add(v)),d.filter(v=>Rs(v.id)&&!h.has(v.id)).forEach(v=>m.add(v.id)),m.size>0&&await xe.from("order_items").delete().in("id",Array.from(m)),i&&(f.client_nom=(i==null?void 0:i.nom)??null,f.client_telephone=(i==null?void 0:i.telephone)??null,f.client_adresse=(i==null?void 0:i.adresse)??null),Object.keys(f).length>0&&await xe.from("orders").update(f).eq("id",e),zt({includeNotifications:(n==null?void 0:n.includeNotifications)??!0});const g=await Zt(e);if(!g)throw new Error("Order not found after update");return r?{...g,items:iU(r,g.items)}:g},sendOrderToKitchen:async(e,t)=>{const n=await Zt(e);if(!n)throw new Error("Order not found");const r=n.items.filter(f=>f.estado==="en_attente"),i=(()=>{if(!t||t.length===0)return r;const f=new Set(t);return r.filter(h=>f.has(h.id))})();if(i.length===0)return n;const s=i.filter(f=>Rs(f.id)).map(f=>f.id);if(s.length===0)return n;const l=new Date().toISOString();await xe.from("order_items").update({estado:"enviado",date_envoi:l}).in("id",s),await xe.from("orders").update({estado_cocina:"recibido",date_envoi_cuisine:l}).eq("id",e),n.table_id&&await xe.from("restaurant_tables").update({statut:"en_cuisine"}).eq("id",n.table_id),zt();const d=await Zt(e);if(!d)throw new Error("Order not found after sending to kitchen");return d},markOrderAsReady:async e=>{const t=new Date().toISOString();await xe.from("orders").update({estado_cocina:"listo",date_listo_cuisine:t}).eq("id",e);const n=await Zt(e);n!=null&&n.table_id&&await xe.from("restaurant_tables").update({statut:"para_entregar"}).eq("id",n.table_id),zt();const r=await Zt(e);if(!r)throw new Error("Order not found after ready update");return r},markOrderAsServed:async e=>{const t=await Zt(e);if(!t)throw new Error("Order not found");const n=new Date().toISOString();await xe.from("orders").update({estado_cocina:"servido",date_servido:n}).eq("id",e),t.table_id&&await xe.from("restaurant_tables").update({statut:"para_pagar"}).eq("id",t.table_id),zt();const r=await Zt(e);if(!r)throw new Error("Order not found after serve update");return r},finalizeOrder:async(e,t,n)=>{const r=await Zt(e);if(!r)throw new Error("Order not found");const i=new Date().toISOString();await xe.from("orders").update({statut:"finalisee",payment_status:"paid",payment_method:t,payment_receipt_url:n??null,date_servido:i,total:r.total,subtotal:r.subtotal,total_discount:r.total_discount,promo_code:r.promo_code,applied_promotions:r.applied_promotions?JSON.stringify(r.applied_promotions):null}).eq("id",e),r.table_id&&await xe.from("restaurant_tables").update({statut:"libre",commande_id:null,couverts:null}).eq("id",r.table_id),zt();const s=await Zt(e);if(!s)throw new Error("Order not found after finalization");const l=await I2(s);return{...s,profit:l}},submitCustomerOrder:async e=>{var l,d,f;const n=new Date().toISOString(),r=await xe.from("orders").insert({type:"a_emporter",couverts:1,statut:"pendiente_validacion",estado_cocina:"no_enviado",date_creation:n,payment_status:"unpaid",total:e.total??e.items.reduce((h,m)=>h+m.prix_unitaire*m.quantite,0),client_nom:((l=e.clientInfo)==null?void 0:l.nom)??null,client_telephone:((d=e.clientInfo)==null?void 0:d.telephone)??null,client_adresse:((f=e.clientInfo)==null?void 0:f.adresse)??null,receipt_url:e.receipt_url??null,subtotal:e.subtotal??null,total_discount:e.total_discount??null,promo_code:e.promo_code??null,applied_promotions:e.applied_promotions?JSON.stringify(e.applied_promotions):null}).select("*").single(),i=Ye(r);if(e.items.length>0){const h=e.items.map(g=>{const v=g.produitRef&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(g.produitRef);return{order_id:i.id,produit_id:v?g.produitRef:null,nom_produit:g.nom_produit,prix_unitaire:g.prix_unitaire,quantite:g.quantite,excluded_ingredients:g.excluded_ingredients??[],commentaire:g.commentaire,estado:g.estado??"en_attente",date_envoi:g.date_envoi?new Date(g.date_envoi).toISOString():null}}),m=await xe.from("order_items").insert(h);if(m.error)throw console.error("Error inserting order items:",m.error),new Error(`Failed to insert order items: ${m.error.message}`)}zt();const s=await Zt(i.id);if(!s)throw new Error("Order not found after creation");return s},getCustomerOrderStatus:async e=>Zt(e),validateTakeawayOrder:async e=>{const t=new Date().toISOString(),n=await xe.from("orders").update({statut:"en_cours",estado_cocina:"recibido",payment_status:"paid",payment_method:"tarjeta",date_envoi_cuisine:t}).eq("id",e);if(n.error)throw console.error("Failed to update takeaway order status",n.error),new Error(`Failed to update takeaway order status: ${n.error.message}`);const r=await xe.from("order_items").update({estado:"enviado",date_envoi:t}).eq("order_id",e);if(r.error)throw console.error("Failed to mark takeaway order items as sent",r.error),new Error(`Failed to mark takeaway order items as sent: ${r.error.message}`);zt();const i=await Zt(e);if(!i)throw new Error("Order not found after validation");return i},markTakeawayAsDelivered:async e=>{await xe.from("orders").update({statut:"finalisee",estado_cocina:"entregada",payment_method:"transferencia"}).eq("id",e),zt();const t=await Zt(e);if(!t)throw new Error("Order not found after delivery");const n=await I2(t);return{...t,profit:n}},getNotificationCounts:async()=>{const e=await Ki(),n=Ye(e).map(Fa),r=i=>i.type==="a_emporter"||i.type==="pedir_en_linea";return{pendingTakeaway:n.filter(i=>r(i)&&i.statut==="pendiente_validacion"&&i.estado_cocina==="no_enviado").length,readyTakeaway:n.filter(i=>r(i)&&i.estado_cocina==="listo").length,kitchenOrders:n.filter(i=>i.estado_cocina==="recibido").length,lowStockIngredients:(await yl()).filter(i=>i.stock_actuel<=i.stock_minimum).length,readyForService:n.filter(i=>i.type==="sur_place"&&i.estado_cocina==="listo").length}},generateDailyReport:async()=>{const e=new Date,t=mu(e),n=t.toISOString();j2(n);const[r,i,s,l]=await Promise.all([Ki().eq("statut","finalisee"),ah(),yl(),Ks(L=>L)]);let d=[],f=!1;try{d=await _2(n)}catch(L){console.warn("Failed to fetch role logins for daily report",L),f=!0}const m=Ye(r).map(Fa),g=t.getTime(),v=e.getTime(),x=m.filter(L=>{const V=L.date_servido??L.date_listo_cuisine??L.date_creation;return V>=g&&V<=v}),j=new Map,_=L=>{const V=j.get(L.id);if(V)return V;const H=v0(L);return j.set(L.id,H),H},S=x.reduce((L,V)=>L+(V.type==="sur_place"?Math.max(V.couverts??0,0):0),0),N=x.filter(L=>L.type==="pedir_en_linea").length,E=S+N;let C=0,k=0;const A=new Map(s.map(L=>[L.id,L])),R=Ye(l),D=new Map(R.map(L=>{const V=Hi(L,A);return[V.id,V]})),$=new Map(i.map(L=>[L.id,L.nom])),G=new Map;x.forEach(L=>{const V=_(L);C+=V.totalRevenue,k+=V.totalDiscount,L.items.forEach((H,se)=>{const M=D.get(H.produitRef),z=M?$.get(M.categoria_id)??"Sans catégorie":"Sans catégorie",q=M?M.categoria_id:"unknown",J=G.get(q)??{categoryName:z,products:[]},X=J.products.find(I=>I.id===H.produitRef),T=V.netPerItem[se]??H.prix_unitaire*H.quantite;X?(X.quantity+=H.quantite,X.totalSales+=T):J.products.push({id:H.produitRef,name:H.nom_produit,quantity:H.quantite,totalSales:T}),G.set(q,J)})}),G.forEach(L=>{L.products.sort((V,H)=>H.quantity-V.quantity)});const K=s.filter(L=>L.stock_actuel<=L.stock_minimum),B=x.length>0?C/x.length:0;return{generatedAt:e.toISOString(),startDate:t.toISOString(),clientsDuJour:E,clientsSurPlace:S,clientsEnLigne:N,panierMoyen:B,ventesDuJour:C,totalPromotionsApplied:k,soldProducts:Array.from(G.values()),lowStockIngredients:K,roleLogins:d,roleLoginsUnavailable:f}},getSalesHistory:async()=>{const e=await xe.from("sales").select("*").order("sale_date",{ascending:!1});return Ye(e).map(sU)},getFinalizedOrders:async()=>{const e=await Ki().eq("statut","finalisee");return Ye(e).map(Fa)},createOrder:async e=>{var m,g,v;const t=uU(e.order_type??e.type),n=dU(e.status??e.statut),r=fU(e.payment_status),i=hU(e.payment_method),s={type:t,statut:n,estado_cocina:"no_enviado",payment_status:r,date_creation:new Date().toISOString(),total:e.total??0,subtotal:e.subtotal??0,total_discount:e.total_discount??0,promo_code:e.promo_code||null,applied_promotions:e.applied_promotions?JSON.stringify(e.applied_promotions):null,payment_method:i,payment_receipt_url:e.receipt_url||null,receipt_url:e.receipt_url||null,client_nom:e.client_name||((m=e.clientInfo)==null?void 0:m.nom)||null,client_telephone:e.client_phone||((g=e.clientInfo)==null?void 0:g.telephone)||null,client_adresse:e.client_address||((v=e.clientInfo)==null?void 0:v.adresse)||null},l=await xe.from("orders").insert(s).select(`
        id,
        type,
        table_id,
        table_nom,
        couverts,
        statut,
        estado_cocina,
        date_creation,
        date_envoi_cuisine,
        date_listo_cuisine,
        date_servido,
        payment_status,
        total,
        profit,
        payment_method,
        payment_receipt_url,
        client_nom,
        client_telephone,
        client_adresse,
        receipt_url,
        subtotal,
        total_discount,
        promo_code,
        applied_promotions
      `).single(),d=Ye(l),f=[];if(e.items&&e.items.length>0){const x=e.items.map(S=>({order_id:d.id,produit_id:S.produitRef,nom_produit:S.nom_produit,prix_unitaire:S.prix_unitaire,quantite:S.quantite,excluded_ingredients:S.excluded_ingredients||[],commentaire:S.commentaire||null,estado:"en_attente"})),j=await xe.from("order_items").insert(x).select("*"),_=Ye(j);f.push(..._.map(EA))}const h={id:d.id,type:d.type,table_id:d.table_id??void 0,table_nom:d.table_nom??void 0,couverts:d.couverts??0,statut:d.statut,estado_cocina:d.estado_cocina,date_creation:Ir(d.date_creation)??Date.now(),date_envoi_cuisine:Ir(d.date_envoi_cuisine),date_listo_cuisine:Ir(d.date_listo_cuisine),date_servido:Ir(d.date_servido),payment_status:d.payment_status,items:f,total:Xr(d.total)??0,profit:Xr(d.profit),payment_method:d.payment_method??void 0,payment_receipt_url:d.payment_receipt_url??void 0,receipt_url:d.receipt_url??void 0,subtotal:Xr(d.subtotal),total_discount:Xr(d.total_discount),promo_code:d.promo_code??void 0,applied_promotions:d.applied_promotions?typeof d.applied_promotions=="string"?JSON.parse(d.applied_promotions):d.applied_promotions:void 0};return(d.client_nom||d.client_telephone||d.client_adresse)&&(h.clientInfo={nom:d.client_nom??"",telephone:d.client_telephone??"",adresse:d.client_adresse??void 0}),zt({includeNotifications:!0}),h},logins:{fetchSince:_2,clearBefore:j2,log:w2}};let Ef=null;const Uu=()=>{const[e,t]=b.useState(Ef),[n,r]=b.useState(!0),[i,s]=b.useState(null),l=b.useCallback(async()=>{r(!0);try{const f=await Se.getSiteContent(),h=p0(f??void 0);Ef=h,t(h),s(null)}catch(f){console.error("Failed to fetch site content",f),Ef=no,t(no),s(f instanceof Error?f.message:"Impossible de charger le contenu du site.")}finally{r(!1)}},[]),d=b.useCallback(async f=>{const h=await Se.updateSiteContent(f),m=p0(h);return t(m),Ef=m,m},[]);return b.useEffect(()=>{l()},[l]),{content:e,loading:n,error:i,refresh:l,updateContent:d}},OA=b.createContext(void 0),vU=({children:e})=>{const[t,n]=b.useState(null),[r,i]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("oui-oui-tacos-role"),m=localStorage.getItem("oui-oui-tacos-session");if(!h||!m){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session");return}const g=JSON.parse(h),v=JSON.parse(m);if(!(g!=null&&g.id)||v.roleId!==g.id){localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null);return}const x=await Se.getRoleById(g.id);x?(n(x),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(x)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:x.id,authenticatedAt:Date.now()}))):(localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null))}catch(h){console.error("Failed to restore role:",h),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session"),n(null)}finally{i(!1)}})()},[]);const s=b.useCallback(async f=>{i(!0);try{const h=await Se.loginWithPin(f);if(!h)throw new Error("PIN invalide");return n(h),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(h)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:h.id,authenticatedAt:Date.now()})),h}finally{i(!1)}},[]),l=b.useCallback(()=>{n(null),localStorage.removeItem("oui-oui-tacos-role"),localStorage.removeItem("oui-oui-tacos-session")},[]),d=b.useCallback(async()=>{if(t!=null&&t.id)try{const f=await Se.getRoleById(t.id);f?(n(f),localStorage.setItem("oui-oui-tacos-role",JSON.stringify(f)),localStorage.setItem("oui-oui-tacos-session",JSON.stringify({roleId:f.id,authenticatedAt:Date.now()}))):l()}catch(f){console.error("Failed to refresh role:",f)}},[l,t==null?void 0:t.id]);return c.jsx(OA.Provider,{value:{role:t,loading:r,login:s,logout:l,refreshRole:d},children:e})},_a=()=>{const e=b.useContext(OA);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},vh=e=>e==="editor"||e==="readonly",Lb=e=>{if(!e)return null;const{homePage:t,permissions:n}=e;if(t&&vh(n==null?void 0:n[t]))return t;const r=Qn.find(i=>vh(n==null?void 0:n[i.permissionKey]));return r?r.href:null},yU=["a[href]","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),bU=({isOpen:e,onClose:t,notifications:n,onReportClick:r})=>{const{role:i,logout:s}=_a(),l=wa(),d=b.useRef(null),f=b.useRef(null),h=()=>{s(),l("/")},m=i==null?void 0:i.permissions,g=b.useMemo(()=>Qn.filter(_=>{const S=m==null?void 0:m[_.permissionKey];return vh(S)}),[m]),v=b.useMemo(()=>g.find(_=>_.permissionKey===ni),[g]),x=b.useMemo(()=>g.filter(_=>_.permissionKey!==ni),[g]);b.useEffect(()=>{var C;if(!e||typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches)return;f.current=document.activeElement;const S=d.current,N=S==null?void 0:S.querySelectorAll(yU);(C=N==null?void 0:N[0])==null||C.focus();const E=k=>{if(k.key==="Escape"&&(k.preventDefault(),t()),k.key==="Tab"&&N&&N.length>0){const A=N[0],R=N[N.length-1];k.shiftKey?document.activeElement===A&&(k.preventDefault(),R.focus()):document.activeElement===R&&(k.preventDefault(),A.focus())}};return document.addEventListener("keydown",E),()=>{var k,A;document.removeEventListener("keydown",E),(A=(k=f.current)==null?void 0:k.focus)==null||A.call(k)}},[e,t]);const j=()=>{typeof window<"u"&&window.matchMedia("(min-width: 768px)").matches||t()};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 md:hidden ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!e,onClick:t}),c.jsxs("aside",{ref:d,className:`app-sidebar fixed inset-y-0 left-0 z-50 flex w-72 flex-col transition-transform duration-300 ease-in-out md:static md:z-auto md:w-64 md:translate-x-0 ${e?"translate-x-0":"-translate-x-full md:translate-x-0"}`,"aria-label":"Navegación principal",children:[c.jsxs("div",{className:"app-sidebar__header",children:[c.jsx("span",{className:"app-sidebar__brand",children:"OUIOUI"}),c.jsx("button",{onClick:t,className:"app-sidebar__close md:hidden","aria-label":"Cerrar el menú",children:c.jsx(Xa,{size:20})})]}),c.jsxs("div",{className:"app-sidebar__content",children:[c.jsx("div",{className:"app-sidebar__scroll-region",children:c.jsx("nav",{className:"app-sidebar__nav",children:x.map(_=>{let S=null;return n&&(_.href==="/para-llevar"&&(n.pendingTakeaway>0||n.readyTakeaway>0)?S=c.jsxs("span",{className:"app-sidebar__badge-group",children:[n.pendingTakeaway>0&&c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${n.pendingTakeaway} por validar`,children:n.pendingTakeaway}),n.readyTakeaway>0&&c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--success",title:`${n.readyTakeaway} listo(s)`,children:n.readyTakeaway})]}):_.href==="/ventes"&&n.readyForService>0?S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",title:`${n.readyForService} pedido(s) listo(s)`,children:n.readyForService})}):_.href==="/cocina"&&n.kitchenOrders>0?S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:n.kitchenOrders})}):_.href==="/ingredients"&&n.lowStockIngredients>0&&(S=c.jsx("span",{className:"app-sidebar__badge-group",children:c.jsx("span",{className:"app-sidebar__badge app-sidebar__badge--danger",children:n.lowStockIngredients})}))),c.jsxs(Jy,{to:_.href,onClick:j,className:({isActive:N})=>`app-sidebar__nav-link${N?" is-active":""}`,children:[c.jsx(_.icon,{size:22}),c.jsx("span",{children:_.name}),S]},_.name)})})}),c.jsxs("div",{className:"app-sidebar__section",children:[v&&c.jsxs(Jy,{to:v.href,onClick:j,className:({isActive:_})=>`app-sidebar__action${_?" is-active":""}`,children:[c.jsx(v.icon,{size:22}),c.jsx("span",{className:"font-semibold",children:v.name})]}),c.jsxs("button",{onClick:()=>{r(),j()},className:"app-sidebar__action",children:[c.jsx(eA,{size:22}),c.jsx("span",{className:"font-semibold",children:"Reporte"})]}),c.jsxs("button",{onClick:h,className:"app-sidebar__action app-sidebar__action--logout",children:[c.jsx(g8,{size:22}),c.jsx("span",{className:"font-semibold",children:"Cerrar sesión"})]})]})]})]})]})},vn=16,an=({isOpen:e,onClose:t,title:n,children:r,size:i="md",anchor:s=null,boundary:l=null})=>{const d={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"},f=b.useId(),h=b.useRef(null),[m,g]=b.useState(null);if(b.useLayoutEffect(()=>{if(!e){g(null);return}const D=()=>{if(!h.current)return;const K=h.current.getBoundingClientRect(),{innerWidth:B,innerHeight:L}=window,V=l?{top:Math.max(l.top+vn,vn),left:Math.max(l.left+vn,vn),right:Math.min(l.right-vn,B-vn),bottom:Math.min(l.bottom-vn,L-vn)}:{top:vn,left:vn,right:B-vn,bottom:L-vn},H=Math.max(V.right-V.left,0),se=Math.max(V.bottom-V.top,0),M=B/2,z=L/2;let q=M-K.width/2;K.width>H?q=V.left:q=Math.max(V.left,Math.min(q,V.right-K.width));let J=z-K.height/2;K.height>se?J=V.top:J=Math.max(V.top,Math.min(J,V.bottom-K.height)),g({top:J,left:q})};let $=window.requestAnimationFrame(D);const G=()=>{window.cancelAnimationFrame($),$=window.requestAnimationFrame(D)};return window.addEventListener("resize",G),window.addEventListener("scroll",G,!0),()=>{window.cancelAnimationFrame($),window.removeEventListener("resize",G),window.removeEventListener("scroll",G,!0)}},[s,l,e]),b.useEffect(()=>{if(!e)return;const D=$=>{$.key==="Escape"&&($.preventDefault(),t())};return window.addEventListener("keydown",D),()=>{window.removeEventListener("keydown",D)}},[e,t]),!e)return null;const v=typeof window<"u"?window.innerWidth:null,x=typeof window<"u"?window.innerHeight:null,j=v!==null?Math.max(v-vn*2,200):null,_=x!==null?Math.max(x-vn*2,200):null,S=l!==null?Math.max(l.width-vn*2,200):null,N=l!==null?Math.max(l.height-vn*2,200):null,E=S!==null&&j!==null?Math.min(S,j):S??j,C=N!==null&&_!==null?Math.min(N,_):N??_,k=l&&typeof E=="number"?Math.min(Math.max(l.width*.6,320),E):l?Math.max(l.width*.6,320):null,A={position:"fixed",maxHeight:typeof C=="number"?`${Math.max(C,200)}px`:`calc(100vh - ${vn*2}px)`};k!==null?(A.width=`${k}px`,A.maxWidth=`${k}px`):A.maxWidth=typeof E=="number"?`${Math.max(E,260)}px`:`calc(100vw - ${vn*2}px)`;const R=m?{top:m.top,left:m.left}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return c.jsxs("div",{className:"fixed inset-0 z-50",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),c.jsxs("div",{ref:h,role:"dialog","aria-modal":"true","aria-labelledby":f,className:`fixed flex w-full flex-col overflow-hidden rounded-2xl bg-white shadow-2xl ${s&&l?"max-w-none":d[i]} sm:max-h-[90vh] focus:outline-none`,style:{...A,...R},onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 bg-white/80 px-4 py-3 sm:px-6",children:[c.jsx("h3",{id:f,className:"text-[clamp(1.05rem,2.2vw,1.4rem)] font-semibold leading-snug text-slate-900 break-words text-balance whitespace-normal [hyphens:auto]",children:n}),c.jsx("button",{type:"button",onClick:t,className:"rounded-full p-1.5 text-slate-500 transition-colors hover:bg-slate-100 hover:text-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500","aria-label":"Fermer la fenêtre modale",children:c.jsx(Xa,{size:20})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-5 sm:px-6 sm:py-6",children:r})]})]})},xU=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),wU=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});function CA(e){return Number.isFinite(e)?Math.round(e):0}function au(e){return xU.format(CA(e))}function ve(e){return wU.format(CA(e))}const hv=({icon:e,label:t,value:n})=>c.jsxs("div",{className:"flex flex-col items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 p-4 shadow-sm sm:flex-row sm:items-center",children:[c.jsx("div",{className:"rounded-full bg-brand-primary/20 p-2 text-brand-primary sm:p-3",children:e}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 sm:text-sm",children:t}),c.jsx("div",{className:"text-[clamp(1.1rem,2.5vw,1.6rem)] font-bold text-slate-800",children:n})]})]}),_U=({isOpen:e,onClose:t})=>{const[n,r]=b.useState(null),[i,s]=b.useState(!0),[l,d]=b.useState(null);b.useEffect(()=>{e&&(async()=>{s(!0),d(null);try{const x=await Se.generateDailyReport();r(x)}catch(x){console.error("Error al generar el informe diario",x),r(null),d("No fue posible generar el informe diario. Intenta nuevamente más tarde.")}finally{s(!1)}})()},[e]);const f=v=>{const x=new Map;return v.forEach(j=>{const _=new Date(j.loginAt).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"}),S=x.get(j.roleName)??[];S.push(_),x.set(j.roleName,S)}),x},h=v=>{const x=[];x.push("*REPORTE OUIOUITACOS*"),x.push(`Generado el: ${new Date(v.generatedAt).toLocaleString("es-CO")}`),x.push(`Periodo: desde ${new Date(v.startDate).toLocaleString("es-CO")}`),x.push("---"),x.push("*Estadísticas del día*");const j=v.ventesDuJour+(v.totalPromotionsApplied??0);if(x.push(`- Ventas: *${ve(v.ventesDuJour)}*`),x.push(`- Total facturado: *${ve(j)}*`),x.push(`- Clientes: *${v.clientsDuJour}* (Sala: ${v.clientsSurPlace??0} | En línea: ${v.clientsEnLigne??0})`),x.push(`- Ticket promedio: *${ve(v.panierMoyen)}*`),x.push(`- Total promociones aplicadas: *${ve(v.totalPromotionsApplied??0)}*`),x.push("---"),x.push("*Productos vendidos*"),v.soldProducts.length===0?x.push("Ningún producto vendido."):v.soldProducts.forEach(_=>{x.push(`
_${_.categoryName}_`),_.products.forEach(S=>{x.push(`  - ${S.quantity}x ${S.name} (${ve(S.totalSales)})`)})}),x.push("---"),x.push("*Inicios de sesión desde las 05:00*"),v.roleLoginsUnavailable)x.push("Inicios de sesión no disponibles en este dispositivo.");else{const _=f(v.roleLogins);_.size===0?x.push("No hay inicios de sesión registrados."):_.forEach((S,N)=>{x.push(`- ${N}: ${S.join(", ")}`)})}return x.push("---"),x.push("*Inventario bajo*"),v.lowStockIngredients.length===0?x.push("No hay ingredientes con inventario bajo."):v.lowStockIngredients.forEach(_=>{x.push(`- ${_.nom} (${_.stock_actuel} / ${_.stock_minimum} ${_.unite})`)}),encodeURIComponent(x.join(`
`))},m=()=>{if(!n)return;const x=`https://wa.me/?text=${h(n)}`;window.open(x,"_blank"),t()},g=n?n.ventesDuJour+(n.totalPromotionsApplied??0):0;return c.jsx(an,{isOpen:e,onClose:t,title:"Reporte diario",size:"xl",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i&&c.jsx("p",{children:"Generando el reporte..."}),!i&&l&&c.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:l}),!i&&!n&&!l&&c.jsx("p",{className:"text-red-500",children:"No fue posible generar el reporte."}),!i&&n&&c.jsxs("div",{className:"space-y-6",children:[n.roleLoginsUnavailable&&c.jsxs("div",{className:"rounded-md border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-start gap-2",children:[c.jsx(ta,{className:"mt-0.5 h-4 w-4"}),c.jsx("span",{children:"Los inicios de sesión de los roles no están disponibles en este dispositivo (almacenamiento local inaccesible)."})]}),c.jsxs("div",{className:"text-center border-b pb-4",children:[c.jsx("h2",{className:"font-bold text-brand-secondary text-[clamp(1.75rem,4vw,2.75rem)]",children:"Reporte OUIOUITACOS"}),c.jsxs("p",{className:"text-gray-500",children:["Generado el ",new Date(n.generatedAt).toLocaleString("es-CO")]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Datos desde ",new Date(n.startDate).toLocaleString("es-CO")]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsx(hv,{icon:c.jsx(im,{}),label:"Ventas del día",value:ve(n.ventesDuJour)}),c.jsx(hv,{icon:c.jsx(m0,{}),label:"Clientes del día",value:c.jsxs(c.Fragment,{children:[n.clientsDuJour,c.jsxs("span",{className:"mt-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Salle : ",n.clientsSurPlace??0," • En ligne : ",n.clientsEnLigne??0]})]})}),c.jsx(hv,{icon:c.jsx(iA,{}),label:"Ticket promedio",value:ve(n.panierMoyen)})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(Ji,{})," Productos vendidos"]}),c.jsxs("div",{className:"space-y-4",children:[n.soldProducts.map(v=>c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-brand-primary",children:v.categoryName}),c.jsx("ul",{className:"list-disc list-inside pl-2 text-gray-700",children:v.products.map(x=>c.jsxs("li",{children:[x.quantity,"x ",x.name," - ",c.jsx("span",{className:"font-semibold",children:ve(x.totalSales)})]},x.id))})]},v.categoryName)),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-4 py-3 text-slate-700 shadow-sm",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Total facturado"}),c.jsx("p",{className:"mt-1 text-2xl font-bold",children:ve(g)})]}),c.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-700 shadow-sm",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Promotions appliquées"}),c.jsx("p",{className:"mt-1 text-2xl font-bold",children:ve(n.totalPromotionsApplied??0)})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(m8,{})," Inicios de sesión desde las 05:00"]}),n.roleLoginsUnavailable?c.jsx("p",{className:"text-gray-500",children:"Inicios de sesión no disponibles: no es posible acceder al almacenamiento local."}):(()=>{const v=f(n.roleLogins);return v.size===0?c.jsx("p",{className:"text-gray-500",children:"No hay inicios de sesión registrados desde las 05:00."}):c.jsx("ul",{className:"space-y-2",children:Array.from(v.entries()).map(([x,j])=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-100 p-2 rounded-md",children:[c.jsx("span",{className:"font-semibold text-gray-800",children:x}),c.jsx("span",{className:"text-sm text-gray-600",children:j.join(", ")})]},x))})})()]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800",children:[c.jsx(ta,{className:"text-orange-500"})," Ingredientes con inventario bajo"]}),n.lowStockIngredients.length>0?c.jsx("ul",{className:"space-y-1",children:n.lowStockIngredients.map(v=>c.jsxs("li",{className:"flex justify-between items-center bg-orange-50 p-2 rounded-md text-orange-800",children:[c.jsx("span",{children:v.nom}),c.jsxs("span",{className:"font-bold",children:[v.stock_actuel," / ",v.stock_minimum," ",v.unite]})]},v.id))}):c.jsx("p",{className:"text-gray-500",children:"No hay ingredientes con inventario bajo."})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 p-4 border-t",children:[c.jsx("button",{onClick:t,className:"w-full sm:w-auto bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg hover:bg-gray-300 transition",children:"Cerrar"}),c.jsxs("button",{onClick:m,disabled:i||!n,className:"w-full sm:w-auto bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center gap-2 disabled:bg-gray-400",children:[c.jsx(rA,{size:20})," Enviar por WhatsApp"]})]})]})})},jU=()=>{const[e,t]=b.useState(!1),{role:n}=_a(),[r,i]=b.useState(null),[s,l]=b.useState(!1),d=()=>t(!0),f=()=>t(!1);return b.useEffect(()=>{const h=async()=>{try{const g=await Se.getNotificationCounts();i(g)}catch(g){console.error("Failed to fetch notifications",g)}};h();const m=Se.notifications.subscribe("notifications_updated",h);return()=>{m()}},[]),b.useEffect(()=>{if(typeof window>"u")return;const h=()=>{window.innerWidth>=768&&t(!1)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"app-shell",children:[c.jsx(bU,{isOpen:e,onClose:f,notifications:r,onReportClick:()=>l(!0)}),c.jsxs("div",{className:"app-main",children:[c.jsxs("header",{className:"app-header",children:[c.jsx("button",{type:"button",onClick:d,className:"app-header__menu-button md:hidden","aria-label":"Abrir el menú",children:c.jsx(nA,{size:24})}),c.jsxs("h1",{className:"app-header__title",children:["Bienvenido, ",n==null?void 0:n.name]}),c.jsx("div",{className:"app-header__spacer md:hidden","aria-hidden":"true"})]}),c.jsx("main",{className:"app-content",children:c.jsx("div",{className:"app-content__inner",children:c.jsx(F5,{})})})]})]}),c.jsx(_U,{isOpen:s,onClose:()=>l(!1)})]})},SU=e=>{try{const t=localStorage.getItem("customer-order-history"),n=t?JSON.parse(t):[],r=n.findIndex(s=>s.id===e.id);r!==-1&&n.splice(r,1),n.unshift(e);const i=n.slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(i))}catch(t){console.error("Failed to save order to history:",t)}},NU=({orderId:e,onNewOrderClick:t,variant:n="page"})=>{var q,J,X,T,I;const[r,i]=b.useState(null),[s,l]=b.useState(!0),[d,f]=b.useState(!1),h=[{name:"Enviado",icon:eA,description:"Commande transmise et en attente de validation."},{name:"Validado",icon:Fs,description:"La commande est validée par l’équipe."},{name:"En preparacion",icon:Xk,description:"La cuisine prépare activement votre commande."},{name:"Listo",icon:j8,description:"La commande est prête pour la remise ou la livraison."}],m=b.useMemo(()=>[{gradient:"from-brand-primary to-brand-primary-dark",border:"border-brand-primary/40",glow:"shadow-[0_10px_25px_rgba(249,168,38,0.35)]"},{gradient:"from-emerald-500 to-emerald-600",border:"border-emerald-200/70",glow:"shadow-[0_10px_25px_rgba(16,185,129,0.35)]"},{gradient:"from-sky-500 to-indigo-600",border:"border-sky-200/70",glow:"shadow-[0_10px_25px_rgba(56,189,248,0.35)]"},{gradient:"from-rose-500 to-red-600",border:"border-rose-200/70",glow:"shadow-[0_10px_25px_rgba(244,114,182,0.35)]"},{gradient:"from-amber-500 to-orange-600",border:"border-amber-200/70",glow:"shadow-[0_10px_25px_rgba(251,191,36,0.35)]"}],[]),g=b.useCallback(U=>U?U.statut==="finalisee"||U.estado_cocina==="servido"||U.estado_cocina==="entregada"||U.estado_cocina==="listo"?3:U.estado_cocina==="recibido"||U.statut==="en_cours"?2:U.statut==="pendiente_validacion"||U.estado_cocina==="no_enviado"?1:0:-1,[]),v=b.useMemo(()=>g(r),[r,g]),x=b.useRef(null),j=Math.max(h.length-1,1),_=!!(r&&(r.statut==="finalisee"||r.estado_cocina==="servido"||r.estado_cocina==="entregada"||r.estado_cocina==="listo")),S=Math.max(0,v),N=j>0?Math.min(100,(_?j:S)/j*100):100,E=Math.max(0,Math.min(100,N)),C=`${E}-${_?"complete":"active"}`,k=b.useMemo(()=>({"--tracker-progress-target":`${E}%`}),[E]);b.useEffect(()=>{if(n!=="hero")return;const U=x.current;U&&U.style.setProperty("--tracker-progress-target",`${E}%`)},[n,E]),b.useEffect(()=>{let U=!0,te=null,re,ce=!1;const he=async()=>{if(!ce){ce=!0;try{const Ne=await Se.getCustomerOrderStatus(e);if(U){if(i(Ne),(Ne==null?void 0:Ne.statut)==="finalisee"||(Ne==null?void 0:Ne.estado_cocina)==="servido"||(Ne==null?void 0:Ne.estado_cocina)==="entregada"){te&&(clearInterval(te),te=null),SU(Ne);const de=Ne.date_servido??Date.now();yk(Ne.id,de+vk)}if(!Ne){const de=uh();(de==null?void 0:de.orderId)===e&&bk()}}}catch(Ne){console.error("Failed to fetch order status",Ne)}finally{U&&l(Ne=>Ne&&!1),ce=!1}}};return l(!0),i(null),he(),te=setInterval(he,5e3),re=Se.notifications.subscribe("orders_updated",he),()=>{U=!1,te&&clearInterval(te),re&&re()}},[e]);const A=n==="page"?"container mx-auto p-4 lg:p-8":"w-full px-4 pt-0 pb-4 sm:pt-1 sm:pb-5 flex justify-center",R=n==="page"?"bg-white/95 p-6 rounded-xl shadow-2xl max-w-2xl mx-auto":"max-w-4xl mx-auto",D="border-t pt-6 mt-6 space-y-4 relative md:w-1/2 md:mx-auto";if(s)return c.jsx("div",{className:A,children:"Chargement du suivi de commande..."});if(!r)return n==="hero"?null:c.jsx("div",{className:A,children:c.jsxs("div",{className:R,children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Commande non trouvée"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Nous n'avons pas pu retrouver votre commande."}),c.jsx("button",{onClick:t,className:"bg-brand-primary text-brand-secondary font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition",children:"Passer une nouvelle commande"})]})});r.subtotal??r.total;const $=r.total_discount??0,G=(((q=r.applied_promotions)==null?void 0:q.length)??0)>0,K=r.type==="a_emporter",B=((J=r.clientInfo)==null?void 0:J.nom)??r.client_name??"",L=((X=r.clientInfo)==null?void 0:X.telephone)??r.client_phone??"",V=((T=r.clientInfo)==null?void 0:T.adresse)??r.client_address??"",H=!!(B||L||V),se=G?r.applied_promotions.map((U,te)=>{const re=typeof U.config=="object"&&U.config!==null?U.config:void 0,ce=re==null?void 0:re.promo_code,he=U.visuals||null,Ne=(he==null?void 0:he.banner_image)||(he==null?void 0:he.banner_url),de=(he==null?void 0:he.banner_text)||void 0,ge=U.discount_amount||0,ie=m[te%m.length],Q=n==="hero"?"p-1.5 sm:p-2":"p-3 sm:p-4",Ce=n==="hero"?"gap-3":"gap-4",Re=n==="hero"?"relative h-6 w-10 flex-shrink-0 overflow-hidden rounded-xl bg-white/15":"relative h-8 w-14 flex-shrink-0 overflow-hidden rounded-xl bg-white/15",ut=n==="hero"?"flex h-full w-full items-center justify-center px-2 text-center text-[9px] font-semibold leading-tight text-white":"flex h-full w-full items-center justify-center px-2 text-center text-[11px] font-semibold leading-tight text-white",we=n==="hero"?"text-xs font-semibold tracking-wide text-white whitespace-nowrap truncate":"text-sm font-semibold tracking-wide text-white whitespace-nowrap truncate",be=n==="hero"?"text-[9px] font-medium uppercase tracking-wide text-white/85 whitespace-nowrap":"text-[11px] font-medium uppercase tracking-wide text-white/85 whitespace-nowrap",ze=n==="hero"?"block text-xs font-bold text-white":"block text-sm font-bold text-white",Et=n==="hero"?"absolute bottom-1 left-1 right-1 rounded bg-black/60 px-1 py-0.5 text-[9px] font-semibold uppercase tracking-wide":"absolute bottom-1 left-1 right-1 rounded bg-black/60 px-1 py-0.5 text-[10px] font-semibold uppercase tracking-wide";return c.jsxs("div",{className:`promo-banner flex w-full items-center ${Ce} overflow-hidden rounded-2xl border bg-gradient-to-r ${Q} text-white shadow-lg ${ie.gradient} ${ie.border} ${ie.glow}`,"aria-label":`Promotion ${U.name}`,children:[c.jsx("div",{className:Re,children:Ne?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:Ne,alt:de||U.name,className:"h-full w-full object-cover opacity-95"}),de&&c.jsx("div",{className:Et,children:de})]}):c.jsx("div",{className:ut,children:U.name})}),c.jsxs("div",{className:"flex min-w-0 flex-1 flex-col text-left",children:[(!Ne||!de)&&c.jsx("span",{className:we,title:U.name,children:U.name}),ce&&c.jsxs("span",{className:be,children:["Code: ",ce]})]}),c.jsx("div",{className:"text-right whitespace-nowrap",children:c.jsxs("span",{className:ze,children:["-",ve(ge)]})})]},`${U.promotion_id}-${U.name}`)}):null,M=se?c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:`text-sm font-semibold ${n==="hero"?"text-green-300":"text-green-700"}`,children:"Promotions appliquées"}),c.jsx("div",{className:"space-y-3",children:se})]}):null,z=((I=r.items)==null?void 0:I.length)??0;return n==="hero"?c.jsxs("div",{className:A,children:[c.jsxs("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl border border-white/15 bg-gradient-to-br from-slate-900/90 via-slate-900/75 to-slate-900/60 p-6 text-white shadow-2xl backdrop-blur-xl sm:p-8",children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-70",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_65%)]"}),c.jsx("div",{className:"absolute -bottom-32 right-0 h-64 w-64 rounded-full bg-gradient-to-br from-amber-400/30 via-orange-500/20 to-red-500/30 blur-3xl"})]}),c.jsxs("div",{className:"relative flex flex-col gap-6",children:[_&&c.jsx("div",{className:"pointer-events-none absolute -top-6 right-4 sm:right-8",children:c.jsx("div",{className:"relative",style:{transform:"rotate(10deg)"},children:c.jsx("div",{className:"stamp-container scale-75 sm:scale-90",children:c.jsx("div",{className:"stamp-border",children:c.jsxs("div",{className:"stamp-inner",children:[c.jsx("span",{className:"stamp-text",children:"PEDIDO"}),c.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),c.jsx("div",{className:"flex flex-col items-center gap-2 text-center",children:c.jsxs("h2",{className:"text-3xl font-bold text-center text-white sm:text-4xl",children:["Commande #",r.id.slice(-6)]})}),c.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:h.map((U,te)=>{const re=te===v,ce=te===h.length-1,he=te<v||ce&&_,Ne=`tracker-step-card rounded-2xl border p-3 sm:p-4 transition-all ${he?"bg-gradient-to-br from-emerald-400/80 to-emerald-600/80 border-white/35 text-white shadow-lg shadow-emerald-500/25":re?"bg-gradient-to-br from-amber-400/95 via-orange-500/90 to-red-500/95 border-white/30 text-white shadow-xl shadow-orange-500/25 tracker-step-active":"bg-white/10 border-white/10 text-white/70 backdrop-blur-sm hover:bg-white/15 hover:border-white/20"} ${re?"scale-[1.02]":""}`,de=`tracker-step-icon-wrapper relative flex h-16 w-16 sm:h-20 sm:w-20 items-center justify-center rounded-2xl bg-black/25 ${he||re?"text-white":"text-white/70"}`;return c.jsx("div",{className:Ne,"aria-current":re?"step":void 0,children:c.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[c.jsx("p",{className:`text-xs sm:text-sm font-semibold tracking-wide ${he||re?"text-white":"text-white/70"}`,children:U.name}),c.jsxs("div",{className:de,children:[c.jsx(U.icon,{className:"tracker-step-icon h-10 w-10 sm:h-12 sm:w-12"}),he&&c.jsx(Fs,{className:"absolute -top-2 -right-2 h-5 w-5 sm:h-6 sm:w-6 text-white drop-shadow"})]}),c.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${he||re?"text-white/80":"text-white/60"}`,children:U.description})]})},U.name)})}),c.jsx("style",{children:`
                            .tracker-step-card {
                                position: relative;
                                overflow: hidden;
                                border-radius: 1.25rem;
                            }

                            .tracker-step-card::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                border-radius: inherit;
                                border: 1px solid rgba(255, 255, 255, 0.18);
                                opacity: 0.35;
                                pointer-events: none;
                            }

                            .tracker-step-active {
                                animation: tracker-step-blink 1.6s ease-in-out infinite;
                            }

                            .tracker-step-active::after {
                                border-color: rgba(255, 255, 255, 0.45);
                                opacity: 0.75;
                            }

                            .tracker-step-icon {
                                transition: transform 0.4s ease;
                            }

                            .tracker-step-active .tracker-step-icon {
                                animation: tracker-step-icon-pulse 1.6s ease-in-out infinite;
                            }

                            @keyframes tracker-step-blink {
                                0%,
                                100% {
                                    transform: translateY(0);
                                    box-shadow: 0 18px 36px rgba(234, 179, 8, 0.35);
                                }
                                50% {
                                    transform: translateY(-2px);
                                    box-shadow: 0 22px 40px rgba(251, 191, 36, 0.45);
                                }
                            }

                            @keyframes tracker-step-icon-pulse {
                                0%,
                                100% {
                                    transform: scale(1);
                                }
                                50% {
                                    transform: scale(1.15);
                                }
                            }

                            .tracker-progress-container {
                                position: relative;
                                height: 10px;
                                border-radius: 9999px;
                                overflow: hidden;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.18));
                                box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.35);
                                margin-top: 0.25rem;
                            }

                            .tracker-progress-fill {
                                position: absolute;
                                inset: 0;
                                width: 0;
                                display: flex;
                                align-items: center;
                                justify-content: flex-end;
                                border-radius: inherit;
                                background: linear-gradient(90deg, rgba(249, 168, 38, 0.8), rgba(239, 68, 68, 0.95));
                                animation: tracker-progress-advance 1.2s ease forwards;
                                animation-delay: 0.05s;
                            }

                            .tracker-progress-fill-complete {
                                background: linear-gradient(90deg, rgba(34, 197, 94, 0.85), rgba(56, 189, 248, 0.9));
                            }

                            .tracker-progress-fill-hero {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                                animation-delay: 0s;
                            }

                            .tracker-progress-fill-hero.tracker-progress-fill-complete {
                                animation: tracker-progress-loop 3s ease-in-out infinite;
                            }

                            .tracker-progress-fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), transparent 55%);
                                mix-blend-mode: screen;
                            }

                            .tracker-progress-glow {
                                position: absolute;
                                right: -14px;
                                top: 50%;
                                width: 28px;
                                height: 28px;
                                transform: translateY(-50%);
                                background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                                pointer-events: none;
                            }

                            @keyframes tracker-progress-advance {
                                0% {
                                    width: 0;
                                }
                                100% {
                                    width: var(--tracker-progress-target);
                                }
                            }

                            @keyframes tracker-progress-loop {
                                0% {
                                    width: 0;
                                }
                                60% {
                                    width: var(--tracker-progress-target);
                                }
                                75% {
                                    width: var(--tracker-progress-target);
                                }
                                100% {
                                    width: 0;
                                }
                            }
                        `}),c.jsx("div",{className:"tracker-progress-container tracker-progress-hero",children:c.jsx("div",{className:`tracker-progress-fill tracker-progress-fill-hero ${_?"tracker-progress-fill-complete":""}`,ref:x,style:k,children:c.jsx("span",{className:"tracker-progress-glow"})},`hero-progress-${C}`)}),c.jsxs("div",{className:"rounded-2xl bg-black/25 p-4 sm:p-5",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Informations"}),c.jsxs("div",{className:"mt-3 flex flex-col gap-4 text-sm sm:flex-row sm:items-start sm:justify-between",children:[c.jsx("div",{className:"space-y-2",children:H?c.jsxs(c.Fragment,{children:[B&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(fu,{size:16}),c.jsx("span",{className:"truncate",title:B,children:B})]}),L&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(eh,{size:16}),c.jsx("span",{className:"truncate",title:L,children:L})]}),V&&c.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[c.jsx(wl,{size:16}),c.jsx("span",{className:"truncate",title:V,children:V})]})]}):c.jsx("p",{className:"text-white/70",children:"Aucune information client requise."})}),c.jsx("div",{className:"flex flex-col items-start gap-3 text-sm sm:min-w-[12rem] sm:items-end sm:text-right",children:r.receipt_url&&c.jsxs("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:[c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-white/70",children:"Comprobante de pago"}),c.jsx("button",{type:"button",onClick:()=>f(!0),className:"group relative inline-flex focus:outline-none","aria-label":"Ouvrir le justificatif de paiement",children:c.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-white/20 bg-black/40 shadow-lg",children:[c.jsx("img",{src:r.receipt_url,alt:"Aperçu du justificatif",className:"h-20 w-28 object-cover transition duration-500 ease-out group-hover:scale-105 sm:h-24 sm:w-32"}),c.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition duration-300 group-hover:opacity-100",children:c.jsx(th,{size:20,className:"text-white"})})]})})]})})]})]}),c.jsxs("div",{className:"rounded-2xl bg-black/20 p-4 sm:p-5",children:[c.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-xs font-semibold uppercase tracking-wide text-white/60",children:[c.jsx("span",{children:"Résumé"}),c.jsxs("span",{children:["Articles : ",z]})]}),c.jsx("div",{className:"mt-4 space-y-3 pr-1 text-sm",children:r.items&&r.items.length>0?r.items.map(U=>{const re=U.nom_produit==="Domicilio"&&U.prix_unitaire===0,ce=(()=>{const he=U.description;return typeof he=="string"&&he.trim().length>0?he.trim():null})();return c.jsx("div",{className:"rounded-xl border border-white/10 bg-black/25 p-4 sm:p-5",children:c.jsx("div",{className:"flex flex-col gap-4",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-4",children:[c.jsx("span",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-white/10 text-xl font-semibold text-white shadow-inner shadow-black/40 sm:h-14 sm:w-14 sm:text-2xl",children:U.quantite}),c.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[c.jsx("p",{className:"text-lg font-semibold leading-tight text-white sm:text-xl",children:U.nom_produit}),ce&&c.jsx("p",{className:"text-sm text-white/70",children:ce}),U.commentaire&&c.jsxs("p",{className:"text-sm italic text-amber-200/80",children:["“",U.commentaire,"”"]})]})]}),c.jsx("div",{className:"flex items-center rounded-full bg-white/10 px-4 py-2 text-base font-semibold text-white shadow-inner shadow-black/30",children:re?c.jsx("span",{className:"text-emerald-200",children:"GRATUIT"}):ve(U.prix_unitaire*U.quantite)})]})})},U.id)}):c.jsx("p",{className:"text-white/70",children:"Aucun article enregistré pour cette commande."})}),se?c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/60",children:"Promotions appliquées"}),c.jsx("div",{className:"space-y-3",children:se})]}):null,$>0&&c.jsxs("div",{className:"mt-5 flex items-center justify-between rounded-xl border border-emerald-300/30 bg-emerald-500/15 px-3 py-2 text-sm font-semibold text-emerald-100",children:[c.jsx("span",{children:"Réductions totales"}),c.jsxs("span",{children:["- ",ve($)]})]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-white/15 pt-3 text-base font-semibold text-white",children:[c.jsx("span",{children:"Total de la commande"}),c.jsx("span",{children:ve(r.total)})]})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[_?c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-4 py-2 text-sm font-semibold text-emerald-200",children:[c.jsx(Fs,{size:16})," Commande prête"]}):c.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-white/60",children:"Nous préparons votre commande"}),c.jsx("button",{onClick:_?t:void 0,disabled:!_,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${_?"bg-white text-amber-600 shadow-lg hover:bg-white/90":"cursor-not-allowed bg-white/10 text-white/50"}`,children:"Revenir au menu"})]})]})]}),c.jsx(an,{isOpen:d,onClose:()=>f(!1),title:"Justificatif de Paiement",children:r.receipt_url?c.jsx("img",{src:r.receipt_url,alt:"Justificatif",className:"h-auto w-full rounded-md"}):c.jsx("p",{children:"Aucun justificatif fourni."})})]}):c.jsxs("div",{className:A,children:[c.jsxs("div",{className:R,children:[c.jsx("h2",{className:`text-3xl font-bold text-center mb-2 ${n==="hero"?"text-white":"text-gray-800"}`,children:"Suivi de votre commande"}),c.jsxs("p",{className:`text-center font-semibold mb-8 ${n==="hero"?"text-gray-300":"text-gray-500"}`,children:["Commande #",r.id.slice(-6)]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"mb-6 tracker-progress-container tracker-progress-default",children:c.jsx("div",{className:`tracker-progress-fill ${_?"tracker-progress-fill-complete":""}`,style:k,children:c.jsx("span",{className:"tracker-progress-glow"})},`page-progress-${C}`)}),c.jsx("div",{className:`flex items-start sm:items-center justify-between gap-3 sm:gap-4 px-2 ${h.length>3?"flex-wrap sm:flex-nowrap":""}`,children:h.map((U,te)=>{const re=te===v,ce=te===h.length-1,he=te<v||ce&&_;return c.jsxs("div",{className:"flex flex-1 items-center gap-2 sm:gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center text-center gap-2 sm:gap-3",children:[c.jsx("p",{className:`text-xs sm:text-sm font-semibold ${he||re?"text-gray-900":"text-gray-400"}`,children:U.name}),c.jsxs("div",{className:`relative flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full border-4 transition-all duration-500 ${he?"bg-green-500 border-green-300":re?"bg-blue-600 border-blue-400 animate-pulse":"bg-gray-400 border-gray-300"}`,children:[c.jsx(U.icon,{className:"h-8 w-8 text-white sm:h-9 sm:w-9"}),he&&c.jsx(Fs,{className:"absolute -top-2 -right-2 h-5 w-5 text-emerald-100 drop-shadow"})]}),c.jsx("p",{className:`text-[11px] sm:text-xs leading-snug ${he||re?"text-gray-600":"text-gray-400"}`,children:U.description})]}),te<h.length-1&&c.jsx("div",{className:"flex flex-1 items-center","aria-hidden":!0,children:c.jsxs("div",{className:`tracker-gauge-wrapper ${n==="hero"?"tracker-gauge-hero":"tracker-gauge-default"} ${he?"tracker-gauge-wrapper-complete":""}`,children:[c.jsx("span",{className:`tracker-gauge-fill ${he?"tracker-gauge-fill-complete":re?"tracker-gauge-fill-active":"tracker-gauge-fill-idle"}`}),(re||he)&&c.jsx("span",{className:"tracker-gauge-glow"})]})})]},U.name)})})]}),c.jsx("style",{children:`
                    .tracker-progress-container {
                        position: relative;
                        height: 12px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.12);
                    }

                    .tracker-progress-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.55), rgba(209, 213, 219, 0.35));
                    }

                    .tracker-progress-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.25), rgba(148, 163, 184, 0.15));
                        box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.25);
                    }

                    .tracker-progress-fill {
                        position: absolute;
                        inset: 0;
                        width: 0;
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        background: linear-gradient(90deg, rgba(249, 168, 38, 0.65), rgba(239, 68, 68, 0.95));
                        border-radius: inherit;
                        animation: tracker-progress-advance 1.2s ease forwards;
                    }

                    .tracker-progress-fill-complete {
                        background: linear-gradient(90deg, rgba(34, 197, 94, 0.75), rgba(56, 189, 248, 0.9));
                    }

                    .tracker-progress-fill::after {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.15), transparent 55%);
                        mix-blend-mode: screen;
                    }

                    .tracker-progress-glow {
                        position: absolute;
                        right: -14px;
                        top: 50%;
                        width: 28px;
                        height: 28px;
                        transform: translateY(-50%);
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
                        pointer-events: none;
                    }

                    @keyframes tracker-progress-advance {
                        0% {
                            width: 0;
                        }
                        100% {
                            width: var(--tracker-progress-target);
                        }
                    }

                    .tracker-gauge-wrapper {
                        position: relative;
                        height: 10px;
                        border-radius: 9999px;
                        overflow: hidden;
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.12);
                        transition: box-shadow 0.3s ease;
                    }

                    .tracker-gauge-wrapper-complete {
                        box-shadow: inset 0 1px 3px rgba(21, 128, 61, 0.35);
                    }

                    .tracker-gauge-default {
                        background: linear-gradient(90deg, rgba(229, 231, 235, 0.45), rgba(209, 213, 219, 0.25));
                    }

                    .tracker-gauge-hero {
                        background: linear-gradient(90deg, rgba(255, 255, 255, 0.22), rgba(148, 163, 184, 0.12));
                        box-shadow: inset 0 1px 3px rgba(15, 23, 42, 0.4);
                    }

                    .tracker-gauge-fill {
                        position: absolute;
                        inset: 0;
                        transform-origin: left;
                        background-size: 250% 100%;
                        border-radius: inherit;
                    }

                    .tracker-gauge-fill-idle {
                        transform: scaleX(0);
                        background: linear-gradient(90deg, rgba(148, 163, 184, 0.25), rgba(148, 163, 184, 0.15));
                    }

                    .tracker-gauge-fill-active {
                        animation: tracker-gauge-fill-grow 1.2s ease forwards, tracker-gauge-cycle 3.2s linear infinite;
                        background: linear-gradient(90deg, #f97316, #ef4444, #facc15, #f97316);
                    }

                    .tracker-gauge-fill-complete {
                        transform: scaleX(1);
                        animation: tracker-gauge-cycle 4.2s linear infinite;
                        background: linear-gradient(90deg, #22c55e, #0ea5e9, #f97316, #22c55e);
                    }

                    .tracker-gauge-glow {
                        position: absolute;
                        inset: -6px;
                        background: radial-gradient(circle at center, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
                        animation: tracker-gauge-glow 1.6s ease-in-out infinite;
                        pointer-events: none;
                    }

                    @keyframes tracker-gauge-fill-grow {
                        0% { transform: scaleX(0); }
                        100% { transform: scaleX(1); }
                    }

                    @keyframes tracker-gauge-cycle {
                        0% { background-position: 0% 50%; }
                        100% { background-position: 200% 50%; }
                    }

                    @keyframes tracker-gauge-glow {
                        0%, 100% { opacity: 0.45; }
                        50% { opacity: 0.85; }
                    }

                    .promo-banner {
                        position: relative;
                        isolation: isolate;
                        animation: promo-banner-blink 2.2s ease-in-out infinite;
                    }

                    .promo-banner::before {
                        content: '';
                        position: absolute;
                        inset: 0;
                        background: linear-gradient(120deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0));
                        opacity: 0.45;
                        pointer-events: none;
                    }

                    .promo-banner > * {
                        position: relative;
                        z-index: 1;
                    }

                    @keyframes promo-banner-blink {
                        0%, 100% {
                            transform: translateY(0) scale(1);
                            filter: brightness(1);
                            opacity: 0.85;
                        }
                        45% {
                            transform: translateY(-2px) scale(1.02);
                            filter: brightness(1.18);
                            opacity: 1;
                        }
                        60% {
                            transform: translateY(0) scale(0.99);
                            filter: brightness(0.92);
                            opacity: 0.55;
                        }
                    }

                    .stamp-container {
                        position: relative;
                        width: 180px;
                        height: 180px;
                        animation: stamp-appear 0.5s ease-out;
                    }
                    
                    @keyframes stamp-appear {
                        0% {
                            transform: scale(0) rotate(-45deg);
                            opacity: 0;
                        }
                        60% {
                            transform: scale(1.1) rotate(0deg);
                        }
                        100% {
                            transform: scale(1) rotate(0deg);
                            opacity: 1;
                        }
                    }
                    
                    .stamp-border {
                        width: 100%;
                        height: 100%;
                        border: 4px solid #dc2626;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        background: rgba(220, 38, 38, 0.05);
                        position: relative;
                        box-shadow: 0 0 0 2px #dc2626;
                    }
                    
                    .stamp-border::before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background: repeating-linear-gradient(
                            45deg,
                            transparent,
                            transparent 2px,
                            rgba(220, 38, 38, 0.03) 2px,
                            rgba(220, 38, 38, 0.03) 4px
                        );
                    }
                    
                    .stamp-inner {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        text-align: center;
                        z-index: 1;
                    }
                    
                    .stamp-text {
                        font-family: 'Arial Black', 'Arial Bold', sans-serif;
                        font-weight: 900;
                        color: #dc2626;
                        text-transform: uppercase;
                        letter-spacing: 2px;
                        line-height: 1;
                        text-shadow: 
                            1px 1px 0 rgba(220, 38, 38, 0.3),
                            -1px -1px 0 rgba(220, 38, 38, 0.3);
                    }
                    
                    .stamp-text:first-child {
                        font-size: 20px;
                        margin-bottom: 6px;
                    }
                    
                    .stamp-text-large {
                        font-size: 42px;
                        font-weight: 900;
                    }
                    
                    /* Effet de texture grunge */
                    .stamp-border::after {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        border-radius: 50%;
                        background-image: 
                            radial-gradient(circle at 20% 30%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 80% 70%, transparent 0%, transparent 2%, rgba(220, 38, 38, 0.1) 2%, transparent 3%),
                            radial-gradient(circle at 40% 80%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%),
                            radial-gradient(circle at 60% 20%, transparent 0%, transparent 1%, rgba(220, 38, 38, 0.1) 1%, transparent 2%);
                        opacity: 0.8;
                    }
                `}),c.jsxs("div",{className:D,children:[_&&c.jsx("div",{className:"absolute top-4 right-4 z-10 pointer-events-none",children:c.jsx("div",{className:"relative",style:{transform:"rotate(15deg)"},children:c.jsx("div",{className:"stamp-container",children:c.jsx("div",{className:"stamp-border",children:c.jsxs("div",{className:"stamp-inner",children:[c.jsx("span",{className:"stamp-text",children:"PEDIDO"}),c.jsx("span",{className:"stamp-text stamp-text-large",children:"LISTO"})]})})})})}),c.jsx("h3",{className:`mt-10 text-xl font-bold ${n==="hero"?"text-white":"text-gray-800"}`,children:"Résumé de la commande"}),K&&H&&c.jsxs("div",{className:`mt-6 rounded-xl border p-4 ${n==="hero"?"border-white/30 bg-white/10 backdrop-blur text-white":"border-gray-200 bg-gray-50 text-gray-700"}`,children:[c.jsx("p",{className:`mb-3 text-sm font-semibold uppercase tracking-wide ${n==="hero"?"text-gray-100":"text-gray-600"}`,children:"Informations Client"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[B&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(fu,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"font-medium whitespace-nowrap truncate",title:B,children:B})]}),L&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(eh,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"whitespace-nowrap",title:L,children:L})]}),V&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(wl,{size:16,className:`mr-2 ${n==="hero"?"text-white/80":"text-gray-500"}`}),c.jsx("span",{className:"truncate",title:V,children:V})]})]}),r.receipt_url&&c.jsxs("button",{onClick:()=>f(!0),className:`mt-4 inline-flex items-center gap-2 text-sm font-semibold underline-offset-2 hover:underline ${n==="hero"?"text-white":"text-blue-500"}`,children:[c.jsx(th,{size:16})," Voir le justificatif"]})]}),c.jsx("div",{className:"space-y-2",children:r.items&&r.items.length>0?r.items.map(U=>{const re=U.nom_produit==="Domicilio"&&U.prix_unitaire===0,ce=U.description,he=typeof ce=="string"&&ce.trim().length>0?ce.trim():null,Ne=typeof U.commentaire=="string"&&U.commentaire.trim().length>0?U.commentaire.trim():null;return c.jsx("div",{className:`flex flex-col gap-2 rounded-lg border-b border-dashed border-gray-200/70 pb-3 pt-2 last:border-b-0 last:pb-0 ${n==="hero"?"text-gray-200":"text-gray-600"}`,children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold leading-snug text-balance",children:[U.quantite,"x ",U.nom_produit]}),c.jsx("p",{className:`mt-1 text-sm ${n==="hero"?"text-gray-400":"text-gray-500"}`,children:re?"Livraison offerte":`${ve(U.prix_unitaire)} /u`}),he&&c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:he}),Ne&&c.jsxs("p",{className:"mt-1 text-sm italic text-amber-600",children:["“",Ne,"”"]})]}),c.jsx("div",{className:"whitespace-nowrap text-right text-sm font-semibold",children:re?c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsx("span",{className:"text-xs text-gray-400 line-through",children:ve(8e3)}),c.jsx("span",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):c.jsx("span",{children:ve(U.prix_unitaire*U.quantite)})})]})},U.id)}):c.jsx("p",{className:`${n==="hero"?"text-gray-300":"text-gray-600"}`,children:"Aucun article enregistré pour cette commande."})}),K&&M,!K&&M,$>0&&c.jsxs("div",{className:`mt-4 flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-semibold ${n==="hero"?"border-emerald-300/30 bg-emerald-500/15 text-emerald-100":"border-emerald-200 bg-emerald-50 text-emerald-700"}`,children:[c.jsx("span",{children:"Réductions totales"}),c.jsxs("span",{children:["-",ve($)]})]}),c.jsxs("div",{className:`flex justify-between font-bold text-lg border-t pt-2 ${n==="hero"?"text-white border-gray-500":"text-gray-800"}`,children:[c.jsx("span",{children:"Total"}),c.jsx("span",{children:ve(r.total)})]}),!K&&H&&c.jsxs("div",{className:`border-t pt-4 space-y-2 ${n==="hero"?"border-gray-500":""}`,children:[c.jsx("h3",{className:`text-xl font-bold ${n==="hero"?"text-white":"text-gray-800"} mb-2`,children:"Informations Client"}),B&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(fu,{size:16,className:"mr-2"}),c.jsx("span",{className:"whitespace-nowrap truncate",title:B,children:B})]}),L&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(eh,{size:16,className:"mr-2"}),c.jsx("span",{className:"whitespace-nowrap",title:L,children:L})]}),V&&c.jsxs("div",{className:`flex items-center ${n==="hero"?"text-gray-200":"text-gray-700"}`,children:[c.jsx(wl,{size:16,className:"mr-2"}),c.jsx("span",{className:"truncate",title:V,children:V})]}),r.receipt_url&&c.jsxs("button",{onClick:()=>f(!0),className:"flex items-center text-blue-400 hover:underline",children:[c.jsx(th,{size:16,className:"mr-2"}),"Voir le justificatif"]})]})]}),c.jsxs("div",{className:"mt-8 text-center space-y-4",children:[_&&c.jsx("div",{className:"flex justify-center",children:c.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-green-100 px-4 py-2 text-sm font-semibold text-green-700",children:[c.jsx(Fs,{size:16})," Pedido listo"]})}),c.jsxs("div",{className:"flex flex-col space-y-4",children:[c.jsx("p",{className:`text-sm ${n==="hero"?"text-gray-300":"text-gray-600"}`,children:"Le statut de votre commande est mis à jour automatiquement."}),c.jsx("button",{onClick:_?t:void 0,disabled:!_,className:`font-bold py-3 px-6 rounded-lg transition ${_?`${n==="hero"?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-brand-primary text-brand-secondary hover:bg-brand-primary-dark"} cursor-pointer`:"bg-gray-300 text-gray-500 cursor-not-allowed opacity-50"}`,children:"Volver"})]})]})]}),c.jsx(an,{isOpen:d,onClose:()=>f(!1),title:"Justificatif de Paiement",children:r.receipt_url?c.jsx("img",{src:r.receipt_url,alt:"Justificatif",className:"w-full h-auto rounded-md"}):c.jsx("p",{children:"Aucun justificatif fourni."})})]})},EU={"font/woff2":"woff2","application/font-woff2":"woff2","application/x-font-woff2":"woff2","font/woff":"woff","application/font-woff":"woff","application/x-font-woff":"woff","application/x-font-ttf":"truetype","font/ttf":"truetype","application/x-font-otf":"opentype","font/otf":"opentype","application/vnd.ms-fontobject":"embedded-opentype","application/x-font-eot":"embedded-opentype","image/svg+xml":"svg"},OU={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg"},$b=e=>{const t=e.trim();return(t.length>0?t:"Custom Font").replace(/"|'/g,"")},CU=e=>{if(!e)return null;const t=e.toLowerCase();for(const[n,r]of Object.entries(EU))if(t.includes(n))return r;return null},kU=e=>{const n=e.toLowerCase().match(/\.([a-z0-9]+)(?:\?|#|$)/);if(!n)return null;const r=n[1];return OU[r]??null},AU=e=>{const t=CU(e.format);return t||kU(e.url)},TU=e=>{const t=$b(e.name),n=AU(e),r=n?` format("${n}")`:"",i=`url("${e.url}")${r}`;return`@font-face {
  font-family: "${t}";
  src: ${i};
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}`},PU="data-custom-font-faces",kA=e=>{b.useEffect(()=>{if(typeof document>"u")return;const t=e.filter(s=>s.type==="font");if(t.length===0)return;const n=[],r=new Set;if(t.forEach(s=>{const l=TU(s),d=l.match(/font-family: "([^"]+)";/),f=d?d[1]:s.name;r.has(f)||(r.add(f),n.push(l))}),n.length===0)return;const i=document.createElement("style");return i.setAttribute(PU,"true"),i.textContent=n.join(`
`),document.head.appendChild(i),()=>{i.remove()}},[e])},AA=e=>{if(!e)return e??void 0;const t=e.trim();return t.length===0||t.includes(",")?t.length===0?void 0:t:/^(['"]).*\1$/.test(t)||!/[^a-zA-Z0-9-]/.test(t)?t:`'${t.replace(/'/g,"\\'")}'`},Qr=e=>e.background.type==="image"&&e.background.image?{backgroundImage:`url('${e.background.image}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:e.background.color}:{backgroundColor:e.background.color},zb=(e,t)=>{const n=Qr(e);if(e.background.type==="image"){const r=e.background.image??t;return r?{...n,backgroundImage:`url('${r}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:n}return t?{...n,backgroundImage:`url('${t}')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:n},Jr=e=>({color:e.textColor,fontFamily:AA(e.fontFamily)}),Xi=e=>({...Jr(e),fontSize:e.fontSize}),Ub=(e,t)=>{const n={color:(t==null?void 0:t.textColor)??e.textColor,fontFamily:AA((t==null?void 0:t.fontFamily)??e.fontFamily)};return t!=null&&t.backgroundColor&&t.backgroundColor.trim().length>0&&(n.backgroundColor=t.backgroundColor),n},TA=(e,t)=>({...Ub(e,t),fontSize:(t==null?void 0:t.fontSize)??e.fontSize}),PA=(e,t)=>t!=null&&t.backgroundColor?{backgroundColor:t.backgroundColor}:{},MA=(e,t,n)=>{if(!e)return e;try{const r=new URL(e);return r.searchParams.set(t,n),r.toString()}catch{const i=e.includes("?")?"&":"?",s=encodeURIComponent(t),l=encodeURIComponent(n);return`${e}${i}${s}=${l}`}},L2="/logo-brand.svg",va=e=>{if(e.startsWith("navigation."))return"navigation";if(e.startsWith("hero."))return"hero";if(e.startsWith("about."))return"about";if(e.startsWith("menu."))return"menu";if(e.startsWith("instagramReviews."))return"instagramReviews";if(e.startsWith("findUs."))return"findUs";if(e.startsWith("footer."))return"footer";throw new Error(`Zone introuvable pour l'élément modifiable "${e}"`)},RA=pr.createContext(!0),nt=({id:e,onEdit:t,children:n,label:r,className:i,buttonClassName:s,as:l="div"})=>{const d=["group relative",i].filter(Boolean).join(" "),f=pr.useContext(RA),[h,m]=b.useState(!1);if(!f)return c.jsx(l,{className:d,children:n});const g=["customization-edit-button absolute z-30 flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white shadow-lg transition-all duration-200","opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus-visible:opacity-100","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","hover:scale-110 hover:bg-blue-600 active:scale-95",s??"right-2 top-2"].filter(Boolean).join(" "),v=x=>{x.preventDefault(),x.stopPropagation();const j=va(e),_=x.currentTarget.getBoundingClientRect(),S=x.currentTarget.closest(`[data-zone="${j}"]`)??x.currentTarget.parentElement,N=(S==null?void 0:S.getBoundingClientRect())??null,E=x.currentTarget.closest('[data-preview-boundary="true"]'),C=(E==null?void 0:E.getBoundingClientRect())??null;t(e,{zone:j,anchor:_??N,boundary:C})};return c.jsxs(l,{className:d,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[c.jsx("button",{type:"button",onClick:v,className:g,"aria-label":r,"data-element-id":e,title:r,children:c.jsx(A8,{className:"h-4 w-4","aria-hidden":"true"})}),h&&c.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-blue-500 border-dashed rounded-lg opacity-50 animate-pulse"}),h&&c.jsxs("div",{className:"absolute z-40 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-lg whitespace-nowrap",children:[r,c.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]}),n]})},fl=({children:e,className:t,zone:n,activeZone:r})=>{const s=["customization-section-card relative overflow-hidden rounded-3xl border bg-white shadow-sm transition-all",r===n?"active border-brand-primary/70 shadow-brand-primary/20 ring-2 ring-brand-primary/10":"border-gray-200",t].filter(Boolean).join(" ");return c.jsx("div",{className:s,"data-zone":n,children:e})},$2=({content:e,bestSellerProducts:t,onEdit:n,activeZone:r,showEditButtons:i=!0})=>{const s=Qr(e.navigation.style),l=Jr(e.navigation.style);Xi(e.navigation.style);const d=e.navigation.brandLogo??L2,f=e.navigation.staffLogo??e.navigation.brandLogo??L2,h=zb(e.hero.style,e.hero.backgroundImage),m=Jr(e.hero.style),g=Xi(e.hero.style),v=Qr(e.about.style),x=Jr(e.about.style);Xi(e.about.style);const j=Qr(e.menu.style),_=Jr(e.menu.style),S=Xi(e.menu.style),N=Qr(e.findUs.style),E=Jr(e.findUs.style),C=Qr(e.footer.style),k=Xi(e.footer.style);kA(e.assets.library);const A=e.elementStyles??{},R=e.elementRichText??{},D=U=>{var ce;const te=R[U],re=(ce=te==null?void 0:te.html)==null?void 0:ce.trim();return re&&re.length>0?re:null},$=(U,te,re,ce)=>{const he=D(U);return he?pr.createElement(te,{...re,dangerouslySetInnerHTML:{__html:he}}):pr.createElement(te,re,ce)},G={navigation:e.navigation.style,hero:e.hero.style,about:e.about.style,menu:e.menu.style,instagramReviews:e.instagramReviews.style,findUs:e.findUs.style,footer:e.footer.style},K=U=>A[U],B=U=>{const te=va(U);return Ub(G[te],K(U))},L=U=>{const te=va(U);return TA(G[te],K(U))},V=U=>{const te=va(U);return PA(G[te],K(U))},H=e.findUs.address.trim(),se=e.findUs.mapUrl,M=typeof se=="string"?se.trim():"",z=M.length>0,q=!z&&H.length>0?encodeURIComponent(H):"",J=z?M:q?`https://www.google.com/maps?q=${q}`:"https://www.google.com/maps",X=z?MA(M,"output","embed"):q?`https://www.google.com/maps?q=${q}&output=embed`:"about:blank",T=z||q.length>0,I=H.length>0?H:e.findUs.title;return c.jsx(RA.Provider,{value:i,children:c.jsxs("div",{className:"space-y-6 rounded-[2.5rem] border border-gray-200 bg-slate-50 p-6 shadow-inner","data-preview-boundary":"true",children:[c.jsx(fl,{zone:"navigation",activeZone:r,children:c.jsx(nt,{id:"navigation.style.background",label:"Modifier le fond de la navigation",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("header",{className:"login-header",style:s,children:c.jsxs("div",{className:"layout-container login-header__inner",style:l,children:[c.jsxs("div",{className:"login-brand",style:l,children:[c.jsx(nt,{id:"navigation.brandLogo",label:"Modifier le logo principal",onEdit:n,as:"span",className:"inline-flex items-center",children:c.jsx("img",{src:d,alt:`Logo ${e.navigation.brand}`,className:"login-brand__logo"})}),c.jsx(nt,{id:"navigation.brand",label:"Modifier le nom de la marque",onEdit:n,as:"span",className:"ml-3 inline-flex items-center",buttonClassName:"-right-3 -top-3",children:$("navigation.brand","span",{className:"login-brand__name",style:B("navigation.brand")},e.navigation.brand)})]}),c.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[c.jsx(nt,{id:"navigation.links.home",label:"Modifier le lien Accueil",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:$("navigation.links.home","span",{className:"login-nav__link",style:L("navigation.links.home")},e.navigation.links.home)}),c.jsx(nt,{id:"navigation.links.about",label:"Modifier le lien À propos",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:$("navigation.links.about","span",{className:"login-nav__link",style:L("navigation.links.about")},e.navigation.links.about)}),c.jsx(nt,{id:"navigation.links.menu",label:"Modifier le lien Menu",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:$("navigation.links.menu","span",{className:"login-nav__link",style:L("navigation.links.menu")},e.navigation.links.menu)}),c.jsx(nt,{id:"navigation.links.loginCta",label:"Modifier le bouton personnel",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:c.jsx("div",{className:"login-nav__staff-btn","aria-label":e.navigation.links.loginCta,role:"img",children:c.jsx(nt,{id:"navigation.staffLogo",label:"Modifier le logo d'accès staff",onEdit:n,as:"span",className:"inline-flex",buttonClassName:"-right-2 -top-2",children:c.jsx("img",{src:f,alt:"",className:"login-brand__logo","aria-hidden":"true"})})})})]})]})})})}),c.jsx(fl,{zone:"hero",activeZone:r,children:c.jsx(nt,{id:"hero.backgroundImage",label:"Modifier le visuel de fond du hero",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-hero",style:{...h,...m},children:c.jsx("div",{className:"section-hero__inner",children:c.jsxs("div",{className:"hero-content",style:m,children:[c.jsx(nt,{id:"hero.title",label:"Modifier le titre du hero",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("hero.title","h2",{className:"hero-title",style:B("hero.title")},e.hero.title)}),c.jsx(nt,{id:"hero.subtitle",label:"Modifier le sous-titre du hero",onEdit:n,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:$("hero.subtitle","p",{className:"hero-subtitle",style:L("hero.subtitle")},e.hero.subtitle)}),c.jsx(nt,{id:"hero.ctaLabel",label:"Modifier le texte du bouton principal",onEdit:n,className:"mt-6 inline-flex",buttonClassName:"-right-3 -top-3",children:c.jsx("button",{type:"button",className:"ui-btn ui-btn-accent hero-cta",style:{...L("hero.ctaLabel"),...V("hero.ctaLabel")},disabled:!0,children:$("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:L("hero.ctaLabel")},e.hero.ctaLabel)})}),c.jsxs("div",{className:"hero-history mt-6",children:[c.jsx(nt,{id:"hero.historyTitle",label:"Modifier le titre de l'historique",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("hero.historyTitle","p",{className:"hero-history__title",style:L("hero.historyTitle")},e.hero.historyTitle)}),c.jsx(nt,{id:"hero.reorderCtaLabel",label:"Modifier le bouton de réassort",onEdit:n,className:"hero-history__list",buttonClassName:"right-2 top-2",children:c.jsx(c.Fragment,{children:[0,1,2].map(U=>c.jsxs("div",{className:"hero-history__item",children:[c.jsxs("div",{className:"hero-history__meta",children:[c.jsx("p",{className:"hero-history__date",style:g,children:"Pedido del 12/03/2024"}),c.jsxs("p",{className:"hero-history__details",style:g,children:["2 article(s) • ",ve(32e3)]})]}),c.jsx("button",{type:"button",className:"hero-history__cta",style:{...L("hero.reorderCtaLabel"),...V("hero.reorderCtaLabel")},disabled:!0,children:$("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:L("hero.reorderCtaLabel")},e.hero.reorderCtaLabel)})]},U))})})]})]})})})})}),c.jsx(fl,{zone:"about",activeZone:r,children:c.jsx(nt,{id:"about.style.background",label:"Modifier le fond de la section À propos",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-surface",style:{...v,...x},children:c.jsxs("div",{className:"section-inner section-inner--center",style:x,children:[c.jsx(nt,{id:"about.title",label:"Modifier le titre À propos",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("about.title","h2",{className:"section-title",style:B("about.title")},e.about.title)}),c.jsx(nt,{id:"about.description",label:"Modifier la description À propos",onEdit:n,className:"mt-4 block",buttonClassName:"right-0 -top-3",children:$("about.description","p",{className:"section-text section-text--muted",style:L("about.description")},e.about.description)}),e.about.image&&c.jsx(nt,{id:"about.image",label:"Modifier l'image À propos",onEdit:n,className:"mt-6 block",buttonClassName:"right-4 top-4",children:c.jsx("img",{src:e.about.image,alt:e.about.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})})]})})})}),c.jsx(fl,{zone:"menu",activeZone:r,children:c.jsx(nt,{id:"menu.style.background",label:"Modifier le fond de la section Menu",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-muted",style:{...j,..._},children:c.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:_,children:[c.jsx(nt,{id:"menu.title",label:"Modifier le titre du menu",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("menu.title","h2",{className:"section-title",style:B("menu.title")},e.menu.title)}),e.menu.image&&c.jsx(nt,{id:"menu.image",label:"Modifier l'image du menu",onEdit:n,className:"mb-8 block",buttonClassName:"right-4 top-4",children:c.jsx("img",{src:e.menu.image,alt:e.menu.title,className:"h-64 w-full rounded-xl object-cover shadow-lg"})}),c.jsx("div",{className:"menu-grid",children:t.length>0?t.map(U=>{const te=!!U.image;return c.jsxs("article",{className:"ui-card menu-card",children:[te?c.jsx("img",{src:U.image,alt:U.nom_produit,className:"h-40 w-full rounded-t-xl object-cover"}):c.jsx("div",{className:"h-40 w-full rounded-t-xl bg-gradient-to-br from-orange-200 via-amber-100 to-orange-50"}),c.jsxs("div",{className:"menu-card__body",children:[c.jsx("h3",{className:"menu-card__title",style:_,children:U.nom_produit}),U.description&&c.jsx("p",{className:"menu-card__description",style:S,children:U.description}),c.jsx("p",{className:"menu-card__price",style:S,children:ve(U.prix_vente)})]})]},U.id)}):c.jsx("div",{className:"col-span-full rounded-2xl border border-dashed border-slate-300 bg-white/70 p-6 text-center",children:c.jsx("p",{className:"text-sm text-slate-500",style:S,children:"Aucun best seller sélectionné pour le moment."})})}),c.jsx(nt,{id:"menu.ctaLabel",label:"Modifier le bouton de commande",onEdit:n,className:"section-actions mt-8",buttonClassName:"right-2 top-2",children:c.jsxs("div",{className:"section-actions",children:[c.jsx("button",{type:"button",className:"ui-btn ui-btn-primary hero-cta",style:{...L("menu.ctaLabel"),...V("menu.ctaLabel")},disabled:!0,children:$("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:L("menu.ctaLabel")},e.menu.ctaLabel)}),c.jsx(nt,{id:"menu.loadingLabel",label:"Modifier le texte de chargement",onEdit:n,className:"ml-4 inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:$("menu.loadingLabel","p",{className:"section-text section-text--muted",style:L("menu.loadingLabel")},e.menu.loadingLabel)})]})})]})})})}),c.jsx(fl,{zone:"findUs",activeZone:r,children:c.jsx(nt,{id:"findUs.style.background",label:"Modifier le fond de la section Encuéntranos",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("section",{className:"section section-surface",style:{...N,...E},children:c.jsxs("div",{className:"find-us-grid",style:E,children:[c.jsxs("div",{className:"find-us-panel",style:E,children:[c.jsx(nt,{id:"findUs.title",label:"Modifier le titre Encuéntranos",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("findUs.title","h2",{className:"section-title",style:B("findUs.title")},e.findUs.title)}),c.jsxs("div",{className:"find-us-details",children:[c.jsxs("div",{className:"find-us-detail",style:E,children:[c.jsx(wl,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(nt,{id:"findUs.addressLabel",label:"Modifier le libellé de l'adresse",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("findUs.addressLabel","h3",{className:"find-us-detail__title",style:B("findUs.addressLabel")},e.findUs.addressLabel)}),c.jsx(nt,{id:"findUs.address",label:"Modifier l'adresse",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:$("findUs.address","p",{className:"find-us-detail__text",style:L("findUs.address")},e.findUs.address)})]})]}),c.jsxs("div",{className:"find-us-detail",style:E,children:[c.jsx(ti,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(nt,{id:"findUs.hoursLabel",label:"Modifier le libellé des horaires",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:B("findUs.hoursLabel")},e.findUs.hoursLabel)}),c.jsx(nt,{id:"findUs.hours",label:"Modifier les horaires",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:$("findUs.hours","p",{className:"find-us-detail__text",style:L("findUs.hours")},e.findUs.hours)})]})]}),c.jsxs("div",{className:"find-us-detail",style:E,children:[c.jsx(tA,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx(nt,{id:"findUs.cityLabel",label:"Modifier le libellé de l'email",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:$("findUs.cityLabel","h3",{className:"find-us-detail__title",style:B("findUs.cityLabel")},e.findUs.cityLabel)}),c.jsx(nt,{id:"findUs.city",label:"Modifier l'email",onEdit:n,className:"mt-1 block",buttonClassName:"right-0 -top-3",children:$("findUs.city","p",{className:"find-us-detail__text",style:L("findUs.city")},e.findUs.city)})]})]})]})]}),c.jsx("div",{className:"find-us-map",style:E,children:T?c.jsxs("div",{className:"find-us-map__frame",children:[c.jsx("iframe",{title:`Carte Google Maps pour ${I}`,src:X,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),c.jsx("a",{className:"find-us-map__link",href:J,target:"_blank",rel:"noopener noreferrer",children:c.jsx(nt,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:n,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:$("findUs.mapLabel","span",{className:"find-us-map__label",style:L("findUs.mapLabel")},e.findUs.mapLabel)})})]}):c.jsx("div",{className:"find-us-map__placeholder",children:c.jsx(nt,{id:"findUs.mapLabel",label:"Modifier le libellé du lien Google Maps",onEdit:n,className:"inline-flex",buttonClassName:"-right-3 -top-3",as:"span",children:$("findUs.mapLabel","span",{className:"find-us-map__label",style:L("findUs.mapLabel")},e.findUs.mapLabel)})})})]})})})}),c.jsx(fl,{zone:"footer",activeZone:r,children:c.jsx(nt,{id:"footer.style.background",label:"Modifier le fond du pied de page",onEdit:n,className:"block",buttonClassName:"right-4 top-4",children:c.jsx("footer",{className:"site-footer",style:{...C,...k},children:c.jsx("div",{className:"layout-container site-footer__inner",style:k,children:c.jsx(nt,{id:"footer.text",label:"Modifier le texte du pied de page",onEdit:n,className:"block",buttonClassName:"right-0 -top-3",children:c.jsxs("p",{style:L("footer.text"),children:["© ",new Date().getFullYear()," ",e.navigation.brand,"."," ",$("footer.text","span",{style:L("footer.text")},e.footer.text)]})})})})})})]})})},Cl=e=>{const[t,n]=e.split(":");if(t===void 0||n===void 0)return null;const r=Number.parseInt(t,10),i=Number.parseInt(n,10);return Number.isNaN(r)||Number.isNaN(i)||r<0||r>23||i<0||i>59?null:r*60+i},sm=(e,t=new Date)=>{const n=Cl(e.startTime),r=Cl(e.endTime);if(n===null||r===null||n===r)return!0;const i=t.getHours()*60+t.getMinutes();return n<r?i>=n&&i<r:i>=n||i<r},qb=(e,t="fr-FR")=>{const n=new Intl.DateTimeFormat(t,{hour:"2-digit",minute:"2-digit"}),r=new Date,i=new Date(r),s=new Date(r),l=Cl(e.startTime),d=Cl(e.endTime);l!==null&&i.setHours(Math.floor(l/60),l%60,0,0),d!==null&&s.setHours(Math.floor(d/60),d%60,0,0);const f=n.format(i),h=n.format(s);return`${f} – ${h}`},MU=(e,t=new Date)=>{const n=Cl(e.startTime),r=Cl(e.endTime);if(n===null||r===null)return null;const i=t.getHours()*60+t.getMinutes(),s=sm(e,t)?r:n,l=new Date(t);return l.setSeconds(0,0),l.setHours(Math.floor(s/60),s%60,0,0),s<=i&&s===r&&l.setDate(l.getDate()+1),s<=i&&s===n&&n>=r&&l.setDate(l.getDate()+1),l},DA=(e,t=new Date)=>{const n=MU(e,t);if(!n)return null;const r=n.getTime()-t.getTime();return Math.max(0,Math.round(r/6e4))},z2="/logo-brand.svg",RU=no,IA=pr.forwardRef(({pin:e,onPinChange:t,pinLength:n,describedBy:r,disabled:i},s)=>{const l=g=>{e.length<n&&!i&&t(e+g)},d=()=>{e.length>0&&!i&&t(e.slice(0,-1))},f=g=>{if(i)return;const v=g.target.value.replace(/\D/g,"").slice(0,n);t(v)},h=g=>{if(/^\d$/.test(g.key)){g.preventDefault(),l(g.key);return}if(g.key==="Backspace"){g.preventDefault(),d();return}g.key==="Escape"&&(g.preventDefault(),t(""))},m=e.length===0?`Aucun chiffre saisi. Vous pouvez entrer ${n} chiffres.`:`${e.length} ${e.length>1?"chiffres saisis":"chiffre saisi"} sur ${n}.`;return c.jsxs("div",{className:"pin-input","aria-label":"Clavier numérique sécurisé",children:[c.jsx("input",{ref:s,id:"staff-pin-field",type:"password",inputMode:"numeric",autoComplete:"one-time-code",className:"pin-input__field",value:e,onChange:f,onKeyDown:h,"aria-describedby":r,"aria-label":`Code PIN à ${n} chiffres`,disabled:i,"aria-disabled":i,"aria-busy":i}),c.jsx("div",{className:"pin-indicator",role:"presentation",children:Array.from({length:n}).map((g,v)=>c.jsx("div",{className:"pin-indicator__slot","aria-hidden":"true",children:e[v]?"•":""},v))}),c.jsx("div",{className:"pin-input__live","aria-live":"polite",children:m}),c.jsxs("div",{className:"pin-pad",children:[[...Array(9)].map((g,v)=>c.jsx("button",{type:"button",onClick:()=>l(String(v+1)),className:"pin-pad__button",disabled:i,children:v+1},v+1)),c.jsx("div",{"aria-hidden":"true"}),c.jsx("button",{type:"button",onClick:()=>l("0"),className:"pin-pad__button",disabled:i,children:"0"}),c.jsx("button",{type:"button",onClick:d,className:"pin-pad__button pin-pad__button--muted",disabled:i,children:"DEL"})]})]})});IA.displayName="PinInput";const DU=e=>e===1?"menu-grid menu-grid--single":e===2?"menu-grid menu-grid--double":e===3?"menu-grid menu-grid--triple":e>=6?"menu-grid menu-grid--six":e>0?"menu-grid menu-grid--multi":"menu-grid",IU=e=>{const t="ui-card menu-card";return e===1?`${t} menu-card--single`:e===2?`${t} menu-card--double`:e===3?`${t} menu-card--triple`:e>=6?`${t} menu-card--compact`:t},LU=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState(""),[i,s]=b.useState(""),[l,d]=b.useState(!1),f=b.useRef(null),{login:h}=_a(),m=wa(),{content:g}=Uu(),[v,x]=b.useState(()=>g);b.useEffect(()=>{g&&x(g)},[g]);const j=v??RU;kA(j.assets.library);const{navigation:_,hero:S,about:N,menu:E,findUs:C,footer:k,onlineOrdering:A}=j,R=_.brandLogo??z2,D=_.brandLogo??z2,$=Qr(_.style),G=Jr(_.style),K=zb(S.style,S.backgroundImage),B=Jr(S.style),L=Xi(S.style),V=Qr(N.style),H=Jr(N.style),se=Qr(E.style),M=Jr(E.style),z=Xi(E.style),q=Qr(C.style),J=Jr(C.style),X=Qr(k.style),T=Xi(k.style),I=j.elementStyles??{},U={navigation:_.style,hero:S.style,about:N.style,menu:E.style,instagramReviews:j.instagramReviews.style,findUs:C.style,footer:k.style},te=ye=>I[ye],re=ye=>{const ke=va(ye);return Ub(U[ke],te(ye))},ce=ye=>{const ke=va(ye);return TA(U[ke],te(ye))},he=ye=>{const ke=va(ye);return PA(U[ke],te(ye))},Ne=j.elementRichText??{},[de,ge]=b.useState(()=>new Date);b.useEffect(()=>{if(typeof window>"u")return;const ye=()=>ge(new Date);ye();const ke=window.setInterval(ye,6e4);return()=>window.clearInterval(ke)},[]);const ie=A.schedule,Q=b.useMemo(()=>qb(ie,"fr-FR"),[ie.startTime,ie.endTime]),Ce=sm(ie,de),Re=DA(ie,de),ut=b.useMemo(()=>{if(Re===null)return null;if(Re<1)return"Réouverture imminente";if(Re<60)return`Réouverture dans environ ${Re} min`;const ye=Math.floor(Re/60),ke=Re%60;return ke===0?`Réouverture dans environ ${ye} h`:`Réouverture dans environ ${ye} h ${ke.toString().padStart(2,"0")} min`},[Re]),we=ye=>{var qn;const ke=Ne[ye],jt=(qn=ke==null?void 0:ke.html)==null?void 0:qn.trim();return jt&&jt.length>0?jt:null},be=(ye,ke,jt,qn)=>{const ja=we(ye);return ja?pr.createElement(ke,{...jt,dangerouslySetInnerHTML:{__html:ja}}):pr.createElement(ke,jt,qn)},[ze,Et]=b.useState([]),[et,dt]=b.useState([]),[Vt,Fr]=b.useState(!0),[Xe,jn]=b.useState(!1),[er,sn]=b.useState(()=>uh()),me=b.useCallback(async ye=>{d(!0),s("");try{const ke=await h(ye),jt=Lb(ke)??"/dashboard";t(!1),r(""),m(jt)}catch(ke){console.error("Failed to authenticate with PIN",ke);const jt=ke instanceof Error&&ke.message?ke.message:"PIN invalide";s(jt),r(""),requestAnimationFrame(()=>{var qn;(qn=f.current)==null||qn.focus()})}finally{d(!1)}},[h,m]);b.useEffect(()=>{if(!e)return;const ye=window.setTimeout(()=>{var ke;(ke=f.current)==null||ke.focus()},0);return()=>window.clearTimeout(ye)},[e]),b.useEffect(()=>{n.length===6&&!l&&me(n)},[n,l,me]),b.useEffect(()=>{if(!(typeof window>"u"))try{const ye=window.localStorage.getItem("customer-order-history");if(!ye)return;const ke=JSON.parse(ye);Array.isArray(ke)&&dt(ke)}catch(ye){console.error("Could not load order history",ye)}},[]),b.useEffect(()=>{let ye=!0;return(async()=>{try{const jt=await Se.getBestSellerProducts();ye&&Et(jt)}catch(jt){console.error("Could not load best seller products",jt)}finally{ye&&Fr(!1)}})(),()=>{ye=!1}},[]);const _e=C.address.trim(),De=C.mapUrl,rt=typeof De=="string"?De.trim():"",Qe=rt.length>0,ft=!Qe&&_e.length>0?encodeURIComponent(_e):"",Ue=Qe?rt:ft?`https://www.google.com/maps?q=${ft}`:"https://www.google.com/maps",at=Qe?MA(rt,"output","embed"):ft?`https://www.google.com/maps?q=${ft}&output=embed`:"about:blank",ht=Qe||ft.length>0,kt=_e.length>0?_e:C.title,tr=(er==null?void 0:er.orderId)??null,hi=ze.slice(0,6),Hr=hi.length,In=DU(Hr),xr=IU(Hr),Mt=ye=>{ye.preventDefault(),n.length===6&&!l&&me(n)},pe=()=>{bk(),sn(null)},Le=ye=>{localStorage.setItem("customer-order-reorder-id",ye),m("/commande-client")},yt=()=>{Ce&&m("/commande-client")};return c.jsxs("div",{className:"login-page",children:[c.jsx("header",{className:"login-header",style:$,children:c.jsxs("div",{className:"layout-container login-header__inner",style:G,children:[c.jsxs("div",{className:"login-brand",style:G,children:[c.jsx("img",{src:R,alt:`Logo ${_.brand}`,className:"login-brand__logo"}),be("navigation.brand","span",{className:"login-brand__name",style:re("navigation.brand")},_.brand)]}),c.jsxs("nav",{className:"login-nav","aria-label":"Navigation principale",children:[be("navigation.links.home","a",{href:"#accueil",className:"login-nav__link",style:ce("navigation.links.home")},_.links.home),be("navigation.links.about","a",{href:"#apropos",className:"login-nav__link",style:ce("navigation.links.about")},_.links.about),be("navigation.links.menu","a",{href:"#menu",className:"login-nav__link",style:ce("navigation.links.menu")},_.links.menu),c.jsx("button",{type:"button",onClick:()=>t(!0),className:"login-nav__staff-btn","aria-label":_.links.loginCta,children:c.jsx("img",{src:D,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]}),c.jsx("button",{type:"button",onClick:()=>jn(!0),className:"login-header__menu","aria-label":"Ouvrir le menu",children:c.jsx(nA,{size:24})})]})}),Xe&&c.jsxs("div",{className:"login-menu-overlay",role:"dialog","aria-modal":"true",style:$,children:[c.jsx("button",{type:"button",onClick:()=>jn(!1),className:"login-menu-overlay__close","aria-label":"Fermer le menu",children:c.jsx(Xa,{size:28})}),c.jsxs("nav",{className:"login-menu-overlay__nav","aria-label":"Navigation mobile",style:G,children:[be("navigation.links.home","a",{href:"#accueil",onClick:()=>jn(!1),className:"login-menu-overlay__link",style:ce("navigation.links.home")},_.links.home),be("navigation.links.about","a",{href:"#apropos",onClick:()=>jn(!1),className:"login-menu-overlay__link",style:ce("navigation.links.about")},_.links.about),be("navigation.links.menu","a",{href:"#menu",onClick:()=>jn(!1),className:"login-menu-overlay__link",style:ce("navigation.links.menu")},_.links.menu),c.jsx("button",{type:"button",onClick:()=>{t(!0),jn(!1)},className:"login-nav__staff-btn login-menu-overlay__staff-btn","aria-label":_.links.loginCta,children:c.jsx("img",{src:D,alt:"",className:"login-brand__logo","aria-hidden":"true"})})]})]}),c.jsxs("main",{children:[c.jsx("section",{id:"accueil",className:"section section-hero",style:{...K,...B},children:c.jsx("div",{className:`section-hero__inner ${tr?"section-hero__inner--compact":""}`.trim(),children:tr?c.jsx(NU,{orderId:tr,onNewOrderClick:pe,variant:"hero"}):c.jsxs("div",{className:"hero-content",style:B,children:[be("hero.title","h2",{className:"hero-title",style:re("hero.title")},S.title),be("hero.subtitle","p",{className:"hero-subtitle",style:ce("hero.subtitle")},S.subtitle),c.jsx("button",{onClick:yt,className:`ui-btn hero-cta ${Ce?"ui-btn-accent":"hero-cta--disabled"}`.trim(),style:{...ce("hero.ctaLabel"),...he("hero.ctaLabel")},disabled:!Ce,"aria-disabled":!Ce,children:be("hero.ctaLabel","span",{className:"inline-flex items-center justify-center",style:ce("hero.ctaLabel")},S.ctaLabel)}),!Ce&&c.jsxs("div",{className:"hero-availability",children:[c.jsx("div",{className:"hero-availability__icon",children:c.jsx(ti,{size:28})}),c.jsxs("div",{className:"hero-availability__content",children:[c.jsx("p",{className:"hero-availability__label",children:"Commandes en ligne indisponibles"}),c.jsx("p",{className:"hero-availability__title",children:A.closedTitle}),c.jsx("p",{className:"hero-availability__subtitle",children:A.closedSubtitle||`Revenez entre ${Q}.`}),c.jsx("p",{className:"hero-availability__hours",children:Q}),ut&&c.jsx("p",{className:"hero-availability__countdown",children:ut})]})]}),et.length>0&&c.jsxs("div",{className:"hero-history",children:[be("hero.historyTitle","p",{className:"hero-history__title",style:ce("hero.historyTitle")},S.historyTitle),c.jsx("div",{className:"hero-history__list",children:et.slice(0,3).map(ye=>c.jsxs("div",{className:"hero-history__item",children:[c.jsxs("div",{className:"hero-history__meta",children:[c.jsxs("p",{className:"hero-history__date",style:L,children:["Pedido del ",new Date(ye.date_creation).toLocaleDateString()]}),c.jsxs("p",{className:"hero-history__details",style:L,children:[ye.items.length," article(s) • ",ve(ye.total)]})]}),c.jsx("button",{type:"button",onClick:()=>Le(ye.id),className:"hero-history__cta",style:{...ce("hero.reorderCtaLabel"),...he("hero.reorderCtaLabel")},children:be("hero.reorderCtaLabel","span",{className:"inline-flex items-center justify-center",style:ce("hero.reorderCtaLabel")},S.reorderCtaLabel)})]},ye.id))})]})]})})}),c.jsx("section",{id:"apropos",className:"section section-surface",style:{...V,...H},children:c.jsxs("div",{className:"section-inner section-inner--center",style:H,children:[be("about.title","h2",{className:"section-title",style:re("about.title")},N.title),be("about.description","p",{className:"section-text section-text--muted",style:ce("about.description")},N.description),N.image&&c.jsx("img",{src:N.image,alt:N.title,className:"mt-6 h-64 w-full rounded-xl object-cover shadow-lg"})]})}),c.jsx("section",{id:"menu",className:"section section-muted",style:{...se,...M},children:c.jsxs("div",{className:"section-inner section-inner--wide section-inner--center",style:M,children:[be("menu.title","h2",{className:"section-title",style:re("menu.title")},E.title),E.image&&c.jsx("img",{src:E.image,alt:E.title,className:"mb-8 h-64 w-full rounded-xl object-cover shadow-lg"}),Vt?be("menu.loadingLabel","p",{className:"section-text section-text--muted",style:ce("menu.loadingLabel")},E.loadingLabel):hi.length>0?c.jsx("div",{className:In,children:hi.map(ye=>c.jsxs("article",{className:xr,children:[c.jsx("img",{src:ye.image,alt:ye.nom_produit,className:"menu-card__media"}),c.jsxs("div",{className:"menu-card__body",children:[c.jsx("h3",{className:"menu-card__title",style:M,children:ye.nom_produit}),c.jsx("p",{className:"menu-card__description",style:z,children:ye.description}),c.jsx("p",{className:"menu-card__price",style:z,children:ve(ye.prix_vente)})]})]},ye.id))}):c.jsx("p",{className:"section-text section-text--muted",style:z,children:"Aucun produit best seller n'est disponible pour le moment."}),c.jsx("div",{className:"section-actions",children:c.jsx("button",{onClick:()=>m("/commande-client"),className:"ui-btn ui-btn-primary hero-cta",style:{...ce("menu.ctaLabel"),...he("menu.ctaLabel")},children:be("menu.ctaLabel","span",{className:"inline-flex items-center justify-center",style:ce("menu.ctaLabel")},E.ctaLabel)})})]})}),c.jsx("section",{id:"find-us",className:"section section-surface",style:{...q,...J},children:c.jsxs("div",{className:"section-inner section-inner--wide find-us-grid",style:J,children:[c.jsxs("div",{className:"find-us-panel",style:J,children:[be("findUs.title","h2",{className:"section-title",style:re("findUs.title")},C.title),c.jsxs("div",{className:"find-us-details",children:[c.jsxs("div",{className:"find-us-detail",style:J,children:[c.jsx(wl,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.addressLabel","h3",{className:"find-us-detail__title",style:re("findUs.addressLabel")},C.addressLabel),be("findUs.address","p",{className:"find-us-detail__text",style:ce("findUs.address")},C.address)]})]}),c.jsxs("div",{className:"find-us-detail",style:J,children:[c.jsx(ti,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.hoursLabel","h3",{className:"find-us-detail__title",style:re("findUs.hoursLabel")},C.hoursLabel),be("findUs.hours","p",{className:"find-us-detail__text",style:ce("findUs.hours")},C.hours)]})]}),c.jsxs("div",{className:"find-us-detail",style:J,children:[c.jsx(tA,{className:"find-us-detail__icon","aria-hidden":"true"}),c.jsxs("div",{children:[be("findUs.cityLabel","h3",{className:"find-us-detail__title",style:re("findUs.cityLabel")},C.cityLabel),be("findUs.city","p",{className:"find-us-detail__text",style:ce("findUs.city")},C.city)]})]})]})]}),c.jsx("div",{className:"find-us-map",style:J,children:ht?c.jsxs("div",{className:"find-us-map__frame",children:[c.jsx("iframe",{title:`Carte Google Maps pour ${kt}`,src:at,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade"}),c.jsx("a",{className:"find-us-map__link",href:Ue,target:"_blank",rel:"noopener noreferrer",children:be("findUs.mapLabel","span",{className:"find-us-map__label",style:ce("findUs.mapLabel")},C.mapLabel)})]}):c.jsx("div",{className:"find-us-map__placeholder",children:be("findUs.mapLabel","span",{className:"find-us-map__label",style:ce("findUs.mapLabel")},C.mapLabel)})})]})})]}),c.jsx("footer",{className:"site-footer",style:{...X,...T},children:c.jsx("div",{className:"layout-container site-footer__inner",style:T,children:c.jsxs("p",{style:ce("footer.text"),children:["© ",new Date().getFullYear()," ",_.brand,"."," ",be("footer.text","span",{style:ce("footer.text")},k.text)]})})}),c.jsx(an,{isOpen:e,onClose:()=>{t(!1),r(""),s("")},title:"Connexion du personnel",size:"lg",children:c.jsx("div",{className:"login-modal",children:c.jsx("form",{onSubmit:Mt,className:"login-modal__form","aria-describedby":i?"staff-pin-error":void 0,children:c.jsxs("div",{className:"login-modal__panel",children:[c.jsx(IA,{ref:f,pin:n,onPinChange:r,pinLength:6,describedBy:i?"staff-pin-error":void 0,disabled:l}),i&&c.jsx("p",{id:"staff-pin-error",className:"login-modal__error",role:"alert","aria-live":"assertive",children:i})]})})})})]})};function LA(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=LA(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function vt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=LA(e))&&(r&&(r+=" "),r+=t);return r}var mv={},pv={},U2;function $U(){return U2||(U2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(pv)),pv}var gv={},q2;function $A(){return q2||(q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(gv)),gv}var vv={},B2;function Bb(){return B2||(B2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(vv)),vv}var yv={},bv={},F2;function zU(){return F2||(F2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(bv)),bv}var H2;function Fb(){return H2||(H2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU(),n=Bb();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],l=i.length;if(l===0)return s;let d=0,f="",h="",m=!1;for(i.charCodeAt(0)===46&&(s.push(""),d++);d<l;){const g=i[d];h?g==="\\"&&d+1<l?(d++,f+=i[d]):g===h?h="":f+=g:m?g==='"'||g==="'"?h=g:g==="]"?(m=!1,s.push(f),f=""):f+=g:g==="["?(m=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,d++}return f&&s.push(f),s}e.toPath=r})(yv)),yv}var K2;function Hb(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$U(),n=$A(),r=Bb(),i=Fb();function s(d,f,h){if(d==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const m=d[f];return m===void 0?n.isDeepKey(f)?s(d,i.toPath(f),h):h:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=d[f];return m===void 0?h:m}default:{if(Array.isArray(f))return l(d,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const m=d[f];return m===void 0?h:m}}}function l(d,f,h){if(f.length===0)return h;let m=d;for(let g=0;g<f.length;g++){if(m==null||t.isUnsafeProperty(f[g]))return h;m=m[f[g]]}return m===void 0?h:m}e.get=s})(mv)),mv}var xv,G2;function UU(){return G2||(G2=1,xv=Hb().get),xv}var qU=UU();const ro=aa(qU);var wv={exports:{}},_t={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function BU(){if(Y2)return _t;Y2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(_){if(typeof _=="object"&&_!==null){var S=_.$$typeof;switch(S){case e:switch(_=_.type,_){case n:case i:case r:case f:case h:case v:return _;default:switch(_=_&&_.$$typeof,_){case l:case d:case g:case m:return _;case s:return _;default:return S}}case t:return S}}}return _t.ContextConsumer=s,_t.ContextProvider=l,_t.Element=e,_t.ForwardRef=d,_t.Fragment=n,_t.Lazy=g,_t.Memo=m,_t.Portal=t,_t.Profiler=i,_t.StrictMode=r,_t.Suspense=f,_t.SuspenseList=h,_t.isContextConsumer=function(_){return j(_)===s},_t.isContextProvider=function(_){return j(_)===l},_t.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},_t.isForwardRef=function(_){return j(_)===d},_t.isFragment=function(_){return j(_)===n},_t.isLazy=function(_){return j(_)===g},_t.isMemo=function(_){return j(_)===m},_t.isPortal=function(_){return j(_)===t},_t.isProfiler=function(_){return j(_)===i},_t.isStrictMode=function(_){return j(_)===r},_t.isSuspense=function(_){return j(_)===f},_t.isSuspenseList=function(_){return j(_)===h},_t.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===i||_===r||_===f||_===h||typeof _=="object"&&_!==null&&(_.$$typeof===g||_.$$typeof===m||_.$$typeof===l||_.$$typeof===s||_.$$typeof===d||_.$$typeof===x||_.getModuleId!==void 0)},_t.typeOf=j,_t}var V2;function FU(){return V2||(V2=1,wv.exports=BU()),wv.exports}var HU=FU(),bn=e=>e===0?0:e>0?1:-1,gr=e=>typeof e=="number"&&e!=+e,Ys=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Pe=e=>(typeof e=="number"||e instanceof Number)&&!gr(e),ba=e=>Pe(e)||typeof e=="string",KU=0,wu=e=>{var t=++KU;return"".concat(e||"").concat(t)},Dn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(t)&&typeof t!="string")return r;var s;if(Ys(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return gr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},zA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Tn(e,t,n){return Pe(e)&&Pe(t)?e+n*(t-e):t}function GU(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):ro(r,t))===n)}var xn=e=>e===null||typeof e>"u",qu=e=>xn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),YU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Kb(e){if(typeof e!="string")return!1;var t=YU;return t.includes(e)}var VU=["viewBox","children"],W2=["points","pathLength"],_v={svg:VU,polygon:W2,polyline:W2},WU=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Kb(i)&&(r[i]=(s=>n[i](n,s)))}),r},XU=(e,t,n)=>r=>(e(t,n,r),null),Bu=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Kb(i)&&typeof s=="function"&&(r||(r={}),r[i]=XU(s,t,n))}),r},QU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function UA(e){if(typeof e!="string")return!1;var t=QU;return t.includes(e)}function is(e){var t=Object.entries(e).filter(n=>{var[r]=n;return UA(r)});return Object.fromEntries(t)}var X2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Q2=null,jv=null,qA=e=>{if(e===Q2&&Array.isArray(jv))return jv;var t=[];return b.Children.forEach(e,n=>{xn(n)||(HU.isFragment(n)?t=t.concat(qA(n.props.children)):t.push(n))}),jv=t,Q2=e,t};function Gb(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>X2(i)):r=[X2(t)],qA(e).forEach(i=>{var s=ro(i,"type.displayName")||ro(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var JU=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&(_v==null?void 0:_v[r]))!==null&&i!==void 0?i:[],l=t.startsWith("data-"),d=typeof e!="function"&&(!!r&&s.includes(t)||UA(t)),f=!!n&&Kb(t);return l||d||f},un=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;JU((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},ZU=["children","width","height","viewBox","className","style","title","desc"];function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b0.apply(null,arguments)}function eq(e,t){if(e==null)return{};var n,r,i=tq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Yb=b.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:d,title:f,desc:h}=e,m=eq(e,ZU),g=s||{width:r,height:i,x:0,y:0},v=vt("recharts-surface",l);return b.createElement("svg",b0({},un(m,!0,"svg"),{className:v,width:r,height:i,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),b.createElement("title",null,f),b.createElement("desc",null,h),n)}),nq=["children","className"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}function rq(e,t){if(e==null)return{};var n,r,i=aq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Zn=b.forwardRef((e,t)=>{var{children:n,className:r}=e,i=rq(e,nq),s=vt("recharts-layer",r);return b.createElement("g",x0({className:s},un(i,!0),{ref:t}),n)}),BA=b.createContext(null),iq=()=>b.useContext(BA);function Ct(e){return function(){return e}}const FA=Math.cos,yh=Math.sin,sa=Math.sqrt,bh=Math.PI,om=2*bh,w0=Math.PI,_0=2*w0,Ds=1e-6,sq=_0-Ds;function HA(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function oq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return HA;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class lq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?HA:oq(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,f=r-t,h=i-n,m=l-t,g=d-n,v=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(v>Ds)if(!(Math.abs(g*f-h*m)>Ds)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,j=i-d,_=f*f+h*h,S=x*x+j*j,N=Math.sqrt(_),E=Math.sqrt(v),C=s*Math.tan((w0-Math.acos((_+v-S)/(2*N*E)))/2),k=C/E,A=C/N;Math.abs(k-1)>Ds&&this._append`L${t+k*m},${n+k*g}`,this._append`A${s},${s},0,0,${+(g*x>m*j)},${this._x1=t+A*f},${this._y1=n+A*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let d=r*Math.cos(i),f=r*Math.sin(i),h=t+d,m=n+f,g=1^l,v=l?i-s:s-i;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>Ds||Math.abs(this._y1-m)>Ds)&&this._append`L${h},${m}`,r&&(v<0&&(v=v%_0+_0),v>sq?this._append`A${r},${r},0,1,${g},${t-d},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=m}`:v>Ds&&this._append`A${r},${r},0,${+(v>=w0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new lq(t)}function Wb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KA(e){this._context=e}KA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lm(e){return new KA(e)}function GA(e){return e[0]}function YA(e){return e[1]}function VA(e,t){var n=Ct(!0),r=null,i=lm,s=null,l=Vb(d);e=typeof e=="function"?e:e===void 0?GA:Ct(e),t=typeof t=="function"?t:t===void 0?YA:Ct(t);function d(f){var h,m=(f=Wb(f)).length,g,v=!1,x;for(r==null&&(s=i(x=l())),h=0;h<=m;++h)!(h<m&&n(g=f[h],h,f))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+e(g,h,f),+t(g,h,f));if(x)return s=null,x+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ct(!!f),d):n},d.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),d):i},d.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),d):r},d}function Of(e,t,n){var r=null,i=Ct(!0),s=null,l=lm,d=null,f=Vb(h);e=typeof e=="function"?e:e===void 0?GA:Ct(+e),t=typeof t=="function"?t:Ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?YA:Ct(+n);function h(g){var v,x,j,_=(g=Wb(g)).length,S,N=!1,E,C=new Array(_),k=new Array(_);for(s==null&&(d=l(E=f())),v=0;v<=_;++v){if(!(v<_&&i(S=g[v],v,g))===N)if(N=!N)x=v,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=v-1;j>=x;--j)d.point(C[j],k[j]);d.lineEnd(),d.areaEnd()}N&&(C[v]=+e(S,v,g),k[v]=+t(S,v,g),d.point(r?+r(S,v,g):C[v],n?+n(S,v,g):k[v]))}if(E)return d=null,E+""||null}function m(){return VA().defined(i).curve(l).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:Ct(+g),r=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Ct(+g),h):e},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ct(+g),h):r},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:Ct(+g),n=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Ct(+g),h):t},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ct(+g),h):n},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(n)},h.lineX1=function(){return m().x(r).y(t)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ct(!!g),h):i},h.curve=function(g){return arguments.length?(l=g,s!=null&&(d=l(s)),h):l},h.context=function(g){return arguments.length?(g==null?s=d=null:d=l(s=g),h):s},h}class WA{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function cq(e){return new WA(e,!0)}function uq(e){return new WA(e,!1)}const Xb={draw(e,t){const n=sa(t/bh);e.moveTo(n,0),e.arc(0,0,n,0,om)}},dq={draw(e,t){const n=sa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},XA=sa(1/3),fq=XA*2,hq={draw(e,t){const n=sa(t/fq),r=n*XA;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},mq={draw(e,t){const n=sa(t),r=-n/2;e.rect(r,r,n,n)}},pq=.8908130915292852,QA=yh(bh/10)/yh(7*bh/10),gq=yh(om/10)*QA,vq=-FA(om/10)*QA,yq={draw(e,t){const n=sa(t*pq),r=gq*n,i=vq*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=om*s/5,d=FA(l),f=yh(l);e.lineTo(f*n,-d*n),e.lineTo(d*r-f*i,f*r+d*i)}e.closePath()}},Sv=sa(3),bq={draw(e,t){const n=-sa(t/(Sv*3));e.moveTo(0,n*2),e.lineTo(-Sv*n,-n),e.lineTo(Sv*n,-n),e.closePath()}},Tr=-.5,Pr=sa(3)/2,j0=1/sa(12),xq=(j0/2+1)*3,wq={draw(e,t){const n=sa(t/xq),r=n/2,i=n*j0,s=r,l=n*j0+n,d=-s,f=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(d,f),e.lineTo(Tr*r-Pr*i,Pr*r+Tr*i),e.lineTo(Tr*s-Pr*l,Pr*s+Tr*l),e.lineTo(Tr*d-Pr*f,Pr*d+Tr*f),e.lineTo(Tr*r+Pr*i,Tr*i-Pr*r),e.lineTo(Tr*s+Pr*l,Tr*l-Pr*s),e.lineTo(Tr*d+Pr*f,Tr*f-Pr*d),e.closePath()}};function _q(e,t){let n=null,r=Vb(i);e=typeof e=="function"?e:Ct(e||Xb),t=typeof t=="function"?t:Ct(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ct(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ct(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function xh(){}function wh(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JA(e){this._context=e}JA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jq(e){return new JA(e)}function ZA(e){this._context=e}ZA.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sq(e){return new ZA(e)}function eT(e){this._context=e}eT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nq(e){return new eT(e)}function tT(e){this._context=e}tT.prototype={areaStart:xh,areaEnd:xh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Eq(e){return new tT(e)}function J2(e){return e<0?-1:1}function Z2(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),d=(s*i+l*r)/(r+i);return(J2(s)+J2(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function eN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Nv(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,d=(s-r)/3;e._context.bezierCurveTo(r+d,i+d*t,s-d,l-d*n,s,l)}function _h(e){this._context=e}_h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nv(this,this._t0,eN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nv(this,eN(this,n=Z2(this,e,t)),n);break;default:Nv(this,this._t0,n=Z2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nT(e){this._context=new rT(e)}(nT.prototype=Object.create(_h.prototype)).point=function(e,t){_h.prototype.point.call(this,t,e)};function rT(e){this._context=e}rT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Oq(e){return new _h(e)}function Cq(e){return new nT(e)}function aT(e){this._context=e}aT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=tN(e),i=tN(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tN(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function kq(e){return new aT(e)}function cm(e,t){this._context=e,this._t=t}cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Aq(e){return new cm(e,.5)}function Tq(e){return new cm(e,0)}function Pq(e){return new cm(e,1)}function kl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,d=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<d;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function S0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Mq(e,t){return e[t]}function Rq(e){const t=[];return t.key=e,t}function Dq(){var e=Ct([]),t=S0,n=kl,r=Mq;function i(s){var l=Array.from(e.apply(this,arguments),Rq),d,f=l.length,h=-1,m;for(const g of s)for(d=0,++h;d<f;++d)(l[d][h]=[0,+r(g,l[d].key,h,s)]).data=g;for(d=0,m=Wb(t(l));d<f;++d)l[m[d]].index=d;return n(l,m),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ct(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Ct(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?S0:typeof s=="function"?s:Ct(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??kl,i):n},i}function Iq(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}kl(e,t)}}function Lq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,d=0;l<i;++l)d+=e[l][n][1]||0;r[n][1]+=r[n][0]=-d/2}kl(e,t)}}function $q(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var d=0,f=0,h=0;d<l;++d){for(var m=e[t[d]],g=m[r][1]||0,v=m[r-1][1]||0,x=(g-v)/2,j=0;j<d;++j){var _=e[t[j]],S=_[r][1]||0,N=_[r-1][1]||0;x+=S-N}f+=g,h+=x*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,kl(e,t)}}var zq=["type","size","sizeType"];function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N0.apply(null,arguments)}function nN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nN(Object(n),!0).forEach(function(r){Uq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uq(e,t,n){return(t=qq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fq(e,t){if(e==null)return{};var n,r,i=Hq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Hq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iT={symbolCircle:Xb,symbolCross:dq,symbolDiamond:hq,symbolSquare:mq,symbolStar:yq,symbolTriangle:bq,symbolWye:wq},Kq=Math.PI/180,Gq=e=>{var t="symbol".concat(qu(e));return iT[t]||Xb},Yq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Kq;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vq=(e,t)=>{iT["symbol".concat(qu(e))]=t},Qb=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=Fq(e,zq),s=rN(rN({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var d=()=>{var v=Gq(l),x=_q().type(v).size(Yq(n,r,l));return x()},{className:f,cx:h,cy:m}=s,g=un(s,!0);return h===+h&&m===+m&&n===+n?b.createElement("path",N0({},g,{className:vt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};Qb.registerSymbol=Vq;function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E0.apply(null,arguments)}function aN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aN(Object(n),!0).forEach(function(r){Jb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jb(e,t,n){return(t=Xq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xq(e){var t=Qq(e,"string");return typeof t=="symbol"?t:t+""}function Qq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mr=32;class Zb extends b.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Mr/2,s=Mr/6,l=Mr/3,d=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return b.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Mr,y2:i,className:"recharts-legend-icon"});if(f==="line")return b.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Mr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return b.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Mr/8,"h").concat(Mr,"v").concat(Mr*3/4,"h").concat(-Mr,"z"),className:"recharts-legend-icon"});if(b.isValidElement(t.legendIcon)){var h=Wq({},t);return delete h.legendIcon,b.cloneElement(t.legendIcon,h)}return b.createElement(Qb,{fill:d,cx:i,cy:i,size:Mr,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,d={x:0,y:0,width:Mr,height:Mr},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var v=m.formatter||i,x=vt({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var j=m.inactive?s:m.color,_=v?v(m.value,m,g):m.value;return b.createElement("li",E0({className:x,style:f,key:"legend-item-".concat(g)},Bu(this.props,m,g)),b.createElement(Yb,{width:n,height:n,viewBox:d,style:h,"aria-label":"".concat(_," legend icon")},this.renderIcon(m,l)),b.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},_))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return b.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Jb(Zb,"displayName","Legend");Jb(Zb,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ev={},Ov={},iN;function Jq(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],d=r(l);i.has(d)||i.set(d,l)}return Array.from(i.values())}e.uniqBy=t})(Ov)),Ov}var Cv={},sN;function sT(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Cv)),Cv}var kv={},Av={},Tv={},oN;function Zq(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Tv)),Tv}var lN;function ex(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zq();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Av)),Av}var Pv={},cN;function e7(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Pv)),Pv}var uN;function t7(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ex(),n=e7();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(kv)),kv}var Mv={},Rv={},dN;function n7(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hb();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Rv)),Rv}var Dv={},Iv={},Lv={},$v={},fN;function oT(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})($v)),$v}var zv={},hN;function lT(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(zv)),zv}var Uv={},mN;function cT(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Uv)),Uv}var pN;function r7(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tx(),n=oT(),r=lT(),i=cT();function s(g,v,x){return typeof x!="function"?t.isMatch(g,v):l(g,v,function j(_,S,N,E,C,k){const A=x(_,S,N,E,C,k);return A!==void 0?!!A:l(_,S,j,k)},new Map)}function l(g,v,x,j){if(v===g)return!0;switch(typeof v){case"object":return d(g,v,x,j);case"function":return Object.keys(v).length>0?l(g,{...v},x,j):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function d(g,v,x,j){if(v==null)return!0;if(Array.isArray(v))return h(g,v,x,j);if(v instanceof Map)return f(g,v,x,j);if(v instanceof Set)return m(g,v,x,j);const _=Object.keys(v);if(g==null)return _.length===0;if(_.length===0)return!0;if(j&&j.has(v))return j.get(v)===g;j&&j.set(v,g);try{for(let S=0;S<_.length;S++){const N=_[S];if(!r.isPrimitive(g)&&!(N in g)||v[N]===void 0&&g[N]!==void 0||v[N]===null&&g[N]!==null||!x(g[N],v[N],N,g,v,j))return!1}return!0}finally{j&&j.delete(v)}}function f(g,v,x,j){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[_,S]of v.entries()){const N=g.get(_);if(x(N,S,_,g,v,j)===!1)return!1}return!0}function h(g,v,x,j){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const _=new Set;for(let S=0;S<v.length;S++){const N=v[S];let E=!1;for(let C=0;C<g.length;C++){if(_.has(C))continue;const k=g[C];let A=!1;if(x(k,N,S,g,v,j)&&(A=!0),A){_.add(C),E=!0;break}}if(!E)return!1}return!0}function m(g,v,x,j){return v.size===0?!0:g instanceof Set?h([...g],[...v],x,j):!1}e.isMatchWith=s,e.isSetMatch=m})(Lv)),Lv}var gN;function tx(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r7();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Iv)),Iv}var qv={},Bv={},Fv={},vN;function a7(){return vN||(vN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Fv)),Fv}var Hv={},yN;function uT(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Hv)),Hv}var Kv={},bN;function dT(){return bN||(bN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",d="[object Date]",f="[object Map]",h="[object Set]",m="[object Array]",g="[object Function]",v="[object ArrayBuffer]",x="[object Object]",j="[object Error]",_="[object DataView]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",k="[object BigUint64Array]",A="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",$="[object BigInt64Array]",G="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=v,e.arrayTag=m,e.bigInt64ArrayTag=$,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=_,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=G,e.float64ArrayTag=K,e.functionTag=g,e.int16ArrayTag=R,e.int32ArrayTag=D,e.int8ArrayTag=A,e.mapTag=f,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=N})(Kv)),Kv}var Gv={},xN;function i7(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Gv)),Gv}var wN;function fT(){return wN||(wN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a7(),n=uT(),r=dT(),i=lT(),s=i7();function l(m,g){return d(m,void 0,m,new Map,g)}function d(m,g,v,x=new Map,j=void 0){const _=j==null?void 0:j(m,g,v,x);if(_!==void 0)return _;if(i.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const S=new Array(m.length);x.set(m,S);for(let N=0;N<m.length;N++)S[N]=d(m[N],N,v,x,j);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;x.set(m,S);for(const[N,E]of m)S.set(N,d(E,N,v,x,j));return S}if(m instanceof Set){const S=new Set;x.set(m,S);for(const N of m)S.add(d(N,void 0,v,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(s.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,S);for(let N=0;N<m.length;N++)S[N]=d(m[N],N,v,x,j);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,S),f(S,m,v,x,j),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return x.set(m,S),f(S,m,v,x,j),S}if(typeof Blob<"u"&&m instanceof Blob){const S=new Blob([m],{type:m.type});return x.set(m,S),f(S,m,v,x,j),S}if(m instanceof Error){const S=new m.constructor;return x.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,f(S,m,v,x,j),S}if(m instanceof Boolean){const S=new Boolean(m.valueOf());return x.set(m,S),f(S,m,v,x,j),S}if(m instanceof Number){const S=new Number(m.valueOf());return x.set(m,S),f(S,m,v,x,j),S}if(m instanceof String){const S=new String(m.valueOf());return x.set(m,S),f(S,m,v,x,j),S}if(typeof m=="object"&&h(m)){const S=Object.create(Object.getPrototypeOf(m));return x.set(m,S),f(S,m,v,x,j),S}return m}function f(m,g,v=m,x,j){const _=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<_.length;S++){const N=_[S],E=Object.getOwnPropertyDescriptor(m,N);(E==null||E.writable)&&(m[N]=d(g[N],N,v,x,j))}}function h(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=f})(Bv)),Bv}var _N;function s7(){return _N||(_N=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fT();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(qv)),qv}var jN;function o7(){return jN||(jN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tx(),n=s7();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Dv)),Dv}var Yv={},Vv={},Wv={},SN;function l7(){return SN||(SN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fT(),n=dT();function r(i,s){return t.cloneDeepWith(i,(l,d,f,h)=>{const m=s==null?void 0:s(l,d,f,h);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(Wv)),Wv}var NN;function c7(){return NN||(NN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l7();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Vv)),Vv}var Xv={},Qv={},EN;function hT(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Qv)),Qv}var Jv={},ON;function u7(){return ON||(ON=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uT();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Jv)),Jv}var CN;function d7(){return CN||(CN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A(),n=hT(),r=u7(),i=Fb();function s(l,d){let f;if(Array.isArray(d)?f=d:typeof d=="string"&&t.isDeepKey(d)&&(l==null?void 0:l[d])==null?f=i.toPath(d):f=[d],f.length===0)return!1;let h=l;for(let m=0;m<f.length;m++){const g=f[m];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(Xv)),Xv}var kN;function f7(){return kN||(kN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tx(),n=Bb(),r=c7(),i=Hb(),s=d7();function l(d,f){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return f=r.cloneDeep(f),function(h){const m=i.get(h,d);return m===void 0?s.has(h,d):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=l})(Yv)),Yv}var AN;function h7(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sT(),n=n7(),r=o7(),i=f7();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Mv)),Mv}var TN;function m7(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jq(),n=sT(),r=t7(),i=h7();function s(l,d=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(d)):[]}e.uniqBy=s})(Ev)),Ev}var Zv,PN;function p7(){return PN||(PN=1,Zv=m7().uniqBy),Zv}var g7=p7();const MN=aa(g7);function mT(e,t,n){return t===!0?MN(e,n):typeof t=="function"?MN(e,t):e}var ey={exports:{}},ty={},ny={exports:{}},ry={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function v7(){if(RN)return ry;RN=1;var e=Ul();function t(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function d(g,v){var x=v(),j=r({inst:{value:x,getSnapshot:v}}),_=j[0].inst,S=j[1];return s(function(){_.value=x,_.getSnapshot=v,f(_)&&S({inst:_})},[g,x,v]),i(function(){return f(_)&&S({inst:_}),g(function(){f(_)&&S({inst:_})})},[g]),l(x),x}function f(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!n(g,x)}catch{return!0}}function h(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return ry.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,ry}var DN;function y7(){return DN||(DN=1,ny.exports=v7()),ny.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function b7(){if(IN)return ty;IN=1;var e=Ul(),t=y7();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,d=e.useMemo,f=e.useDebugValue;return ty.useSyncExternalStoreWithSelector=function(h,m,g,v,x){var j=s(null);if(j.current===null){var _={hasValue:!1,value:null};j.current=_}else _=j.current;j=d(function(){function N(R){if(!E){if(E=!0,C=R,R=v(R),x!==void 0&&_.hasValue){var D=_.value;if(x(D,R))return k=D}return k=R}if(D=k,r(C,R))return D;var $=v(R);return x!==void 0&&x(D,$)?(C=R,D):(C=R,k=$)}var E=!1,C,k,A=g===void 0?null:g;return[function(){return N(m())},A===null?void 0:function(){return N(A())}]},[m,g,v,x]);var S=i(h,j[0],j[1]);return l(function(){_.hasValue=!0,_.value=S},[S]),f(S),S},ty}var LN;function x7(){return LN||(LN=1,ey.exports=b7()),ey.exports}var w7=x7(),nx=b.createContext(null),_7=e=>e,qt=()=>{var e=b.useContext(nx);return e?e.store.dispatch:_7},ih=()=>{},j7=()=>ih,S7=(e,t)=>e===t;function Te(e){var t=b.useContext(nx);return w7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:j7,t?t.store.getState:ih,t?t.store.getState:ih,t?e:ih,S7)}function N7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function E7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function O7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var $N=e=>Array.isArray(e)?e:[e];function C7(e){const t=Array.isArray(e[0])?e[0]:e;return O7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function k7(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var A7=class{constructor(e){this.value=e}deref(){return this.value}},T7=typeof WeakRef<"u"?WeakRef:A7,P7=0,zN=1;function Cf(){return{s:P7,v:void 0,o:null,p:null}}function pT(e,t={}){let n=Cf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){var g;let d=n;const{length:f}=arguments;for(let v=0,x=f;v<x;v++){const j=arguments[v];if(typeof j=="function"||typeof j=="object"&&j!==null){let _=d.o;_===null&&(d.o=_=new WeakMap);const S=_.get(j);S===void 0?(d=Cf(),_.set(j,d)):d=S}else{let _=d.p;_===null&&(d.p=_=new Map);const S=_.get(j);S===void 0?(d=Cf(),_.set(j,d)):d=S}}const h=d;let m;if(d.s===zN)m=d.v;else if(m=e.apply(null,arguments),s++,r){const v=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;v!=null&&r(v,m)&&(m=v,s!==0&&s--),i=typeof m=="object"&&m!==null||typeof m=="function"?new T7(m):m}return h.s=zN,h.v=m,m}return l.clearCache=()=>{n=Cf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function M7(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,d,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),N7(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...f},{memoize:g,memoizeOptions:v=[],argsMemoize:x=pT,argsMemoizeOptions:j=[]}=m,_=$N(v),S=$N(j),N=C7(i),E=g(function(){return s++,h.apply(null,arguments)},..._),C=x(function(){l++;const A=k7(N,arguments);return d=E.apply(null,A),d},...S);return Object.assign(C,{resultFunc:h,memoizedResultFunc:E,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var ae=M7(pT),R7=Object.assign((e,t=ae)=>{E7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,d,f)=>(l[n[f]]=d,l),{}))},{withTypes:()=>R7}),ay={},iy={},sy={},UN;function D7(){return UN||(UN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),d=t(i);if(l===d&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?d-l:l-d}return 0};e.compareValues=n})(sy)),sy}var oy={},ly={},qN;function gT(){return qN||(qN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(ly)),ly}var BN;function I7(){return BN||(BN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gT(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(oy)),oy}var FN;function L7(){return FN||(FN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D7(),n=I7(),r=Fb();function i(s,l,d,f){if(s==null)return[];d=f?void 0:d,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const h=(x,j)=>{let _=x;for(let S=0;S<j.length&&_!=null;++S)_=_[j[S]];return _},m=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:h(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?h(j,x):typeof j=="object"?j[x]:j,g=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(j=>m(j,x))})).slice().sort((x,j)=>{for(let _=0;_<g.length;_++){const S=t.compareValues(x.criteria[_],j.criteria[_],d[_]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(iy)),iy}var cy={},HN;function $7(){return HN||(HN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(d,f)=>{for(let h=0;h<d.length;h++){const m=d[h];Array.isArray(m)&&f<s?l(m,f+1):i.push(m)}};return l(n,0),i}e.flatten=t})(cy)),cy}var uy={},KN;function vT(){return KN||(KN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hT(),n=ex(),r=oT(),i=cT();function s(l,d,f){return r.isObject(f)&&(typeof d=="number"&&n.isArrayLike(f)&&t.isIndex(d)&&d<f.length||typeof d=="string"&&d in f)?i.eq(f[d],l):!1}e.isIterateeCall=s})(uy)),uy}var GN;function z7(){return GN||(GN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L7(),n=$7(),r=vT();function i(s,...l){const d=l.length;return d>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:d>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(ay)),ay}var dy,YN;function U7(){return YN||(YN=1,dy=z7().sortBy),dy}var q7=U7();const um=aa(q7);var yT=e=>e.legend.settings,B7=e=>e.legend.size,F7=e=>e.legend.payload,H7=ae([F7,yT],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?um(r,n):r});function K7(){return Te(H7)}var kf=1;function bT(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=b.useState({height:0,left:0,top:0,width:0}),r=b.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>kf||Math.abs(l.left-t.left)>kf||Math.abs(l.top-t.top)>kf||Math.abs(l.width-t.width)>kf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function kn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var G7=typeof Symbol=="function"&&Symbol.observable||"@@observable",VN=G7,fy=()=>Math.random().toString(36).substring(7).split("").join("."),Y7={INIT:`@@redux/INIT${fy()}`,REPLACE:`@@redux/REPLACE${fy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fy()}`},jh=Y7;function rx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function xT(e,t,n){if(typeof e!="function")throw new Error(kn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kn(1));return n(xT)(e,t)}let r=e,i=t,s=new Map,l=s,d=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((S,N)=>{l.set(N,S)}))}function m(){if(f)throw new Error(kn(3));return i}function g(S){if(typeof S!="function")throw new Error(kn(4));if(f)throw new Error(kn(5));let N=!0;h();const E=d++;return l.set(E,S),function(){if(N){if(f)throw new Error(kn(6));N=!1,h(),l.delete(E),s=null}}}function v(S){if(!rx(S))throw new Error(kn(7));if(typeof S.type>"u")throw new Error(kn(8));if(typeof S.type!="string")throw new Error(kn(17));if(f)throw new Error(kn(9));try{f=!0,i=r(i,S)}finally{f=!1}return(s=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(kn(10));r=S,v({type:jh.REPLACE})}function j(){const S=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(kn(11));function E(){const k=N;k.next&&k.next(m())}return E(),{unsubscribe:S(E)}},[VN](){return this}}}return v({type:jh.INIT}),{dispatch:v,subscribe:g,getState:m,replaceReducer:x,[VN]:j}}function V7(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:jh.INIT})>"u")throw new Error(kn(12));if(typeof n(void 0,{type:jh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kn(13))})}function wT(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{V7(n)}catch(s){i=s}return function(l={},d){if(i)throw i;let f=!1;const h={};for(let m=0;m<r.length;m++){const g=r[m],v=n[g],x=l[g],j=v(x,d);if(typeof j>"u")throw d&&d.type,new Error(kn(14));h[g]=j,f=f||j!==x}return f=f||r.length!==Object.keys(l).length,f?h:l}}function Sh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function W7(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(kn(15))};const l={getState:i.getState,dispatch:(f,...h)=>s(f,...h)},d=e.map(f=>f(l));return s=Sh(...d)(i.dispatch),{...i,dispatch:s}}}function _T(e){return rx(e)&&"type"in e&&typeof e.type=="string"}var jT=Symbol.for("immer-nothing"),WN=Symbol.for("immer-draftable"),vr=Symbol.for("immer-state");function Zr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Al=Object.getPrototypeOf;function ao(e){return!!e&&!!e[vr]}function ri(e){var t;return e?ST(e)||Array.isArray(e)||!!e[WN]||!!((t=e.constructor)!=null&&t[WN])||Fu(e)||fm(e):!1}var X7=Object.prototype.constructor.toString();function ST(e){if(!e||typeof e!="object")return!1;const t=Al(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===X7}function Nh(e,t){dm(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function dm(e){const t=e[vr];return t?t.type_:Array.isArray(e)?1:Fu(e)?2:fm(e)?3:0}function O0(e,t){return dm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NT(e,t,n){const r=dm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Q7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fu(e){return e instanceof Map}function fm(e){return e instanceof Set}function Is(e){return e.copy_||e.base_}function C0(e,t){if(Fu(e))return new Map(e);if(fm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ST(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[vr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],d=r[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(Al(e),r)}else{const r=Al(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function ax(e,t=!1){return hm(e)||ao(e)||!ri(e)||(dm(e)>1&&Object.defineProperties(e,{set:{value:Af},add:{value:Af},clear:{value:Af},delete:{value:Af}}),Object.freeze(e),t&&Object.values(e).forEach(n=>ax(n,!0))),e}function Af(){Zr(2)}function hm(e){return Object.isFrozen(e)}var J7={};function io(e){const t=J7[e];return t||Zr(0,e),t}var _u;function ET(){return _u}function Z7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function XN(e,t){t&&(io("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function k0(e){A0(e),e.drafts_.forEach(eB),e.drafts_=null}function A0(e){e===_u&&(_u=e.parent_)}function QN(e){return _u=Z7(_u,e)}function eB(e){const t=e[vr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function JN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[vr].modified_&&(k0(t),Zr(4)),ri(e)&&(e=Eh(t,e),t.parent_||Oh(t,e)),t.patches_&&io("Patches").generateReplacementPatches_(n[vr].base_,e,t.patches_,t.inversePatches_)):e=Eh(t,n,[]),k0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jT?e:void 0}function Eh(e,t,n){if(hm(t))return t;const r=t[vr];if(!r)return Nh(t,(i,s)=>ZN(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Oh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Nh(s,(d,f)=>ZN(e,r,i,d,f,n,l)),Oh(e,i,!1),n&&e.patches_&&io("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ZN(e,t,n,r,i,s,l){if(ao(i)){const d=s&&t&&t.type_!==3&&!O0(t.assigned_,r)?s.concat(r):void 0,f=Eh(e,i,d);if(NT(n,r,f),ao(f))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(ri(i)&&!hm(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Eh(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Fu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Oh(e,i)}}function Oh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ax(t,n)}function tB(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ET(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ix;n&&(i=[r],s=ju);const{revoke:l,proxy:d}=Proxy.revocable(i,s);return r.draft_=d,r.revoke_=l,d}var ix={get(e,t){if(t===vr)return e;const n=Is(e);if(!O0(n,t))return nB(e,n,t);const r=n[t];return e.finalized_||!ri(r)?r:r===hy(e.base_,t)?(my(e),e.copy_[t]=P0(r,e)):r},has(e,t){return t in Is(e)},ownKeys(e){return Reflect.ownKeys(Is(e))},set(e,t,n){const r=OT(Is(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=hy(Is(e),t),s=i==null?void 0:i[vr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Q7(n,i)&&(n!==void 0||O0(e.base_,t)))return!0;my(e),T0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,my(e),T0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Is(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Zr(11)},getPrototypeOf(e){return Al(e.base_)},setPrototypeOf(){Zr(12)}},ju={};Nh(ix,(e,t)=>{ju[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ju.deleteProperty=function(e,t){return ju.set.call(this,e,t,void 0)};ju.set=function(e,t,n){return ix.set.call(this,e[0],t,n,e[0])};function hy(e,t){const n=e[vr];return(n?Is(n):e)[t]}function nB(e,t,n){var i;const r=OT(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function OT(e,t){if(!(t in e))return;let n=Al(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Al(n)}}function T0(e){e.modified_||(e.modified_=!0,e.parent_&&T0(e.parent_))}function my(e){e.copy_||(e.copy_=C0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(f=s,...h){return l.produce(f,m=>n.call(this,m,...h))}}typeof n!="function"&&Zr(6),r!==void 0&&typeof r!="function"&&Zr(7);let i;if(ri(t)){const s=QN(this),l=P0(t,void 0);let d=!0;try{i=n(l),d=!1}finally{d?k0(s):A0(s)}return XN(s,r),JN(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===jT&&(i=void 0),this.autoFreeze_&&ax(i,!0),r){const s=[],l=[];io("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else Zr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,f=>t(f,...d));let r,i;return[this.produce(t,n,(l,d)=>{r=l,i=d}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ri(e)||Zr(8),ao(e)&&(e=Qa(e));const t=QN(this),n=P0(e,void 0);return n[vr].isManual_=!0,A0(t),n}finishDraft(e,t){const n=e&&e[vr];(!n||!n.isManual_)&&Zr(9);const{scope_:r}=n;return XN(r,t),JN(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=io("Patches").applyPatches_;return ao(e)?r(e,t):this.produce(e,i=>r(i,t))}};function P0(e,t){const n=Fu(e)?io("MapSet").proxyMap_(e,t):fm(e)?io("MapSet").proxySet_(e,t):tB(e,t);return(t?t.scope_:ET()).drafts_.push(n),n}function Qa(e){return ao(e)||Zr(10,e),CT(e)}function CT(e){if(!ri(e)||hm(e))return e;const t=e[vr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=C0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=C0(e,!0);return Nh(n,(r,i)=>{NT(n,r,CT(i))}),t&&(t.finalized_=!1),n}var aB=new rB,kT=aB.produce;function AT(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var iB=AT(),sB=AT,oB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sh:Sh.apply(null,arguments)};function $r(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(mr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>_T(r)&&r.type===e,n}var TT=class iu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,iu.prototype)}static get[Symbol.species](){return iu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new iu(...t[0].concat(this)):new iu(...t.concat(this))}};function eE(e){return ri(e)?kT(e,()=>{}):e}function Tf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function lB(e){return typeof e=="boolean"}var cB=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new TT;return n&&(lB(n)?l.push(iB):l.push(sB(n.extraArgument))),l},uB="RTK_autoBatch",tE=e=>t=>{setTimeout(t,e)},dB=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const d=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tE(10):e.type==="callback"?e.queueNotification:tE(e.timeout),h=()=>{l=!1,s&&(s=!1,d.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const g=()=>i&&m(),v=r.subscribe(g);return d.add(m),()=>{v(),d.delete(m)}},dispatch(m){var g;try{return i=!((g=m==null?void 0:m.meta)!=null&&g[uB]),s=!i,s&&(l||(l=!0,f(h))),r.dispatch(m)}finally{i=!0}}})},fB=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new TT(e);return r&&i.push(dB(typeof r=="object"?r:void 0)),i};function hB(e){const t=cB(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(rx(n))d=wT(n);else throw new Error(mr(1));let f;typeof r=="function"?f=r(t):f=t();let h=Sh;i&&(h=oB({trace:!1,...typeof i=="object"&&i}));const m=W7(...f),g=fB(m);let v=typeof l=="function"?l(g):g();const x=h(...v);return xT(d,s,x)}function PT(e){const t={},n=[];let r;const i={addCase(s,l){const d=typeof s=="string"?s:s.type;if(!d)throw new Error(mr(28));if(d in t)throw new Error(mr(29));return t[d]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function mB(e){return typeof e=="function"}function pB(e,t){let[n,r,i]=PT(t),s;if(mB(e))s=()=>eE(e());else{const d=eE(e);s=()=>d}function l(d=s(),f){let h=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[i]),h.reduce((m,g)=>{if(g)if(ao(m)){const x=g(m,f);return x===void 0?m:x}else{if(ri(m))return kT(m,v=>g(v,f));{const v=g(m,f);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},d)}return l.getInitialState=s,l}var gB="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vB=(e=21)=>{let t="",n=e;for(;n--;)t+=gB[Math.random()*64|0];return t},yB=Symbol.for("rtk-slice-createasyncthunk");function bB(e,t){return`${e}/${t}`}function xB({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[yB];return function(i){const{name:s,reducerPath:l=s}=i;if(!s)throw new Error(mr(11));const d=(typeof i.reducers=="function"?i.reducers(_B()):i.reducers)||{},f=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(k,A){const R=typeof k=="string"?k:k.type;if(!R)throw new Error(mr(12));if(R in h.sliceCaseReducersByType)throw new Error(mr(13));return h.sliceCaseReducersByType[R]=A,m},addMatcher(k,A){return h.sliceMatchers.push({matcher:k,reducer:A}),m},exposeAction(k,A){return h.actionCreators[k]=A,m},exposeCaseReducer(k,A){return h.sliceCaseReducersByName[k]=A,m}};f.forEach(k=>{const A=d[k],R={reducerName:k,type:bB(s,k),createNotation:typeof i.reducers=="function"};SB(A)?EB(R,A,m,t):jB(R,A,m)});function g(){const[k={},A=[],R=void 0]=typeof i.extraReducers=="function"?PT(i.extraReducers):[i.extraReducers],D={...k,...h.sliceCaseReducersByType};return pB(i.initialState,$=>{for(let G in D)$.addCase(G,D[G]);for(let G of h.sliceMatchers)$.addMatcher(G.matcher,G.reducer);for(let G of A)$.addMatcher(G.matcher,G.reducer);R&&$.addDefaultCase(R)})}const v=k=>k,x=new Map,j=new WeakMap;let _;function S(k,A){return _||(_=g()),_(k,A)}function N(){return _||(_=g()),_.getInitialState()}function E(k,A=!1){function R($){let G=$[k];return typeof G>"u"&&A&&(G=Tf(j,R,N)),G}function D($=v){const G=Tf(x,A,()=>new WeakMap);return Tf(G,$,()=>{const K={};for(const[B,L]of Object.entries(i.selectors??{}))K[B]=wB(L,$,()=>Tf(j,$,N),A);return K})}return{reducerPath:k,getSelectors:D,get selectors(){return D(R)},selectSlice:R}}const C={name:s,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...E(l),injectInto(k,{reducerPath:A,...R}={}){const D=A??l;return k.inject({reducerPath:D,reducer:S},R),{...C,...E(D,!0)}}};return C}}function wB(e,t,n,r){function i(s,...l){let d=t(s);return typeof d>"u"&&r&&(d=n()),e(d,...l)}return i.unwrapped=e,i}var br=xB();function _B(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function jB({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!NB(r))throw new Error(mr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?$r(e,l):$r(e))}function SB(e){return e._reducerDefinitionType==="asyncThunk"}function NB(e){return e._reducerDefinitionType==="reducerWithPrepare"}function EB({type:e,reducerName:t},n,r,i){if(!i)throw new Error(mr(18));const{payloadCreator:s,fulfilled:l,pending:d,rejected:f,settled:h,options:m}=n,g=i(e,s,m);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),d&&r.addCase(g.pending,d),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(t,{fulfilled:l||Pf,pending:d||Pf,rejected:f||Pf,settled:h||Pf})}function Pf(){}var OB="task",MT="listener",RT="completed",sx="cancelled",CB=`task-${sx}`,kB=`task-${RT}`,M0=`${MT}-${sx}`,AB=`${MT}-${RT}`,mm=class{constructor(e){Wg(this,"name","TaskAbortError");Wg(this,"message");this.code=e,this.message=`${OB} ${sx} (reason: ${e})`}},ox=(e,t)=>{if(typeof e!="function")throw new TypeError(mr(32))},Ch=()=>{},DT=(e,t=Ch)=>(e.catch(t),e),IT=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Js=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Zs=e=>{if(e.aborted){const{reason:t}=e;throw new mm(t)}};function LT(e,t){let n=Ch;return new Promise((r,i)=>{const s=()=>i(new mm(e.reason));if(e.aborted){s();return}n=IT(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Ch})}var TB=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof mm?"cancelled":"rejected",error:n}}finally{t==null||t()}},kh=e=>t=>DT(LT(e,t).then(n=>(Zs(e),n))),$T=e=>{const t=kh(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:jl}=Object,nE={},pm="listenerMiddleware",PB=(e,t)=>{const n=r=>IT(e,()=>Js(r,e.reason));return(r,i)=>{ox(r);const s=new AbortController;n(s);const l=TB(async()=>{Zs(e),Zs(s.signal);const d=await r({pause:kh(s.signal),delay:$T(s.signal),signal:s.signal});return Zs(s.signal),d},()=>Js(s,kB));return i!=null&&i.autoJoin&&t.push(l.catch(Ch)),{result:kh(e)(l),cancel(){Js(s,CB)}}}},MB=(e,t)=>{const n=async(r,i)=>{Zs(t);let s=()=>{};const d=[new Promise((f,h)=>{let m=e({predicate:r,effect:(g,v)=>{v.unsubscribe(),f([g,v.getState(),v.getOriginalState()])}});s=()=>{m(),h()}})];i!=null&&d.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await LT(t,Promise.race(d));return Zs(t),f}finally{s()}};return(r,i)=>DT(n(r,i))},zT=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=$r(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(mr(21));return ox(s),{predicate:i,type:t,effect:s}},UT=jl(e=>{const{type:t,predicate:n,effect:r}=zT(e);return{id:vB(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(mr(22))}}},{withTypes:()=>UT}),rE=(e,t)=>{const{type:n,effect:r,predicate:i}=zT(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},R0=e=>{e.pending.forEach(t=>{Js(t,M0)})},RB=e=>()=>{e.forEach(R0),e.clear()},aE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},qT=jl($r(`${pm}/add`),{withTypes:()=>qT}),DB=$r(`${pm}/removeAll`),BT=jl($r(`${pm}/remove`),{withTypes:()=>BT}),IB=(...e)=>{console.error(`${pm}/error`,...e)},Hu=(e={})=>{const t=new Map,{extra:n,onError:r=IB}=e;ox(r);const i=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&R0(m)}),s=m=>{const g=rE(t,m)??UT(m);return i(g)};jl(s,{withTypes:()=>s});const l=m=>{const g=rE(t,m);return g&&(g.unsubscribe(),m.cancelActive&&R0(g)),!!g};jl(l,{withTypes:()=>l});const d=async(m,g,v,x)=>{const j=new AbortController,_=MB(s,j.signal),S=[];try{m.pending.add(j),await Promise.resolve(m.effect(g,jl({},v,{getOriginalState:x,condition:(N,E)=>_(N,E).then(Boolean),take:_,delay:$T(j.signal),pause:kh(j.signal),extra:n,signal:j.signal,fork:PB(j.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,E,C)=>{N!==j&&(Js(N,M0),C.delete(N))})},cancel:()=>{Js(j,M0),m.pending.delete(j)},throwIfCancelled:()=>{Zs(j.signal)}})))}catch(N){N instanceof mm||aE(r,N,{raisedBy:"effect"})}finally{await Promise.all(S),Js(j,AB),m.pending.delete(j)}},f=RB(t);return{middleware:m=>g=>v=>{if(!_T(v))return g(v);if(qT.match(v))return s(v.payload);if(DB.match(v)){f();return}if(BT.match(v))return l(v.payload);let x=m.getState();const j=()=>{if(x===nE)throw new Error(mr(23));return x};let _;try{if(_=g(v),t.size>0){const S=m.getState(),N=Array.from(t.values());for(const E of N){let C=!1;try{C=E.predicate(v,S,x)}catch(k){C=!1,aE(r,k,{raisedBy:"predicate"})}C&&d(E,v,m,j)}}}finally{x=nE}return _},startListening:s,stopListening:l,clearListeners:f}};function mr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LB={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},FT=br({name:"chartLayout",initialState:LB,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:$B,setLayout:zB,setChartSize:UB,setScale:qB}=FT.actions,BB=FT.reducer;function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(r){FB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FB(e,t,n){return(t=HB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ah=Math.PI/180,GB=e=>e*180/Math.PI,nn=(e,t,n,r)=>({x:e+Math.cos(-Ah*r)*n,y:t+Math.sin(-Ah*r)*n}),HT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},YB=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},VB=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=YB({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var d=(n-i)/l,f=Math.acos(d);return r>s&&(f=2*Math.PI-f),{radius:l,angle:GB(f),angleInRadian:f}},WB=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},XB=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},QB=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=VB({x:n,y:r},t),{innerRadius:l,outerRadius:d}=t;if(i<l||i>d||i===0)return null;var{startAngle:f,endAngle:h}=WB(t),m=s,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?sE(sE({},t),{},{radius:i,angle:XB(m,t)}):null};function KT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(n),!0).forEach(function(r){JB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JB(e,t,n){return(t=ZB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZB(e){var t=e9(e,"string");return typeof t=="symbol"?t:t+""}function e9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ut(e,t,n){return xn(e)||xn(t)?n:ba(t)?ro(e,t,n):typeof t=="function"?t(e):n}var t9=(e,t,n,r,i)=>{var s,l=-1,d=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(d<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<d;f++){var h=f>0?n[f-1].coordinate:n[d-1].coordinate,m=n[f].coordinate,g=f>=d-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(bn(m-h)!==bn(g-m)){var x=[];if(bn(g-m)===bn(i[1]-i[0])){v=g;var j=m+i[1]-i[0];x[0]=Math.min(j,(j+h)/2),x[1]=Math.max(j,(j+h)/2)}else{v=h;var _=g+i[1]-i[0];x[0]=Math.min(m,(_+m)/2),x[1]=Math.max(m,(_+m)/2)}var S=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=n[f]);break}}else{var N=Math.min(h,g),E=Math.max(h,g);if(e>(N+m)/2&&e<=(E+m)/2){({index:l}=n[f]);break}}}else if(t){for(var C=0;C<d;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<d-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===d-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},n9=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&s!=="center"&&Pe(e[s]))return Dr(Dr({},e),{},{[s]:e[s]+(r||0)});if((d==="horizontal"||d==="vertical"&&s==="center")&&l!=="middle"&&Pe(e[l]))return Dr(Dr({},e),{},{[l]:e[l]+(i||0)})}return e},uo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GT=(e,t,n,r)=>{if(r)return e.map(d=>d.coordinate);var i,s,l=e.map(d=>(d.coordinate===t&&(i=!0),d.coordinate===n&&(s=!0),d.coordinate));return i||l.push(t),s||l.push(n),l},YT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:d,isCategorical:f,categoricalDomain:h,tickCount:m,ticks:g,niceTicks:v,axisType:x}=e;if(!l)return null;var j=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,_=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(_=x==="angleAxis"&&s&&s.length>=2?bn(s[0]-s[1])*2*_:_,g||v){var S=(g||v||[]).map((N,E)=>{var C=r?r.indexOf(N):N;return{coordinate:l(C)+_,value:N,offset:_,index:E}});return S.filter(N=>!gr(N.coordinate))}return f&&h?h.map((N,E)=>({coordinate:l(N)+_,value:N,index:E,offset:_})):l.ticks&&m!=null?l.ticks(m).map((N,E)=>({coordinate:l(N)+_,value:N,offset:_,index:E})):l.domain().map((N,E)=>({coordinate:l(N)+_,value:r?r[N]:N,index:E,offset:_}))},lE=1e-4,r9=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-lE,s=Math.max(r[0],r[1])+lE,l=e(t[0]),d=e(t[n-1]);(l<i||l>s||d<i||d>s)&&e.domain([t[0],t[n-1]])}},a9=(e,t)=>{if(!t||t.length!==2||!Pe(t[0])||!Pe(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Pe(e[0])||e[0]<n)&&(i[0]=n),(!Pe(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},i9=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var d=gr(e[l][n][1])?e[l][n][0]:e[l][n][1];d>=0?(e[l][n][0]=i,e[l][n][1]=i+d,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+d,s=e[l][n][1])}},s9=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=gr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},o9={sign:i9,expand:Iq,none:kl,silhouette:Lq,wiggle:$q,positive:s9},l9=(e,t,n)=>{var r=o9[n],i=Dq().keys(t).value((s,l)=>+Ut(s,l,0)).order(S0).offset(r);return i(e)};function c9(e){return e==null?void 0:String(e)}var cE=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var d=Ut(s,t.dataKey,t.scale.domain()[l]);return xn(d)?null:t.scale(d)-i/2+r},u9=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},d9=e=>{var t=e.flat(2).filter(Pe);return[Math.min(...t),Math.max(...t)]},f9=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],h9=(e,t,n)=>{if(e!=null)return f9(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,d=l.reduce((f,h)=>{var m=KT(h,t,n),g=d9(m);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],r[0]),Math.max(d[1],r[1])]},[1/0,-1/0]))},uE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lx=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=um(t,m=>m.coordinate),s=1/0,l=1,d=i.length;l<d;l++){var f=i[l],h=i[l-1];s=Math.min((f.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function fE(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Dr(Dr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function gm(e,t){if(e)return String(e);if(typeof t=="string")return t}function m9(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?QB({x:e,y:t},r):null}var p9=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Dr(Dr(Dr({},r),nn(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var d=i.coordinate,{angle:f}=r;return Dr(Dr(Dr({},r),nn(r.cx,r.cy,d,f)),{},{angle:f,radius:d})}return{x:0,y:0}},g9=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,oi=e=>e.layout.width,li=e=>e.layout.height,v9=e=>e.layout.scale,VT=e=>e.layout.margin,vm=ae(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ym=ae(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),WT="data-recharts-item-index",XT="data-recharts-item-data-key",Ku=60;function hE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(n),!0).forEach(function(r){y9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y9(e,t,n){return(t=b9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b9(e){var t=x9(e,"string");return typeof t=="symbol"?t:t+""}function x9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w9=e=>e.brush.height;function _9(e){var t=ym(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ku;return n+i}return n},0)}function j9(e){var t=ym(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Ku;return n+i}return n},0)}function S9(e){var t=vm(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function N9(e){var t=vm(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var dn=ae([oi,li,VT,w9,_9,j9,S9,N9,yT,B7],(e,t,n,r,i,s,l,d,f,h)=>{var m={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+d},v=Mf(Mf({},g),m),x=v.bottom;v.bottom+=r,v=n9(v,f,h);var j=e-v.left-v.right,_=t-v.top-v.bottom;return Mf(Mf({brushBottom:x},v),{},{width:Math.max(j,0),height:Math.max(_,0)})}),E9=ae(dn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),cx=ae(oi,li,(e,t)=>({x:0,y:0,width:e,height:t})),O9=b.createContext(null),qr=()=>b.useContext(O9)!=null,bm=e=>e.brush,xm=ae([bm,dn,VT],(e,t,n)=>({height:e.height,x:Pe(e.x)?e.x:t.left,y:Pe(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:Pe(e.width)?e.width:t.width})),ux=()=>{var e,t=qr(),n=Te(E9),r=Te(xm),i=(e=Te(bm))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},C9={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},QT=()=>{var e;return(e=Te(dn))!==null&&e!==void 0?e:C9},dx=()=>Te(oi),fx=()=>Te(li),k9=()=>Te(e=>e.layout.margin),lt=e=>e.layout.layoutType,hx=()=>Te(lt),A9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},JT=br({name:"legend",initialState:A9,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Qa(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:mE,setLegendSettings:T9,addLegendPayload:ZT,removeLegendPayload:eP}=JT.actions,P9=JT.reducer,M9=["contextPayload"];function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D0.apply(null,arguments)}function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(n),!0).forEach(function(r){mx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mx(e,t,n){return(t=R9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I9(e,t){if(e==null)return{};var n,r,i=L9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function L9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function $9(e){return e.value}function z9(e){var{contextPayload:t}=e,n=I9(e,M9),r=mT(t,e.payloadUniqBy,$9),i=Tl(Tl({},n),{},{payload:r});return b.isValidElement(e.content)?b.cloneElement(e.content,i):typeof e.content=="function"?b.createElement(e.content,i):b.createElement(Zb,i)}function U9(e,t,n,r,i,s){var{layout:l,align:d,verticalAlign:f}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=d==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((i||0)-s.height)/2}:m=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Tl(Tl({},h),m)}function q9(e){var t=qt();return b.useEffect(()=>{t(T9(e))},[t,e]),null}function B9(e){var t=qt();return b.useEffect(()=>(t(mE(e)),()=>{t(mE({width:0,height:0}))}),[t,e]),null}function F9(e){var t=K7(),n=iq(),r=k9(),{width:i,height:s,wrapperStyle:l,portal:d}=e,[f,h]=bT([t]),m=dx(),g=fx();if(m==null||g==null)return null;var v=m-(r.left||0)-(r.right||0),x=Su.getWidthOrHeight(e.layout,s,i,v),j=d?l:Tl(Tl({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||s||"auto"},U9(l,e,r,m,g,f)),l),_=d??n;if(_==null)return null;var S=b.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:h},b.createElement(q9,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),b.createElement(B9,{width:f.width,height:f.height}),b.createElement(z9,D0({},e,x,{margin:r,chartWidth:m,chartHeight:g,contextPayload:t})));return gk.createPortal(S,_)}class Su extends b.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Pe(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return b.createElement(F9,this.props)}}mx(Su,"displayName","Legend");mx(Su,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function py(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(r){H9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H9(e,t,n){return(t=K9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=G9(e,"string");return typeof t=="symbol"?t:t+""}function G9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y9(e){return Array.isArray(e)&&ba(e[0])&&ba(e[1])?e.join(" ~ "):e}var V9=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:d,wrapperClassName:f,labelClassName:h,label:m,labelFormatter:g,accessibilityLayer:v=!1}=e,x=()=>{if(s&&s.length){var A={padding:0,margin:0},R=(d?um(s,d):s).map((D,$)=>{if(D.type==="none")return null;var G=D.formatter||l||Y9,{value:K,name:B}=D,L=K,V=B;if(G){var H=G(K,B,D,$,s);if(Array.isArray(H))[L,V]=H;else if(H!=null)L=H;else return null}var se=py({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:se},ba(V)?b.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ba(V)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},L),b.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:A},R)}return null},j=py({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=py({margin:0},i),S=!xn(m),N=S?m:"",E=vt("recharts-default-tooltip",f),C=vt("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(N=g(m,s));var k=v?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",I0({className:E,style:j},k),b.createElement("p",{className:C,style:_},b.isValidElement(N)?N:"".concat(N)),x())},Wc="recharts-tooltip-wrapper",W9={visibility:"hidden"};function X9(e){var{coordinate:t,translateX:n,translateY:r}=e;return vt(Wc,{["".concat(Wc,"-right")]:Pe(n)&&t&&Pe(t.x)&&n>=t.x,["".concat(Wc,"-left")]:Pe(n)&&t&&Pe(t.x)&&n<t.x,["".concat(Wc,"-bottom")]:Pe(r)&&t&&Pe(t.y)&&r>=t.y,["".concat(Wc,"-top")]:Pe(r)&&t&&Pe(t.y)&&r<t.y})}function vE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:d,viewBox:f,viewBoxDimension:h}=e;if(s&&Pe(s[r]))return s[r];var m=n[r]-d-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?m:g;var v=f[r];if(v==null)return 0;if(l[r]){var x=m,j=v;return x<j?Math.max(g,v):Math.max(m,v)}if(h==null)return 0;var _=g+d,S=v+h;return _>S?Math.max(m,v):Math.max(g,v)}function Q9(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function J9(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:d,viewBox:f}=e,h,m,g;return l.height>0&&l.width>0&&n?(m=vE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),g=vE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=Q9({translateX:m,translateY:g,useTranslate3d:d})):h=W9,{cssProperties:h,cssClasses:X9({translateX:m,translateY:g,coordinate:n})}}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(r){L0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L0(e,t,n){return(t=Z9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z9(e){var t=eF(e,"string");return typeof t=="symbol"?t:t+""}function eF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tF extends b.PureComponent{constructor(){super(...arguments),L0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),L0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:d,isAnimationActive:f,offset:h,position:m,reverseDirection:g,useTranslate3d:v,viewBox:x,wrapperStyle:j,lastBoundingBox:_,innerRef:S,hasPortalFromProps:N}=this.props,{cssClasses:E,cssProperties:C}=J9({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:{height:_.height,width:_.width},useTranslate3d:v,viewBox:x}),k=N?{}:Rf(Rf({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),A=Rf(Rf({},k),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},j);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:A,ref:S},s)}}var nF=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),fo={devToolsEnabled:!1,isSsr:nF()},tP=()=>Te(e=>e.rootProps.accessibilityLayer);function yr(e){return Number.isFinite(e)}function Pl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$0.apply(null,arguments)}function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(n),!0).forEach(function(r){rF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rF(e,t,n){return(t=aF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aF(e){var t=iF(e,"string");return typeof t=="symbol"?t:t+""}function iF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wE={curveBasisClosed:Sq,curveBasisOpen:Nq,curveBasis:jq,curveBumpX:cq,curveBumpY:uq,curveLinearClosed:Eq,curveLinear:lm,curveMonotoneX:Oq,curveMonotoneY:Cq,curveNatural:kq,curveStep:Aq,curveStepAfter:Pq,curveStepBefore:Tq},Df=e=>yr(e.x)&&yr(e.y),Xc=e=>e.x,Qc=e=>e.y,sF=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(qu(e));return(n==="curveMonotone"||n==="curveBump")&&t?wE["".concat(n).concat(t==="vertical"?"Y":"X")]:wE[n]||lm},oF=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=sF(t,i),d=s?n.filter(Df):n,f;if(Array.isArray(r)){var h=s?r.filter(g=>Df(g)):r,m=d.map((g,v)=>xE(xE({},g),{},{base:h[v]}));return i==="vertical"?f=Of().y(Qc).x1(Xc).x0(g=>g.base.x):f=Of().x(Xc).y1(Qc).y0(g=>g.base.y),f.defined(Df).curve(l),f(m)}return i==="vertical"&&Pe(r)?f=Of().y(Qc).x1(Xc).x0(r):Pe(r)?f=Of().x(Xc).y1(Qc).y0(r):f=VA().x(Xc).y(Qc),f.defined(Df).curve(l),f(d)},nP=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?oF(e):r;return b.createElement("path",$0({},is(e),WU(e),{className:vt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},lF=["x","y","top","left","width","height","className"];function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z0.apply(null,arguments)}function _E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_E(Object(n),!0).forEach(function(r){uF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uF(e,t,n){return(t=dF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dF(e){var t=fF(e,"string");return typeof t=="symbol"?t:t+""}function fF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hF(e,t){if(e==null)return{};var n,r,i=mF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pF=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),gF=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:d}=e,f=hF(e,lF),h=cF({x:t,y:n,top:r,left:i,width:s,height:l},f);return!Pe(t)||!Pe(n)||!Pe(s)||!Pe(l)||!Pe(r)||!Pe(i)?null:b.createElement("path",z0({},un(h,!0),{className:vt("recharts-cross",d),d:pF(t,n,s,l,r,i)}))};function vF(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){bF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bF(e,t,n){return(t=xF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xF(e){var t=wF(e,"string");return typeof t=="symbol"?t:t+""}function wF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Un(e,t){var n=yF({},e),r=t,i=Object.keys(t),s=i.reduce((l,d)=>(l[d]===void 0&&r[d]!==void 0&&(l[d]=r[d]),l),n);return s}function _F(){}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){jF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jF(e,t,n){return(t=SF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SF(e){var t=NF(e,"string");return typeof t=="symbol"?t:t+""}function NF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),rP=(e,t,n)=>e.map(r=>"".concat(EF(r)," ").concat(t,"ms ").concat(n)).join(","),OF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Nu=(e,t)=>Object.keys(t).reduce((n,r)=>NE(NE({},n),{},{[r]:e(r,t[r])}),{});function EE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EE(Object(n),!0).forEach(function(r){CF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CF(e,t,n){return(t=kF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kF(e){var t=AF(e,"string");return typeof t=="symbol"?t:t+""}function AF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Th=(e,t,n)=>e+(t-e)*n,U0=e=>{var{from:t,to:n}=e;return t!==n},aP=(e,t,n)=>{var r=Nu((i,s)=>{if(U0(s)){var[l,d]=e(s.from,s.to,s.velocity);return An(An({},s),{},{from:l,velocity:d})}return s},t);return n<1?Nu((i,s)=>U0(s)?An(An({},s),{},{velocity:Th(s.velocity,r[i].velocity,n),from:Th(s.from,r[i].from,n)}):s,t):aP(e,r,n-1)};function TF(e,t,n,r,i,s){var l,d=r.reduce((v,x)=>An(An({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),f=()=>Nu((v,x)=>x.from,d),h=()=>!Object.values(d).filter(U0).length,m=null,g=v=>{l||(l=v);var x=v-l,j=x/n.dt;d=aP(n,d,j),i(An(An(An({},e),t),f())),l=v,h()||(m=s.setTimeout(g))};return()=>(m=s.setTimeout(g),()=>{m()})}function PF(e,t,n,r,i,s,l){var d=null,f=i.reduce((g,v)=>An(An({},g),{},{[v]:[e[v],t[v]]}),{}),h,m=g=>{h||(h=g);var v=(g-h)/r,x=Nu((_,S)=>Th(...S,n(v)),f);if(s(An(An(An({},e),t),x)),v<1)d=l.setTimeout(m);else{var j=Nu((_,S)=>Th(...S,n(1)),f);s(An(An(An({},e),t),j))}};return()=>(d=l.setTimeout(m),()=>{d()})}const MF=(e,t,n,r,i,s)=>{var l=OF(e,t);return n.isStepper===!0?TF(e,t,n,l,i,s):PF(e,t,n,r,l,i,s)};var Ph=1e-4,iP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],sP=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),OE=(e,t)=>n=>{var r=iP(e,t);return sP(r,n)},RF=(e,t)=>n=>{var r=iP(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return sP(i,n)},CE=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(j=>parseFloat(j)))}}else l.length===4&&([t,r,n,i]=l);var h=OE(t,n),m=OE(r,i),g=RF(t,n),v=j=>j>1?1:j<0?0:j,x=j=>{for(var _=j>1?1:j,S=_,N=0;N<8;++N){var E=h(S)-_,C=g(S);if(Math.abs(E-_)<Ph||C<Ph)return m(S);S=v(S-E/C)}return m(S)};return x.isStepper=!1,x},DF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,d,f)=>{var h=-(l-d)*n,m=f*r,g=f+(h-m)*i/1e3,v=f*i/1e3+l;return Math.abs(v-d)<Ph&&Math.abs(g)<Ph?[d,0]:[v,g]};return s.isStepper=!0,s.dt=i,s},IF=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CE(e);case"spring":return DF();default:if(e.split("(")[0]==="cubic-bezier")return CE(e)}return typeof e=="function"?e:null};function LF(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var d=l,[f,...h]=d;if(typeof f=="number"){i=e.setTimeout(s.bind(null,h),f);return}s(f),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class $F{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function zF(){return LF(new $F)}var UF=b.createContext(zF);function qF(e,t){var n=b.useContext(UF);return b.useMemo(()=>t??n(e),[e,t,n])}var BF={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},kE={t:0},gy={t:1};function wm(e){var t=Un(e,BF),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:d,onAnimationStart:f,children:h}=t,m=qF(t.animationId,t.animationManager),[g,v]=b.useState(n?kE:gy),x=b.useRef(null);return b.useEffect(()=>{n||v(gy)},[n]),b.useEffect(()=>{if(!n||!r)return _F;var j=MF(kE,gy,IF(s),i,v,m.getTimeoutController()),_=()=>{x.current=j()};return m.start([f,l,_,i,d]),()=>{m.stop(),x.current&&x.current(),d()}},[n,r,i,s,l,f,d,m]),h(g.t)}function _m(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=b.useRef(wu(t)),r=b.useRef(e);return r.current!==e&&(n.current=wu(t),r.current=e),n.current}function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(n),!0).forEach(function(r){FF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FF(e,t,n){return(t=HF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HF(e){var t=KF(e,"string");return typeof t=="symbol"?t:t+""}function KF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mh.apply(null,arguments)}var PE=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,d=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=i[g]>s?s:i[g];h="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(f,",").concat(e+d*m[0],",").concat(t)),h+="L ".concat(e+n-d*m[1],",").concat(t),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+l*m[1])),h+="L ".concat(e+n,",").concat(t+r-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(f,`,
        `).concat(e+n-d*m[2],",").concat(t+r)),h+="L ".concat(e+d*m[3],",").concat(t+r),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-l*m[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);h="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+d*x,",").concat(t,`
            L `).concat(e+n-d*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n-d*x,",").concat(t+r,`
            L `).concat(e+d*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},GF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oP=e=>{var t=Un(e,GF),n=b.useRef(null),[r,i]=b.useState(-1);b.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:s,y:l,width:d,height:f,radius:h,className:m}=t,{animationEasing:g,animationDuration:v,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:_}=t,S=b.useRef(d),N=b.useRef(f),E=b.useRef(s),C=b.useRef(l),k=b.useMemo(()=>({x:s,y:l,width:d,height:f,radius:h}),[s,l,d,f,h]),A=_m(k,"rectangle-");if(s!==+s||l!==+l||d!==+d||f!==+f||d===0||f===0)return null;var R=vt("recharts-rectangle",m);if(!_)return b.createElement("path",Mh({},un(t,!0),{className:R,d:PE(s,l,d,f,h)}));var D=S.current,$=N.current,G=E.current,K=C.current,B="0px ".concat(r===-1?1:r,"px"),L="".concat(r,"px 0px"),V=rP(["strokeDasharray"],v,typeof g=="string"?g:void 0);return b.createElement(wm,{animationId:A,key:A,canBegin:r>0,duration:v,easing:g,isActive:_,begin:x},H=>{var se=Tn(D,d,H),M=Tn($,f,H),z=Tn(G,s,H),q=Tn(K,l,H);n.current&&(S.current=se,N.current=M,E.current=z,C.current=q);var J;return j?H>0?J={transition:V,strokeDasharray:L}:J={strokeDasharray:B}:J={strokeDasharray:L},b.createElement("path",Mh({},un(t,!0),{className:R,d:PE(z,q,se,M,h),ref:n,style:TE(TE({},J),t.style)}))})};function lP(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=nn(t,n,r,i),d=nn(t,n,r,s);return{points:[l,d],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q0.apply(null,arguments)}var YF=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},If=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:d,cornerIsExternal:f}=e,h=d*(l?1:-1)+r,m=Math.asin(d/h)/Ah,g=f?i:i+s*m,v=nn(t,n,h,g),x=nn(t,n,r,g),j=f?i-s*m:i,_=nn(t,n,h*Math.cos(m*Ah),j);return{center:v,circleTangency:x,lineTangency:_,theta:m}},cP=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,d=YF(s,l),f=s+d,h=nn(t,n,i,s),m=nn(t,n,i,f),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>f),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var v=nn(t,n,r,s),x=nn(t,n,r,f);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},VF=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:d,startAngle:f,endAngle:h}=e,m=bn(h-f),{circleTangency:g,lineTangency:v,theta:x}=If({cx:t,cy:n,radius:i,angle:f,sign:m,cornerRadius:s,cornerIsExternal:d}),{circleTangency:j,lineTangency:_,theta:S}=If({cx:t,cy:n,radius:i,angle:h,sign:-m,cornerRadius:s,cornerIsExternal:d}),N=d?Math.abs(f-h):Math.abs(f-h)-x-S;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):cP({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(_.x,",").concat(_.y,`
  `);if(r>0){var{circleTangency:C,lineTangency:k,theta:A}=If({cx:t,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),{circleTangency:R,lineTangency:D,theta:$}=If({cx:t,cy:n,radius:r,angle:h,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),G=d?Math.abs(f-h):Math.abs(f-h)-A-$;if(G<0&&s===0)return"".concat(E,"L").concat(t,",").concat(n,"Z");E+="L".concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(G>180),",").concat(+(m>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,"Z")}else E+="L".concat(t,",").concat(n,"Z");return E},WF={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uP=e=>{var t=Un(e,WF),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:m,className:g}=t;if(s<i||h===m)return null;var v=vt("recharts-sector",g),x=s-i,j=Dn(l,x,0,!0),_;return j>0&&Math.abs(h-m)<360?_=VF({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(j,x/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:h,endAngle:m}):_=cP({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:m}),b.createElement("path",q0({},un(t,!0),{className:v,d:_}))};function XF(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:d,cy:f,innerRadius:h,outerRadius:m,angle:g}=t,v=nn(d,f,h,g),x=nn(d,f,m,g);r=v.x,i=v.y,s=x.x,l=x.y}else return lP(t);return[{x:r,y:i},{x:s,y:l}]}var vy={},yy={},by={},ME;function QF(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gT();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(by)),by}var RE;function JF(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QF();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(yy)),yy}var DE;function ZF(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vT(),n=JF();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const d=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(d);for(let h=0;h<d;h++)f[h]=i,i+=l;return f}e.range=r})(vy)),vy}var xy,IE;function eH(){return IE||(IE=1,xy=ZF().range),xy}var tH=eH();const dP=aa(tH);function Zi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function px(e){let t,n,r;e.length!==2?(t=Zi,n=(d,f)=>Zi(e(d),f),r=(d,f)=>e(d)-f):(t=e===Zi||e===nH?e:rH,n=e,r=e);function i(d,f,h=0,m=d.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;n(d[g],f)<0?h=g+1:m=g}while(h<m)}return h}function s(d,f,h=0,m=d.length){if(h<m){if(t(f,f)!==0)return m;do{const g=h+m>>>1;n(d[g],f)<=0?h=g+1:m=g}while(h<m)}return h}function l(d,f,h=0,m=d.length){const g=i(d,f,h,m-1);return g>h&&r(d[g-1],f)>-r(d[g],f)?g-1:g}return{left:i,center:l,right:s}}function rH(){return 0}function fP(e){return e===null?NaN:+e}function*aH(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const iH=px(Zi),Gu=iH.right;px(fP).center;class LE extends Map{constructor(t,n=lH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get($E(this,t))}has(t){return super.has($E(this,t))}set(t,n){return super.set(sH(this,t),n)}delete(t){return super.delete(oH(this,t))}}function $E({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function sH({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function oH({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function lH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cH(e=Zi){if(e===Zi)return hP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function hP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uH=Math.sqrt(50),dH=Math.sqrt(10),fH=Math.sqrt(2);function Rh(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=uH?10:s>=dH?5:s>=fH?2:1;let d,f,h;return i<0?(h=Math.pow(10,-i)/l,d=Math.round(e*h),f=Math.round(t*h),d/h<e&&++d,f/h>t&&--f,h=-h):(h=Math.pow(10,i)*l,d=Math.round(e/h),f=Math.round(t/h),d*h<e&&++d,f*h>t&&--f),f<d&&.5<=n&&n<2?Rh(e,t,n*2):[d,f,h]}function B0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?Rh(t,e,n):Rh(e,t,n);if(!(s>=i))return[];const d=s-i+1,f=new Array(d);if(r)if(l<0)for(let h=0;h<d;++h)f[h]=(s-h)/-l;else for(let h=0;h<d;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<d;++h)f[h]=(i+h)/-l;else for(let h=0;h<d;++h)f[h]=(i+h)*l;return f}function F0(e,t,n){return t=+t,e=+e,n=+n,Rh(e,t,n)[2]}function H0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?F0(t,e,n):F0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function zE(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function UE(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function mP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?hP:cH(i);r>n;){if(r-n>600){const f=r-n+1,h=t-n+1,m=Math.log(f),g=.5*Math.exp(2*m/3),v=.5*Math.sqrt(m*g*(f-g)/f)*(h-f/2<0?-1:1),x=Math.max(n,Math.floor(t-h*g/f+v)),j=Math.min(r,Math.floor(t+(f-h)*g/f+v));mP(e,t,x,j,i)}const s=e[t];let l=n,d=r;for(Jc(e,n,t),i(e[r],s)>0&&Jc(e,n,r);l<d;){for(Jc(e,l,d),++l,--d;i(e[l],s)<0;)++l;for(;i(e[d],s)>0;)--d}i(e[n],s)===0?Jc(e,n,d):(++d,Jc(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}return e}function Jc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hH(e,t,n){if(e=Float64Array.from(aH(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return UE(e);if(t>=1)return zE(e);var r,i=(r-1)*t,s=Math.floor(i),l=zE(mP(e,s).subarray(0,s+1)),d=UE(e.subarray(s+1));return l+(d-l)*(i-s)}}function mH(e,t,n=fP){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),d=+n(e[s+1],s+1,e);return l+(d-l)*(i-s)}}function pH(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Br(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ci(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const K0=Symbol("implicit");function gx(){var e=new LE,t=[],n=[],r=K0;function i(s){let l=e.get(s);if(l===void 0){if(r!==K0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new LE;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return gx(t,n).unknown(r)},Br.apply(i,arguments),i}function vx(){var e=gx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,d=!1,f=0,h=0,m=.5;delete e.unknown;function g(){var v=t().length,x=i<r,j=x?i:r,_=x?r:i;s=(_-j)/Math.max(1,v-f+h*2),d&&(s=Math.floor(s)),j+=(_-j-s*(v-f))*m,l=s*(1-f),d&&(j=Math.round(j),l=Math.round(l));var S=pH(v).map(function(N){return j+s*N});return n(x?S.reverse():S)}return e.domain=function(v){return arguments.length?(t(v),g()):t()},e.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,d=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(v){return arguments.length?(d=!!v,g()):d},e.padding=function(v){return arguments.length?(f=Math.min(1,h=+v),g()):f},e.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),g()):f},e.paddingOuter=function(v){return arguments.length?(h=+v,g()):h},e.align=function(v){return arguments.length?(m=Math.max(0,Math.min(1,v)),g()):m},e.copy=function(){return vx(t(),[r,i]).round(d).paddingInner(f).paddingOuter(h).align(m)},Br.apply(g(),arguments)}function pP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pP(t())},e}function gH(){return pP(vx.apply(null,arguments).paddingInner(1))}function yx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yu(){}var Eu=.7,Dh=1/Eu,Sl="\\s*([+-]?\\d+)\\s*",Ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vH=/^#([0-9a-f]{3,8})$/,yH=new RegExp(`^rgb\\(${Sl},${Sl},${Sl}\\)$`),bH=new RegExp(`^rgb\\(${ya},${ya},${ya}\\)$`),xH=new RegExp(`^rgba\\(${Sl},${Sl},${Sl},${Ou}\\)$`),wH=new RegExp(`^rgba\\(${ya},${ya},${ya},${Ou}\\)$`),_H=new RegExp(`^hsl\\(${Ou},${ya},${ya}\\)$`),jH=new RegExp(`^hsla\\(${Ou},${ya},${ya},${Ou}\\)$`),qE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yx(Yu,Cu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:BE,formatHex:BE,formatHex8:SH,formatHsl:NH,formatRgb:FE,toString:FE});function BE(){return this.rgb().formatHex()}function SH(){return this.rgb().formatHex8()}function NH(){return vP(this).formatHsl()}function FE(){return this.rgb().formatRgb()}function Cu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?HE(t):n===3?new Jn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yH.exec(e))?new Jn(t[1],t[2],t[3],1):(t=bH.exec(e))?new Jn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xH.exec(e))?Lf(t[1],t[2],t[3],t[4]):(t=wH.exec(e))?Lf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_H.exec(e))?YE(t[1],t[2]/100,t[3]/100,1):(t=jH.exec(e))?YE(t[1],t[2]/100,t[3]/100,t[4]):qE.hasOwnProperty(e)?HE(qE[e]):e==="transparent"?new Jn(NaN,NaN,NaN,0):null}function HE(e){return new Jn(e>>16&255,e>>8&255,e&255,1)}function Lf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jn(e,t,n,r)}function EH(e){return e instanceof Yu||(e=Cu(e)),e?(e=e.rgb(),new Jn(e.r,e.g,e.b,e.opacity)):new Jn}function G0(e,t,n,r){return arguments.length===1?EH(e):new Jn(e,t,n,r??1)}function Jn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yx(Jn,G0,gP(Yu,{brighter(e){return e=e==null?Dh:Math.pow(Dh,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new Jn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jn(eo(this.r),eo(this.g),eo(this.b),Ih(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KE,formatHex:KE,formatHex8:OH,formatRgb:GE,toString:GE}));function KE(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}`}function OH(){return`#${Vs(this.r)}${Vs(this.g)}${Vs(this.b)}${Vs((isNaN(this.opacity)?1:this.opacity)*255)}`}function GE(){const e=Ih(this.opacity);return`${e===1?"rgb(":"rgba("}${eo(this.r)}, ${eo(this.g)}, ${eo(this.b)}${e===1?")":`, ${e})`}`}function Ih(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function eo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vs(e){return e=eo(e),(e<16?"0":"")+e.toString(16)}function YE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ea(e,t,n,r)}function vP(e){if(e instanceof ea)return new ea(e.h,e.s,e.l,e.opacity);if(e instanceof Yu||(e=Cu(e)),!e)return new ea;if(e instanceof ea)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,d=s-i,f=(s+i)/2;return d?(t===s?l=(n-r)/d+(n<r)*6:n===s?l=(r-t)/d+2:l=(t-n)/d+4,d/=f<.5?s+i:2-s-i,l*=60):d=f>0&&f<1?0:l,new ea(l,d,f,e.opacity)}function CH(e,t,n,r){return arguments.length===1?vP(e):new ea(e,t,n,r??1)}function ea(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yx(ea,CH,gP(Yu,{brighter(e){return e=e==null?Dh:Math.pow(Dh,e),new ea(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new ea(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Jn(wy(e>=240?e-240:e+120,i,r),wy(e,i,r),wy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ea(VE(this.h),$f(this.s),$f(this.l),Ih(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ih(this.opacity);return`${e===1?"hsl(":"hsla("}${VE(this.h)}, ${$f(this.s)*100}%, ${$f(this.l)*100}%${e===1?")":`, ${e})`}`}}));function VE(e){return e=(e||0)%360,e<0?e+360:e}function $f(e){return Math.max(0,Math.min(1,e||0))}function wy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bx=e=>()=>e;function kH(e,t){return function(n){return e+n*t}}function AH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TH(e){return(e=+e)==1?yP:function(t,n){return n-t?AH(t,n,e):bx(isNaN(t)?n:t)}}function yP(e,t){var n=t-e;return n?kH(e,n):bx(isNaN(e)?t:e)}const WE=(function e(t){var n=TH(t);function r(i,s){var l=n((i=G0(i)).r,(s=G0(s)).r),d=n(i.g,s.g),f=n(i.b,s.b),h=yP(i.opacity,s.opacity);return function(m){return i.r=l(m),i.g=d(m),i.b=f(m),i.opacity=h(m),i+""}}return r.gamma=e,r})(1);function PH(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function MH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RH(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Gl(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(d){for(l=0;l<r;++l)s[l]=i[l](d);return s}}function DH(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Lh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function IH(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Gl(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Y0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_y=new RegExp(Y0.source,"g");function LH(e){return function(){return e}}function $H(e){return function(t){return e(t)+""}}function zH(e,t){var n=Y0.lastIndex=_y.lastIndex=0,r,i,s,l=-1,d=[],f=[];for(e=e+"",t=t+"";(r=Y0.exec(e))&&(i=_y.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),d[l]?d[l]+=s:d[++l]=s),(r=r[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,f.push({i:l,x:Lh(r,i)})),n=_y.lastIndex;return n<t.length&&(s=t.slice(n),d[l]?d[l]+=s:d[++l]=s),d.length<2?f[0]?$H(f[0].x):LH(t):(t=f.length,function(h){for(var m=0,g;m<t;++m)d[(g=f[m]).i]=g.x(h);return d.join("")})}function Gl(e,t){var n=typeof t,r;return t==null||n==="boolean"?bx(t):(n==="number"?Lh:n==="string"?(r=Cu(t))?(t=r,WE):zH:t instanceof Cu?WE:t instanceof Date?DH:MH(t)?PH:Array.isArray(t)?RH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?IH:Lh)(e,t)}function xx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function UH(e,t){t===void 0&&(t=e,e=Gl);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var d=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[d](l-d)}}function qH(e){return function(){return e}}function $h(e){return+e}var XE=[0,1];function zn(e){return e}function V0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qH(isNaN(t)?NaN:.5)}function BH(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function FH(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=V0(i,r),s=n(l,s)):(r=V0(r,i),s=n(s,l)),function(d){return s(r(d))}}function HH(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=V0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(d){var f=Gu(e,d,1,r)-1;return s[f](i[f](d))}}function Vu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jm(){var e=XE,t=XE,n=Gl,r,i,s,l=zn,d,f,h;function m(){var v=Math.min(e.length,t.length);return l!==zn&&(l=BH(e[0],e[v-1])),d=v>2?HH:FH,f=h=null,g}function g(v){return v==null||isNaN(v=+v)?s:(f||(f=d(e.map(r),t,n)))(r(l(v)))}return g.invert=function(v){return l(i((h||(h=d(t,e.map(r),Lh)))(v)))},g.domain=function(v){return arguments.length?(e=Array.from(v,$h),m()):e.slice()},g.range=function(v){return arguments.length?(t=Array.from(v),m()):t.slice()},g.rangeRound=function(v){return t=Array.from(v),n=xx,m()},g.clamp=function(v){return arguments.length?(l=v?!0:zn,m()):l!==zn},g.interpolate=function(v){return arguments.length?(n=v,m()):n},g.unknown=function(v){return arguments.length?(s=v,g):s},function(v,x){return r=v,i=x,m()}}function wx(){return jm()(zn,zn)}function KH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ml(e){return e=zh(Math.abs(e)),e?e[1]:NaN}function GH(e,t){return function(n,r){for(var i=n.length,s=[],l=0,d=e[0],f=0;i>0&&d>0&&(f+d+1>r&&(d=Math.max(1,r-f)),s.push(n.substring(i-=d,i+d)),!((f+=d+1)>r));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function YH(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var VH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ku(e){if(!(t=VH.exec(e)))throw new Error("invalid format: "+e);var t;return new _x({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ku.prototype=_x.prototype;function _x(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WH(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var bP;function XH(e,t){var n=zh(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(bP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+zh(e,Math.max(0,t+s-1))[0]}function QE(e,t){var n=zh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const JE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:KH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>QE(e*100,t),r:QE,s:XH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ZE(e){return e}var eO=Array.prototype.map,tO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function QH(e){var t=e.grouping===void 0||e.thousands===void 0?ZE:GH(eO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ZE:YH(eO.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(g){g=ku(g);var v=g.fill,x=g.align,j=g.sign,_=g.symbol,S=g.zero,N=g.width,E=g.comma,C=g.precision,k=g.trim,A=g.type;A==="n"?(E=!0,A="g"):JE[A]||(C===void 0&&(C=12),k=!0,A="g"),(S||v==="0"&&x==="=")&&(S=!0,v="0",x="=");var R=_==="$"?n:_==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",D=_==="$"?r:/[%p]/.test(A)?l:"",$=JE[A],G=/[defgprs%]/.test(A);C=C===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function K(B){var L=R,V=D,H,se,M;if(A==="c")V=$(B)+V,B="";else{B=+B;var z=B<0||1/B<0;if(B=isNaN(B)?f:$(Math.abs(B),C),k&&(B=WH(B)),z&&+B==0&&j!=="+"&&(z=!1),L=(z?j==="("?j:d:j==="-"||j==="("?"":j)+L,V=(A==="s"?tO[8+bP/3]:"")+V+(z&&j==="("?")":""),G){for(H=-1,se=B.length;++H<se;)if(M=B.charCodeAt(H),48>M||M>57){V=(M===46?i+B.slice(H+1):B.slice(H))+V,B=B.slice(0,H);break}}}E&&!S&&(B=t(B,1/0));var q=L.length+B.length+V.length,J=q<N?new Array(N-q+1).join(v):"";switch(E&&S&&(B=t(J+B,J.length?N-V.length:1/0),J=""),x){case"<":B=L+B+V+J;break;case"=":B=L+J+B+V;break;case"^":B=J.slice(0,q=J.length>>1)+L+B+V+J.slice(q);break;default:B=J+L+B+V;break}return s(B)}return K.toString=function(){return g+""},K}function m(g,v){var x=h((g=ku(g),g.type="f",g)),j=Math.max(-8,Math.min(8,Math.floor(Ml(v)/3)))*3,_=Math.pow(10,-j),S=tO[8+j/3];return function(N){return x(_*N)+S}}return{format:h,formatPrefix:m}}var zf,jx,xP;JH({thousands:",",grouping:[3],currency:["$",""]});function JH(e){return zf=QH(e),jx=zf.format,xP=zf.formatPrefix,zf}function ZH(e){return Math.max(0,-Ml(Math.abs(e)))}function eK(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ml(t)/3)))*3-Ml(Math.abs(e)))}function tK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ml(t)-Ml(e))+1}function wP(e,t,n,r){var i=H0(e,t,n),s;switch(r=ku(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=eK(i,l))&&(r.precision=s),xP(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=tK(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=ZH(i))&&(r.precision=s-(r.type==="%")*2);break}}return jx(r)}function ss(e){var t=e.domain;return e.ticks=function(n){var r=t();return B0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return wP(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],d=r[s],f,h,m=10;for(d<l&&(h=l,l=d,d=h,h=i,i=s,s=h);m-- >0;){if(h=F0(l,d,n),h===f)return r[i]=l,r[s]=d,t(r);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;f=h}return e},e}function _P(){var e=wx();return e.copy=function(){return Vu(e,_P())},Br.apply(e,arguments),ss(e)}function jP(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,$h),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return jP(e).unknown(t)},e=arguments.length?Array.from(e,$h):[0,1],ss(n)}function SP(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function nO(e){return Math.log(e)}function rO(e){return Math.exp(e)}function nK(e){return-Math.log(-e)}function rK(e){return-Math.exp(-e)}function aK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function iK(e){return e===10?aK:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aO(e){return(t,n)=>-e(-t,n)}function Sx(e){const t=e(nO,rO),n=t.domain;let r=10,i,s;function l(){return i=sK(r),s=iK(r),n()[0]<0?(i=aO(i),s=aO(s),e(nK,rK)):e(nO,rO),t}return t.base=function(d){return arguments.length?(r=+d,l()):r},t.domain=function(d){return arguments.length?(n(d),l()):n()},t.ticks=d=>{const f=n();let h=f[0],m=f[f.length-1];const g=m<h;g&&([h,m]=[m,h]);let v=i(h),x=i(m),j,_;const S=d==null?10:+d;let N=[];if(!(r%1)&&x-v<S){if(v=Math.floor(v),x=Math.ceil(x),h>0){for(;v<=x;++v)for(j=1;j<r;++j)if(_=v<0?j/s(-v):j*s(v),!(_<h)){if(_>m)break;N.push(_)}}else for(;v<=x;++v)for(j=r-1;j>=1;--j)if(_=v>0?j/s(-v):j*s(v),!(_<h)){if(_>m)break;N.push(_)}N.length*2<S&&(N=B0(h,m,S))}else N=B0(v,x,Math.min(x-v,S)).map(s);return g?N.reverse():N},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=ku(f)).precision==null&&(f.trim=!0),f=jx(f)),d===1/0)return f;const h=Math.max(1,r*d/t.ticks().length);return m=>{let g=m/s(Math.round(i(m)));return g*r<r-.5&&(g*=r),g<=h?f(m):""}},t.nice=()=>n(SP(n(),{floor:d=>s(Math.floor(i(d))),ceil:d=>s(Math.ceil(i(d)))})),t}function NP(){const e=Sx(jm()).domain([1,10]);return e.copy=()=>Vu(e,NP()).base(e.base()),Br.apply(e,arguments),e}function iO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Nx(e){var t=1,n=e(iO(t),sO(t));return n.constant=function(r){return arguments.length?e(iO(t=+r),sO(t)):t},ss(n)}function EP(){var e=Nx(jm());return e.copy=function(){return Vu(e,EP()).constant(e.constant())},Br.apply(e,arguments)}function oO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lK(e){return e<0?-e*e:e*e}function Ex(e){var t=e(zn,zn),n=1;function r(){return n===1?e(zn,zn):n===.5?e(oK,lK):e(oO(n),oO(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ss(t)}function Ox(){var e=Ex(jm());return e.copy=function(){return Vu(e,Ox()).exponent(e.exponent())},Br.apply(e,arguments),e}function cK(){return Ox.apply(null,arguments).exponent(.5)}function lO(e){return Math.sign(e)*e*e}function uK(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function OP(){var e=wx(),t=[0,1],n=!1,r;function i(s){var l=uK(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(lO(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,$h)).map(lO)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return OP(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Br.apply(i,arguments),ss(i)}function CP(){var e=[],t=[],n=[],r;function i(){var l=0,d=Math.max(1,t.length);for(n=new Array(d-1);++l<d;)n[l-1]=mH(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Gu(n,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Zi),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return CP().domain(e).range(t).unknown(r)},Br.apply(s,arguments)}function kP(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[Gu(r,f,0,n)]:s}function d(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,d()):i.slice()},l.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return kP().domain([e,t]).range(i).unknown(s)},Br.apply(ss(l),arguments)}function AP(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Gu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return AP().domain(e).range(t).unknown(n)},Br.apply(i,arguments)}const jy=new Date,Sy=new Date;function fn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),d=i.ceil(s);return s-l<d-s?l:d},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,d)=>{const f=[];if(s=i.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return f;let h;do f.push(h=new Date(+s)),t(s,d),e(s);while(h<s&&s<l);return f},i.filter=s=>fn(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(jy.setTime(+s),Sy.setTime(+l),e(jy),e(Sy),Math.floor(n(jy,Sy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const Uh=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uh);Uh.range;const Ya=1e3,Lr=Ya*60,Va=Lr*60,ai=Va*24,Cx=ai*7,cO=ai*30,Ny=ai*365,Ws=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ya)},(e,t)=>(t-e)/Ya,e=>e.getUTCSeconds());Ws.range;const kx=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ya)},(e,t)=>{e.setTime(+e+t*Lr)},(e,t)=>(t-e)/Lr,e=>e.getMinutes());kx.range;const Ax=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lr)},(e,t)=>(t-e)/Lr,e=>e.getUTCMinutes());Ax.range;const Tx=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ya-e.getMinutes()*Lr)},(e,t)=>{e.setTime(+e+t*Va)},(e,t)=>(t-e)/Va,e=>e.getHours());Tx.range;const Px=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Va)},(e,t)=>(t-e)/Va,e=>e.getUTCHours());Px.range;const Wu=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lr)/ai,e=>e.getDate()-1);Wu.range;const Sm=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ai,e=>e.getUTCDate()-1);Sm.range;const TP=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ai,e=>Math.floor(e/ai));TP.range;function ho(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lr)/Cx)}const Nm=ho(0),qh=ho(1),dK=ho(2),fK=ho(3),Rl=ho(4),hK=ho(5),mK=ho(6);Nm.range;qh.range;dK.range;fK.range;Rl.range;hK.range;mK.range;function mo(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Cx)}const Em=mo(0),Bh=mo(1),pK=mo(2),gK=mo(3),Dl=mo(4),vK=mo(5),yK=mo(6);Em.range;Bh.range;pK.range;gK.range;Dl.range;vK.range;yK.range;const Mx=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Mx.range;const Rx=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Rx.range;const ii=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ii.range;const si=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});si.range;function PP(e,t,n,r,i,s){const l=[[Ws,1,Ya],[Ws,5,5*Ya],[Ws,15,15*Ya],[Ws,30,30*Ya],[s,1,Lr],[s,5,5*Lr],[s,15,15*Lr],[s,30,30*Lr],[i,1,Va],[i,3,3*Va],[i,6,6*Va],[i,12,12*Va],[r,1,ai],[r,2,2*ai],[n,1,Cx],[t,1,cO],[t,3,3*cO],[e,1,Ny]];function d(h,m,g){const v=m<h;v&&([h,m]=[m,h]);const x=g&&typeof g.range=="function"?g:f(h,m,g),j=x?x.range(h,+m+1):[];return v?j.reverse():j}function f(h,m,g){const v=Math.abs(m-h)/g,x=px(([,,S])=>S).right(l,v);if(x===l.length)return e.every(H0(h/Ny,m/Ny,g));if(x===0)return Uh.every(Math.max(H0(h,m,g),1));const[j,_]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return j.every(_)}return[d,f]}const[bK,xK]=PP(si,Rx,Em,TP,Px,Ax),[wK,_K]=PP(ii,Mx,Nm,Wu,Tx,kx);function Ey(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Oy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function jK(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,d=e.months,f=e.shortMonths,h=eu(i),m=tu(i),g=eu(s),v=tu(s),x=eu(l),j=tu(l),_=eu(d),S=tu(d),N=eu(f),E=tu(f),C={a:z,A:q,b:J,B:X,c:null,d:pO,e:pO,f:GK,g:nG,G:aG,H:FK,I:HK,j:KK,L:MP,m:YK,M:VK,p:T,q:I,Q:yO,s:bO,S:WK,u:XK,U:QK,V:JK,w:ZK,W:eG,x:null,X:null,y:tG,Y:rG,Z:iG,"%":vO},k={a:U,A:te,b:re,B:ce,c:null,d:gO,e:gO,f:cG,g:bG,G:wG,H:sG,I:oG,j:lG,L:DP,m:uG,M:dG,p:he,q:Ne,Q:yO,s:bO,S:fG,u:hG,U:mG,V:pG,w:gG,W:vG,x:null,X:null,y:yG,Y:xG,Z:_G,"%":vO},A={a:K,A:B,b:L,B:V,c:H,d:hO,e:hO,f:zK,g:fO,G:dO,H:mO,I:mO,j:DK,L:$K,m:RK,M:IK,p:G,q:MK,Q:qK,s:BK,S:LK,u:CK,U:kK,V:AK,w:OK,W:TK,x:se,X:M,y:fO,Y:dO,Z:PK,"%":UK};C.x=R(n,C),C.X=R(r,C),C.c=R(t,C),k.x=R(n,k),k.X=R(r,k),k.c=R(t,k);function R(de,ge){return function(ie){var Q=[],Ce=-1,Re=0,ut=de.length,we,be,ze;for(ie instanceof Date||(ie=new Date(+ie));++Ce<ut;)de.charCodeAt(Ce)===37&&(Q.push(de.slice(Re,Ce)),(be=uO[we=de.charAt(++Ce)])!=null?we=de.charAt(++Ce):be=we==="e"?" ":"0",(ze=ge[we])&&(we=ze(ie,be)),Q.push(we),Re=Ce+1);return Q.push(de.slice(Re,Ce)),Q.join("")}}function D(de,ge){return function(ie){var Q=Zc(1900,void 0,1),Ce=$(Q,de,ie+="",0),Re,ut;if(Ce!=ie.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ge&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Re=Oy(Zc(Q.y,0,1)),ut=Re.getUTCDay(),Re=ut>4||ut===0?Bh.ceil(Re):Bh(Re),Re=Sm.offset(Re,(Q.V-1)*7),Q.y=Re.getUTCFullYear(),Q.m=Re.getUTCMonth(),Q.d=Re.getUTCDate()+(Q.w+6)%7):(Re=Ey(Zc(Q.y,0,1)),ut=Re.getDay(),Re=ut>4||ut===0?qh.ceil(Re):qh(Re),Re=Wu.offset(Re,(Q.V-1)*7),Q.y=Re.getFullYear(),Q.m=Re.getMonth(),Q.d=Re.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),ut="Z"in Q?Oy(Zc(Q.y,0,1)).getUTCDay():Ey(Zc(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(ut+5)%7:Q.w+Q.U*7-(ut+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,Oy(Q)):Ey(Q)}}function $(de,ge,ie,Q){for(var Ce=0,Re=ge.length,ut=ie.length,we,be;Ce<Re;){if(Q>=ut)return-1;if(we=ge.charCodeAt(Ce++),we===37){if(we=ge.charAt(Ce++),be=A[we in uO?ge.charAt(Ce++):we],!be||(Q=be(de,ie,Q))<0)return-1}else if(we!=ie.charCodeAt(Q++))return-1}return Q}function G(de,ge,ie){var Q=h.exec(ge.slice(ie));return Q?(de.p=m.get(Q[0].toLowerCase()),ie+Q[0].length):-1}function K(de,ge,ie){var Q=x.exec(ge.slice(ie));return Q?(de.w=j.get(Q[0].toLowerCase()),ie+Q[0].length):-1}function B(de,ge,ie){var Q=g.exec(ge.slice(ie));return Q?(de.w=v.get(Q[0].toLowerCase()),ie+Q[0].length):-1}function L(de,ge,ie){var Q=N.exec(ge.slice(ie));return Q?(de.m=E.get(Q[0].toLowerCase()),ie+Q[0].length):-1}function V(de,ge,ie){var Q=_.exec(ge.slice(ie));return Q?(de.m=S.get(Q[0].toLowerCase()),ie+Q[0].length):-1}function H(de,ge,ie){return $(de,t,ge,ie)}function se(de,ge,ie){return $(de,n,ge,ie)}function M(de,ge,ie){return $(de,r,ge,ie)}function z(de){return l[de.getDay()]}function q(de){return s[de.getDay()]}function J(de){return f[de.getMonth()]}function X(de){return d[de.getMonth()]}function T(de){return i[+(de.getHours()>=12)]}function I(de){return 1+~~(de.getMonth()/3)}function U(de){return l[de.getUTCDay()]}function te(de){return s[de.getUTCDay()]}function re(de){return f[de.getUTCMonth()]}function ce(de){return d[de.getUTCMonth()]}function he(de){return i[+(de.getUTCHours()>=12)]}function Ne(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ge=R(de+="",C);return ge.toString=function(){return de},ge},parse:function(de){var ge=D(de+="",!1);return ge.toString=function(){return de},ge},utcFormat:function(de){var ge=R(de+="",k);return ge.toString=function(){return de},ge},utcParse:function(de){var ge=D(de+="",!0);return ge.toString=function(){return de},ge}}}var uO={"-":"",_:" ",0:"0"},wn=/^\s*\d+/,SK=/^%/,NK=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function EK(e){return e.replace(NK,"\\$&")}function eu(e){return new RegExp("^(?:"+e.map(EK).join("|")+")","i")}function tu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function OK(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function CK(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function kK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function AK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function TK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function dO(e,t,n){var r=wn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function fO(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function PK(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function MK(e,t,n){var r=wn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function RK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hO(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function DK(e,t,n){var r=wn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mO(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function IK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function LK(e,t,n){var r=wn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $K(e,t,n){var r=wn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zK(e,t,n){var r=wn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function UK(e,t,n){var r=SK.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qK(e,t,n){var r=wn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function BK(e,t,n){var r=wn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pO(e,t){return ot(e.getDate(),t,2)}function FK(e,t){return ot(e.getHours(),t,2)}function HK(e,t){return ot(e.getHours()%12||12,t,2)}function KK(e,t){return ot(1+Wu.count(ii(e),e),t,3)}function MP(e,t){return ot(e.getMilliseconds(),t,3)}function GK(e,t){return MP(e,t)+"000"}function YK(e,t){return ot(e.getMonth()+1,t,2)}function VK(e,t){return ot(e.getMinutes(),t,2)}function WK(e,t){return ot(e.getSeconds(),t,2)}function XK(e){var t=e.getDay();return t===0?7:t}function QK(e,t){return ot(Nm.count(ii(e)-1,e),t,2)}function RP(e){var t=e.getDay();return t>=4||t===0?Rl(e):Rl.ceil(e)}function JK(e,t){return e=RP(e),ot(Rl.count(ii(e),e)+(ii(e).getDay()===4),t,2)}function ZK(e){return e.getDay()}function eG(e,t){return ot(qh.count(ii(e)-1,e),t,2)}function tG(e,t){return ot(e.getFullYear()%100,t,2)}function nG(e,t){return e=RP(e),ot(e.getFullYear()%100,t,2)}function rG(e,t){return ot(e.getFullYear()%1e4,t,4)}function aG(e,t){var n=e.getDay();return e=n>=4||n===0?Rl(e):Rl.ceil(e),ot(e.getFullYear()%1e4,t,4)}function iG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function gO(e,t){return ot(e.getUTCDate(),t,2)}function sG(e,t){return ot(e.getUTCHours(),t,2)}function oG(e,t){return ot(e.getUTCHours()%12||12,t,2)}function lG(e,t){return ot(1+Sm.count(si(e),e),t,3)}function DP(e,t){return ot(e.getUTCMilliseconds(),t,3)}function cG(e,t){return DP(e,t)+"000"}function uG(e,t){return ot(e.getUTCMonth()+1,t,2)}function dG(e,t){return ot(e.getUTCMinutes(),t,2)}function fG(e,t){return ot(e.getUTCSeconds(),t,2)}function hG(e){var t=e.getUTCDay();return t===0?7:t}function mG(e,t){return ot(Em.count(si(e)-1,e),t,2)}function IP(e){var t=e.getUTCDay();return t>=4||t===0?Dl(e):Dl.ceil(e)}function pG(e,t){return e=IP(e),ot(Dl.count(si(e),e)+(si(e).getUTCDay()===4),t,2)}function gG(e){return e.getUTCDay()}function vG(e,t){return ot(Bh.count(si(e)-1,e),t,2)}function yG(e,t){return ot(e.getUTCFullYear()%100,t,2)}function bG(e,t){return e=IP(e),ot(e.getUTCFullYear()%100,t,2)}function xG(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function wG(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dl(e):Dl.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function _G(){return"+0000"}function vO(){return"%"}function yO(e){return+e}function bO(e){return Math.floor(+e/1e3)}var hl,LP,$P;jG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jG(e){return hl=jK(e),LP=hl.format,hl.parse,$P=hl.utcFormat,hl.utcParse,hl}function SG(e){return new Date(e)}function NG(e){return e instanceof Date?+e:+new Date(+e)}function Dx(e,t,n,r,i,s,l,d,f,h){var m=wx(),g=m.invert,v=m.domain,x=h(".%L"),j=h(":%S"),_=h("%I:%M"),S=h("%I %p"),N=h("%a %d"),E=h("%b %d"),C=h("%B"),k=h("%Y");function A(R){return(f(R)<R?x:d(R)<R?j:l(R)<R?_:s(R)<R?S:r(R)<R?i(R)<R?N:E:n(R)<R?C:k)(R)}return m.invert=function(R){return new Date(g(R))},m.domain=function(R){return arguments.length?v(Array.from(R,NG)):v().map(SG)},m.ticks=function(R){var D=v();return e(D[0],D[D.length-1],R??10)},m.tickFormat=function(R,D){return D==null?A:h(D)},m.nice=function(R){var D=v();return(!R||typeof R.range!="function")&&(R=t(D[0],D[D.length-1],R??10)),R?v(SP(D,R)):m},m.copy=function(){return Vu(m,Dx(e,t,n,r,i,s,l,d,f,h))},m}function EG(){return Br.apply(Dx(wK,_K,ii,Mx,Nm,Wu,Tx,kx,Ws,LP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OG(){return Br.apply(Dx(bK,xK,si,Rx,Em,Sm,Px,Ax,Ws,$P).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Om(){var e=0,t=1,n,r,i,s,l=zn,d=!1,f;function h(g){return g==null||isNaN(g=+g)?f:l(i===0?.5:(g=(s(g)-n)*i,d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(l=g,h):l};function m(g){return function(v){var x,j;return arguments.length?([x,j]=v,l=g(x,j),h):[l(0),l(1)]}}return h.range=m(Gl),h.rangeRound=m(xx),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),h}}function os(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zP(){var e=ss(Om()(zn));return e.copy=function(){return os(e,zP())},ci.apply(e,arguments)}function UP(){var e=Sx(Om()).domain([1,10]);return e.copy=function(){return os(e,UP()).base(e.base())},ci.apply(e,arguments)}function qP(){var e=Nx(Om());return e.copy=function(){return os(e,qP()).constant(e.constant())},ci.apply(e,arguments)}function Ix(){var e=Ex(Om());return e.copy=function(){return os(e,Ix()).exponent(e.exponent())},ci.apply(e,arguments)}function CG(){return Ix.apply(null,arguments).exponent(.5)}function BP(){var e=[],t=zn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Gu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Zi),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>hH(e,s/r))},n.copy=function(){return BP(t).domain(e)},ci.apply(n,arguments)}function Cm(){var e=0,t=.5,n=1,r=1,i,s,l,d,f,h=zn,m,g=!1,v;function x(_){return isNaN(_=+_)?v:(_=.5+((_=+m(_))-s)*(r*_<r*s?d:f),h(g?Math.max(0,Math.min(1,_)):_))}x.domain=function(_){return arguments.length?([e,t,n]=_,i=m(e=+e),s=m(t=+t),l=m(n=+n),d=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(_){return arguments.length?(g=!!_,x):g},x.interpolator=function(_){return arguments.length?(h=_,x):h};function j(_){return function(S){var N,E,C;return arguments.length?([N,E,C]=S,h=UH(_,[N,E,C]),x):[h(0),h(.5),h(1)]}}return x.range=j(Gl),x.rangeRound=j(xx),x.unknown=function(_){return arguments.length?(v=_,x):v},function(_){return m=_,i=_(e),s=_(t),l=_(n),d=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function FP(){var e=ss(Cm()(zn));return e.copy=function(){return os(e,FP())},ci.apply(e,arguments)}function HP(){var e=Sx(Cm()).domain([.1,1,10]);return e.copy=function(){return os(e,HP()).base(e.base())},ci.apply(e,arguments)}function KP(){var e=Nx(Cm());return e.copy=function(){return os(e,KP()).constant(e.constant())},ci.apply(e,arguments)}function Lx(){var e=Ex(Cm());return e.copy=function(){return os(e,Lx()).exponent(e.exponent())},ci.apply(e,arguments)}function kG(){return Lx.apply(null,arguments).exponent(.5)}const su=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vx,scaleDiverging:FP,scaleDivergingLog:HP,scaleDivergingPow:Lx,scaleDivergingSqrt:kG,scaleDivergingSymlog:KP,scaleIdentity:jP,scaleImplicit:K0,scaleLinear:_P,scaleLog:NP,scaleOrdinal:gx,scalePoint:gH,scalePow:Ox,scaleQuantile:CP,scaleQuantize:kP,scaleRadial:OP,scaleSequential:zP,scaleSequentialLog:UP,scaleSequentialPow:Ix,scaleSequentialQuantile:BP,scaleSequentialSqrt:CG,scaleSequentialSymlog:qP,scaleSqrt:cK,scaleSymlog:EP,scaleThreshold:AP,scaleTime:EG,scaleUtc:OG,tickFormat:wP},Symbol.toStringTag,{value:"Module"}));var ls=e=>e.chartData,$x=ae([ls],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),zx=(e,t,n,r)=>r?$x(e):ls(e);function Il(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(yr(t)&&yr(n))return!0}return!1}function xO(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function AG(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(yr(n))i=n;else if(typeof n=="function")return;if(yr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Il(l))return l}}function TG(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Il(r))return xO(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,d;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Pe(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&uE.test(i)){var f=uE.exec(i);if(f==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(d=Math.max(...t));else if(Pe(s))d=s;else if(typeof s=="function")try{t!=null&&(d=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&dE.test(s)){var m=dE.exec(s);if(m==null||t==null)d=void 0;else{var g=+m[1];d=t[1]+g}}else d=t==null?void 0:t[1];var v=[l,d];if(Il(v))return t==null?v:xO(v,t,n)}}}var Yl=1e9,PG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qx,It=!0,zr="[DecimalError] ",to=zr+"Invalid argument: ",Ux=zr+"Exponent out of range: ",Vl=Math.floor,Ls=Math.pow,MG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hr,yn=1e7,Pt=7,GP=9007199254740991,Fh=Vl(GP/Pt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ee.comparedTo=Ee.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Pt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ee.dividedBy=Ee.div=function(e){return Ja(this,new this.constructor(e))};Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return Nt(Ja(t,new n(e),0,1),n.precision)};Ee.equals=Ee.eq=function(e){return!this.cmp(e)};Ee.exponent=function(){return rn(this)};Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0};Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1};Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(hr))throw Error(zr+"NaN");if(n.s<1)throw Error(zr+(n.s?"NaN":"-Infinity"));return n.eq(hr)?new r(0):(It=!1,t=Ja(Au(n,s),Au(e,s),s),It=!0,Nt(t,i))};Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WP(t,e):YP(t,(e.s=-e.s,e))};Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(zr+"NaN");return n.s?(It=!1,t=Ja(n,e,0,1).times(e),It=!0,n.minus(t)):Nt(new r(n),i)};Ee.naturalExponential=Ee.exp=function(){return VP(this)};Ee.naturalLogarithm=Ee.ln=function(){return Au(this)};Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YP(t,e):WP(t,(e.s=-e.s,e))};Ee.precision=Ee.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(to+e);if(t=rn(i)+1,r=i.d.length-1,n=r*Pt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,i,s,l,d=this,f=d.constructor;if(d.s<1){if(!d.s)return new f(0);throw Error(zr+"NaN")}for(e=rn(d),It=!1,i=Math.sqrt(+d),i==0||i==1/0?(t=ga(d.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Vl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(Ja(d,s,l+2)).times(.5),ga(s.d).slice(0,l)===(t=ga(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Nt(s,n+1,0),s.times(s).eq(d)){r=s;break}}else if(t!="9999")break;l+=4}return It=!0,Nt(r,n)};Ee.times=Ee.mul=function(e){var t,n,r,i,s,l,d,f,h,m=this,g=m.constructor,v=m.d,x=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,n=m.e+e.e,f=v.length,h=x.length,f<h&&(s=v,v=x,x=s,l=f,f=h,h=l),s=[],l=f+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=f+r;i>r;)d=s[i]+x[r]*v[i-r-1]+t,s[i--]=d%yn|0,t=d/yn|0;s[i]=(s[i]+t)%yn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,It?Nt(e,g.precision):e};Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(xa(e,0,Yl),t===void 0?t=r.rounding:xa(t,0,8),Nt(n,e+rn(n)+1,t))};Ee.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=so(r,!0):(xa(e,0,Yl),t===void 0?t=i.rounding:xa(t,0,8),r=Nt(new i(r),e+1,t),n=so(r,!0,e+1)),n};Ee.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?so(i):(xa(e,0,Yl),t===void 0?t=s.rounding:xa(t,0,8),r=Nt(new s(i),e+rn(i)+1,t),n=so(r.abs(),!1,e+rn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return Nt(new t(e),rn(e)+1,t.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(e){var t,n,r,i,s,l,d=this,f=d.constructor,h=12,m=+(e=new f(e));if(!e.s)return new f(hr);if(d=new f(d),!d.s){if(e.s<1)throw Error(zr+"Infinity");return d}if(d.eq(hr))return d;if(r=f.precision,e.eq(hr))return Nt(d,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=d.s,l){if((n=m<0?-m:m)<=GP){for(i=new f(hr),t=Math.ceil(r/Pt+4),It=!1;n%2&&(i=i.times(d),_O(i.d,t)),n=Vl(n/2),n!==0;)d=d.times(d),_O(d.d,t);return It=!0,e.s<0?new f(hr).div(i):Nt(i,r)}}else if(s<0)throw Error(zr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,It=!1,i=e.times(Au(d,r+h)),It=!0,i=VP(i),i.s=s,i};Ee.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=rn(i),r=so(i,n<=s.toExpNeg||n>=s.toExpPos)):(xa(e,1,Yl),t===void 0?t=s.rounding:xa(t,0,8),i=Nt(new s(i),e,t),n=rn(i),r=so(i,e<=n||n<=s.toExpNeg,e)),r};Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(xa(e,1,Yl),t===void 0?t=r.rounding:xa(t,0,8)),Nt(new r(n),e,t)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rn(e),n=e.constructor;return so(e,t<=n.toExpNeg||t>=n.toExpPos)};function YP(e,t){var n,r,i,s,l,d,f,h,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),It?Nt(t,g):t;if(f=e.d,h=t.d,l=e.e,i=t.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,d=h.length):(r=h,i=l,d=f.length),l=Math.ceil(g/Pt),d=l>d?l+1:d+1,s>d&&(s=d,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(d=f.length,s=h.length,d-s<0&&(s=d,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/yn|0,f[s]%=yn;for(n&&(f.unshift(n),++i),d=f.length;f[--d]==0;)f.pop();return t.d=f,t.e=i,It?Nt(t,g):t}function xa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(to+e)}function ga(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=Pt-r.length,n&&(s+=Yi(n)),s+=r;l=e[t],r=l+"",n=Pt-r.length,n&&(s+=Yi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ja=(function(){function e(r,i){var s,l=0,d=r.length;for(r=r.slice();d--;)s=r[d]*i+l,r[d]=s%yn|0,l=s/yn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var d,f;if(s!=l)f=s>l?1:-1;else for(d=f=0;d<s;d++)if(r[d]!=i[d]){f=r[d]>i[d]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*yn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var d,f,h,m,g,v,x,j,_,S,N,E,C,k,A,R,D,$,G=r.constructor,K=r.s==i.s?1:-1,B=r.d,L=i.d;if(!r.s)return new G(r);if(!i.s)throw Error(zr+"Division by zero");for(f=r.e-i.e,D=L.length,A=B.length,x=new G(K),j=x.d=[],h=0;L[h]==(B[h]||0);)++h;if(L[h]>(B[h]||0)&&--f,s==null?E=s=G.precision:l?E=s+(rn(r)-rn(i))+1:E=s,E<0)return new G(0);if(E=E/Pt+2|0,h=0,D==1)for(m=0,L=L[0],E++;(h<A||m)&&E--;h++)C=m*yn+(B[h]||0),j[h]=C/L|0,m=C%L|0;else{for(m=yn/(L[0]+1)|0,m>1&&(L=e(L,m),B=e(B,m),D=L.length,A=B.length),k=D,_=B.slice(0,D),S=_.length;S<D;)_[S++]=0;$=L.slice(),$.unshift(0),R=L[0],L[1]>=yn/2&&++R;do m=0,d=t(L,_,D,S),d<0?(N=_[0],D!=S&&(N=N*yn+(_[1]||0)),m=N/R|0,m>1?(m>=yn&&(m=yn-1),g=e(L,m),v=g.length,S=_.length,d=t(g,_,v,S),d==1&&(m--,n(g,D<v?$:L,v))):(m==0&&(d=m=1),g=L.slice()),v=g.length,v<S&&g.unshift(0),n(_,g,S),d==-1&&(S=_.length,d=t(L,_,D,S),d<1&&(m++,n(_,D<S?$:L,S))),S=_.length):d===0&&(m++,_=[0]),j[h++]=m,d&&_[0]?_[S++]=B[k]||0:(_=[B[k]],S=1);while((k++<A||_[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=f,Nt(x,l?s+rn(x)+1:s)}})();function VP(e,t){var n,r,i,s,l,d,f=0,h=0,m=e.constructor,g=m.precision;if(rn(e)>16)throw Error(Ux+rn(e));if(!e.s)return new m(hr);for(It=!1,d=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(Ls(2,h))/Math.LN10*2+5|0,d+=r,n=i=s=new m(hr),m.precision=d;;){if(i=Nt(i.times(e),d),n=n.times(++f),l=s.plus(Ja(i,n,d)),ga(l.d).slice(0,d)===ga(s.d).slice(0,d)){for(;h--;)s=Nt(s.times(s),d);return m.precision=g,t==null?(It=!0,Nt(s,g)):s}s=l}}function rn(e){for(var t=e.e*Pt,n=e.d[0];n>=10;n/=10)t++;return t}function Cy(e,t,n){if(t>e.LN10.sd())throw It=!0,n&&(e.precision=n),Error(zr+"LN10 precision limit exceeded");return Nt(new e(e.LN10),t)}function Yi(e){for(var t="";e--;)t+="0";return t}function Au(e,t){var n,r,i,s,l,d,f,h,m,g=1,v=10,x=e,j=x.d,_=x.constructor,S=_.precision;if(x.s<1)throw Error(zr+(x.s?"NaN":"-Infinity"));if(x.eq(hr))return new _(0);if(t==null?(It=!1,h=S):h=t,x.eq(10))return t==null&&(It=!0),Cy(_,h);if(h+=v,_.precision=h,n=ga(j),r=n.charAt(0),s=rn(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ga(x.d),r=n.charAt(0),g++;s=rn(x),r>1?(x=new _("0."+n),s++):x=new _(r+"."+n.slice(1))}else return f=Cy(_,h+2,S).times(s+""),x=Au(new _(r+"."+n.slice(1)),h-v).plus(f),_.precision=S,t==null?(It=!0,Nt(x,S)):x;for(d=l=x=Ja(x.minus(hr),x.plus(hr),h),m=Nt(x.times(x),h),i=3;;){if(l=Nt(l.times(m),h),f=d.plus(Ja(l,new _(i),h)),ga(f.d).slice(0,h)===ga(d.d).slice(0,h))return d=d.times(2),s!==0&&(d=d.plus(Cy(_,h+2,S).times(s+""))),d=Ja(d,new _(g),h),_.precision=S,t==null?(It=!0,Nt(d,S)):d;d=f,i+=2}}function wO(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Vl(n/Pt),e.d=[],r=(n+1)%Pt,n<0&&(r+=Pt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Pt;r<i;)e.d.push(+t.slice(r,r+=Pt));t=t.slice(r),r=Pt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),It&&(e.e>Fh||e.e<-Fh))throw Error(Ux+n)}else e.s=0,e.e=0,e.d=[0];return e}function Nt(e,t,n){var r,i,s,l,d,f,h,m,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=Pt,i=t,h=g[m=0];else{if(m=Math.ceil((r+1)/Pt),s=g.length,m>=s)return e;for(h=s=g[m],l=1;s>=10;s/=10)l++;r%=Pt,i=r-Pt+l}if(n!==void 0&&(s=Ls(10,l-i-1),d=h/s%10|0,f=t<0||g[m+1]!==void 0||h%s,f=n<4?(d||f)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||f||n==6&&(r>0?i>0?h/Ls(10,l-i):0:g[m-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return f?(s=rn(e),g.length=1,t=t-s-1,g[0]=Ls(10,(Pt-t%Pt)%Pt),e.e=Vl(-t/Pt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=m,s=1,m--):(g.length=m+1,s=Ls(10,Pt-r),g[m]=i>0?(h/Ls(10,l-i)%Ls(10,i)|0)*s:0),f)for(;;)if(m==0){(g[0]+=s)==yn&&(g[0]=1,++e.e);break}else{if(g[m]+=s,g[m]!=yn)break;g[m--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(It&&(e.e>Fh||e.e<-Fh))throw Error(Ux+rn(e));return e}function WP(e,t){var n,r,i,s,l,d,f,h,m,g,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),It?Nt(t,x):t;if(f=e.d,g=t.d,r=t.e,h=e.e,f=f.slice(),l=h-r,l){for(m=l<0,m?(n=f,l=-l,d=g.length):(n=g,r=h,d=f.length),i=Math.max(Math.ceil(x/Pt),d)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,d=g.length,m=i<d,m&&(d=i),i=0;i<d;i++)if(f[i]!=g[i]){m=f[i]<g[i];break}l=0}for(m&&(n=f,f=g,g=n,t.s=-t.s),d=f.length,i=g.length-d;i>0;--i)f[d++]=0;for(i=g.length;i>l;){if(f[--i]<g[i]){for(s=i;s&&f[--s]===0;)f[s]=yn-1;--f[s],f[i]+=yn}f[i]-=g[i]}for(;f[--d]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,It?Nt(t,x):t):new v(0)}function so(e,t,n){var r,i=rn(e),s=ga(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Yi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Yi(-i-1)+s,n&&(r=n-l)>0&&(s+=Yi(r))):i>=l?(s+=Yi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Yi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Yi(r))),e.s<0?"-"+s:s}function _O(e,t){if(e.length>t)return e.length=t,!0}function XP(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(to+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return wO(l,s.toString())}else if(typeof s!="string")throw Error(to+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,MG.test(s))wO(l,s);else throw Error(to+s)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=XP,i.config=i.set=RG,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function RG(e){if(!e||typeof e!="object")throw Error(zr+"Object expected");var t,n,r,i=["precision",1,Yl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Vl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(to+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(to+n+": "+r);return this}var qx=XP(PG);hr=new qx(1);const gt=qx;var DG=e=>e,QP={},JP=e=>e===QP,jO=e=>function t(){return arguments.length===0||arguments.length===1&&JP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ZP=(e,t)=>e===1?t:jO(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==QP).length;return s>=e?t(...r):ZP(e-s,jO(function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];var h=r.map(m=>JP(m)?d.shift():m);return t(...h,...d)}))}),km=e=>ZP(e.length,e),W0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},IG=km((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),LG=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return DG;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((d,f)=>f(d),s(...arguments))}},X0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),eM=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,d)=>{var f;return l===((f=t)===null||f===void 0?void 0:f[d])})||(t=i,n=e(...i)),n}};function tM(e){var t;return e===0?t=1:t=Math.floor(new gt(e).abs().log(10).toNumber())+1,t}function nM(e,t,n){for(var r=new gt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}km((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});km((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});km((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var rM=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},aM=(e,t,n)=>{if(e.lte(0))return new gt(0);var r=tM(e.toNumber()),i=new gt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,d=new gt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=d.mul(i);return t?new gt(f.toNumber()):new gt(Math.ceil(f.toNumber()))},$G=(e,t,n)=>{var r=new gt(1),i=new gt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new gt(10).pow(tM(e)-1),i=new gt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new gt(Math.floor(e)))}else e===0?i=new gt(Math.floor((t-1)/2)):n||(i=new gt(Math.floor(e)));var l=Math.floor((t-1)/2),d=LG(IG(f=>i.add(new gt(f-l).mul(r)).toNumber()),W0);return d(0,t)},iM=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var l=aM(new gt(n).sub(t).div(r-1),i,s),d;t<=0&&n>=0?d=new gt(0):(d=new gt(t).add(n).div(2),d=d.sub(new gt(d).mod(l)));var f=Math.ceil(d.sub(t).div(l).toNumber()),h=Math.ceil(new gt(n).sub(d).div(l).toNumber()),m=f+h+1;return m>r?iM(t,n,r,i,s+1):(m<r&&(h=n>0?h+(r-m):h,f=n>0?f:f+(r-m)),{step:l,tickMin:d.sub(new gt(f).mul(l)),tickMax:d.add(new gt(h).mul(l))})};function zG(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,d]=rM([t,n]);if(l===-1/0||d===1/0){var f=d===1/0?[l,...W0(0,r-1).map(()=>1/0)]:[...W0(0,r-1).map(()=>-1/0),d];return t>n?X0(f):f}if(l===d)return $G(l,r,i);var{step:h,tickMin:m,tickMax:g}=iM(l,d,s,i,0),v=nM(m,g.add(new gt(.1).mul(h)),h);return t>n?X0(v):v}function UG(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=rM([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var d=Math.max(t,2),f=aM(new gt(l).sub(s).div(d-1),i,0),h=[...nM(new gt(s),new gt(l),f),l];return i===!1&&(h=h.map(m=>Math.round(m))),n>r?X0(h):h}var qG=eM(zG),BG=eM(UG),sM=e=>e.rootProps.maxBarSize,FG=e=>e.rootProps.barGap,oM=e=>e.rootProps.barCategoryGap,HG=e=>e.rootProps.barSize,Xu=e=>e.rootProps.stackOffset,Bx=e=>e.options.chartName,Fx=e=>e.rootProps.syncId,lM=e=>e.rootProps.syncMethod,Hx=e=>e.options.eventEmitter,Ka={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Am=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},KG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ka.angleAxisId,includeHidden:!1,name:void 0,reversed:Ka.reversed,scale:Ka.scale,tick:Ka.tick,tickCount:void 0,ticks:void 0,type:Ka.type,unit:void 0},GG={allowDataOverflow:fr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,ticks:void 0,type:fr.type,unit:void 0},YG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ka.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ka.scale,tick:Ka.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},VG={allowDataOverflow:fr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,ticks:void 0,type:"category",unit:void 0},Kx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?YG:KG,Gx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?VG:GG,Tm=e=>e.polarOptions,Yx=ae([oi,li,dn],HT),cM=ae([Tm,Yx],(e,t)=>{if(e!=null)return Dn(e.innerRadius,t,0)}),uM=ae([Tm,Yx],(e,t)=>{if(e!=null)return Dn(e.outerRadius,t,t*.8)}),WG=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},dM=ae([Tm],WG);ae([Kx,dM],Am);var fM=ae([Yx,cM,uM],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ae([Gx,fM],Am);var hM=ae([lt,Tm,cM,uM,oi,li],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:d,startAngle:f,endAngle:h}=t;return{cx:Dn(l,i,i/2),cy:Dn(d,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),$t=(e,t)=>t,Qu=(e,t,n)=>n;function Vx(e){return e==null?void 0:e.id}var hn=e=>{var t=lt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wl=e=>e.tooltip.settings.axisId,_n=e=>{var t=hn(e),n=Wl(e);return Ju(e,t,n)},mM=ae([_n],e=>e==null?void 0:e.dataKey);function pM(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(d=>{var f,h=(f=d.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var m=Vx(d);h.forEach((g,v)=>{var x=s==null||i?v:String(Ut(g,s,null)),j=Ut(g,d.dataKey,0),_;l.has(x)?_=l.get(x):_={},Object.assign(_,{[m]:j}),l.set(x,_)})}}),Array.from(l.values())}function Pm(e){return e.stackId!=null&&e.dataKey!=null}function SO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(n),!0).forEach(function(r){XG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XG(e,t,n){return(t=QG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q0=[0,"auto"],ur={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gM=(e,t)=>e.cartesianAxis.xAxis[t],ui=(e,t)=>{var n=gM(e,t);return n??ur},dr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Q0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ku},vM=(e,t)=>e.cartesianAxis.yAxis[t],di=(e,t)=>{var n=vM(e,t);return n??dr},ZG={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Wx=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??ZG},Yt=(e,t,n)=>{switch(t){case"xAxis":return ui(e,n);case"yAxis":return di(e,n);case"zAxis":return Wx(e,n);case"angleAxis":return Kx(e,n);case"radiusAxis":return Gx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eY=(e,t,n)=>{switch(t){case"xAxis":return ui(e,n);case"yAxis":return di(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ju=(e,t,n)=>{switch(t){case"xAxis":return ui(e,n);case"yAxis":return di(e,n);case"angleAxis":return Kx(e,n);case"radiusAxis":return Gx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},yM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Xx(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Qx=e=>e.graphicalItems.cartesianItems,tY=ae([$t,Qu],Xx),Jx=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),Zu=ae([Qx,Yt,tY],Jx),bM=ae([Zu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Pm)),xM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),wM=ae([Zu],xM),Zx=e=>e.map(t=>t.data).filter(Boolean).flat(1),nY=ae([Zu],Zx),ew=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},tw=ae([nY,zx],ew),nw=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Ut(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Ut(i,r)}))):e.map(r=>({value:r})),Mm=ae([tw,Yt,Zu],nw);function _M(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function po(e){return e.filter(t=>ba(t)||t instanceof Date).map(Number).filter(t=>gr(t)===!1)}function rY(e,t,n){return!n||typeof t!="number"||gr(t)?[]:n.length?po(n.flatMap(r=>{var i=Ut(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!yr(s)||!yr(l)))return[t-s,t+l]})):[]}var aY=ae([bM,zx,_n],pM),jM=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,d]=s,f=d.map(Vx);return[l,{stackedData:l9(e,f,n),graphicalItems:d}]}))},J0=ae([aY,bM,Xu],jM),SM=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=h9(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},iY=ae([J0,ls,$t],SM),NM=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var d,f,h=(d=r[l.id])===null||d===void 0?void 0:d.filter(g=>_M(i,g)),m=Ut(s,(f=t.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:m,errorDomain:rY(s,m,h)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ut(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),Rm=e=>e.errorBars,EM=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>_M(n,r));ae([wM,Rm,$t],EM);var sY=ae([tw,Yt,wM,Rm,$t],NM);function oY(e){var{value:t}=e;if(ba(t)||t instanceof Date)return t}var NO=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=po(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},lY=(e,t,n)=>{var r=e.map(oY).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&zA(r))?dP(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},rw=e=>{var t;if(e==null||!("domain"in e))return Q0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=po(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Q0},Kh=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),d=Math.max(...s);return[l,d]}},OM=e=>e.referenceElements.dots,Xl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),cY=ae([OM,$t,Qu],Xl),CM=e=>e.referenceElements.areas,uY=ae([CM,$t,Qu],Xl),kM=e=>e.referenceElements.lines,dY=ae([kM,$t,Qu],Xl),AM=(e,t)=>{var n=po(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},fY=ae(cY,$t,AM),TM=(e,t)=>{var n=po(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},hY=ae([uY,$t],TM),PM=(e,t)=>{var n=po(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},mY=ae(dY,$t,PM),pY=ae(fY,mY,hY,(e,t,n)=>Kh(e,n,t)),MM=ae([Yt],rw),aw=(e,t,n,r,i,s,l)=>{var d=AG(t,e.allowDataOverflow);if(d!=null)return d;var f=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=f?Kh(n,i,NO(r)):Kh(i,NO(r));return TG(t,h,e.allowDataOverflow)},gY=ae([Yt,MM,iY,sY,pY,lt,$t],aw),vY=[0,1],iw=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:d,type:f}=e,h=uo(t,s);return h&&d==null?dP(0,n.length):f==="category"?lY(r,e,h):i==="expand"?vY:l}},sw=ae([Yt,lt,tw,Mm,Xu,$t,gY],iw),RM=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var d="scale".concat(qu(s));return d in su?d:"point"}}},Ql=ae([Yt,lt,yM,Bx,$t],RM);function yY(e){if(e!=null){if(e in su)return su[e]();var t="scale".concat(qu(e));if(t in su)return su[t]()}}function ow(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=yY(t);if(i!=null){var s=i.domain(n).range(r);return r9(s),s}}}var lw=(e,t,n)=>{var r=rw(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Il(e))return qG(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Il(e))return BG(e,t.tickCount,t.allowDecimals)}},cw=ae([sw,Ju,Ql],lw),uw=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Il(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],d=n[n.length-1];return[Math.min(i,s),Math.max(l,d)]}return t},bY=ae([Yt,sw,cw,$t],uw),xY=ae(Mm,Yt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(po(e.map(d=>d.value))).sort((d,f)=>d-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),DM=ae(xY,lt,oM,dn,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!yr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Dn(n,e*s),d=e*s/2;return d-l-(d-l)/s*l}return 0}),wY=(e,t)=>{var n=ui(e,t);return n==null||typeof n.padding!="string"?0:DM(e,"xAxis",t,n.padding)},_Y=(e,t)=>{var n=di(e,t);return n==null||typeof n.padding!="string"?0:DM(e,"yAxis",t,n.padding)},jY=ae(ui,wY,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),SY=ae(di,_Y,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),NY=ae([dn,jY,xm,bm,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),EY=ae([dn,lt,SY,xm,bm,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),ed=(e,t,n,r)=>{var i;switch(t){case"xAxis":return NY(e,n,r);case"yAxis":return EY(e,n,r);case"zAxis":return(i=Wx(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return dM(e);case"radiusAxis":return fM(e,n);default:return}},IM=ae([Yt,ed],Am),Jl=ae([Yt,Ql,bY,IM],ow);ae([Zu,Rm,$t],EM);function LM(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Dm=(e,t)=>t,Im=(e,t,n)=>n,OY=ae(vm,Dm,Im,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(LM)),CY=ae(ym,Dm,Im,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(LM)),$M=(e,t)=>({width:e.width,height:t.height}),kY=(e,t)=>{var n=typeof t.width=="number"?t.width:Ku;return{width:n,height:e.height}},zM=ae(dn,ui,$M),AY=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},TY=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},PY=ae(li,dn,OY,Dm,Im,(e,t,n,r,i)=>{var s={},l;return n.forEach(d=>{var f=$M(t,d);l==null&&(l=AY(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[d.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),MY=ae(oi,dn,CY,Dm,Im,(e,t,n,r,i)=>{var s={},l;return n.forEach(d=>{var f=kY(t,d);l==null&&(l=TY(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[d.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),RY=(e,t)=>{var n=ui(e,t);if(n!=null)return PY(e,n.orientation,n.mirror)},DY=ae([dn,ui,RY,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),IY=(e,t)=>{var n=di(e,t);if(n!=null)return MY(e,n.orientation,n.mirror)},LY=ae([dn,di,IY,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),UM=ae(dn,di,(e,t)=>{var n=typeof t.width=="number"?t.width:Ku;return{width:n,height:e.height}}),EO=(e,t,n)=>{switch(t){case"xAxis":return zM(e,n).width;case"yAxis":return UM(e,n).height;default:return}},qM=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,d=uo(e,r),f=t.map(h=>h.value);if(l&&d&&s==="category"&&i&&zA(f))return f}},dw=ae([lt,Mm,Yt,$t],qM),BM=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=uo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(d=>d.value)}},fw=ae([lt,Mm,Ju,$t],BM),OO=ae([lt,eY,Ql,Jl,dw,fw,ed,cw,$t],(e,t,n,r,i,s,l,d,f)=>{if(t==null)return null;var h=uo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:d,range:l,realScaleType:n,scale:r}}),$Y=(e,t,n,r,i,s,l,d,f)=>{if(!(t==null||r==null)){var h=uo(e,f),{type:m,ticks:g,tickCount:v}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=m==="category"&&r.bandwidth?r.bandwidth()/x:0;j=f==="angleAxis"&&s!=null&&s.length>=2?bn(s[0]-s[1])*2*j:j;var _=g||i;if(_){var S=_.map((N,E)=>{var C=l?l.indexOf(N):N;return{index:E,coordinate:r(C)+j,value:N,offset:j}});return S.filter(N=>!gr(N.coordinate))}return h&&d?d.map((N,E)=>({coordinate:r(N)+j,value:N,index:E,offset:j})):r.ticks?r.ticks(v).map(N=>({coordinate:r(N)+j,value:N,offset:j})):r.domain().map((N,E)=>({coordinate:r(N)+j,value:l?l[N]:N,index:E,offset:j}))}},FM=ae([lt,Ju,Ql,Jl,cw,ed,dw,fw,$t],$Y),zY=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var d=uo(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(r==null?void 0:r.length)>=2?bn(r[0]-r[1])*2*h:h,d&&s?s.map((m,g)=>({coordinate:n(m)+h,value:m,index:g,offset:h})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,g)=>({coordinate:n(m)+h,value:i?i[m]:m,index:g,offset:h}))}},Ll=ae([lt,Ju,Jl,ed,dw,fw,$t],zY),$l=ae(Yt,Jl,(e,t)=>{if(!(e==null||t==null))return Hh(Hh({},e),{},{scale:t})}),UY=ae([Yt,Ql,sw,IM],ow);ae((e,t,n)=>Wx(e,n),UY,(e,t)=>{if(!(e==null||t==null))return Hh(Hh({},e),{},{scale:t})});var qY=ae([lt,vm,ym],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),HM=e=>e.options.defaultTooltipEventType,KM=e=>e.options.validateTooltipEventTypes;function GM(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function hw(e,t){var n=HM(e),r=KM(e);return GM(t,n,r)}function BY(e){return Te(t=>hw(t,e))}var YM=(e,t)=>{var n,r=Number(t);if(!(gr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},FY=e=>e.tooltip.settings,Qi={active:!1,index:null,dataKey:void 0,coordinate:void 0},HY={itemInteraction:{click:Qi,hover:Qi},axisInteraction:{click:Qi,hover:Qi},keyboardInteraction:Qi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},VM=br({name:"tooltip",initialState:HY,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Qa(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:KY,removeTooltipEntrySettings:GY,setTooltipSettingsState:YY,setActiveMouseOverItemIndex:WM,mouseLeaveItem:VY,mouseLeaveChart:XM,setActiveClickItemIndex:WY,setMouseOverAxisIndex:QM,setMouseClickAxisIndex:XY,setSyncInteraction:Z0,setKeyboardInteraction:eb}=VM.actions,QY=VM.reducer;function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(r){JY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JY(e,t,n){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZY(e){var t=eV(e,"string");return typeof t=="symbol"?t:t+""}function eV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tV(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function nV(e){return e.index!=null}var JM=(e,t,n,r)=>{if(t==null)return Qi;var i=tV(e,t,n);if(i==null)return Qi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(nV(i)){if(s)return Uf(Uf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Uf(Uf({},Qi),{},{coordinate:i.coordinate})},mw=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!yr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},ZM=(e,t,n,r,i,s,l,d)=>{if(!(s==null||d==null)){var f=l[0],h=f==null?void 0:d(f.positions,s);if(h!=null)return h;var m=i==null?void 0:i[Number(s)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},e3=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},td=e=>e.options.tooltipPayloadSearcher,Zl=e=>e.tooltip;function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(r){rV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rV(e,t,n){return(t=aV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aV(e){var t=iV(e,"string");return typeof t=="symbol"?t:t+""}function iV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sV(e,t){return e??t}var t3=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:d,computedData:f,dataStartIndex:h,dataEndIndex:m}=n,g=[];return e.reduce((v,x)=>{var j,{dataDefinedOnItem:_,settings:S}=x,N=sV(_,d),E=Array.isArray(N)?KT(N,h,m):N,C=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:r,k=S==null?void 0:S.nameKey,A;if(r&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?A=GU(E,r,i):A=s(E,t,f,k),Array.isArray(A))A.forEach(D=>{var $=AO(AO({},S),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});v.push(fE({tooltipEntrySettings:$,dataKey:D.dataKey,payload:D.payload,value:Ut(D.payload,D.dataKey),name:D.name}))});else{var R;v.push(fE({tooltipEntrySettings:S,dataKey:C,payload:A,value:Ut(A,C),name:(R=Ut(A,k))!==null&&R!==void 0?R:S==null?void 0:S.name}))}return v},g)}},pw=ae([_n,lt,yM,Bx,hn],RM),oV=ae([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),lV=ae([hn,Wl],Xx),nd=ae([oV,_n,lV],Jx),cV=ae([nd],e=>e.filter(Pm)),uV=ae([nd],Zx),ec=ae([uV,ls],ew),dV=ae([cV,ls,_n],pM),gw=ae([ec,_n,nd],nw),fV=ae([_n],rw),hV=ae([nd],e=>e.filter(Pm)),mV=ae([dV,hV,Xu],jM),pV=ae([mV,ls,hn],SM),gV=ae([nd],xM),vV=ae([ec,_n,gV,Rm,hn],NM),yV=ae([OM,hn,Wl],Xl),bV=ae([yV,hn],AM),xV=ae([CM,hn,Wl],Xl),wV=ae([xV,hn],TM),_V=ae([kM,hn,Wl],Xl),jV=ae([_V,hn],PM),SV=ae([bV,jV,wV],Kh),NV=ae([_n,fV,pV,vV,SV,lt,hn],aw),n3=ae([_n,lt,ec,gw,Xu,hn,NV],iw),EV=ae([n3,_n,pw],lw),OV=ae([_n,n3,EV,hn],uw),r3=e=>{var t=hn(e),n=Wl(e),r=!1;return ed(e,t,n,r)},a3=ae([_n,r3],Am),i3=ae([_n,pw,OV,a3],ow),CV=ae([lt,gw,_n,hn],qM),kV=ae([lt,gw,_n,hn],BM),AV=(e,t,n,r,i,s,l,d)=>{if(t){var{type:f}=t,h=uo(e,d);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return g=d==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?bn(i[0]-i[1])*2*g:g,h&&l?l.map((v,x)=>({coordinate:r(v)+g,value:v,index:x,offset:g})):r.domain().map((v,x)=>({coordinate:r(v)+g,value:s?s[v]:v,index:x,offset:g}))}}},fi=ae([lt,_n,pw,i3,r3,CV,kV,hn],AV),vw=ae([HM,KM,FY],(e,t,n)=>GM(n.shared,e,t)),s3=e=>e.tooltip.settings.trigger,yw=e=>e.tooltip.settings.defaultIndex,Lm=ae([Zl,vw,s3,yw],JM),oo=ae([Lm,ec],mw),o3=ae([fi,oo],YM),l3=ae([Lm],e=>{if(e)return e.dataKey}),c3=ae([Zl,vw,s3,yw],e3),TV=ae([oi,li,lt,dn,fi,yw,c3,td],ZM),PV=ae([Lm,TV],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),MV=ae([Lm],e=>e.active),RV=ae([c3,oo,ls,mM,o3,td,vw],t3);ae([RV],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(n),!0).forEach(function(r){DV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DV(e,t,n){return(t=IV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IV(e){var t=LV(e,"string");return typeof t=="symbol"?t:t+""}function LV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $V=()=>Te(_n),zV=()=>{var e=$V(),t=Te(fi),n=Te(i3);return lx(PO(PO({},e),{},{scale:n}),t)},UV=()=>Te(Bx),bw=(e,t)=>t,u3=(e,t,n)=>n,xw=(e,t,n,r)=>r,qV=ae(fi,e=>um(e,t=>t.coordinate)),ww=ae([Zl,bw,u3,xw],JM),d3=ae([ww,ec],mw),BV=(e,t,n)=>{if(t!=null){var r=Zl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},f3=ae([Zl,bw,u3,xw],e3),Gh=ae([oi,li,lt,dn,fi,xw,f3,td],ZM),FV=ae([ww,Gh],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),h3=ae(fi,d3,YM),HV=ae([f3,d3,ls,mM,h3,td,bw],t3),KV=ae([ww],e=>({isActive:e.active,activeIndex:e.index})),GV=(e,t,n,r,i,s,l,d)=>{if(!(!e||!t||!r||!i||!s)){var f=m9(e.chartX,e.chartY,t,n,d);if(f){var h=g9(f,t),m=t9(h,l,s,r,i),g=p9(t,s,m,f);return{activeIndex:String(m),activeCoordinate:g}}}};function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tb.apply(null,arguments)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(r){YV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YV(e,t,n){return(t=VV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XV(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:d,tooltipEventType:f,chartName:h}=e,m=t,g=n,v=r;if(!d||!m||h!=="ScatterChart"&&f!=="axis")return null;var x,j;if(h==="ScatterChart")x=m,j=gF;else if(h==="BarChart")x=vF(l,m,i,s),j=oP;else if(l==="radial"){var{cx:_,cy:S,radius:N,startAngle:E,endAngle:C}=lP(m);x={cx:_,cy:S,startAngle:E,endAngle:C,innerRadius:N,outerRadius:N},j=uP}else x={points:XF(l,m,i)},j=nP;var k=typeof d=="object"&&"className"in d?d.className:void 0,A=qf(qf(qf(qf({stroke:"#ccc",pointerEvents:"none"},i),x),un(d,!1)),{},{payload:g,payloadIndex:v,className:vt("recharts-tooltip-cursor",k)});return b.isValidElement(d)?b.cloneElement(d,A):b.createElement(j,A)}function QV(e){var t=zV(),n=QT(),r=hx(),i=UV();return b.createElement(XV,tb({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var m3=b.createContext(null),JV=()=>b.useContext(m3),ky={exports:{}},RO;function ZV(){return RO||(RO=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,m){this.fn=f,this.context=h,this.once=m||!1}function s(f,h,m,g,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new i(m,g||f,v),j=n?n+h:h;return f._events[j]?f._events[j].fn?f._events[j]=[f._events[j],x]:f._events[j].push(x):(f._events[j]=x,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],m,g;if(this._eventsCount===0)return h;for(g in m=this._events)t.call(m,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},d.prototype.listeners=function(h){var m=n?n+h:h,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,x=g.length,j=new Array(x);v<x;v++)j[v]=g[v].fn;return j},d.prototype.listenerCount=function(h){var m=n?n+h:h,g=this._events[m];return g?g.fn?1:g.length:0},d.prototype.emit=function(h,m,g,v,x,j){var _=n?n+h:h;if(!this._events[_])return!1;var S=this._events[_],N=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),N){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,g),!0;case 4:return S.fn.call(S.context,m,g,v),!0;case 5:return S.fn.call(S.context,m,g,v,x),!0;case 6:return S.fn.call(S.context,m,g,v,x,j),!0}for(C=1,E=new Array(N-1);C<N;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var k=S.length,A;for(C=0;C<k;C++)switch(S[C].once&&this.removeListener(h,S[C].fn,void 0,!0),N){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,m);break;case 3:S[C].fn.call(S[C].context,m,g);break;case 4:S[C].fn.call(S[C].context,m,g,v);break;default:if(!E)for(A=1,E=new Array(N-1);A<N;A++)E[A-1]=arguments[A];S[C].fn.apply(S[C].context,E)}}return!0},d.prototype.on=function(h,m,g){return s(this,h,m,g,!1)},d.prototype.once=function(h,m,g){return s(this,h,m,g,!0)},d.prototype.removeListener=function(h,m,g,v){var x=n?n+h:h;if(!this._events[x])return this;if(!m)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===m&&(!v||j.once)&&(!g||j.context===g)&&l(this,x);else{for(var _=0,S=[],N=j.length;_<N;_++)(j[_].fn!==m||v&&!j[_].once||g&&j[_].context!==g)&&S.push(j[_]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},d.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(ky)),ky.exports}var eW=ZV();const tW=aa(eW);var Tu=new tW,nb="recharts.syncEvent.tooltip",DO="recharts.syncEvent.brush";function p3(e,t){if(t){var n=Number.parseInt(t,10);if(!gr(n))return e==null?void 0:e[n]}}var nW={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},g3=br({name:"options",initialState:nW,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),rW=g3.reducer,{createEventEmitter:aW}=g3.actions;function iW(e){return e.tooltip.syncInteraction}var sW={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},v3=br({name:"chartData",initialState:sW,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:IO,setDataStartEndIndexes:oW,setComputedData:Qre}=v3.actions,lW=v3.reducer,cW=["x","y"];function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(r){uW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uW(e,t,n){return(t=dW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dW(e){var t=fW(e,"string");return typeof t=="symbol"?t:t+""}function fW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hW(e,t){if(e==null)return{};var n,r,i=mW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var y3=()=>{};function pW(){var e=Te(Fx),t=Te(Hx),n=qt(),r=Te(lM),i=Te(fi),s=hx(),l=ux(),d=Te(f=>f.rootProps.className);b.useEffect(()=>{if(e==null)return y3;var f=(h,m,g)=>{if(t!==g&&e===h){if(r==="index"){var v;if(l&&m!==null&&m!==void 0&&(v=m.payload)!==null&&v!==void 0&&v.coordinate){var x=m.payload.coordinate,{x:j,y:_}=x,S=hW(x,cW),N=As(As(As({},S),typeof j=="number"&&{x:Math.max(l.x,Math.min(j,l.x+l.width))}),typeof _=="number"&&{y:Math.max(l.y,Math.min(_,l.y+l.height))}),E=As(As({},m),{},{payload:As(As({},m.payload),{},{coordinate:N})});n(E)}else n(m);return}if(i!=null){var C;if(typeof r=="function"){var k={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},A=r(i,k);C=i[A]}else r==="value"&&(C=i.find(V=>String(V.value)===m.payload.label));var{coordinate:R}=m.payload;if(C==null||m.payload.active===!1||R==null||l==null){n(Z0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:D,y:$}=R,G=Math.min(D,l.x+l.width),K=Math.min($,l.y+l.height),B={x:s==="horizontal"?C.coordinate:G,y:s==="horizontal"?K:C.coordinate},L=Z0({active:m.payload.active,coordinate:B,dataKey:m.payload.dataKey,index:String(C.index),label:m.payload.label});n(L)}}};return Tu.on(nb,f),()=>{Tu.off(nb,f)}},[d,n,t,e,r,i,s,l])}function gW(){var e=Te(Fx),t=Te(Hx),n=qt();b.useEffect(()=>{if(e==null)return y3;var r=(i,s,l)=>{t!==l&&e===i&&n(oW(s))};return Tu.on(DO,r),()=>{Tu.off(DO,r)}},[n,t,e])}function vW(){var e=qt();b.useEffect(()=>{e(aW())},[e]),pW(),gW()}function yW(e,t,n,r,i,s){var l=Te(v=>BV(v,e,t)),d=Te(Hx),f=Te(Fx),h=Te(lM),m=Te(iW),g=m==null?void 0:m.active;b.useEffect(()=>{if(!g&&f!=null&&d!=null){var v=Z0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Tu.emit(nb,f,v,d)}},[g,n,l,i,r,d,f,h,s])}function $O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(n),!0).forEach(function(r){bW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bW(e,t,n){return(t=xW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xW(e){var t=wW(e,"string");return typeof t=="symbol"?t:t+""}function wW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _W(e){return e.dataKey}function jW(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(V9,t)}var UO=[],SW={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!fo.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function qO(e){var t=Un(e,SW),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:d,isAnimationActive:f,offset:h,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:j,cursor:_,shared:S,trigger:N,defaultIndex:E,portal:C,axisId:k}=t,A=qt(),R=typeof E=="number"?String(E):E;b.useEffect(()=>{A(YY({shared:S,trigger:N,axisId:k,active:n,defaultIndex:R}))},[A,S,N,k,n,R]);var D=ux(),$=tP(),G=BY(S),{activeIndex:K,isActive:B}=Te(re=>KV(re,G,N,R)),L=Te(re=>HV(re,G,N,R)),V=Te(re=>h3(re,G,N,R)),H=Te(re=>FV(re,G,N,R)),se=L,M=JV(),z=n??B,[q,J]=bT([se,z]),X=G==="axis"?V:void 0;yW(G,N,H,X,K,z);var T=C??M;if(T==null)return null;var I=se??UO;z||(I=UO),d&&I.length&&(I=mT(se.filter(re=>re.value!=null&&(re.hide!==!0||t.includeHidden)),m,_W));var U=I.length>0,te=b.createElement(tF,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:f,active:z,coordinate:H,hasPayload:U,offset:h,position:g,reverseDirection:v,useTranslate3d:x,viewBox:D,wrapperStyle:j,lastBoundingBox:q,innerRef:J,hasPortalFromProps:!!C},jW(l,zO(zO({},t),{},{payload:I,label:X,active:z,coordinate:H,accessibilityLayer:$})));return b.createElement(b.Fragment,null,gk.createPortal(te,T),z&&b.createElement(QV,{cursor:_,tooltipEventType:G,coordinate:H,payload:se,index:K}))}var Ay={},Ty={},Py={},BO;function NW(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,d=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),m=()=>{d!==null&&(n.apply(l,d),l=void 0,d=null)},g=()=>{h&&m(),_()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},j=()=>{v!==null&&(clearTimeout(v),v=null)},_=()=>{j(),l=void 0,d=null},S=()=>{m()},N=function(...E){if(i!=null&&i.aborted)return;l=this,d=E;const C=v==null;x(),f&&C&&m()};return N.schedule=x,N.cancel=_,N.flush=S,i==null||i.addEventListener("abort",_,{once:!0}),N}e.debounce=t})(Py)),Py}var FO;function EW(){return FO||(FO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NW();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:d=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),d&&(h[1]="trailing");let m,g=null;const v=t.debounce(function(..._){m=r.apply(this,_),g=null},i,{edges:h}),x=function(..._){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(m=r.apply(this,_),g=Date.now(),v.cancel(),v.schedule(),m):(v.apply(this,_),m)},j=()=>(v.flush(),m);return x.cancel=v.cancel,x.flush=j,x}e.debounce=n})(Ty)),Ty}var HO;function OW(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EW();function n(r,i=0,s={}){const{leading:l=!0,trailing:d=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:d})}e.throttle=n})(Ay)),Ay}var My,KO;function CW(){return KO||(KO=1,My=OW().throttle),My}var kW=CW();const AW=aa(kW);var pu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function GO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ry(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(n),!0).forEach(function(r){TW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TW(e,t,n){return(t=PW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PW(e){var t=MW(e,"string");return typeof t=="symbol"?t:t+""}function MW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YO=b.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:d,maxHeight:f,children:h,debounce:m=0,id:g,className:v,onResize:x,style:j={}}=e,_=b.useRef(null),S=b.useRef();S.current=x,b.useImperativeHandle(t,()=>_.current);var[N,E]=b.useState({containerWidth:r.width,containerHeight:r.height}),C=b.useCallback((A,R)=>{E(D=>{var $=Math.round(A),G=Math.round(R);return D.containerWidth===$&&D.containerHeight===G?D:{containerWidth:$,containerHeight:G}})},[]);b.useEffect(()=>{var A=G=>{var K,{width:B,height:L}=G[0].contentRect;C(B,L),(K=S.current)===null||K===void 0||K.call(S,B,L)};m>0&&(A=AW(A,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(A),{width:D,height:$}=_.current.getBoundingClientRect();return C(D,$),R.observe(_.current),()=>{R.disconnect()}},[C,m]);var k=b.useMemo(()=>{var{containerWidth:A,containerHeight:R}=N;if(A<0||R<0)return null;pu(Ys(i)||Ys(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),pu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=Ys(i)?A:i,$=Ys(s)?R:s;return n&&n>0&&(D?$=D/n:$&&(D=$*n),f&&$>f&&($=f)),pu(D>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,$,i,s,l,d,n),b.Children.map(h,G=>b.cloneElement(G,{width:D,height:$,style:Ry({width:D,height:$},G.props.style)}))},[n,h,s,f,d,l,N,i]);return b.createElement("div",{id:g?"".concat(g):void 0,className:vt("recharts-responsive-container",v),style:Ry(Ry({},j),{},{width:i,height:s,minWidth:l,minHeight:d,maxHeight:f}),ref:_},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),rd=e=>null;rd.displayName="Cell";function RW(e,t,n){return(t=DW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DW(e){var t=IW(e,"string");return typeof t=="symbol"?t:t+""}function IW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class LW{constructor(t){RW(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function VO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $W(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(n),!0).forEach(function(r){zW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zW(e,t,n){return(t=UW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UW(e){var t=qW(e,"string");return typeof t=="symbol"?t:t+""}function qW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BW={cacheSize:2e3,enableCache:!0},b3=$W({},BW),WO=new LW(b3.cacheSize),FW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XO="recharts_measurement_span";function HW(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(d)}var QO=(e,t)=>{try{var n=document.getElementById(XO);n||(n=document.createElement("span"),n.setAttribute("id",XO),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,FW,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},gu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||fo.isSsr)return{width:0,height:0};if(!b3.enableCache)return QO(t,n);var r=HW(t,n),i=WO.get(r);if(i)return i;var s=QO(t,n);return WO.set(r,s),s},JO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,GW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,x3={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},YW=Object.keys(x3),bl="NaN";function VW(e,t){return e*x3[t]}class Xn{static parse(t){var n,[,r,i]=(n=GW.exec(t))!==null&&n!==void 0?n:[];return new Xn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,gr(t)&&(this.unit=""),n!==""&&!KW.test(n)&&(this.num=NaN,this.unit=""),YW.includes(n)&&(this.num=VW(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Xn(NaN,""):new Xn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Xn(NaN,""):new Xn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xn(NaN,""):new Xn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Xn(NaN,""):new Xn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return gr(this.num)}}function w3(e){if(e.includes(bl))return bl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=JO.exec(t))!==null&&n!==void 0?n:[],l=Xn.parse(r??""),d=Xn.parse(s??""),f=i==="*"?l.multiply(d):l.divide(d);if(f.isNaN())return bl;t=t.replace(JO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,g,v]=(h=ZO.exec(t))!==null&&h!==void 0?h:[],x=Xn.parse(m??""),j=Xn.parse(v??""),_=g==="+"?x.add(j):x.subtract(j);if(_.isNaN())return bl;t=t.replace(ZO,_.toString())}return t}var eC=/\(([^()]*)\)/;function WW(e){for(var t=e,n;(n=eC.exec(t))!=null;){var[,r]=n;t=t.replace(eC,w3(r))}return t}function XW(e){var t=e.replace(/\s+/g,"");return t=WW(t),t=w3(t),t}function QW(e){try{return XW(e)}catch{return bl}}function Dy(e){var t=QW(e.slice(5,-1));return t===bl?"":t}var JW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ZW=["dx","dy","angle","className","breakAll"];function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rb.apply(null,arguments)}function tC(e,t){if(e==null)return{};var n,r,i=eX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _3=/[ \f\n\r\t\v\u2028\u2029]+/,j3=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];xn(t)||(n?i=t.toString().split(""):i=t.toString().split(_3));var s=i.map(d=>({word:d,width:gu(d,r).width})),l=n?0:gu(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},tX=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:d,breakAll:f}=e,h=Pe(s),m=l,g=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((L,V)=>{var{word:H,width:se}=V,M=L[L.length-1];if(M&&(r==null||i||M.width+se+n<Number(r)))M.words.push(H),M.width+=se+n;else{var z={words:[H],width:se};L.push(z)}return L},[])},v=g(t),x=K=>K.reduce((B,L)=>B.width>L.width?B:L);if(!h||i)return v;var j=v.length>s||x(v).width>Number(r);if(!j)return v;for(var _="…",S=K=>{var B=m.slice(0,K),L=j3({breakAll:f,style:d,children:B+_}).wordsWithComputedWidth,V=g(L),H=V.length>s||x(V).width>Number(r);return[H,V]},N=0,E=m.length-1,C=0,k;N<=E&&C<=m.length-1;){var A=Math.floor((N+E)/2),R=A-1,[D,$]=S(R),[G]=S(A);if(!D&&!G&&(N=A+1),D&&G&&(E=A-1),!D&&G){k=$;break}C++}return k||v},nC=e=>{var t=xn(e)?[]:e.toString().split(_3);return[{words:t}]},nX=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!fo.isSsr){var d,f,h=j3({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:m,spaceWidth:g}=h;d=m,f=g}else return nC(r);return tX({breakAll:s,children:r,maxLines:l,style:i},d,f,t,n)}return nC(r)},rC="#808080",$m=b.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:d="start",verticalAnchor:f="end",fill:h=rC}=e,m=tC(e,JW),g=b.useMemo(()=>nX({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:v,dy:x,angle:j,className:_,breakAll:S}=m,N=tC(m,ZW);if(!ba(n)||!ba(r)||g.length===0)return null;var E=n+(Pe(v)?v:0),C=r+(Pe(x)?x:0),k;switch(f){case"start":k=Dy("calc(".concat(s,")"));break;case"middle":k=Dy("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:k=Dy("calc(".concat(g.length-1," * -").concat(i,")"));break}var A=[];if(l){var R=g[0].width,{width:D}=m;A.push("scale(".concat(Pe(D)?D/R:1,")"))}return j&&A.push("rotate(".concat(j,", ").concat(E,", ").concat(C,")")),A.length&&(N.transform=A.join(" ")),b.createElement("text",rb({},un(N,!0),{ref:t,x:E,y:C,className:vt("recharts-text",_),textAnchor:d,fill:h.includes("url")?rC:h}),g.map(($,G)=>{var K=$.words.join(S?"":" ");return b.createElement("tspan",{x:E,dy:G===0?k:i,key:"".concat(K,"-").concat(G)},K)}))});$m.displayName="Text";var rX=["labelRef"];function aX(e,t){if(e==null)return{};var n,r,i=iX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(n),!0).forEach(function(r){sX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sX(e,t,n){return(t=oX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oX(e){var t=lX(e,"string");return typeof t=="symbol"?t:t+""}function lX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(null,arguments)}var S3=b.createContext(null),cX=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=b.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return b.createElement(S3.Provider,{value:l},s)},N3=()=>{var e=b.useContext(S3),t=ux();return e||t},uX=b.createContext(null),dX=()=>{var e=b.useContext(uX),t=Te(hM);return e||t},fX=e=>{var{value:t,formatter:n}=e,r=xn(e.children)?t:e.children;return typeof n=="function"?n(r):r},_w=e=>e!=null&&typeof e=="function",hX=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},mX=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:d,cy:f,innerRadius:h,outerRadius:m,startAngle:g,endAngle:v,clockWise:x}=i,j=(h+m)/2,_=hX(g,v),S=_>=0?1:-1,N,E;switch(t){case"insideStart":N=g+S*s,E=x;break;case"insideEnd":N=v-S*s,E=!x;break;case"end":N=v+S*s,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=_<=0?E:!E;var C=nn(d,f,j,N),k=nn(d,f,j,N+(E?1:-1)*359),A="M".concat(C.x,",").concat(C.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(k.x,",").concat(k.y),R=xn(e.id)?wu("recharts-radial-line-"):e.id;return b.createElement("text",Ga({},r,{dominantBaseline:"central",className:vt("recharts-radial-bar-label",l)}),b.createElement("defs",null,b.createElement("path",{id:R,d:A})),b.createElement("textPath",{xlinkHref:"#".concat(R)},n))},pX=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:d,endAngle:f}=e,h=(d+f)/2;if(n==="outside"){var{x:m,y:g}=nn(r,i,l+t,h);return{x:m,y:g,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(s+l)/2,{x,y:j}=nn(r,i,v,h);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},E3=e=>"cx"in e&&Pe(e.cx),gX=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!E3(n)&&(s=n);var{x:l,y:d,width:f,height:h}=t,m=h>=0?1:-1,g=m*r,v=m>0?"end":"start",x=m>0?"start":"end",j=f>=0?1:-1,_=j*r,S=j>0?"end":"start",N=j>0?"start":"end";if(i==="top"){var E={x:l+f/2,y:d-m*r,textAnchor:"middle",verticalAnchor:v};return Gt(Gt({},E),s?{height:Math.max(d-s.y,0),width:f}:{})}if(i==="bottom"){var C={x:l+f/2,y:d+h+g,textAnchor:"middle",verticalAnchor:x};return Gt(Gt({},C),s?{height:Math.max(s.y+s.height-(d+h),0),width:f}:{})}if(i==="left"){var k={x:l-_,y:d+h/2,textAnchor:S,verticalAnchor:"middle"};return Gt(Gt({},k),s?{width:Math.max(k.x-s.x,0),height:h}:{})}if(i==="right"){var A={x:l+f+_,y:d+h/2,textAnchor:N,verticalAnchor:"middle"};return Gt(Gt({},A),s?{width:Math.max(s.x+s.width-A.x,0),height:h}:{})}var R=s?{width:f,height:h}:{};return i==="insideLeft"?Gt({x:l+_,y:d+h/2,textAnchor:N,verticalAnchor:"middle"},R):i==="insideRight"?Gt({x:l+f-_,y:d+h/2,textAnchor:S,verticalAnchor:"middle"},R):i==="insideTop"?Gt({x:l+f/2,y:d+g,textAnchor:"middle",verticalAnchor:x},R):i==="insideBottom"?Gt({x:l+f/2,y:d+h-g,textAnchor:"middle",verticalAnchor:v},R):i==="insideTopLeft"?Gt({x:l+_,y:d+g,textAnchor:N,verticalAnchor:x},R):i==="insideTopRight"?Gt({x:l+f-_,y:d+g,textAnchor:S,verticalAnchor:x},R):i==="insideBottomLeft"?Gt({x:l+_,y:d+h-g,textAnchor:N,verticalAnchor:v},R):i==="insideBottomRight"?Gt({x:l+f-_,y:d+h-g,textAnchor:S,verticalAnchor:v},R):i&&typeof i=="object"&&(Pe(i.x)||Ys(i.x))&&(Pe(i.y)||Ys(i.y))?Gt({x:l+Dn(i.x,f),y:d+Dn(i.y,h),textAnchor:"end",verticalAnchor:"end"},R):Gt({x:l+f/2,y:d+h/2,textAnchor:"middle",verticalAnchor:"middle"},R)},vX={offset:5};function Vi(e){var t=Un(e,vX),{viewBox:n,position:r,value:i,children:s,content:l,className:d="",textBreakAll:f,labelRef:h}=t,m=dX(),g=N3(),v=r==="center"?g:m??g,x=n||v;if(!x||xn(i)&&xn(s)&&!b.isValidElement(l)&&typeof l!="function")return null;var j=Gt(Gt({},t),{},{viewBox:x});if(b.isValidElement(l)){var{labelRef:_}=j,S=aX(j,rX);return b.cloneElement(l,S)}var N;if(typeof l=="function"){if(N=b.createElement(l,j),b.isValidElement(N))return N}else N=fX(t);var E=E3(x),C=un(t,!0);if(E&&(r==="insideStart"||r==="insideEnd"||r==="end"))return mX(t,r,N,C,x);var k=E?pX(x,t.offset,t.position):gX(t,x);return b.createElement($m,Ga({ref:h,className:vt("recharts-label",d)},C,k,{breakAll:f}),N)}Vi.displayName="Label";var yX=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?b.createElement(Vi,Ga({key:"label-implicit"},r)):ba(e)?b.createElement(Vi,Ga({key:"label-implicit",value:e},r)):b.isValidElement(e)?e.type===Vi?b.cloneElement(e,Gt({key:"label-implicit"},r)):b.createElement(Vi,Ga({key:"label-implicit",content:e},r)):_w(e)?b.createElement(Vi,Ga({key:"label-implicit",content:e},r)):e&&typeof e=="object"?b.createElement(Vi,Ga({},e,{key:"label-implicit"},r)):null};function bX(e){var{label:t}=e,n=N3();return yX(t,n)||null}var Iy={},Ly={},iC;function xX(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Ly)),Ly}var $y={},sC;function wX(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})($y)),$y}var oC;function _X(){return oC||(oC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xX(),n=wX(),r=ex();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Iy)),Iy}var zy,lC;function jX(){return lC||(lC=1,zy=_X().last),zy}var SX=jX();const NX=aa(SX);var EX=["valueAccessor"],OX=["dataKey","clockWise","id","textBreakAll"];function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yh.apply(null,arguments)}function cC(e,t){if(e==null)return{};var n,r,i=CX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kX=e=>Array.isArray(e.value)?NX(e.value):e.value,O3=b.createContext(void 0),AX=O3.Provider,C3=b.createContext(void 0),TX=C3.Provider;function PX(){return b.useContext(O3)}function MX(){return b.useContext(C3)}function sh(e){var{valueAccessor:t=kX}=e,n=cC(e,EX),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,d=cC(n,OX),f=PX(),h=MX(),m=f||h;return!m||!m.length?null:b.createElement(Zn,{className:"recharts-label-list"},m.map((g,v)=>{var x,j=xn(r)?t(g,v):Ut(g&&g.payload,r),_=xn(s)?{}:{id:"".concat(s,"-").concat(v)};return b.createElement(Vi,Yh({},un(g,!0),d,_,{fill:(x=n.fill)!==null&&x!==void 0?x:g.fill,parentViewBox:g.parentViewBox,value:j,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(v),index:v}))}))}sh.displayName="LabelList";function k3(e){var{label:t}=e;return t?t===!0?b.createElement(sh,{key:"labelList-implicit"}):b.isValidElement(t)||_w(t)?b.createElement(sh,{key:"labelList-implicit",content:t}):typeof t=="object"?b.createElement(sh,Yh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var A3=e=>e.graphicalItems.polarItems,RX=ae([$t,Qu],Xx),jw=ae([A3,Yt,RX],Jx),DX=ae([jw],Zx),Sw=ae([DX,$x],ew),IX=ae([Sw,Yt,jw],nw),LX=ae([Sw,Yt,jw],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=Ut(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Ut(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),uC=()=>{},$X=ae([Yt,MM,uC,LX,uC,lt,$t],aw),T3=ae([Yt,lt,Sw,IX,Xu,$t,$X],iw),zX=ae([T3,Yt,Ql],lw);ae([Yt,T3,zX,$t],uw);var UX={radiusAxis:{},angleAxis:{}},P3=br({name:"polarAxis",initialState:UX,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Jre,removeRadiusAxis:Zre,addAngleAxis:eae,removeAngleAxis:tae}=P3.actions,qX=P3.reducer;function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){BX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BX(e,t,n){return(t=FX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FX(e){var t=HX(e,"string");return typeof t=="symbol"?t:t+""}function HX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KX=(e,t)=>t,Nw=ae([A3,KX],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),GX=[],Ew=(e,t,n)=>(n==null?void 0:n.length)===0?GX:n,M3=ae([$x,Nw,Ew],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>fC(fC({},t.presentationProps),s.props))),i!=null)return i}}),YX=ae([M3,Nw,Ew],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=Ut(r,t.nameKey,t.name),d;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?d=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?d=r.fill:d=t.fill,{value:gm(l,t.dataKey),color:d,payload:r,type:t.legendType}})}),VX=ae([M3,Nw,Ew,dn],(e,t,n,r)=>{if(!(t==null||e==null))return YQ({offset:r,pieSettings:t,displayedData:e,cells:n})}),Uy={},hC;function WX(){return hC||(hC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Uy)),Uy}var qy,mC;function XX(){return mC||(mC=1,qy=WX().isPlainObject),qy}var QX=XX();const JX=aa(QX);function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){ZX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZX(e,t,n){return(t=eQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eQ(e){var t=tQ(e,"string");return typeof t=="symbol"?t:t+""}function tQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(null,arguments)}var vC=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},nQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rQ=e=>{var t=Un(e,nQ),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:g}=t,v=b.useRef(),[x,j]=b.useState(-1),_=b.useRef(i),S=b.useRef(s),N=b.useRef(l),E=b.useRef(n),C=b.useRef(r),k=_m(e,"trapezoid-");if(b.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var H=v.current.getTotalLength();H&&j(H)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var A=vt("recharts-trapezoid",d);if(!g)return b.createElement("g",null,b.createElement("path",Vh({},un(t,!0),{className:A,d:vC(n,r,i,s,l)})));var R=_.current,D=S.current,$=N.current,G=E.current,K=C.current,B="0px ".concat(x===-1?1:x,"px"),L="".concat(x,"px 0px"),V=rP(["strokeDasharray"],h,f);return b.createElement(wm,{animationId:k,key:k,canBegin:x>0,duration:h,easing:f,isActive:g,begin:m},H=>{var se=Tn(R,i,H),M=Tn(D,s,H),z=Tn($,l,H),q=Tn(G,n,H),J=Tn(K,r,H);v.current&&(_.current=se,S.current=M,N.current=z,E.current=q,C.current=J);var X=H>0?{transition:V,strokeDasharray:L}:{strokeDasharray:B};return b.createElement("path",Vh({},un(t,!0),{className:A,d:vC(q,J,se,M,z),ref:v,style:gC(gC({},X),t.style)}))})},aQ=["option","shapeType","propTransformer","activeClassName","isActive"];function iQ(e,t){if(e==null)return{};var n,r,i=sQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){oQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oQ(e,t,n){return(t=lQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lQ(e){var t=cQ(e,"string");return typeof t=="symbol"?t:t+""}function cQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uQ(e,t){return Wh(Wh({},t),e)}function dQ(e,t){return e==="symbols"}function bC(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return b.createElement(oP,n);case"trapezoid":return b.createElement(rQ,n);case"sector":return b.createElement(uP,n);case"symbols":if(dQ(t))return b.createElement(Qb,n);break;default:return null}}function fQ(e){return b.isValidElement(e)?e.props:e}function R3(e){var{option:t,shapeType:n,propTransformer:r=uQ,activeClassName:i="recharts-active-shape",isActive:s}=e,l=iQ(e,aQ),d;if(b.isValidElement(t))d=b.cloneElement(t,Wh(Wh({},l),fQ(t)));else if(typeof t=="function")d=t(l);else if(JX(t)&&typeof t!="boolean"){var f=r(t,l);d=b.createElement(bC,{shapeType:n,elementProps:f})}else{var h=l;d=b.createElement(bC,{shapeType:n,elementProps:h})}return s?b.createElement(Zn,{className:i},d):d}var Ow=(e,t)=>{var n=qt();return(r,i)=>s=>{e==null||e(r,i,s),n(WM({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Cw=e=>{var t=qt();return(n,r)=>i=>{e==null||e(n,r,i),t(VY())}},kw=(e,t)=>{var n=qt();return(r,i)=>s=>{e==null||e(r,i,s),n(WY({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function D3(e){var{fn:t,args:n}=e,r=qt(),i=qr();return b.useEffect(()=>{if(!i){var s=t(n);return r(KY(s)),()=>{r(GY(s))}}},[t,n,r,i]),null}var I3=()=>{};function hQ(e){var{legendPayload:t}=e,n=qt(),r=qr();return b.useEffect(()=>r?I3:(n(ZT(t)),()=>{n(eP(t))}),[n,r,t]),null}function mQ(e){var{legendPayload:t}=e,n=qt(),r=Te(lt);return b.useEffect(()=>r!=="centric"&&r!=="radial"?I3:(n(ZT(t)),()=>{n(eP(t))}),[n,r,t]),null}var By,pQ=()=>{var[e]=b.useState(()=>wu("uid-"));return e},gQ=(By=H4.useId)!==null&&By!==void 0?By:pQ;function vQ(e,t){var n=gQ();return t||(e?"".concat(e,"-").concat(n):n)}var yQ=b.createContext(void 0),L3=e=>{var{id:t,type:n,children:r}=e,i=vQ("recharts-".concat(n),t);return b.createElement(yQ.Provider,{value:i},r(i))},bQ={cartesianItems:[],polarItems:[]},$3=br({name:"graphicalItems",initialState:bQ,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Qa(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Qa(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Qa(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:xQ,replaceCartesianGraphicalItem:wQ,removeCartesianGraphicalItem:_Q,addPolarGraphicalItem:jQ,removePolarGraphicalItem:SQ}=$3.actions,NQ=$3.reducer;function EQ(e){var t=qt(),n=b.useRef(null);return b.useEffect(()=>{n.current===null?t(xQ(e)):n.current!==e&&t(wQ({prev:n.current,next:e})),n.current=e},[t,e]),b.useEffect(()=>()=>{n.current&&(t(_Q(n.current)),n.current=null)},[t]),null}function OQ(e){var t=qt();return b.useEffect(()=>(t(jQ(e)),()=>{t(SQ(e))}),[t,e]),null}var CQ=["onMouseEnter","onClick","onMouseLeave"],kQ=["id"],AQ=["id"];function Aw(e,t){if(e==null)return{};var n,r,i=TQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){PQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PQ(e,t,n){return(t=MQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MQ(e){var t=RQ(e,"string");return typeof t=="symbol"?t:t+""}function RQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},es.apply(null,arguments)}function DQ(e){var t=b.useMemo(()=>Gb(e.children,rd),[e.children]),n=Te(r=>YX(r,e.id,t));return n==null?null:b.createElement(mQ,{legendPayload:n})}function IQ(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:d,hide:f,tooltipType:h}=e;return{dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:gm(d,t),hide:f,type:h,color:l,unit:""}}}var LQ=(e,t)=>e>t?"start":e<t?"end":"middle",$Q=(e,t,n)=>Dn(typeof t=="function"?t(e):t,n,n*.8),zQ=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,d=HT(s,l),f=i+Dn(e.cx,s,s/2),h=r+Dn(e.cy,l,l/2),m=Dn(e.innerRadius,d,0),g=$Q(n,e.outerRadius,d),v=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:m,outerRadius:g,maxRadius:v}},UQ=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function qQ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var BQ=(e,t)=>{if(b.isValidElement(e))return b.cloneElement(e,t);if(typeof e=="function")return e(t);var n=vt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return b.createElement(nP,es({},t,{type:"linear",className:n}))},FQ=(e,t,n)=>{if(b.isValidElement(e))return b.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),b.isValidElement(r)))return r;var i=vt("recharts-pie-label-text",qQ(e));return b.createElement($m,es({},t,{alignmentBaseline:"middle",className:i}),r)};function HQ(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var d=is(n),f=un(i,!1),h=un(s,!1),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((v,x)=>{var j=(v.startAngle+v.endAngle)/2,_=nn(v.cx,v.cy,v.outerRadius+m,j),S=Dt(Dt(Dt(Dt({},d),v),{},{stroke:"none"},f),{},{index:x,textAnchor:LQ(_.x,v.cx)},_),N=Dt(Dt(Dt(Dt({},d),v),{},{fill:"none",stroke:v.fill},h),{},{index:x,points:[nn(v.cx,v.cy,v.outerRadius,j),_],key:"line"});return b.createElement(Zn,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(x)},s&&BQ(s,N),FQ(i,S,Ut(v,l)))});return b.createElement(Zn,{className:"recharts-pie-labels"},g)}function KQ(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?b.createElement(k3,{label:i}):b.createElement(HQ,{sectors:t,props:n,showLabels:r})}function GQ(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Te(oo),{onMouseEnter:l,onClick:d,onMouseLeave:f}=i,h=Aw(i,CQ),m=Ow(l,i.dataKey),g=Cw(f),v=kw(d,i.dataKey);return t==null||t.length===0?null:b.createElement(b.Fragment,null,t.map((x,j)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var _=n&&String(j)===s,S=s?r:null,N=_?n:S,E=Dt(Dt({},x),{},{stroke:x.stroke,tabIndex:-1,[WT]:j,[XT]:i.dataKey});return b.createElement(Zn,es({tabIndex:-1,className:"recharts-pie-sector"},Bu(h,x,j),{onMouseEnter:m(x,j),onMouseLeave:g(x,j),onClick:v(x,j),key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(j)}),b.createElement(R3,es({option:N,isActive:_,shapeType:"sector"},E)))}))}function YQ(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:d,endAngle:f,dataKey:h,nameKey:m,tooltipType:g}=n,v=Math.abs(n.minAngle),x=UQ(d,f),j=Math.abs(x),_=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,S=r.filter(R=>Ut(R,h,0)!==0).length,N=(j>=360?S:S-1)*_,E=j-S*v-N,C=r.reduce((R,D)=>{var $=Ut(D,h,0);return R+(Pe($)?$:0)},0),k;if(C>0){var A;k=r.map((R,D)=>{var $=Ut(R,h,0),G=Ut(R,m,D),K=zQ(n,s,R),B=(Pe($)?$:0)/C,L,V=Dt(Dt({},R),i&&i[D]&&i[D].props);D?L=A.endAngle+bn(x)*_*($!==0?1:0):L=d;var H=L+bn(x)*(($!==0?v:0)+B*E),se=(L+H)/2,M=(K.innerRadius+K.outerRadius)/2,z=[{name:G,value:$,payload:V,dataKey:h,type:g}],q=nn(K.cx,K.cy,M,se);return A=Dt(Dt(Dt(Dt({},n.presentationProps),{},{percent:B,cornerRadius:l,name:G,tooltipPayload:z,midAngle:se,middleRadius:M,tooltipPosition:q},V),K),{},{value:$,startAngle:L,endAngle:H,payload:V,paddingAngle:bn(x)*_}),A})}return k}function VQ(e){var{showLabels:t,sectors:n,children:r}=e,i=b.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return b.createElement(TX,{value:t?i:void 0},r)}function WQ(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:d,activeShape:f,inactiveShape:h,onAnimationStart:m,onAnimationEnd:g}=t,v=_m(t,"recharts-pie-"),x=n.current,[j,_]=b.useState(!1),S=b.useCallback(()=>{typeof g=="function"&&g(),_(!1)},[g]),N=b.useCallback(()=>{typeof m=="function"&&m(),_(!0)},[m]);return b.createElement(VQ,{showLabels:!j,sectors:r},b.createElement(wm,{animationId:v,begin:s,duration:l,isActive:i,easing:d,onAnimationStart:N,onAnimationEnd:S,key:v},E=>{var C=[],k=r&&r[0],A=k==null?void 0:k.startAngle;return r==null||r.forEach((R,D)=>{var $=x&&x[D],G=D>0?ro(R,"paddingAngle",0):0;if($){var K=Tn($.endAngle-$.startAngle,R.endAngle-R.startAngle,E),B=Dt(Dt({},R),{},{startAngle:A+G,endAngle:A+K+G});C.push(B),A=B.endAngle}else{var{endAngle:L,startAngle:V}=R,H=Tn(0,L-V,E),se=Dt(Dt({},R),{},{startAngle:A+G,endAngle:A+H+G});C.push(se),A=se.endAngle}}),n.current=C,b.createElement(Zn,null,b.createElement(GQ,{sectors:C,activeShape:f,inactiveShape:h,allOtherPieProps:t}))}),b.createElement(KQ,{showLabels:!j,sectors:r,props:t}),t.children)}var XQ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!fo.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function QQ(e){var{id:t}=e,n=Aw(e,kQ),{hide:r,className:i,rootTabIndex:s}=e,l=b.useMemo(()=>Gb(e.children,rd),[e.children]),d=Te(m=>VX(m,t,l)),f=b.useRef(null),h=vt("recharts-pie",i);return r||d==null?(f.current=null,b.createElement(Zn,{tabIndex:s,className:h})):b.createElement(b.Fragment,null,b.createElement(D3,{fn:IQ,args:Dt(Dt({},e),{},{sectors:d})}),b.createElement(Zn,{tabIndex:s,className:h},b.createElement(WQ,{props:Dt(Dt({},n),{},{sectors:d}),previousSectorsRef:f})))}function z3(e){var t=Un(e,XQ),{id:n}=t,r=Aw(t,AQ),i=is(r);return b.createElement(L3,{id:n,type:"pie"},s=>b.createElement(b.Fragment,null,b.createElement(OQ,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),b.createElement(DQ,es({},r,{id:s})),b.createElement(QQ,es({},r,{id:s}))))}z3.displayName="Pie";function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(r){JQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JQ(e,t,n){return(t=ZQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZQ(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tJ={xAxis:{},yAxis:{},zAxis:{}},U3=br({name:"cartesianAxis",initialState:tJ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=_C(_C({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:nJ,removeXAxis:rJ,addYAxis:aJ,removeYAxis:iJ,addZAxis:nae,removeZAxis:rae,updateYAxisWidth:sJ}=U3.actions,oJ=U3.reducer,lJ=ae([dn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),cJ=ae([lJ,oi,li],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),q3=()=>Te(cJ),uJ="Invariant failed";function dJ(e,t){throw new Error(uJ)}var fJ=["x","y"];function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ab.apply(null,arguments)}function jC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(n),!0).forEach(function(r){hJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hJ(e,t,n){return(t=mJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mJ(e){var t=pJ(e,"string");return typeof t=="symbol"?t:t+""}function pJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gJ(e,t){if(e==null)return{};var n,r,i=vJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yJ(e,t){var{x:n,y:r}=e,i=gJ(e,fJ),s="".concat(n),l=parseInt(s,10),d="".concat(r),f=parseInt(d,10),h="".concat(t.height||i.height),m=parseInt(h,10),g="".concat(t.width||i.width),v=parseInt(g,10);return nu(nu(nu(nu(nu({},t),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:m,width:v,name:t.name,radius:t.radius})}function Tw(e){return b.createElement(R3,ab({shapeType:"rectangle",propTransformer:yJ,activeClassName:"recharts-active-bar"},e))}var bJ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Pe(t))return t;var s=Pe(r)||xn(r);return s?t(r,i):(s||dJ(),n)}},xJ={},B3=br({name:"errorBars",initialState:xJ,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:aae,replaceErrorBar:iae,removeErrorBar:sae}=B3.actions,wJ=B3.reducer,_J=["children"];function jJ(e,t){if(e==null)return{};var n,r,i=SJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function SJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var NJ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},EJ=b.createContext(NJ);function OJ(e){var{children:t}=e,n=jJ(e,_J);return b.createElement(EJ.Provider,{value:n},t)}function F3(e,t){var n,r,i=Te(h=>ui(h,e)),s=Te(h=>di(h,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ur.allowDataOverflow,d=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:dr.allowDataOverflow,f=l||d;return{needClip:f,needClipX:l,needClipY:d}}function CJ(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=q3(),{needClipX:s,needClipY:l,needClip:d}=F3(t,n);if(!d)return null;var{x:f,y:h,width:m,height:g}=i;return b.createElement("clipPath",{id:"clipPath-".concat(r)},b.createElement("rect",{x:s?f:f-m/2,y:l?h:h-g/2,width:s?m:m*2,height:l?g:g*2}))}var kJ=["onMouseEnter","onMouseLeave","onClick"],AJ=["value","background","tooltipPosition"],TJ=["id"],PJ=["onMouseEnter","onClick","onMouseLeave"];function ts(){return ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ts.apply(null,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){MJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MJ(e,t,n){return(t=RJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RJ(e){var t=DJ(e,"string");return typeof t=="symbol"?t:t+""}function DJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xh(e,t){if(e==null)return{};var n,r,i=IJ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var LJ=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:gm(n,t),payload:e}]};function $J(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:gm(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:d}}}function zJ(e){var t=Te(oo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:d,onClick:f}=s,h=Xh(s,kJ),m=Ow(l,r),g=Cw(d),v=kw(f,r);if(!i||n==null)return null;var x=un(i,!1);return b.createElement(b.Fragment,null,n.map((j,_)=>{var{value:S,background:N,tooltipPosition:E}=j,C=Xh(j,AJ);if(!N)return null;var k=m(j,_),A=g(j,_),R=v(j,_),D=$n($n($n($n($n({option:i,isActive:String(_)===t},C),{},{fill:"#eee"},N),x),Bu(h,j,_)),{},{onMouseEnter:k,onMouseLeave:A,onClick:R,dataKey:r,index:_,className:"recharts-bar-background-rectangle"});return b.createElement(Tw,ts({key:"background-bar-".concat(D.index)},D))}))}function UJ(e){var{showLabels:t,children:n,rects:r}=e,i=r==null?void 0:r.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return $n($n({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return b.createElement(AX,{value:t?i:void 0},n)}function qJ(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,d=Te(oo),f=Te(l3),h=n&&String(s)===d&&(f==null||l===f),m=h?n:t;return b.createElement(Tw,ts({},r,i,{isActive:h,option:m,index:s,dataKey:l}))}function BJ(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return b.createElement(Tw,ts({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function FJ(e){var{data:t,props:n}=e,r=is(n),{id:i}=r,s=Xh(r,TJ),{shape:l,dataKey:d,activeBar:f}=n,{onMouseEnter:h,onClick:m,onMouseLeave:g}=n,v=Xh(n,PJ),x=Ow(h,d),j=Cw(g),_=kw(m,d);return t?b.createElement(b.Fragment,null,t.map((S,N)=>b.createElement(Zn,ts({className:"recharts-bar-rectangle"},Bu(v,S,N),{onMouseEnter:x(S,N),onMouseLeave:j(S,N),onClick:_(S,N),key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(N)}),f?b.createElement(qJ,{shape:l,activeBar:f,baseProps:s,entry:S,index:N,dataKey:d}):b.createElement(BJ,{shape:l,baseProps:s,entry:S,index:N,dataKey:d})))):null}function HJ(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:d,animationEasing:f,onAnimationEnd:h,onAnimationStart:m}=t,g=n.current,v=_m(t,"recharts-bar-"),[x,j]=b.useState(!1),_=!x,S=b.useCallback(()=>{typeof h=="function"&&h(),j(!1)},[h]),N=b.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return b.createElement(UJ,{showLabels:_,rects:r},b.createElement(wm,{animationId:v,begin:l,duration:d,isActive:s,easing:f,onAnimationEnd:S,onAnimationStart:N,key:v},E=>{var C=E===1?r:r==null?void 0:r.map((k,A)=>{var R=g&&g[A];if(R)return $n($n({},k),{},{x:Tn(R.x,k.x,E),y:Tn(R.y,k.y,E),width:Tn(R.width,k.width,E),height:Tn(R.height,k.height,E)});if(i==="horizontal"){var D=Tn(0,k.height,E);return $n($n({},k),{},{y:k.y+k.height-D,height:D})}var $=Tn(0,k.width,E);return $n($n({},k),{},{width:$})});return E>0&&(n.current=C??null),C==null?null:b.createElement(Zn,null,b.createElement(FJ,{props:t,data:C}))}),b.createElement(k3,{label:t.label}),t.children)}function KJ(e){var t=b.useRef(null);return b.createElement(HJ,{previousRectanglesRef:t,props:e})}var H3=0,GJ=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ut(e,t)}};class YJ extends b.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:d,background:f,id:h}=this.props;if(t||n==null)return null;var m=vt("recharts-bar",i),g=h;return b.createElement(Zn,{className:m,id:h},d&&b.createElement("defs",null,b.createElement(CJ,{clipPathId:g,xAxisId:s,yAxisId:l})),b.createElement(Zn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},b.createElement(zJ,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),b.createElement(KJ,this.props)))}}var VJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!fo.isSsr,legendType:"rect",minPointSize:H3,xAxisId:0,yAxisId:0};function WJ(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:m}=e,{needClip:g}=F3(t,n),v=hx(),x=qr(),j=Gb(e.children,rd),_=Te(E=>jZ(E,t,n,x,e.id,j));if(v!=="vertical"&&v!=="horizontal")return null;var S,N=_==null?void 0:_[0];return N==null||N.height==null||N.width==null?S=0:S=v==="vertical"?N.height/2:N.width/2,b.createElement(OJ,{xAxisId:t,yAxisId:n,data:_,dataPointFormatter:GJ,errorBarOffset:S},b.createElement(YJ,ts({},e,{layout:v,needClip:g,data:_,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:d,animationDuration:f,animationEasing:h,isAnimationActive:m})))}function XJ(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:d,xAxisTicks:f,yAxisTicks:h,stackedData:m,displayedData:g,offset:v,cells:x,parentViewBox:j}=e,_=t==="horizontal"?d:l,S=m?_.scale.domain():null,N=u9({numericAxis:_});return g.map((E,C)=>{var k,A,R,D,$,G;m?k=a9(m[C],S):(k=Ut(E,n),Array.isArray(k)||(k=[N,k]));var K=bJ(r,H3)(k[1],C);if(t==="horizontal"){var B,[L,V]=[d.scale(k[0]),d.scale(k[1])];A=cE({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:E,index:C}),R=(B=V??L)!==null&&B!==void 0?B:void 0,D=i.size;var H=L-V;if($=gr(H)?0:H,G={x:A,y:v.top,width:D,height:v.height},Math.abs(K)>0&&Math.abs($)<Math.abs(K)){var se=bn($||K)*(Math.abs(K)-Math.abs($));R-=se,$+=se}}else{var[M,z]=[l.scale(k[0]),l.scale(k[1])];if(A=M,R=cE({axis:d,ticks:h,bandSize:s,offset:i.offset,entry:E,index:C}),D=z-M,$=i.size,G={x:v.left,y:R,width:v.width,height:$},Math.abs(K)>0&&Math.abs(D)<Math.abs(K)){var q=bn(D||K)*(Math.abs(K)-Math.abs(D));D+=q}}if(A==null||R==null||D==null||$==null)return null;var J=$n($n({},E),{},{x:A,y:R,width:D,height:$,value:m?k:k[1],payload:E,background:G,tooltipPosition:{x:A+D/2,y:R+$/2},parentViewBox:j},x&&x[C]&&x[C].props);return J}).filter(Boolean)}function QJ(e){var t=Un(e,VJ),n=qr();return b.createElement(L3,{id:t.id,type:"bar"},r=>b.createElement(b.Fragment,null,b.createElement(hQ,{legendPayload:LJ(t)}),b.createElement(D3,{fn:$J,args:t}),b.createElement(EQ,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:c9(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),b.createElement(WJ,ts({},t,{id:r}))))}var ib=b.memo(QJ);ib.displayName="Bar";function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(n),!0).forEach(function(r){JJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JJ(e,t,n){return(t=ZJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZJ(e){var t=eZ(e,"string");return typeof t=="symbol"?t:t+""}function eZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tZ=(e,t)=>t,nZ=(e,t,n)=>n,rZ=(e,t,n,r)=>r,aZ=(e,t,n,r,i)=>i,ad=ae([Qx,aZ],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),iZ=ae([ad],e=>e==null?void 0:e.maxBarSize),sZ=(e,t,n,r,i,s)=>s,EC=(e,t,n)=>{var r=n??e;if(!xn(r))return Dn(r,t,0)},oZ=ae([lt,Qx,tZ,nZ,rZ],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),lZ=(e,t,n,r)=>{var i=lt(e);return i==="horizontal"?J0(e,"yAxis",n,r):J0(e,"xAxis",t,r)},cZ=(e,t,n)=>{var r=lt(e);return r==="horizontal"?EO(e,"xAxis",t):EO(e,"yAxis",n)},uZ=(e,t,n)=>{var r={},i=e.filter(Pm),s=e.filter(h=>h.stackId==null),l=i.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),r),d=Object.entries(l).map(h=>{var[m,g]=h,v=g.map(j=>j.dataKey),x=EC(t,n,g[0].barSize);return{stackId:m,dataKeys:v,barSize:x}}),f=s.map(h=>{var m=[h.dataKey].filter(v=>v!=null),g=EC(t,n,h.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...d,...f]},dZ=ae([oZ,HG,cZ],uZ),fZ=(e,t,n,r,i)=>{var s,l,d=ad(e,t,n,r,i);if(d!=null){var f=lt(e),h=sM(e),{maxBarSize:m}=d,g=xn(m)?h:m,v,x;return f==="horizontal"?(v=$l(e,"xAxis",t,r),x=Ll(e,"xAxis",t,r)):(v=$l(e,"yAxis",n,r),x=Ll(e,"yAxis",n,r)),(s=(l=lx(v,x,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},K3=(e,t,n,r)=>{var i=lt(e),s,l;return i==="horizontal"?(s=$l(e,"xAxis",t,r),l=Ll(e,"xAxis",t,r)):(s=$l(e,"yAxis",n,r),l=Ll(e,"yAxis",n,r)),lx(s,l)};function hZ(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Dn(e,n,0,!0),d,f=[];if(yr(r[0].barSize)){var h=!1,m=n/s,g=r.reduce((N,E)=>N+(E.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&m>0&&(h=!0,m*=.9,g=s*m);var v=(n-g)/2>>0,x={offset:v-l,size:0};d=r.reduce((N,E)=>{var C,k={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:h?m:(C=E.barSize)!==null&&C!==void 0?C:0}},A=[...N,k];return x=A[A.length-1].position,A},f)}else{var j=Dn(t,n,0,!0);n-2*j-(s-1)*l<=0&&(l=0);var _=(n-2*j-(s-1)*l)/s;_>1&&(_>>=0);var S=yr(i)?Math.min(_,i):_;d=r.reduce((N,E,C)=>[...N,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(_+l)*C+(_-S)/2,size:S}}],f)}return d}}var mZ=(e,t,n,r,i,s,l)=>{var d=xn(l)?t:l,f=hZ(n,r,i!==s?i:s,e,d);return i!==s&&f!=null&&(f=f.map(h=>Bf(Bf({},h),{},{position:Bf(Bf({},h.position),{},{offset:h.position.offset-i/2})}))),f},pZ=ae([dZ,sM,FG,oM,fZ,K3,iZ],mZ),gZ=(e,t,n,r)=>$l(e,"xAxis",t,r),vZ=(e,t,n,r)=>$l(e,"yAxis",n,r),yZ=(e,t,n,r)=>Ll(e,"xAxis",t,r),bZ=(e,t,n,r)=>Ll(e,"yAxis",n,r),xZ=ae([pZ,ad],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),wZ=(e,t)=>{var n=Vx(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},_Z=ae([lZ,ad],wZ),jZ=ae([dn,cx,gZ,vZ,yZ,bZ,xZ,lt,zx,K3,_Z,ad,sZ],(e,t,n,r,i,s,l,d,f,h,m,g,v)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:_}=f;if(!(g==null||l==null||t==null||d!=="horizontal"&&d!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:S}=g,N;if(S!=null&&S.length>0?N=S:N=x==null?void 0:x.slice(j,_+1),N!=null)return XJ({layout:d,barSettings:g,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:m,displayedData:N,offset:e,cells:v})}}),G3=e=>{var{chartData:t}=e,n=qt(),r=qr();return b.useEffect(()=>r?()=>{}:(n(IO(t)),()=>{n(IO(void 0))}),[t,n,r]),null},OC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Y3=br({name:"brush",initialState:OC,reducers:{setBrushSettings(e,t){return t.payload==null?OC:t.payload}}}),{setBrushSettings:oae}=Y3.actions,SZ=Y3.reducer;function NZ(e,t,n){return(t=EZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EZ(e){var t=OZ(e,"string");return typeof t=="symbol"?t:t+""}function OZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Pw{static create(t){return new Pw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}NZ(Pw,"EPS",1e-4);function CZ(e){return(e%180+180)%180}var kZ=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=CZ(i),l=s*Math.PI/180,d=Math.atan(r/n),f=l>d&&l<Math.PI-d?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},AZ={dots:[],areas:[],lines:[]},V3=br({name:"referenceElements",initialState:AZ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Qa(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Qa(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Qa(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:lae,removeDot:cae,addArea:uae,removeArea:dae,addLine:fae,removeLine:hae}=V3.actions,TZ=V3.reducer,PZ=b.createContext(void 0),MZ=e=>{var{children:t}=e,[n]=b.useState("".concat(wu("recharts"),"-clip")),r=q3();if(r==null)return null;var{x:i,y:s,width:l,height:d}=r;return b.createElement(PZ.Provider,{value:n},b.createElement("defs",null,b.createElement("clipPath",{id:n},b.createElement("rect",{x:i,y:s,height:d,width:l}))),t)};function zl(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function W3(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function RZ(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return kZ(r,n)}function DZ(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:d}=e;return t===1?{start:r?i:s,end:r?i+l:s+d}:{start:r?i+l:s+d,end:r?i:s}}function Qh(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function IZ(e,t){return W3(e,t+1)}function LZ(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:d}=t,f=0,h=1,m=l,g=function(){var j=r==null?void 0:r[f];if(j===void 0)return{v:W3(r,h)};var _=f,S,N=()=>(S===void 0&&(S=n(j,_)),S),E=j.coordinate,C=f===0||Qh(e,E,N,m,d);C||(f=0,m=l,h+=1),C&&(m=E+e*(N()/2+i),f+=h)},v;h<=s.length;)if(v=g(),v)return v.v;return[]}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(r){$Z(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Z(e,t,n){return(t=zZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zZ(e){var t=UZ(e,"string");return typeof t=="symbol"?t:t+""}function UZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qZ(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:d}=t,{end:f}=t,h=function(v){var x=s[v],j,_=()=>(j===void 0&&(j=n(x,v)),j);if(v===l-1){var S=e*(x.coordinate+e*_()/2-f);s[v]=x=Mn(Mn({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[v]=x=Mn(Mn({},x),{},{tickCoord:x.coordinate});var N=Qh(e,x.tickCoord,_,d,f);N&&(f=x.tickCoord-e*(_()/2+i),s[v]=Mn(Mn({},x),{},{isShow:!0}))},m=l-1;m>=0;m--)h(m);return s}function BZ(e,t,n,r,i,s){var l=(r||[]).slice(),d=l.length,{start:f,end:h}=t;if(s){var m=r[d-1],g=n(m,d-1),v=e*(m.coordinate+e*g/2-h);l[d-1]=m=Mn(Mn({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate});var x=Qh(e,m.tickCoord,()=>g,f,h);x&&(h=m.tickCoord-e*(g/2+i),l[d-1]=Mn(Mn({},m),{},{isShow:!0}))}for(var j=s?d-1:d,_=function(E){var C=l[E],k,A=()=>(k===void 0&&(k=n(C,E)),k);if(E===0){var R=e*(C.coordinate-e*A()/2-f);l[E]=C=Mn(Mn({},C),{},{tickCoord:R<0?C.coordinate-R*e:C.coordinate})}else l[E]=C=Mn(Mn({},C),{},{tickCoord:C.coordinate});var D=Qh(e,C.tickCoord,A,f,h);D&&(f=C.tickCoord+e*(A()/2+i),l[E]=Mn(Mn({},C),{},{isShow:!0}))},S=0;S<j;S++)_(S);return l}function Mw(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:d,interval:f,tickFormatter:h,unit:m,angle:g}=e;if(!i||!i.length||!r)return[];if(Pe(f)||fo.isSsr){var v;return(v=IZ(i,Pe(f)?f:0))!==null&&v!==void 0?v:[]}var x=[],j=d==="top"||d==="bottom"?"width":"height",_=m&&j==="width"?gu(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(C,k)=>{var A=typeof h=="function"?h(C.value,k):C.value;return j==="width"?RZ(gu(A,{fontSize:t,letterSpacing:n}),_,g):gu(A,{fontSize:t,letterSpacing:n})[j]},N=i.length>=2?bn(i[1].coordinate-i[0].coordinate):1,E=DZ(s,N,j);return f==="equidistantPreserveStart"?LZ(N,E,S,i,l):(f==="preserveStart"||f==="preserveStartEnd"?x=BZ(N,E,S,i,l,f==="preserveStartEnd"):x=qZ(N,E,S,i,l),x.filter(C=>C.isShow))}var FZ=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var d=n?n.getBoundingClientRect().width:0,f=i+s,h=l+f+d+(n?r:0);return Math.round(h)}return 0},HZ=["axisLine","width","height","className","hide","ticks"],KZ=["viewBox"],GZ=["viewBox"];function sb(e,t){if(e==null)return{};var n,r,i=YZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(null,arguments)}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){VZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VZ(e,t,n){return(t=WZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WZ(e){var t=XZ(e,"string");return typeof t=="symbol"?t:t+""}function XZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rw={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function QZ(e){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:d,otherSvgProps:f}=e;if(!d)return null;var h=cn(cn(cn({},f),un(d,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var m=+(s==="top"&&!l||s==="bottom"&&l);h=cn(cn({},h),{},{x1:t,y1:n+m*i,x2:t+r,y2:n+m*i})}else{var g=+(s==="left"&&!l||s==="right"&&l);h=cn(cn({},h),{},{x1:t+g*r,y1:n,x2:t+g*r,y2:n+i})}return b.createElement("line",lo({},h,{className:vt("recharts-cartesian-axis-line",ro(d,"className"))}))}function JZ(e,t,n,r,i,s,l,d,f){var h,m,g,v,x,j,_=d?-1:1,S=e.tickSize||l,N=Pe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=m=e.coordinate,v=n+ +!d*i,g=v-_*S,j=g-_*f,x=N;break;case"left":g=v=e.coordinate,m=t+ +!d*r,h=m-_*S,x=h-_*f,j=N;break;case"right":g=v=e.coordinate,m=t+ +d*r,h=m+_*S,x=h+_*f,j=N;break;default:h=m=e.coordinate,v=n+ +d*i,g=v+_*S,j=g+_*f,x=N;break}return{line:{x1:h,y1:g,x2:m,y2:v},tick:{x,y:j}}}function ZZ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function eee(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function tee(e){var{option:t,tickProps:n,value:r}=e,i,s=vt(n.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))i=b.cloneElement(t,cn(cn({},n),{},{className:s}));else if(typeof t=="function")i=t(cn(cn({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=vt(l,t==null?void 0:t.className)),i=b.createElement($m,lo({},n,{className:l}),r)}return i}function nee(e){var{ticks:t=[],tick:n,tickLine:r,stroke:i,tickFormatter:s,unit:l,padding:d,tickTextProps:f,orientation:h,mirror:m,x:g,y:v,width:x,height:j,tickSize:_,tickMargin:S,fontSize:N,letterSpacing:E,getTicksConfig:C,events:k}=e,A=Mw(cn(cn({},C),{},{ticks:t}),N,E),R=ZZ(h,m),D=eee(h,m),$=is(C),G=un(n,!1),K=cn(cn({},$),{},{fill:"none"},un(r,!1)),B=A.map((L,V)=>{var{line:H,tick:se}=JZ(L,g,v,x,j,h,_,m,S),M=cn(cn(cn(cn({textAnchor:R,verticalAnchor:D},$),{},{stroke:"none",fill:i},G),se),{},{index:V,payload:L,visibleTicksCount:A.length,tickFormatter:s,padding:d},f);return b.createElement(Zn,lo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},Bu(k,L,V)),r&&b.createElement("line",lo({},K,H,{className:vt("recharts-cartesian-axis-tick-line",ro(r,"className"))})),n&&b.createElement(tee,{option:n,tickProps:M,value:"".concat(typeof s=="function"?s(L.value,V):L.value).concat(l||"")}))});return B.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},B):null}var ree=b.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:s,hide:l,ticks:d}=e,f=sb(e,HZ),[h,m]=b.useState(""),[g,v]=b.useState(""),x=b.useRef([]);b.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return FZ({ticks:x.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=b.useCallback(_=>{if(_){var S=_.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=Array.from(S);var N=S[0];if(N){var E=window.getComputedStyle(N),C=E.fontSize,k=E.letterSpacing;(C!==h||k!==g)&&(m(C),v(k))}}},[h,g]);return l||r!=null&&r<=0||i!=null&&i<=0?null:b.createElement(Zn,{className:vt("recharts-cartesian-axis",s),ref:j},b.createElement(QZ,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:is(e)}),b.createElement(nee,{ticks:d,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:h,letterSpacing:g,getTicksConfig:e,events:f}),b.createElement(cX,{x:e.x,y:e.y,width:e.width,height:e.height},b.createElement(bX,{label:e.label}),e.children))}),aee=b.memo(ree,(e,t)=>{var{viewBox:n}=e,r=sb(e,KZ),{viewBox:i}=t,s=sb(t,GZ);return zl(n,i)&&zl(r,s)}),Dw=b.forwardRef((e,t)=>{var n=Un(e,Rw);return b.createElement(aee,lo({},n,{ref:t}))});Dw.displayName="CartesianAxis";var iee=["x1","y1","x2","y2","key"],see=["offset"],oee=["xAxisId","yAxisId"],lee=["xAxisId","yAxisId"];function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(r){cee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cee(e,t,n){return(t=uee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uee(e){var t=dee(e,"string");return typeof t=="symbol"?t:t+""}function dee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(null,arguments)}function Jh(e,t){if(e==null)return{};var n,r,i=fee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hee=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:d}=e;return b.createElement("rect",{x:r,y:i,ry:d,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function X3(e,t){var n;if(b.isValidElement(e))n=b.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:d}=t,f=Jh(t,iee),h=is(f),{offset:m}=h,g=Jh(h,see);n=b.createElement("line",Xs({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:d}))}return n}function mee(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,d=Jh(e,oee),f=i.map((h,m)=>{var g=Rn(Rn({},d),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(m),index:m});return X3(r,g)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function pee(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,d=Jh(e,lee),f=i.map((h,m)=>{var g=Rn(Rn({},d),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(m),index:m});return X3(r,g)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function gee(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:d,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var h=d.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==h[0]&&h.unshift(0);var m=h.map((g,v)=>{var x=!h[v+1],j=x?i+l-g:h[v+1]-g;if(j<=0)return null;var _=v%t.length;return b.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:j,width:s,stroke:"none",fill:t[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function vee(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:d,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,v)=>g-v);i!==h[0]&&h.unshift(0);var m=h.map((g,v)=>{var x=!h[v+1],j=x?i+l-g:h[v+1]-g;if(j<=0)return null;var _=v%n.length;return b.createElement("rect",{key:"react-".concat(v),x:g,y:s,width:j,height:d,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var yee=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return GT(Mw(Rn(Rn(Rn({},Rw),n),{},{ticks:YT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},bee=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return GT(Mw(Rn(Rn(Rn({},Rw),n),{},{ticks:YT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},xee={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Q3(e){var t=dx(),n=fx(),r=QT(),i=Rn(Rn({},Un(e,xee)),{},{x:Pe(e.x)?e.x:r.left,y:Pe(e.y)?e.y:r.top,width:Pe(e.width)?e.width:r.width,height:Pe(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:d,y:f,width:h,height:m,syncWithTicks:g,horizontalValues:v,verticalValues:x}=i,j=qr(),_=Te(G=>OO(G,"xAxis",s,j)),S=Te(G=>OO(G,"yAxis",l,j));if(!Pe(h)||h<=0||!Pe(m)||m<=0||!Pe(d)||d!==+d||!Pe(f)||f!==+f)return null;var N=i.verticalCoordinatesGenerator||yee,E=i.horizontalCoordinatesGenerator||bee,{horizontalPoints:C,verticalPoints:k}=i;if((!C||!C.length)&&typeof E=="function"){var A=v&&v.length,R=E({yAxis:S?Rn(Rn({},S),{},{ticks:A?v:S.ticks}):void 0,width:t,height:n,offset:r},A?!0:g);pu(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}if((!k||!k.length)&&typeof N=="function"){var D=x&&x.length,$=N({xAxis:_?Rn(Rn({},_),{},{ticks:D?x:_.ticks}):void 0,width:t,height:n,offset:r},D?!0:g);pu(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(k=$)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(hee,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),b.createElement(gee,Xs({},i,{horizontalPoints:C})),b.createElement(vee,Xs({},i,{verticalPoints:k})),b.createElement(mee,Xs({},i,{offset:r,horizontalPoints:C,xAxis:_,yAxis:S})),b.createElement(pee,Xs({},i,{offset:r,verticalPoints:k,xAxis:_,yAxis:S})))}Q3.displayName="CartesianGrid";var wee=["dangerouslySetInnerHTML","ticks"],_ee=["id"],jee=["domain"],See=["domain"];function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ob.apply(null,arguments)}function Zh(e,t){if(e==null)return{};var n,r,i=Nee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Eee(e){var t=qt();return b.useEffect(()=>(t(nJ(e)),()=>{t(rJ(e))}),[e,t]),null}var Oee=e=>{var{xAxisId:t,className:n}=e,r=Te(cx),i=qr(),s="xAxis",l=Te(S=>Jl(S,s,t,i)),d=Te(S=>FM(S,s,t,i)),f=Te(S=>zM(S,t)),h=Te(S=>DY(S,t)),m=Te(S=>gM(S,t));if(f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=e,x=Zh(e,wee),{id:j}=m,_=Zh(m,_ee);return b.createElement(Dw,ob({},x,_,{scale:l,x:h.x,y:h.y,width:f.width,height:f.height,className:vt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:d}))},Cee={allowDataOverflow:ur.allowDataOverflow,allowDecimals:ur.allowDecimals,allowDuplicatedCategory:ur.allowDuplicatedCategory,height:ur.height,hide:!1,mirror:ur.mirror,orientation:ur.orientation,padding:ur.padding,reversed:ur.reversed,scale:ur.scale,tickCount:ur.tickCount,type:ur.type,xAxisId:0},kee=e=>{var t,n,r,i,s,l=Un(e,Cee);return b.createElement(b.Fragment,null,b.createElement(Eee,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),b.createElement(Oee,l))},Aee=(e,t)=>{var{domain:n}=e,r=Zh(e,jee),{domain:i}=t,s=Zh(t,See);return zl(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:zl({domain:n},{domain:i}):!1},J3=b.memo(kee,Aee);J3.displayName="XAxis";var Tee=["dangerouslySetInnerHTML","ticks"],Pee=["id"],Mee=["domain"],Ree=["domain"];function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lb.apply(null,arguments)}function em(e,t){if(e==null)return{};var n,r,i=Dee(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Iee(e){var t=qt();return b.useEffect(()=>(t(aJ(e)),()=>{t(iJ(e))}),[e,t]),null}var Lee=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,s=b.useRef(null),l=b.useRef(null),d=Te(cx),f=qr(),h=qt(),m="yAxis",g=Te(A=>Jl(A,m,t,f)),v=Te(A=>UM(A,t)),x=Te(A=>LY(A,t)),j=Te(A=>FM(A,m,t,f)),_=Te(A=>vM(A,t));if(b.useLayoutEffect(()=>{if(!(r!=="auto"||!v||_w(i)||b.isValidElement(i)||_==null)){var A=s.current;if(A){var R=A.getCalculatedWidth();Math.round(v.width)!==Math.round(R)&&h(sJ({id:t,width:R}))}}},[j,v,h,i,t,r,_]),v==null||x==null||_==null)return null;var{dangerouslySetInnerHTML:S,ticks:N}=e,E=em(e,Tee),{id:C}=_,k=em(_,Pee);return b.createElement(Dw,lb({},E,k,{ref:s,labelRef:l,scale:g,x:x.x,y:x.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:v.width,height:v.height,className:vt("recharts-".concat(m," ").concat(m),n),viewBox:d,ticks:j}))},$ee={allowDataOverflow:dr.allowDataOverflow,allowDecimals:dr.allowDecimals,allowDuplicatedCategory:dr.allowDuplicatedCategory,hide:!1,mirror:dr.mirror,orientation:dr.orientation,padding:dr.padding,reversed:dr.reversed,scale:dr.scale,tickCount:dr.tickCount,type:dr.type,width:dr.width,yAxisId:0},zee=e=>{var t,n,r,i,s,l=Un(e,$ee);return b.createElement(b.Fragment,null,b.createElement(Iee,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(n=l.includeHidden)!==null&&n!==void 0?n:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(r=l.angle)!==null&&r!==void 0?r:0,minTickGap:(i=l.minTickGap)!==null&&i!==void 0?i:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),b.createElement(Lee,l))},Uee=(e,t)=>{var{domain:n}=e,r=em(e,Mee),{domain:i}=t,s=em(t,Ree);return zl(r,s)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:zl({domain:n},{domain:i}):!1},Z3=b.memo(zee,Uee);Z3.displayName="YAxis";var Fy={exports:{}},Hy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function qee(){if(TC)return Hy;TC=1;var e=Ul();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Hy.useSyncExternalStoreWithSelector=function(f,h,m,g,v){var x=i(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function S(A){if(!N){if(N=!0,E=A,A=g(A),v!==void 0&&j.hasValue){var R=j.value;if(v(R,A))return C=R}return C=A}if(R=C,n(E,A))return R;var D=g(A);return v!==void 0&&v(R,D)?(E=A,R):(E=A,C=D)}var N=!1,E,C,k=m===void 0?null:m;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,m,g,v]);var _=r(f,x[0],x[1]);return s(function(){j.hasValue=!0,j.value=_},[_]),d(_),_},Hy}var PC;function Bee(){return PC||(PC=1,Fy.exports=qee()),Fy.exports}Bee();function Fee(e){e()}function Hee(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Fee(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var MC={notify(){},get:()=>[]};function Kee(e,t){let n,r=MC,i=0,s=!1;function l(_){m();const S=r.subscribe(_);let N=!1;return()=>{N||(N=!0,S(),g())}}function d(){r.notify()}function f(){j.onStateChange&&j.onStateChange()}function h(){return s}function m(){i++,n||(n=e.subscribe(f),r=Hee())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=MC)}function v(){s||(s=!0,m())}function x(){s&&(s=!1,g())}const j={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:h,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>r};return j}var Gee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yee=Gee(),Vee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Wee=Vee(),Xee=()=>Yee||Wee?b.useLayoutEffect:b.useEffect,Qee=Xee(),Ky=Symbol.for("react-redux-context"),Gy=typeof globalThis<"u"?globalThis:{};function Jee(){if(!b.createContext)return{};const e=Gy[Ky]??(Gy[Ky]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var Zee=Jee();function ete(e){const{children:t,context:n,serverState:r,store:i}=e,s=b.useMemo(()=>{const f=Kee(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=b.useMemo(()=>i.getState(),[i]);Qee(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const d=n||Zee;return b.createElement(d.Provider,{value:s},t)}var tte=ete,nte=(e,t)=>t,Iw=ae([nte,lt,hM,hn,a3,fi,qV,dn],GV),Lw=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},eR=$r("mouseClick"),tR=Hu();tR.startListening({actionCreator:eR,effect:(e,t)=>{var n=e.payload,r=Iw(t.getState(),Lw(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(XY({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var cb=$r("mouseMove"),nR=Hu();nR.startListening({actionCreator:cb,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=hw(r,r.tooltip.settings.shared),s=Iw(r,Lw(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(QM({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(XM()))}});var RC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rR=br({name:"rootProps",initialState:RC,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:RC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),rte=rR.reducer,{updateOptions:ate}=rR.actions,aR=br({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:ite}=aR.actions,ste=aR.reducer,iR=$r("keyDown"),sR=$r("focus"),$w=Hu();$w.startListening({actionCreator:iR,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(mw(i,ec(n))),d=fi(n);if(s==="Enter"){var f=Gh(n,"axis","hover",String(i.index));t.dispatch(eb({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var h=qY(n),m=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,v=l+g*m;if(!(d==null||v>=d.length||v<0)){var x=Gh(n,"axis","hover",String(v));t.dispatch(eb({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});$w.startListening({actionCreator:sR,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Gh(n,"axis","hover",String(s));t.dispatch(eb({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Rr=$r("externalEvent"),oR=Hu();oR.startListening({actionCreator:Rr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:PV(n),activeDataKey:l3(n),activeIndex:oo(n),activeLabel:o3(n),activeTooltipIndex:oo(n),isTooltipActive:MV(n)};e.payload.handler(r,e.payload.reactEvent)}}});var ote=ae([Zl],e=>e.tooltipItemPayloads),lte=ae([ote,td,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(d=>d.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),lR=$r("touchMove"),cR=Hu();cR.startListening({actionCreator:lR,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=hw(r,r.tooltip.settings.shared);if(i==="axis"){var s=Iw(r,Lw({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(QM({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,d=n.touches[0],f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(WT),m=(l=f.getAttribute(XT))!==null&&l!==void 0?l:void 0,g=lte(t.getState(),h,m);t.dispatch(WM({activeDataKey:m,activeIndex:h,activeCoordinate:g}))}}});var cte=wT({brush:SZ,cartesianAxis:oJ,chartData:lW,errorBars:wJ,graphicalItems:NQ,layout:BB,legend:P9,options:rW,polarAxis:qX,polarOptions:ste,referenceElements:TZ,rootProps:rte,tooltip:QY}),ute=function(t){return hB({reducer:cte,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([tR.middleware,nR.middleware,$w.middleware,oR.middleware,cR.middleware]),devTools:fo.devToolsEnabled})};function uR(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=qr(),s=b.useRef(null);if(i)return n;s.current==null&&(s.current=ute(t));var l=nx;return b.createElement(tte,{context:l,store:s.current},n)}function dR(e){var{layout:t,width:n,height:r,margin:i}=e,s=qt(),l=qr();return b.useEffect(()=>{l||(s(zB(t)),s(UB({width:n,height:r})),s($B(i)))},[s,l,t,n,r,i]),null}function fR(e){var t=qt();return b.useEffect(()=>{t(ate(e))},[t,e]),null}var dte=["children"];function fte(e,t){if(e==null)return{};var n,r,i=hte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tm.apply(null,arguments)}var mte={width:"100%",height:"100%"},pte=b.forwardRef((e,t)=>{var n=dx(),r=fx(),i=tP();if(!Pl(n)||!Pl(r))return null;var{children:s,otherAttributes:l,title:d,desc:f}=e,h,m;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?m=l.role:m=i?"application":void 0,b.createElement(Yb,tm({},l,{title:d,desc:f,role:m,tabIndex:h,width:n,height:r,style:mte,ref:t}),s)}),gte=e=>{var{children:t}=e,n=Te(xm);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return b.createElement(Yb,{width:r,height:i,x:l,y:s},t)},DC=b.forwardRef((e,t)=>{var{children:n}=e,r=fte(e,dte),i=qr();return i?b.createElement(gte,null,n):b.createElement(pte,tm({ref:t},r),n)});function vte(){var e=qt(),[t,n]=b.useState(null),r=Te(v9);return b.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;yr(s)&&s!==r&&e(qB(s))}},[t,e,r]),n}function IC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yte(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(n),!0).forEach(function(r){bte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bte(e,t,n){return(t=xte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xte(e){var t=wte(e,"string");return typeof t=="symbol"?t:t+""}function wte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _te=b.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:d,onMouseDown:f,onMouseEnter:h,onMouseLeave:m,onMouseMove:g,onMouseUp:v,onTouchEnd:x,onTouchMove:j,onTouchStart:_,style:S,width:N}=e,E=qt(),[C,k]=b.useState(null),[A,R]=b.useState(null);vW();var D=vte(),$=b.useCallback(I=>{D(I),typeof t=="function"&&t(I),k(I),R(I)},[D,t,k,R]),G=b.useCallback(I=>{E(eR(I)),E(Rr({handler:s,reactEvent:I}))},[E,s]),K=b.useCallback(I=>{E(cb(I)),E(Rr({handler:h,reactEvent:I}))},[E,h]),B=b.useCallback(I=>{E(XM()),E(Rr({handler:m,reactEvent:I}))},[E,m]),L=b.useCallback(I=>{E(cb(I)),E(Rr({handler:g,reactEvent:I}))},[E,g]),V=b.useCallback(()=>{E(sR())},[E]),H=b.useCallback(I=>{E(iR(I.key))},[E]),se=b.useCallback(I=>{E(Rr({handler:l,reactEvent:I}))},[E,l]),M=b.useCallback(I=>{E(Rr({handler:d,reactEvent:I}))},[E,d]),z=b.useCallback(I=>{E(Rr({handler:f,reactEvent:I}))},[E,f]),q=b.useCallback(I=>{E(Rr({handler:v,reactEvent:I}))},[E,v]),J=b.useCallback(I=>{E(Rr({handler:_,reactEvent:I}))},[E,_]),X=b.useCallback(I=>{E(lR(I)),E(Rr({handler:j,reactEvent:I}))},[E,j]),T=b.useCallback(I=>{E(Rr({handler:x,reactEvent:I}))},[E,x]);return b.createElement(m3.Provider,{value:C},b.createElement(BA.Provider,{value:A},b.createElement("div",{className:vt("recharts-wrapper",r),style:yte({position:"relative",cursor:"default",width:N,height:i},S),onClick:G,onContextMenu:se,onDoubleClick:M,onFocus:V,onKeyDown:H,onMouseDown:z,onMouseEnter:K,onMouseLeave:B,onMouseMove:L,onMouseUp:q,onTouchEnd:T,onTouchMove:X,onTouchStart:J,ref:$},n)))}),jte=["children","className","width","height","style","compact","title","desc"];function Ste(e,t){if(e==null)return{};var n,r,i=Nte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var hR=b.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:d,title:f,desc:h}=e,m=Ste(e,jte),g=is(m);return d?b.createElement(DC,{otherAttributes:g,title:f,desc:h},n):b.createElement(_te,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(DC,{otherAttributes:g,title:f,desc:h,ref:t},b.createElement(MZ,null,n)))}),Ete=["width","height"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ub.apply(null,arguments)}function Ote(e,t){if(e==null)return{};var n,r,i=Cte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Cte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kte={top:5,right:5,bottom:5,left:5},Ate={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:kte,reverseStackOrder:!1,syncMethod:"index"},Tte=b.forwardRef(function(t,n){var r,i=Un(t.categoricalChartProps,Ate),{width:s,height:l}=i,d=Ote(i,Ete);if(!Pl(s)||!Pl(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,categoricalChartProps:v}=t,x={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return b.createElement(uR,{preloadedState:{options:x},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:f},b.createElement(G3,{chartData:v.data}),b.createElement(dR,{width:s,height:l,layout:i.layout,margin:i.margin}),b.createElement(fR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(hR,ub({},d,{width:s,height:l,ref:n})))}),Pte=["axis","item"],Mte=b.forwardRef((e,t)=>b.createElement(Tte,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Pte,tooltipPayloadSearcher:p3,categoricalChartProps:e,ref:t}));function Rte(e){var t=qt();return b.useEffect(()=>{t(ite(e))},[t,e]),null}var Dte=["width","height","layout"];function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},db.apply(null,arguments)}function Ite(e,t){if(e==null)return{};var n,r,i=Lte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lte(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $te={top:5,right:5,bottom:5,left:5},zte={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:$te,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ute=b.forwardRef(function(t,n){var r,i=Un(t.categoricalChartProps,zte),{width:s,height:l,layout:d}=i,f=Ite(i,Dte);if(!Pl(s)||!Pl(l))return null;var{chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v}=t,x={chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:v,eventEmitter:void 0};return b.createElement(uR,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},b.createElement(G3,{chartData:i.data}),b.createElement(dR,{width:s,height:l,layout:d,margin:i.margin}),b.createElement(fR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),b.createElement(Rte,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),b.createElement(hR,db({width:s,height:l},f,{ref:n})))}),qte=["item"],Bte={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Fte=b.forwardRef((e,t)=>{var n=Un(e,Bte);return b.createElement(Ute,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:qte,tooltipPayloadSearcher:p3,categoricalChartProps:n,ref:t})});const LC=[{value:"editor",label:"Éditeur",headerDescription:"Gestion complète",helper:"Créer, modifier et valider le contenu.",tooltip:"Autorise toutes les actions, y compris la modification et la validation des données."},{value:"readonly",label:"Lecture seule",headerDescription:"Consultation",helper:"Visualiser les informations sans modifier.",tooltip:"Permet uniquement de consulter les informations sans pouvoir les modifier."},{value:"none",label:"Aucun",headerDescription:"Accès bloqué",helper:"Masquer totalement la section.",tooltip:"Bloque complètement l’accès à la section ou à la fonctionnalité."}],Hte=({permissionKeys:e,permissions:t,onChange:n,getPermissionLabel:r,customPermissions:i,onRemoveCustomPermission:s})=>{const l=b.useMemo(()=>{if(e.length===0)return[];const f=Qn.map(x=>x.permissionKey),h=new Set(f),m=f.filter(x=>e.includes(x)),g=e.filter(x=>!h.has(x)).sort((x,j)=>r(x).localeCompare(r(j),"fr")),v=[];return m.length>0&&v.push({id:"navigation",title:"Navigation principale",keys:m}),g.length>0&&v.push({id:"custom",title:"Permissions personnalisées",keys:g}),v},[r,e]),d=f=>{e.forEach(h=>{(t[h]??"none")!==f&&n(h,f)})};return e.length===0?c.jsx("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-6 text-center text-sm font-medium text-gray-900",children:"Aucune permission disponible pour ce rôle pour le moment."}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>d("editor"),title:"Autoriser toutes les sections en mode édition.",children:"Tout autoriser"}),c.jsx("button",{type:"button",className:"permission-action-button",onClick:()=>d("readonly"),title:"Basculer toutes les sections en lecture seule.",children:"Lecture seule partout"}),c.jsx("button",{type:"button",className:"permission-action-button is-danger",onClick:()=>d("none"),title:"Révoquer toutes les permissions.",children:"Tout bloquer"})]}),c.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:c.jsx("div",{className:"max-h-96 overflow-auto",children:c.jsx("div",{className:"min-w-full",children:c.jsxs("div",{className:"grid grid-cols-[minmax(220px,2fr)_repeat(3,minmax(140px,1fr))]",children:[c.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:"Section / permission"}),LC.map(f=>c.jsxs("div",{className:"border-b border-l border-gray-200 bg-gray-50 px-4 py-3 text-sm font-semibold text-gray-900",children:[c.jsx("div",{children:f.label}),c.jsx("p",{className:"mt-1 text-xs font-medium text-gray-900",children:f.headerDescription})]},f.value)),l.map(f=>c.jsxs(pr.Fragment,{children:[c.jsx("div",{className:"col-span-4 border-t border-gray-200 bg-gray-100 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-gray-900",children:f.title}),f.keys.map(h=>{const m=t[h]??"none",g=`permission-${h.replace(/[^a-zA-Z0-9_-]/g,"_")}`,v=h in i;return c.jsxs(pr.Fragment,{children:[c.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-900",children:r(h)}),v&&s&&c.jsx("button",{type:"button",onClick:()=>s(h),className:"text-gray-700 transition-colors hover:text-red-600",title:"Supprimer cette permission personnalisée",children:c.jsx(as,{className:"h-4 w-4"})})]})}),LC.map(x=>{const j=m===x.value;return c.jsx("div",{className:"border-t border-l border-gray-100 px-4 py-3",children:c.jsxs("label",{className:`permission-choice${j?" is-active":""}`,title:x.tooltip,children:[c.jsx("input",{type:"radio",className:"sr-only",name:g,value:x.value,checked:j,onChange:()=>n(h,x.value)}),c.jsx("span",{className:"permission-choice__label",children:x.label}),c.jsx("span",{className:"permission-choice__helper",children:x.helper})]})},x.value)})]},h)})]},f.id))]})})})})]})},Kte=({mode:e,formState:t,onSubmit:n,onInputChange:r,onHomePageChange:i,onPermissionChange:s,onAddCustomPermission:l,onRemoveCustomPermission:d,onCancel:f,isSubmitting:h,hasAccessibleHomePage:m,permissionKeys:g,getPermissionLabel:v,isPermissionGranted:x})=>{const[j,_]=b.useState(!1),[S,N]=b.useState(""),[E,C]=b.useState(""),[k,A]=b.useState(null),R=()=>{_(!1),N(""),C(""),A(null)},D=()=>{const $=S.trim(),G=E.trim();if(!$||!G){A("La clé technique et le nom affiché sont obligatoires.");return}if(g.includes($)){A("Cette clé de permission existe déjà.");return}l($,G),R()};return c.jsxs("div",{children:[c.jsx("h4",{className:"mb-4 text-lg font-semibold text-gray-900",children:e==="edit"?"Modifier le rôle sélectionné":"Créer un nouveau rôle"}),c.jsxs("form",{onSubmit:n,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-name",className:"mb-1 block text-sm font-medium text-gray-900",children:"Nom du rôle"}),c.jsx("input",{id:"role-name",name:"name",value:t.name,onChange:r,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. Manager"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-pin",className:"mb-1 block text-sm font-medium text-gray-900",children:"Code PIN d'accès"}),c.jsx("input",{id:"role-pin",name:"pin",value:t.pin,onChange:r,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"Ex. 1234"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role-home-page",className:"mb-1 block text-sm font-medium text-gray-900",children:"Page d'accueil par défaut"}),c.jsx("select",{id:"role-home-page",name:"homePage",value:t.homePage,onChange:$=>i($.target.value),disabled:!m,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary disabled:cursor-not-allowed disabled:bg-gray-100",children:Qn.map($=>{const G=x(t.permissions[$.permissionKey]);return c.jsxs("option",{value:$.permissionKey,disabled:!G,children:[v($.permissionKey),G?"":" (accès requis)"]},$.permissionKey)})}),m?c.jsx("p",{className:"mt-1 text-xs text-gray-900",children:"Les pages sans permission sont désactivées."}):c.jsx("p",{className:"mt-1 text-xs font-medium text-red-700",children:"Accordez au moins une permission pour choisir une page d'accueil."})]}),c.jsxs("div",{children:[c.jsx("p",{className:"mb-2 text-sm font-semibold text-gray-900",children:"Permissions par page"}),c.jsx(Hte,{permissionKeys:g,permissions:t.permissions,onChange:s,getPermissionLabel:v,customPermissions:t.customPermissions,onRemoveCustomPermission:d}),c.jsx("div",{className:"mt-4 space-y-3",children:j?c.jsxs("div",{className:"rounded-md border border-dashed border-brand-primary/50 bg-brand-primary/5 p-4",children:[c.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Clé technique"}),c.jsx("input",{type:"text",value:S,onChange:$=>{N($.target.value),A(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. /rapports"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-900",children:"Nom affiché"}),c.jsx("input",{type:"text",value:E,onChange:$=>{C($.target.value),A(null)},className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-brand-primary focus:outline-none focus:ring-1 focus:ring-brand-primary",placeholder:"ex. Rapports"})]})]}),k&&c.jsx("p",{className:"mt-2 text-xs font-medium text-red-700",children:k}),c.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[c.jsx("button",{type:"button",onClick:R,className:"rounded-md border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),c.jsx("button",{type:"button",onClick:D,className:"rounded-md bg-brand-primary px-3 py-1.5 text-xs font-semibold text-white hover:bg-brand-primary/90",children:"Ajouter"})]})]}):c.jsx("button",{type:"button",onClick:()=>{_(!0),A(null)},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Ajouter une permission"})})]}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[e==="edit"&&c.jsx("button",{type:"button",onClick:f,className:"rounded-md border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-900 hover:bg-gray-100",children:"Annuler"}),c.jsxs("button",{type:"submit",disabled:h,className:"inline-flex items-center rounded-md bg-brand-primary px-4 py-2 text-sm font-semibold text-white shadow hover:bg-brand-primary/90 disabled:cursor-not-allowed disabled:opacity-60",children:[c.jsx(B8,{className:"mr-2 h-4 w-4"}),h?"Enregistrement...":e==="edit"?"Mettre à jour":"Créer"]})]})]})]})},Gte=({roles:e,isFetching:t,onCreateRole:n,onSelectRole:r,onDeleteRole:i,selectedRoleId:s,isEditing:l,deletingRoleId:d,getPermissionLabel:f})=>{const h=!t&&e.length===0;return c.jsxs("div",{className:"flex h-full flex-col",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rôles existants"}),c.jsxs("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-md border border-brand-primary px-2 py-1 text-sm font-medium text-brand-primary transition-colors hover:bg-brand-primary/10",children:[c.jsx(Lu,{className:"mr-1.5 h-4 w-4"}),"Nouveau rôle"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto rounded-md border border-gray-200 p-3",children:t?c.jsx("p",{className:"text-sm text-gray-900",children:"Chargement des rôles..."}):h?c.jsx("p",{className:"text-sm text-gray-900",children:"Aucun rôle configuré pour le moment."}):c.jsx("div",{className:"space-y-3",children:e.map(m=>{const g=l&&s===m.id;return c.jsxs("div",{className:`flex items-center justify-between rounded-md border px-3 py-2 transition-colors ${g?"border-brand-primary bg-brand-primary/10":"border-gray-200"}`,children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"font-semibold text-gray-900",children:m.name}),c.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["PIN : ",m.pin??"—"]}),m.homePage&&c.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Accueil : ",f(m.homePage)]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>r(m),className:"rounded-md border border-gray-300 px-2 py-1 text-xs font-semibold text-gray-900 transition-colors hover:bg-gray-100",children:"Modifier"}),c.jsxs("button",{type:"button",onClick:()=>i(m.id),disabled:d===m.id,className:"inline-flex items-center rounded-md border border-red-300 px-2 py-1 text-xs font-semibold text-red-600 transition-colors hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",children:[c.jsx(as,{className:"mr-1 h-3 w-3"}),"Supprimer"]})]})]},m.id)})})})]})};var ek;const Yte=((ek=Qn[0])==null?void 0:ek.permissionKey)??"/dashboard",Vte=e=>{if(!e)return!1;const t=e.trim().toLowerCase();return t===cA.ADMIN||t==="administrateur"},$s=(e,t,n={})=>{const r={...e||{}};return delete r[Qs],Qn.forEach(i=>{i.permissionKey in r||(i.permissionKey===ni&&Vte(t)?r[i.permissionKey]="editor":r[i.permissionKey]="none")}),Object.keys(n).forEach(i=>{i in r||(r[i]="none")}),r},zs=e=>{const t=Qn.find(n=>Us(e[n.permissionKey]));return(t==null?void 0:t.permissionKey)??Yte},$C=e=>{const t=$s(void 0,void 0,e);return{name:"",pin:"",permissions:t,homePage:zs(t),customPermissions:{...e}}},Us=e=>e==="editor"||e==="readonly",Wte=({isOpen:e,onClose:t})=>{const{refreshRole:n,role:r}=_a(),[i,s]=b.useState([]),[l,d]=b.useState({}),[f,h]=b.useState(()=>$C({})),[m,g]=b.useState("create"),[v,x]=b.useState(!1),[j,_]=b.useState(!1),[S,N]=b.useState(null),[E,C]=b.useState(null),[k,A]=b.useState(null),R=b.useMemo(()=>{const X=Qn.map(I=>I.permissionKey),T=new Set;return Object.keys(l).forEach(I=>{X.includes(I)||T.add(I)}),i.forEach(I=>{Object.keys(I.permissions).forEach(U=>{U!==Qs&&(X.includes(U)||T.add(U))})}),[...X,...Array.from(T)]},[i,l]),D=b.useMemo(()=>Qn.some(X=>Us(f.permissions[X.permissionKey])),[f.permissions]),$=b.useCallback(async()=>{x(!0);try{const X=await Se.getRoles();s(X),d(T=>{const I={...T};let U=!1;const te=new Set(Qn.map(re=>re.permissionKey));return X.forEach(re=>{Object.keys(re.permissions).forEach(ce=>{ce===Qs||te.has(ce)||ce in I||(I[ce]=ce,U=!0)})}),U?I:T}),A(null)}catch(X){console.error("Failed to load roles:",X),A("Impossible de charger les rôles.")}finally{x(!1)}},[]),G=b.useCallback(()=>{g("create"),h($C(l))},[l]);b.useEffect(()=>{e&&(C(null),A(null),G(),$())},[e,$,G]),b.useEffect(()=>{h(X=>{const T=X.homePage;if(Us(X.permissions[T]))return X;const I=zs(X.permissions);return I===T?X:{...X,homePage:I}})},[f.permissions]),b.useEffect(()=>{h(X=>{const T=X.customPermissions,I=l,U=Object.keys(T),te=Object.keys(I);if(U.length===te.length&&U.every(he=>I[he]===T[he]))return X;const re=$s(X.permissions,X.name,I),ce=Us(re[X.homePage])?X.homePage:zs(re);return{...X,customPermissions:{...I},permissions:re,homePage:ce}})},[l]);const K=b.useCallback(X=>{const T=Qn.find(I=>I.permissionKey===X);return T?T.name:l[X]??X},[l]);return{roles:i,formState:f,mode:m,isFetching:v,isSubmitting:j,deletingRoleId:S,statusMessage:E,errorMessage:k,permissionKeys:R,hasAccessibleHomePage:D,handleInputChange:X=>{const{name:T,value:I}=X.target;h(U=>({...U,[T]:I}))},handlePermissionChange:(X,T)=>{h(I=>({...I,permissions:{...I.permissions,[X]:T}}))},handleHomePageChange:X=>{h(T=>({...T,homePage:X}))},handleSelectRole:X=>{const T=new Set(Qn.map(re=>re.permissionKey)),I={...l};let U=!1;Object.keys(X.permissions).forEach(re=>{re===Qs||T.has(re)||re in I||(I[re]=re,U=!0)}),U&&d(I);const te=$s(X.permissions,X.name,U?I:l);g("edit"),h({id:X.id,name:X.name,pin:X.pin??"",permissions:te,homePage:X.homePage??zs(te),customPermissions:{...U?I:l}}),C(null),A(null)},handleDeleteRole:async X=>{if(confirm("Supprimer ce rôle ? Cette action est irréversible.")){N(X),C(null),A(null);try{await Se.deleteRole(X),C("Rôle supprimé avec succès."),m==="edit"&&f.id===X&&G(),await $(),(r==null?void 0:r.id)===X&&await n()}catch(T){console.error("Failed to delete role:",T),A("Impossible de supprimer le rôle.")}finally{N(null)}}},handleSubmit:async X=>{if(X.preventDefault(),A(null),C(null),!f.name.trim()||!f.pin.trim()){A("Le nom et le code PIN sont obligatoires.");return}_(!0);try{const T=$s(f.permissions,f.name,l),I=Us(T[f.homePage])?f.homePage:zs(T);if(m==="create")await Se.createRole({name:f.name.trim(),pin:f.pin.trim(),permissions:T,homePage:I}),C("Rôle créé avec succès."),await $(),await n(),G();else if(f.id){const U=await Se.updateRole(f.id,{name:f.name.trim(),pin:f.pin.trim(),permissions:T,homePage:I});C("Rôle mis à jour avec succès.");const te=$s(U.permissions,U.name,l);h({id:U.id,name:U.name,pin:U.pin??"",permissions:te,homePage:U.homePage??zs(te),customPermissions:{...l}}),await $(),(r==null?void 0:r.id)===U.id&&await n()}}catch(T){console.error("Failed to save role:",T),A("Impossible d'enregistrer le rôle.")}finally{_(!1)}},handleClose:()=>{G(),C(null),A(null),t()},resetForm:G,getPermissionLabel:K,isPermissionGranted:Us,handleAddCustomPermission:(X,T)=>{Qn.some(I=>I.permissionKey===X)||d(I=>{if(I[X]===T)return I;const U={...I,[X]:T};return h(te=>{const re=$s(te.permissions,te.name,U);return X in re||(re[X]="none"),{...te,customPermissions:{...U},permissions:re}}),U})},handleRemoveCustomPermission:X=>{Qn.some(T=>T.permissionKey===X)||d(T=>{if(!(X in T))return T;const I={...T};return delete I[X],h(U=>{const{[X]:te,...re}=U.customPermissions,ce={...U.permissions};delete ce[X];const he=$s(ce,U.name,I),Ne=Us(he[U.homePage])?U.homePage:zs(he);return{...U,customPermissions:{...re},permissions:he,homePage:Ne}}),I})}}},Xte=({isOpen:e,onClose:t})=>{const{roles:n,formState:r,mode:i,isFetching:s,isSubmitting:l,deletingRoleId:d,statusMessage:f,errorMessage:h,permissionKeys:m,hasAccessibleHomePage:g,handleInputChange:v,handlePermissionChange:x,handleHomePageChange:j,handleSelectRole:_,handleDeleteRole:S,handleSubmit:N,handleClose:E,resetForm:C,getPermissionLabel:k,isPermissionGranted:A,handleAddCustomPermission:R,handleRemoveCustomPermission:D}=Wte({isOpen:e,onClose:t});return c.jsx(an,{isOpen:e,onClose:E,title:"Gestion des rôles",size:"xl",children:c.jsxs("div",{className:"flex flex-col gap-6",children:[f&&c.jsx("div",{className:"rounded-md bg-green-100 px-4 py-2 text-sm font-medium text-green-900",children:f}),h&&c.jsx("div",{className:"rounded-md bg-red-100 px-4 py-2 text-sm font-medium text-red-900",children:h}),c.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-8",children:[c.jsx("div",{className:"md:w-[38%] md:flex-shrink-0 lg:w-[35%]",children:c.jsx(Gte,{roles:n,isFetching:s,onCreateRole:C,onSelectRole:_,onDeleteRole:S,selectedRoleId:r.id,isEditing:i==="edit",deletingRoleId:d,getPermissionLabel:k})}),c.jsx("div",{className:"flex-1",children:c.jsx(Kte,{mode:i,formState:r,onSubmit:N,onInputChange:v,onHomePageChange:j,onPermissionChange:x,onAddCustomPermission:R,onRemoveCustomPermission:D,onCancel:C,isSubmitting:l,hasAccessibleHomePage:g,permissionKeys:m,getPermissionLabel:k,isPermissionGranted:A})})]})]})})},Qte=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:1,minimumFractionDigits:0}),ou=e=>Qte.format(Number.isFinite(e)?e:0),Ui=(e,t)=>t==null?null:t===0?e===0?0:100:(e-t)/Math.abs(t)*100,qi=({title:e,value:t,icon:n,helper:r,comparison:i,previousValue:s})=>{const l=typeof i=="number"?i:null,d=l!==null,f=d&&l!==0?l>0?"+":"−":"",h=d?ou(Math.abs(l)):null,m=d?l<0?"text-red-600":"text-emerald-600":"text-gray-500",g=s!=null;return c.jsxs("div",{className:"ui-card flex min-w-0 flex-col gap-4 p-5",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"rounded-xl bg-brand-primary/10 p-3 text-brand-primary",children:n}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:e}),c.jsx("p",{className:"mt-2 text-2xl font-bold text-gray-900 sm:text-3xl",children:t}),g?c.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Période précédente : ",c.jsx("span",{className:"font-semibold text-gray-800",children:s}),h?c.jsxs("span",{className:`ml-2 font-semibold ${m}`,children:[f,h,"%"]}):null]}):c.jsxs("p",{className:`mt-1 text-sm font-semibold ${m}`,children:[h?`${f}${h}%`:"N/A",c.jsx("span",{className:"ml-1 text-xs font-medium text-gray-500 sm:text-sm",children:"vs période précédente"})]})]})]}),!g&&r?c.jsx("p",{className:"text-sm text-gray-500",children:r}):null]})},Ff=({title:e,value:t,icon:n,onClick:r})=>c.jsxs("div",{className:`ui-card p-4 flex items-center space-x-3 min-w-0 ${r?"cursor-pointer hover:bg-gray-50":""}`,onClick:r,children:[c.jsx("div",{className:"p-3 bg-gray-100 text-gray-600 rounded-lg",children:n}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs text-gray-500",children:e}),c.jsx("p",{className:"text-lg sm:text-xl xl:text-2xl font-bold text-gray-800 break-words leading-tight",children:t})]})]}),fb={week:{label:"Últimos 7 días",days:7},month:{label:"Últimos 30 días",days:30}},Jte=e=>{const{days:t}=fb[e],n=new Date(mu());n.setDate(n.getDate()+1);const r=new Date(n);return r.setDate(r.getDate()-t),{start:r,end:n}},Zte=()=>{const[e,t]=b.useState(null),[n,r]=b.useState([]),[i,s]=b.useState(!0),[l,d]=b.useState("category"),[f,h]=b.useState(!1),[m,g]=b.useState(!1),[v,x]=b.useState("week"),j=b.useCallback(async()=>{const{start:I,end:U}=Jte(v),te=I.toISOString(),re=U.toISOString();s(!0);try{const[ce,he]=await Promise.all([Se.getDashboardStats(v),Se.getSalesByProduct({start:te,end:re})]);t(ce),r(he)}catch(ce){console.error("Failed to fetch dashboard stats",ce)}finally{s(!1)}},[v]);if(b.useEffect(()=>{j()},[j]),b.useEffect(()=>{const I=Se.notifications.subscribe("orders_updated",()=>{j()});return()=>{I()}},[j]),i)return c.jsx("div",{className:"text-gray-800",children:"Cargando datos del panel..."});if(!e)return c.jsx("div",{className:"text-red-500",children:"No fue posible cargar los datos."});const _=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF4560","#775DD0"],S=l==="category"?e.ventesParCategorie:n,N=S.length>0,E=fb[v],C=e.ventesPeriodePrecedente,k=Ui(e.ventesPeriode,e.ventesPeriodePrecedente),A=e.ventesPeriode>0?e.beneficePeriode/e.ventesPeriode*100:null,R=e.ventesPeriodePrecedente>0?e.beneficePeriodePrecedente/e.ventesPeriodePrecedente*100:null,D=e.commandesPeriode,$=E.days>0?e.ventesPeriode/E.days:0,G=e.clientsPeriode>0?e.ventesPeriode/e.clientsPeriode:0,K=E.days>0?D/E.days:0,B=E.days>0?e.clientsPeriode/E.days:0,L=e.commandesPeriodePrecedente>0?e.ventesPeriodePrecedente/e.commandesPeriodePrecedente:0,V=e.clientsPeriodePrecedente>0?e.ventesPeriodePrecedente/e.clientsPeriodePrecedente:0,H=E.days>0?e.ventesPeriodePrecedente/E.days:0,se=Ui(e.beneficePeriode,e.beneficePeriodePrecedente),M=A!==null?Ui(A,R??null):null,z=Ui(D,e.commandesPeriodePrecedente),q=Ui(e.panierMoyen,L),J=Ui(G,V),X=Ui(e.clientsPeriode,e.clientsPeriodePrecedente),T=Ui($,H);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsx("div",{className:"inline-flex rounded-lg bg-gray-100 p-1 text-sm font-semibold text-gray-600",children:Object.entries(fb).map(([I,U])=>{const te=I,re=v===te;return c.jsx("button",{onClick:()=>x(te),className:`px-3 py-1.5 rounded-md transition-colors ${re?"bg-white text-gray-900 shadow":"hover:text-gray-900"}`,children:U.label},te)})}),c.jsxs("button",{onClick:()=>g(!0),className:"ui-btn-primary",children:[c.jsx(W8,{className:"mr-2 h-4 w-4"}),"Gestión de roles"]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[c.jsx(qi,{title:`Chiffre d'affaires (${e.periodLabel})`,value:ve(e.ventesPeriode),icon:c.jsx(im,{size:24}),comparison:k,previousValue:ve(C)}),c.jsx(qi,{title:"Bénéfice net",value:ve(e.beneficePeriode),icon:c.jsx(lA,{size:24}),comparison:se,previousValue:ve(e.beneficePeriodePrecedente)}),c.jsx(qi,{title:"Marge bénéficiaire",value:A!==null?`${ou(A)}%`:"0%",icon:c.jsx(Iu,{size:24}),comparison:R!==null?M:null,previousValue:R!==null?`${ou(R)}%`:"N/A"}),c.jsx(qi,{title:"Commandes traitées",value:au(D),icon:c.jsx(Mb,{size:24}),comparison:z,helper:`≈ ${ou(K)} commandes / jour`})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-4",children:[c.jsx(qi,{title:"Ticket moyen",value:ve(e.panierMoyen),icon:c.jsx(th,{size:24}),comparison:q,helper:D>0?`Basé sur ${au(D)} commandes`:"Aucune commande sur la période"}),c.jsx(qi,{title:"Revenu par client",value:ve(G),icon:c.jsx(uz,{size:24}),comparison:J,helper:e.clientsPeriode>0?`${au(e.clientsPeriode)} clients servis`:"Aucun client sur la période"}),c.jsx(qi,{title:`Clients (${e.periodLabel})`,value:au(e.clientsPeriode),icon:c.jsx(m0,{size:24}),comparison:X,helper:`≈ ${ou(B)} clients / jour`}),c.jsx(qi,{title:"Revenu moyen quotidien",value:ve($),icon:c.jsx(p$,{size:24}),comparison:T,helper:`Total période : ${ve(e.ventesPeriode)}`})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(Ff,{title:"Mesas ocupadas",value:e.tablesOccupees,icon:c.jsx(Ab,{size:24})}),c.jsx(Ff,{title:"Clientes actuales",value:e.clientsActuels,icon:c.jsx(m0,{size:24})}),c.jsx(Ff,{title:"En cocina",value:e.commandesEnCuisine,icon:c.jsx(sA,{size:24})}),c.jsx(Ff,{title:"Ingredientes bajos",value:e.ingredientsStockBas.length,icon:c.jsx(ta,{size:24,className:e.ingredientsStockBas.length>0?"text-red-500":"text-gray-600"}),onClick:()=>h(!0)})]}),c.jsxs("div",{className:"ui-card p-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:["Ventas durante ",e.periodLabel]}),c.jsx(YO,{width:"100%",height:300,children:c.jsxs(Mte,{data:e.ventesPeriodeSeries,children:[c.jsx(Q3,{strokeDasharray:"3 3"}),c.jsx(J3,{dataKey:"name"}),c.jsx(Z3,{}),c.jsx(qO,{}),c.jsx(Su,{}),c.jsx(ib,{dataKey:"ventes",fill:"#8884d8",name:`${e.periodLabel}`}),c.jsx(ib,{dataKey:"ventesPeriodePrecedente",fill:"#d8d6f5",name:"Periodo anterior"})]})})]}),c.jsxs("div",{className:"ui-card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Distribución de ventas (",e.periodLabel,")"]}),c.jsxs("div",{className:"flex p-1 bg-gray-200 rounded-lg",children:[c.jsx("button",{onClick:()=>d("category"),className:`px-3 py-1 text-sm font-semibold rounded-md ${l==="category"?"bg-white shadow":""}`,children:"Por categoría"}),c.jsx("button",{onClick:()=>d("product"),className:`px-3 py-1 text-sm font-semibold rounded-md ${l==="product"?"bg-white shadow":""}`,children:"Por producto"})]})]}),N?c.jsx(YO,{width:"100%",height:300,children:c.jsxs(Fte,{children:[c.jsx(z3,{data:S,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:S.map((I,U)=>c.jsx(rd,{fill:_[U%_.length]},`cell-${U}`))}),c.jsx(qO,{formatter:I=>ve(I)}),c.jsx(Su,{})]})}):c.jsx("div",{style:{height:300},className:"flex items-center justify-center text-gray-500",children:"No hay datos para el periodo seleccionado."})]}),c.jsx(an,{isOpen:f,onClose:()=>h(!1),title:"Ingredientes con inventario bajo",children:e.ingredientsStockBas.length>0?c.jsx("ul",{className:"space-y-2",children:e.ingredientsStockBas.map(I=>c.jsxs("li",{className:"flex justify-between items-center bg-red-50 p-3 rounded-lg",children:[c.jsx("span",{className:"font-semibold text-red-800",children:I.nom}),c.jsxs("span",{className:"font-bold text-red-600",children:[I.stock_actuel," / ",I.stock_minimum," ",I.unite]})]},I.id))}):c.jsx("p",{className:"text-gray-600 text-center",children:"No hay ingredientes con inventario bajo por el momento."})}),c.jsx(Xte,{isOpen:m,onClose:()=>g(!1)})]})},ene=e=>{const t=Number.isFinite(e)?Math.max(0,e):0,n=Math.floor(t/1e3),r=Math.floor(n/60),i=n%60;return`${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},zw=({startTime:e,className:t="",variant:n="default",accentClassName:r,label:i})=>{const[s,l]=b.useState(Date.now()-e);b.useEffect(()=>{const v=setInterval(()=>{l(Date.now()-e)},1e3);return()=>clearInterval(v)},[e]);const d=Math.floor(s/6e4),f=ene(s),h=i?`${i.trim()} ${f}`:`Tiempo transcurrido ${f}`,g=[n==="chip"?`inline-flex items-center gap-3 rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow-lg shadow-slate-900/10 ring-1 ring-inset ring-white/30 ${r??"bg-brand-primary"}`:`flex items-center gap-2 px-3 py-1.5 rounded-full text-lg font-bold border-2 border-white ${d>=20?"bg-red-500 text-white shadow-lg":d>=10?"bg-yellow-400 text-black shadow-md":"bg-brand-primary text-brand-secondary shadow-md ring-1 ring-black/5"}`,t].filter(Boolean).join(" ");return c.jsxs("div",{className:g,role:"timer","aria-live":"polite","aria-label":h,title:h,children:[n==="default"&&c.jsx(ti,{size:20,className:"shrink-0"}),n==="chip"&&i?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-white/70",children:i}),c.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:f})]}):c.jsx("span",{className:"text-lg font-semibold tracking-normal text-white",children:f})]})},zC={nom:"",capacite:"",couverts:""},tne=({isOpen:e,onClose:t,mode:n,initialValues:r,onSubmit:i,showCouvertsField:s=!1})=>{const[l,d]=b.useState(zC),[f,h]=b.useState({}),[m,g]=b.useState(null),[v,x]=b.useState(!1),j=b.useMemo(()=>n==="create"?"Ajouter une table":"Modifier la table",[n]);b.useEffect(()=>{if(!e){d(zC),h({}),g(null),x(!1);return}const E={nom:(r==null?void 0:r.nom)??"",capacite:r!=null&&r.capacite?String(r.capacite):"",couverts:s&&(r==null?void 0:r.couverts)!==void 0?String(r.couverts):""};d(E),h({}),g(null)},[r==null?void 0:r.capacite,r==null?void 0:r.couverts,r==null?void 0:r.nom,e,s]);const _=E=>{const{name:C,value:k}=E.target;d(A=>({...A,[C]:k}))},S=()=>{const E={},C=l.nom.trim(),k=l.capacite.trim();C||(E.nom="Le nom est requis.");let A=null;if(!k)E.capacite="La capacité est requise.";else{const R=Number(k);!Number.isInteger(R)||R<=0?E.capacite="La capacité doit être un entier positif.":A=R}if(s){const R=l.couverts.trim();if(!R)E.couverts="Le nombre de couverts est requis.";else{const D=Number(R);!Number.isInteger(D)||D<=0?E.couverts="Les couverts doivent être un entier positif.":A!==null&&D>A&&(E.couverts="Les couverts ne peuvent pas dépasser la capacité.")}}return E},N=async E=>{E.preventDefault(),h({}),g(null);const C=S();if(Object.keys(C).length>0){h(C);return}const k={nom:l.nom.trim(),capacite:Number(l.capacite.trim())};if(s){const A=l.couverts.trim();A&&(k.couverts=Number(A))}x(!0);try{await i(k)}catch(A){const R=A instanceof Error&&A.message?A.message:"Une erreur est survenue. Veuillez réessayer.";g(R)}finally{x(!1)}};return c.jsx(an,{isOpen:e,onClose:t,title:j,size:"md",children:c.jsxs("form",{onSubmit:N,className:"space-y-5",children:[m&&c.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:m}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-name",className:"block text-sm font-medium text-gray-700",children:"Nom de la table"}),c.jsx("input",{id:"table-name",name:"nom",type:"text",className:"ui-input mt-1",value:l.nom,onChange:_,disabled:v,placeholder:"Ex. Terrasse 1",autoFocus:!0}),f.nom&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.nom})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-capacity",className:"block text-sm font-medium text-gray-700",children:"Capacité (nombre de places)"}),c.jsx("input",{id:"table-capacity",name:"capacite",type:"number",min:1,className:"ui-input mt-1",value:l.capacite,onChange:_,disabled:v,placeholder:"Ex. 4"}),f.capacite&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.capacite})]}),s&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"table-couverts",className:"block text-sm font-medium text-gray-700",children:"Couverts (actuels)"}),c.jsx("input",{id:"table-couverts",name:"couverts",type:"number",min:1,className:"ui-input mt-1",value:l.couverts,onChange:_,disabled:v,placeholder:"Ex. 2"}),f.couverts&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.couverts})]}),c.jsxs("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",disabled:v,children:"Annuler"}),c.jsx("button",{type:"submit",className:"w-full ui-btn-primary py-3 disabled:opacity-60",disabled:v,children:v?"Enregistrement...":"Enregistrer"})]})]})})},Bi={libre:{text:"Libre",statusClass:"status--free",Icon:Ab},en_cuisine:{text:"En cuisine",statusClass:"status--preparing",Icon:gz},para_entregar:{text:"Para entregar",statusClass:"status--ready",Icon:a8},para_pagar:{text:"Para pagar",statusClass:"status--payment",Icon:im}},nne=e=>{const t=e.trim();if(!t)return e;const n=t.split(/\s+/);if(n.length<2)return t;const[r,...i]=n;let s=0;for(;s<i.length&&i[s].toLowerCase()===r.toLowerCase();)s+=1;return[r,...i.slice(s)].join(" ")},rne=e=>{switch(e.statut){case"libre":return Bi.libre;case"en_cuisine":return Bi.en_cuisine;case"para_entregar":return Bi.para_entregar;case"para_pagar":return Bi.para_pagar;default:return e.estado_cocina==="servido"||e.estado_cocina==="entregada"?Bi.para_pagar:e.estado_cocina==="listo"?Bi.para_entregar:e.commandeId?Bi.en_cuisine:Bi.libre}},ane=({table:e,onServe:t,canEdit:n,onEdit:r,onDelete:i,isDeleting:s,onSeatGuests:l})=>{const d=wa(),{text:f,statusClass:h,Icon:m}=rne(e),[g,v]=b.useState(!1),x=b.useRef(null),j=()=>{if(e.statut==="libre"&&l){l(e);return}e.commandeId?d(`/commande/${e.id}`):n&&r&&r(e)},_=A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),j())},S=A=>{A.stopPropagation(),e.commandeId&&t(e.commandeId)},N=A=>{A.stopPropagation(),v(R=>!R)};b.useEffect(()=>{if(!g)return;const A=R=>{x.current&&!x.current.contains(R.target)&&v(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[g]);const E=A=>{A.stopPropagation(),v(!1),r==null||r(e)},C=async A=>{if(A.stopPropagation(),v(!1),!!i)try{await i(e)}catch(R){console.error("Failed to delete table from card:",R)}},k=nne(e.nom);return c.jsxs("div",{onClick:j,onKeyDown:_,className:`ui-card status-card ${h} relative h-full`,role:"button",tabIndex:0,children:[e.statut==="para_entregar"&&e.readyOrdersCount&&e.readyOrdersCount>0&&c.jsx("div",{className:"absolute left-3 top-3 z-10",children:c.jsx("span",{className:"table-notification-badge",children:e.readyOrdersCount})}),n&&c.jsxs("div",{className:"absolute right-3 top-3",ref:x,children:[c.jsx("button",{type:"button",onClick:N,className:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-60","aria-haspopup":"menu","aria-expanded":g,"aria-label":"Options de la table",disabled:s,children:c.jsx(Zk,{size:18})}),g&&c.jsxs("div",{className:"absolute right-0 mt-2 w-44 rounded-md border border-gray-200 bg-white py-1 text-sm shadow-lg",children:[c.jsxs("button",{type:"button",onClick:E,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-gray-700 transition hover:bg-gray-100",children:[c.jsx(P8,{size:16}),"Modifier"]}),c.jsxs("button",{type:"button",onClick:C,className:"flex w-full items-center gap-2 px-3 py-2 text-left text-red-600 transition hover:bg-red-50 disabled:cursor-not-allowed disabled:opacity-60",disabled:s,children:[c.jsx(as,{size:16}),s?"Suppression…":"Supprimer"]})]})]}),c.jsxs("div",{className:"status-card__header",children:[c.jsx("h3",{className:"status-card__title",children:k}),e.date_envoi_cuisine&&e.statut!=="libre"&&c.jsx("div",{className:"status-card__timer",children:c.jsx(zw,{startTime:e.date_envoi_cuisine,className:"w-full justify-center"})})]}),c.jsxs("div",{className:"status-card__body",children:[c.jsx(m,{size:56,className:"status-card__icon"}),c.jsx("p",{className:"status-card__state",children:f})]}),(e.estado_cocina==="listo"||e.statut==="para_entregar")&&c.jsx("div",{className:"status-card__footer",children:c.jsx("button",{type:"button",onClick:S,className:"ui-btn ui-btn-accent status-card__cta",children:"ENTREGADA"})})]})},ine=()=>{var de;const{role:e}=_a(),t=((de=e==null?void 0:e.permissions)==null?void 0:de["/ventes"])==="editor",n=wa(),[r,i]=b.useState([]),[s,l]=b.useState(!0),[d,f]=b.useState(null),[h,m]=b.useState(null),[g,v]=b.useState(null),[x,j]=b.useState(!1),[_,S]=b.useState("create"),[N,E]=b.useState(null),[C,k]=b.useState(null),[A,R]=b.useState(!1),[D,$]=b.useState(null),[G,K]=b.useState(null),[B,L]=b.useState(null),[V,H]=b.useState(!1),se=b.useRef(0),M=b.useCallback(async()=>{const ge=++se.current;try{const ie=await Se.getTables();ge===se.current&&(i(ie),f(null))}catch(ie){console.error("Failed to fetch tables",ie),ge===se.current&&f("Impossible de charger le plan de salle. Veuillez réessayer.")}finally{ge===se.current&&l(!1)}},[]);b.useEffect(()=>{l(!0),M();const ge=setInterval(M,1e4),ie=Se.notifications.subscribe("orders_updated",M);return()=>{clearInterval(ge),ie()}},[M]);const z=b.useCallback(()=>{j(!1),E(null)},[]),q=b.useCallback(()=>{S("create"),E(null),m(null),v(null),j(!0)},[]),J=b.useCallback(ge=>{S("edit"),E(ge),m(null),v(null),j(!0)},[]),X=b.useCallback(ge=>{$(ge);const ie=ge.couverts??null;K(typeof ie=="number"&&ie>=1&&ie<=10?ie:null),L(null),m(null),v(null),R(!0)},[m,v]),T=b.useCallback(()=>{V||(R(!1),$(null),K(null),L(null))},[V]),I=b.useCallback(async ge=>{if(D){if(!Number.isInteger(ge)||ge<=0){L("Veuillez sélectionner un nombre de couverts valide.");return}H(!0),L(null),m(null);try{await Se.createOrGetOrderByTableId(D.id,{couverts:ge}),R(!1),$(null),K(null),await M(),n(`/commande/${D.id}`)}catch(ie){console.error("Failed to open table with couverts:",ie),m("Impossible d'ouvrir la table. Veuillez réessayer.")}finally{H(!1)}}},[M,n,D]),U=b.useCallback(ge=>{V||(K(ge),L(null),I(ge))},[I,V]),te=b.useCallback(async ge=>{m(null),v(null);try{let ie="";if(_==="create")await Se.createTable(ge),ie="Table créée avec succès.";else{if(!N){const Q="Aucune table sélectionnée pour la mise à jour.";throw m(Q),new Error(Q)}await Se.updateTable(N.id,ge),ie="Table mise à jour avec succès."}await M(),z(),v(ie)}catch(ie){console.error("Failed to save table:",ie);const Q=_==="create"?"Impossible de créer la table. Veuillez réessayer.":"Impossible de mettre à jour la table. Veuillez réessayer.";throw m(Q),new Error(Q)}},[M,z,_,N]),re=b.useCallback(async ge=>{if(confirm("Supprimer cette table ? Cette action est irréversible.")){m(null),v(null),k(ge.id);try{await Se.deleteTable(ge.id),await M(),v("Table supprimée avec succès.")}catch(ie){console.error("Failed to delete table:",ie),m("Impossible de supprimer la table. Veuillez réessayer.")}finally{k(null)}}},[M]),ce=b.useCallback(async ge=>{m(null),v(null);const ie=r.find(Q=>Q.commandeId===ge);if(ie){i(Q=>Q.map(Ce=>Ce.id===ie.id?{...Ce,statut:"para_pagar",estado_cocina:"servido"}:Ce));try{await Se.markOrderAsServed(ge),await M()}catch(Q){console.error("Failed to mark order as served:",Q),m("Impossible de marquer la commande comme servie. Veuillez réessayer."),await M()}}},[M,r]);if(s)return c.jsx("p",{className:"section-text section-text--muted",children:"Chargement du plan de salle..."});const he=_==="edit"&&N?{nom:N.nom,capacite:N.capacite,couverts:N.couverts}:void 0,Ne=_==="edit"&&!!(N!=null&&N.commandeId);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[t&&c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{type:"button",onClick:q,className:"ui-btn ui-btn-primary flex items-center gap-2",children:[c.jsx(Lu,{size:18}),"Ajouter une table"]})}),d&&c.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:d}),h&&c.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:h}),g&&c.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:g})]}),c.jsx("div",{className:"mt-6 status-grid",children:r.map(ge=>c.jsx(ane,{table:ge,onServe:ce,canEdit:!!t,onEdit:J,onDelete:re,isDeleting:C===ge.id,onSeatGuests:X},ge.id))}),c.jsx(an,{isOpen:A,onClose:T,title:"CUBIERTOS",size:"sm",children:c.jsxs("div",{className:"space-y-5 text-left",children:[c.jsx("div",{className:"grid grid-cols-5 gap-3",children:Array.from({length:10},(ge,ie)=>{const Q=ie+1,Ce=G===Q;return c.jsx("button",{type:"button",onClick:()=>U(Q),disabled:V,className:`flex h-12 w-12 items-center justify-center rounded-md border text-lg font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 ${Ce?"border-primary-500 bg-primary-50 text-primary-600":"border-gray-300 bg-white text-gray-900 hover:border-primary-400 hover:text-primary-600"} ${V?"cursor-not-allowed opacity-50":""}`,"aria-pressed":Ce,children:Q},Q)})}),B&&c.jsx("p",{className:"text-sm text-red-600",children:B}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",onClick:T,className:"ui-btn ui-btn-secondary",disabled:V,children:"Annuler"})})]})}),c.jsx(tne,{isOpen:x,onClose:z,mode:_,initialValues:he,onSubmit:te,showCouvertsField:Ne})]})},sne=({isOpen:e,onClose:t,order:n,onFinalize:r})=>{const[i,s]=b.useState("efectivo"),[l,d]=b.useState(null),[f,h]=b.useState(!1),m=async g=>{g.preventDefault(),i&&(h(!0),await r(i,l),h(!1),t())};return c.jsx(an,{isOpen:e,onClose:t,title:`Finalizar el pedido #${n.id.slice(-4)}`,children:c.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Total a pagar"}),c.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:ve(n.total)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Método de pago"}),c.jsxs("select",{value:i,onChange:g=>s(g.target.value),className:"mt-1 ui-select",children:[c.jsx("option",{value:"efectivo",children:"Efectivo"}),c.jsx("option",{value:"transferencia",children:"Transferencia"}),c.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),i==="transferencia"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comprobante (opcional)"}),c.jsxs("label",{htmlFor:"payment-receipt",className:"mt-1 flex w-full cursor-pointer items-center gap-2 rounded-lg border border-gray-300 bg-white p-2 text-gray-500 shadow-sm hover:bg-gray-50",children:[c.jsx(Kl,{size:18}),c.jsx("span",{children:l?l.name:"Selecciona un archivo..."})]}),c.jsx("input",{id:"payment-receipt",type:"file",accept:"image/*,.pdf",onChange:g=>d(g.target.files?g.target.files[0]:null),className:"hidden"})]}),c.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:f?"Finalizando...":"Confirmar pago"})]})]})})},one=e=>e??"",lne=e=>!e||e.length===0?[]:e.slice().sort(),oh=(e=[])=>{const t=new Map;for(const n of e)t.set(n.id,{quantite:n.quantite,commentaire:one(n.commentaire),excludedIngredients:lne(n.excluded_ingredients)});return{size:e.length,itemsById:t}},UC=(e,t)=>{if(e===t)return!0;if(e.size!==t.size)return!1;for(const[n,r]of e.itemsById){const i=t.itemsById.get(n);if(!i||r.quantite!==i.quantite||r.commentaire!==i.commentaire||r.excludedIngredients.length!==i.excludedIngredients.length)return!1;for(let s=0;s<r.excludedIngredients.length;s+=1)if(r.excludedIngredients[s]!==i.excludedIngredients[s])return!1}return!0},cne=({filteredProducts:e,quantities:t,onAdd:n,activeCategoryId:r,categories:i,onSelectCategory:s,isProductAvailable:l,handleProductPointerDown:d,handleProductKeyDown:f})=>c.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[c.jsx("div",{className:"border-b bg-white/80 p-4",children:c.jsxs("div",{className:"mt-2 flex items-center gap-2 overflow-x-auto pb-2",children:[c.jsx("button",{onClick:()=>s("all"),className:`shrink-0 rounded-full px-4 py-2 text-sm font-semibold whitespace-nowrap transition ${r==="all"?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),i.map(h=>c.jsx("button",{onClick:()=>s(h.id),className:`shrink-0 rounded-full px-4 py-2 text-sm font-semibold whitespace-nowrap transition ${r===h.id?"bg-brand-primary text-brand-secondary shadow":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:h.nom},h.id))]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:c.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(h=>{const m=!l(h),g=t[h.id]||0,v=g>0,x=()=>n(h),j=d(h),_=f(h);return c.jsxs("button",{type:"button",onClick:x,onPointerDown:j,onKeyDown:_,className:`relative flex h-full flex-col items-center justify-between rounded-xl p-3 text-center transition-all focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 focus:ring-offset-gray-900 ${v?"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 text-black shadow-xl shadow-orange-500/30":"border border-gray-200 bg-white text-black hover:shadow-lg"} ${m&&!v?"border-2 border-yellow-500":""}`,children:[g>0&&c.jsx("div",{className:"absolute left-1 top-1 flex h-5 w-5 items-center justify-center rounded-full bg-brand-accent text-xs font-bold text-white",children:g}),m&&c.jsx("div",{className:`absolute right-1 top-1 rounded-full p-1 text-white ${v?"bg-black/30":"bg-yellow-500"}`,title:"Stock bas",children:c.jsx(ta,{size:16})}),c.jsx("img",{src:h.image,alt:h.nom_produit,className:"mb-3 aspect-square w-full max-w-[6rem] rounded-md object-cover"}),c.jsx("p",{className:"text-[clamp(0.9rem,1.8vw,1.05rem)] font-semibold leading-snug text-black text-balance text-center break-words whitespace-normal [hyphens:auto]",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:h.nom_produit}),c.jsx("p",{className:"mt-1 w-full flex-1 text-xs text-black text-center leading-snug",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:h.description}),c.jsx("p",{className:"mt-3 font-bold text-black",children:ve(h.prix_vente)})]},h.id)})})})]}),une=b.memo(cne),dne=({categorizedItems:e,order:t,total:n,onQuantityChange:r,onCommentChange:i,onPersistComment:s,onStartEditingComment:l,onSendToKitchen:d,onServeOrder:f,onOpenPayment:h,isSending:m,hasPending:g,orderStatus:v,editingCommentId:x,className:j})=>{var S;const _=e.pending.length+e.sent.length;return c.jsxs("div",{className:`ui-card flex flex-col ${j??""}`,children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx("h2",{className:"text-2xl font-semibold text-brand-secondary",children:"Commande"})}),c.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto p-4",children:_===0?c.jsx("p",{className:"text-gray-500",children:"La commande est vide."}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Articles à envoyer"}),c.jsx("span",{className:"text-sm text-gray-500",children:e.pending.length})]}),e.pending.length===0?c.jsx("p",{className:"text-sm text-gray-500",children:"Aucun article en attente."}):e.pending.map(({item:N,index:E})=>c.jsxs("div",{className:"p-3 rounded-lg bg-yellow-100",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-yellow-500 text-base font-bold text-white shadow-md",children:N.quantite}),c.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:N.nom_produit})]}),c.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:ve(N.quantite*N.prix_unitaire)})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("p",{className:"text-sm text-gray-700",children:[ve(N.prix_unitaire)," /u"]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-800",children:[c.jsx("button",{onClick:()=>r(E,-1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:c.jsx(M$,{size:20})}),c.jsx("span",{className:"font-bold w-6 text-center",children:N.quantite}),c.jsx("button",{onClick:()=>r(E,1),className:"rounded-full p-1 transition hover:bg-yellow-200",children:c.jsx(Tb,{size:20})})]})]}),x===N.id||N.commentaire?c.jsx("input",{type:"text",placeholder:"Ajouter un commentaire...",value:N.commentaire??"",onChange:C=>i(E,C.target.value),onBlur:()=>s(E),autoFocus:x===N.id,className:"mt-2 ui-input text-sm"}):c.jsxs("button",{onClick:()=>l(N.id),className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[c.jsx(rA,{size:12})," Ajouter un commentaire"]})]},N.id))]}),e.sent.length>0&&c.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-6",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-brand-secondary",children:"Envoyés en cuisine"}),c.jsx("span",{className:"text-sm text-gray-500",children:e.sent.length})]}),e.sent.map(({item:N})=>c.jsxs("div",{className:"p-3 rounded-lg bg-green-100",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-green-600 text-base font-bold text-white shadow-md",children:N.quantite}),c.jsx("p",{className:"font-bold text-gray-900 text-[clamp(0.95rem,1.9vw,1.2rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:N.nom_produit})]}),c.jsx("p",{className:"font-bold text-gray-900 whitespace-nowrap",children:ve(N.quantite*N.prix_unitaire)})]}),c.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[ve(N.prix_unitaire)," /u"]}),N.commentaire&&c.jsxs("p",{className:"mt-2 text-sm italic text-gray-600 pl-2",children:['"',N.commentaire,'"']})]},N.id))]})]})}),c.jsxs("div",{className:"space-y-4 border-t p-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[c.jsx("span",{children:"Sous-total"}),c.jsx("span",{children:ve(t.subtotal??0)})]}),t.total_discount&&t.total_discount>0&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[c.jsx("span",{children:"Réduction totale"}),c.jsxs("span",{children:["- ",ve(t.total_discount)]})]}),t.shipping_cost!==void 0&&t.shipping_cost>0&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-gray-700",children:[c.jsx("span",{children:"Frais de livraison"}),c.jsx("span",{children:ve(t.shipping_cost)})]}),t.shipping_cost===0&&((S=t.applied_promotions)==null?void 0:S.some(N=>N.type==="FREE_SHIPPING"))&&c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-green-600",children:[c.jsx("span",{children:"Livraison gratuite"}),c.jsx("span",{children:ve(0)})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-2 border-t pt-2 text-2xl font-semibold text-brand-secondary",children:[c.jsx("span",{children:"Total"}),c.jsx("span",{children:ve(n)})]})]}),v==="listo"&&c.jsxs("button",{onClick:f,className:"w-full ui-btn-info justify-center py-3",children:[c.jsx(j$,{size:20}),c.jsx("span",{children:"Entregada"})]}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("button",{onClick:d,disabled:m||!g,className:"ui-btn-accent flex-1 justify-center py-3 disabled:opacity-60",children:[c.jsx(K8,{size:20}),c.jsx("span",{children:m?"Synchronisation…":"Envoyer en Cuisine"})]}),c.jsxs("button",{onClick:h,disabled:v!=="servido",className:"ui-btn-success flex-1 justify-center py-3 disabled:opacity-60",children:[c.jsx(im,{size:20}),c.jsx("span",{children:"Payer"})]})]})]})]})},fne=({isOpen:e,product:t,onClose:n,onSave:r})=>{const[i,s]=b.useState(1),[l,d]=b.useState("");if(b.useEffect(()=>{e&&(s(1),d(""))},[e,t==null?void 0:t.id]),!t)return null;const f=()=>{s(g=>Math.max(1,g-1))},h=()=>{s(g=>g+1)},m=()=>{r({quantity:i,comment:l})};return c.jsx(an,{isOpen:e,onClose:n,title:t.nom_produit,children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("img",{src:t.image,alt:t.nom_produit,className:"w-full h-48 object-cover rounded-lg"}),t.description&&c.jsx("p",{className:"text-gray-200 text-sm",children:t.description}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Commentaire"}),c.jsx("textarea",{value:l,onChange:g=>d(g.target.value),rows:2,className:"mt-1 block w-full rounded-md border border-gray-600 bg-gray-900/60 py-2 px-3 text-sm text-gray-100 focus:border-brand-primary focus:outline-none focus:ring-2 focus:ring-brand-primary",placeholder:"Allergies, instructions spécifiques…"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:f,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Diminuer la quantité",children:c.jsx(aA,{size:18})}),c.jsx("span",{className:"w-8 text-center text-lg font-bold text-gray-100",children:i}),c.jsx("button",{type:"button",onClick:h,className:"p-2 rounded-full bg-gray-800 text-gray-100 hover:bg-gray-700","aria-label":"Augmenter la quantité",children:c.jsx(Lu,{size:18})})]}),c.jsxs("button",{type:"button",onClick:m,className:"rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-2 px-6 font-semibold text-white shadow-md transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Ajouter (",ve(t.prix_vente*i),")"]})]})]})})},Yy=e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),da=e=>JSON.parse(JSON.stringify(e)),qC=(()=>{let e=0;return()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`tmp-${crypto.randomUUID()}`:(e+=1,`tmp-${Date.now()}-${e}`)})(),BC=e=>(e??"").trim(),hne=(e=[],t=[])=>{if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>i===r[s])},mne=(e,t,n,r,i=[])=>{const s=BC(n.comment),l=s.length===0,d=Number.isFinite(n.quantity)?Math.max(1,Math.floor(n.quantity)):1,f=l?e.findIndex(m=>m.produitRef===t.id&&m.estado==="en_attente"&&BC(m.commentaire)===""&&hne(m.excluded_ingredients??[],i)):-1;if(f>-1)return e.map((m,g)=>g===f?{...m,quantite:m.quantite+d}:m);const h={id:r(),produitRef:t.id,nom_produit:t.nom_produit,prix_unitaire:t.prix_vente,quantite:d,excluded_ingredients:[...i],commentaire:s,estado:"en_attente"};return[...e,h]},FC=oh([]),pne=()=>{const{tableId:e}=k5(),t=wa(),[n,r]=b.useState(null),[i,s]=b.useState(null),[l,d]=b.useState([]),[f,h]=b.useState([]),[m,g]=b.useState([]),[v,x]=b.useState("all"),[j,_]=b.useState(!0),[S,N]=b.useState(!1),[E,C]=b.useState(!1),[k,A]=b.useState(null),[R,D]=b.useState(!1),[$,G]=b.useState(null),K=b.useRef(n),B=b.useRef(i),L=b.useRef(null),V=b.useRef(null),H=b.useRef(null),se=b.useRef(Promise.resolve()),M=b.useRef(null),z=b.useRef(null),q=b.useCallback((me,_e,De)=>{if(!_e||_e.length===0)return me.current=null,FC;const rt=De??oh(_e);return me.current={source:_e,snapshot:rt},rt},[]),J=b.useCallback((me,_e)=>{if(!me||me.length===0)return _e.current=null,FC;const De=_e.current;return De&&De.source===me?De.snapshot:q(_e,me)},[q]);b.useEffect(()=>{K.current=n},[n]),b.useEffect(()=>{B.current=i},[i]);const X=b.useCallback(me=>{const _e=K.current;if(!_e)return!0;const De=me??B.current;if(!De)return!0;const rt=J(_e.items,M),Qe=me?oh(De.items):J(De.items,z);return UC(Qe,rt)},[J]),T=b.useCallback(()=>{const me=V.current;if(!me)return;const _e=oh(me.items);L.current=da(me);const De=K.current;if(De){const Qe=J(De.items,M);if(UC(Qe,_e)){V.current=null;return}}V.current=null,K.current=me,r(me),q(M,me.items,_e);const rt=da(me);B.current=rt,s(rt),q(z,rt.items)},[J,q]),I=b.useCallback(async(me=!1)=>{if(e)try{if(me||_(!0),me){const Ue=await Se.createOrGetOrderByTableId(e),at=da(Ue);if(L.current=at,X()){V.current=null,r(Ue),K.current=Ue,q(M,Ue.items);const kt=da(Ue);B.current=kt,s(kt),q(z,kt.items)}else{const kt=B.current;kt&&JSON.stringify(kt)===JSON.stringify(Ue)?V.current=null:V.current=at}return}const[_e,De,rt,Qe]=await Promise.all([Se.createOrGetOrderByTableId(e),Se.getProducts(),Se.getCategories(),Se.getIngredients()]);L.current=da(_e),r(_e),K.current=_e,q(M,_e.items);const ft=da(_e);s(ft),B.current=ft,q(z,ft.items),d(De),h(rt),g(Qe),V.current=null}catch(_e){console.error("Failed to load order data",_e),t("/ventes")}finally{me||_(!1)}},[X,t,e,q]);b.useEffect(()=>{I()},[I]),b.useEffect(()=>{X()&&T()},[T,X,n,i]),b.useEffect(()=>{const me=Se.notifications.subscribe("orders_updated",()=>I(!0));return()=>me()},[I]);const U=b.useMemo(()=>!X(),[X,n,i]),te=b.useMemo(()=>n?n.items.reduce((me,_e)=>(_e.estado!=="en_attente"||(me[_e.produitRef]=(me[_e.produitRef]||0)+_e.quantite),me),{}):{},[n]),re=b.useMemo(()=>v==="all"?l:l.filter(me=>me.categoria_id===v),[v,l]),ce=b.useCallback(me=>{if(!me.recipe||me.recipe.length===0)return!0;for(const _e of me.recipe){const De=m.find(rt=>rt.id===_e.ingredient_id);if(!De||De.stock_actuel<=De.stock_minimum)return!1}return!0},[m]);b.useEffect(()=>()=>{H.current!==null&&(window.clearTimeout(H.current),H.current=null)},[]);const he=b.useCallback(async(me,_e)=>{const De=K.current;if(!De)return;const rt=kt=>typeof me=="function"?me(kt):me,ft=(_e!=null&&_e.isLocalUpdate?De.items:(_e==null?void 0:_e.removalSourceItems)??De.items).map(kt=>({...kt})),Ue=rt(ft),at={...De,items:Ue,total:Ue.reduce((kt,tr)=>kt+tr.quantite*tr.prix_unitaire,0)};if(r(at),K.current=at,q(M,at.items),_e!=null&&_e.isLocalUpdate)return;const ht=async()=>{try{let kt=V.current??L.current??null;if(!kt){const Mt=await Se.getOrderById(De.id);Mt?(kt=Mt,L.current=da(Mt)):kt=De}if(!kt)return;const tr=K.current.items.map(Mt=>({...Mt})),Hr=((_e==null?void 0:_e.removalSourceItems)??De.items).filter(Mt=>Yy(Mt.id)&&!tr.some(pe=>pe.id===Mt.id)).map(Mt=>Mt.id),In=await Se.updateOrder(De.id,{items:tr,removedItemIds:Hr},{includeNotifications:!1});r(In),K.current=In,q(M,In.items);const xr=da(In);s(xr),B.current=xr,q(z,xr.items),L.current=da(In),Se.getIngredients().then(g).catch(Mt=>{console.error("Failed to refresh ingredients",Mt)}),T()}catch(kt){console.error("Failed to update order:",kt),alert("Une erreur est survenue lors de la mise à jour de la commande."),I(!0)}};se.current=se.current.then(ht,ht),await se.current},[T,I,q]),Ne=b.useCallback((me=300)=>{H.current!==null&&window.clearTimeout(H.current);const _e=me>0?me:1;H.current=window.setTimeout(async()=>{if(H.current=null,!K.current)return;const De=K.current.items.map(Qe=>({...Qe})),rt=L.current?L.current.items.map(Qe=>({...Qe})):De.map(Qe=>({...Qe}));await he(De,{removalSourceItems:rt})},_e)},[he]),de=b.useCallback(me=>{K.current&&(he(me,{isLocalUpdate:!0}),Ne())},[Ne,he]),ge=b.useCallback(me=>{G(me)},[]),ie=b.useCallback(()=>{G(null)},[]),Q=b.useCallback(me=>{$&&(de(_e=>mne(_e,$,me,qC)),G(null))},[de,$]),Ce=b.useCallback((me,_e)=>{const De=K.current;if(!De||!De.items[me])return;const rt=De.items[me].id;de(Qe=>{const ft=Qe.findIndex(at=>at.id===rt);if(ft===-1)return Qe;const Ue=Qe[ft].quantite+_e;return Ue<=0?Qe.filter(at=>at.id!==rt):Qe.map(at=>at.id===rt?{...at,quantite:Ue}:at)})},[de]),Re=b.useCallback((me,_e)=>{const De=K.current;if(!De||!De.items[me])return;const rt=De.items[me].id;he(Qe=>{const ft=Qe.findIndex(ht=>ht.id===rt);if(ft===-1)return Qe;const Ue=Qe.map(ht=>({...ht})),at=Ue[ft];if(at.quantite>1&&!at.commentaire&&_e){at.quantite-=1;const ht={...at,id:qC(),quantite:1,commentaire:_e};Ue.push(ht),A(ht.id)}else at.commentaire=_e;return Ue},{isLocalUpdate:!0})},[he]),ut=b.useCallback(me=>{K.current&&(he(K.current.items.map(_e=>({..._e}))),A(null))},[he]),we=b.useCallback(async()=>{if(K.current){D(!0);try{let me=K.current;for(;me&&me.items.some(Ue=>Ue.estado==="en_attente"&&!Yy(Ue.id));)await he(me.items.map(Ue=>({...Ue}))),me=K.current;if(me=K.current,!me)return;const _e=me.items.filter(Ue=>Ue.estado==="en_attente");if(_e.length===0)return;if(_e.filter(Ue=>!Yy(Ue.id)).length>0){console.warn("Des articles non persistés subsistent après synchronisation, envoi annulé.");return}const rt=_e.map(Ue=>Ue.id),Qe=await Se.sendOrderToKitchen(me.id,rt);r(Qe),K.current=Qe,q(M,Qe.items);const ft=da(Qe);s(ft),B.current=ft,q(z,ft.items),t("/ventes")}catch(me){console.error("Failed to send order to kitchen",me),alert("Erreur lors de l'envoi en cuisine.")}finally{D(!1)}}},[t,he,q]),be=b.useCallback(async()=>{if(n)try{const me=await Se.markOrderAsServed(n.id);r(me),K.current=me,q(M,me.items)}catch(me){console.error("Failed to mark order as served",me)}},[n,q]),ze=async(me,_e)=>{if(n)try{let De=n.payment_receipt_url??void 0;if(_e&&_e instanceof File)try{De=await Hk(_e,{orderId:n.id})}catch(rt){console.error("Failed to upload receipt",rt)}await Se.finalizeOrder(n.id,me,De),t("/ventes")}catch(De){console.error("Failed to finalize order",De),alert("Erreur lors de la finalisation de la commande. Veuillez réessayer.")}},Et=()=>{if(n&&n.estado_cocina==="no_enviado"&&n.items.length>0){C(!0);return}U?C(!0):t("/ventes")},et=async()=>{try{n&&n.estado_cocina==="no_enviado"?await Se.cancelUnsentTableOrder(n.id):i&&!X(i)&&await he(i.items)}catch(me){console.error("Failed to cancel unsent order before exiting",me)}finally{C(!1),t("/ventes")}},dt=(n==null?void 0:n.items)??[],Vt=b.useMemo(()=>dt.reduce((me,_e,De)=>(_e.estado==="en_attente"?me.pending.push({item:_e,index:De}):me.sent.push({item:_e,index:De}),me),{pending:[],sent:[]}),[dt]),Fr=b.useCallback(me=>_e=>{_e.preventDefault(),_e.currentTarget.focus()},[]),Xe=b.useCallback(me=>_e=>{(_e.key==="Enter"||_e.key===" ")&&(_e.preventDefault(),ge(me))},[ge]),jn=b.useCallback(()=>{N(!0)},[]),er=b.useCallback(me=>{A(me)},[]),sn=b.useMemo(()=>Vt.pending.length>0,[Vt]);return j?c.jsx("div",{className:"text-center p-10 text-gray-800",children:"Chargement de la commande..."}):n?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[minmax(0,2.15fr)_minmax(0,0.85fr)] lg:items-start lg:min-h-[calc(100vh-10rem)]",children:[c.jsxs("div",{className:"ui-card flex h-full flex-col overflow-hidden",children:[c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsxs("button",{onClick:Et,className:"ui-btn-dark",title:"Retour au plan de salle",children:[c.jsx(Wk,{size:20}),c.jsx("span",{children:"Retour plan de salle"})]}),c.jsxs("h2",{className:"text-2xl font-semibold text-gray-900",children:["Table ",n.table_nom]})]})}),c.jsx(une,{filteredProducts:re,quantities:te,onAdd:ge,activeCategoryId:v,categories:f,onSelectCategory:x,isProductAvailable:ce,handleProductPointerDown:Fr,handleProductKeyDown:Xe})]}),c.jsx("div",{className:"flex flex-col lg:h-full",children:c.jsx("div",{className:"lg:sticky lg:top-24",children:c.jsx(dne,{className:"mt-6 lg:mt-0 lg:h-full lg:max-w-[420px] lg:mx-auto",categorizedItems:Vt,order:n,total:n.total,onQuantityChange:Ce,onCommentChange:Re,onPersistComment:ut,onStartEditingComment:er,onSendToKitchen:we,onServeOrder:be,onOpenPayment:jn,isSending:R,hasPending:sn,orderStatus:n.estado_cocina,editingCommentId:k})})})]}),c.jsx(fne,{isOpen:$!==null,product:$,onClose:ie,onSave:Q}),c.jsx(sne,{isOpen:S,onClose:()=>N(!1),order:n,onFinalize:ze}),c.jsxs(an,{isOpen:E,onClose:()=>C(!1),title:"Quitter sans envoyer ?",children:[c.jsx("p",{className:"text-gray-700",children:"Vous avez des articles non envoyés en cuisine. Si vous quittez, ils seront annulés. Voulez-vous continuer ?"}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:()=>C(!1),className:"ui-btn-secondary",children:"Non, rester"}),c.jsx("button",{onClick:et,className:"ui-btn-danger",children:"Oui, quitter"})]})]})]}):c.jsx("div",{className:"text-center p-10 text-red-500",children:"Commande non trouvée."})},gne={critical:{border:"border-4 border-solid border-red-500",accent:"bg-red-500 urgency-accent-critical",badge:"bg-red-100 text-red-700 ring-1 ring-inset ring-red-300 urgency-badge-critical",icon:"text-red-500 urgency-icon-critical",background:"bg-red-100"},warning:{border:"border-[3px] border-solid border-yellow-400",accent:"bg-yellow-400 urgency-accent-warning",badge:"bg-yellow-100 text-yellow-800 ring-1 ring-inset ring-yellow-300 urgency-badge-warning",icon:"text-yellow-500 urgency-icon-warning",background:"bg-yellow-100"},normal:{border:"border-2 border-solid border-brand-accent",accent:"bg-brand-accent urgency-accent-normal",badge:"bg-blue-100 text-blue-700 ring-1 ring-inset ring-blue-200 urgency-badge-normal",icon:"text-brand-accent urgency-icon-normal",background:"bg-blue-100"}},vne=e=>{if(!e)return"normal";const t=(Date.now()-e)/6e4;return t>=20?"critical":t>=10?"warning":"normal"},mR=e=>{const t=vne(e),n=gne[t];return{level:t,border:n.border,accent:n.accent,badge:n.badge,icon:n.icon,background:n.background}},yne=e=>{const t=e.trim().length;return t<=10?"text-[clamp(1.35rem,3vw,1.75rem)]":t<=16?"text-[clamp(1.25rem,2.9vw,1.6rem)]":t<=24?"text-[clamp(1.15rem,2.7vw,1.45rem)]":"text-[clamp(1.05rem,2.5vw,1.3rem)]"},bne=({order:e,onReady:t,canMarkReady:n})=>{const r=mR(e.date_envoi_cuisine||Date.now()),i=b.useMemo(()=>{const m=[],g=new Map;return e.items.forEach(v=>{var N;const x=(N=v.commentaire)==null?void 0:N.trim(),j=x||"no_comment",_=`${v.produitRef}::${j}`;if(x){m.push({key:`${_}::${v.id}`,nom_produit:v.nom_produit,quantite:v.quantite,commentaire:x});return}const S=g.get(_);if(S!==void 0){m[S].quantite+=v.quantite;return}g.set(_,m.length),m.push({key:_,nom_produit:v.nom_produit,quantite:v.quantite})}),m},[e.items]),s=b.useMemo(()=>e.items.reduce((m,g)=>m+g.quantite,0),[e.items]),d=new Date(e.date_envoi_cuisine||Date.now()).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),f=e.table_nom||`Para llevar #${e.id.slice(-4)}`,h=yne(f);return c.jsxs("div",{className:`flex h-full min-w-[22rem] flex-col overflow-hidden rounded-xl text-gray-900 shadow-lg transition-shadow duration-300 hover:shadow-xl ${r.border} ${r.background}`,children:[c.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[c.jsx("h3",{className:`font-semibold leading-tight text-gray-900 ${h}`,children:c.jsx("span",{className:"block max-w-full break-words text-balance",children:f})}),c.jsxs("p",{className:"text-[0.65rem] font-medium uppercase tracking-[0.2em] text-gray-500 sm:text-xs",children:["pedido a las ",d]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-600 sm:justify-between",children:[c.jsx(zw,{startTime:e.date_envoi_cuisine||Date.now(),variant:"chip",accentClassName:r.accent}),c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-white shadow ${r.accent}`,children:[c.jsx("span",{className:"text-white/70",children:"ITEMS"}),c.jsx("span",{className:"text-lg tracking-normal",children:s})]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto px-5",children:c.jsx("ul",{className:"space-y-2 pb-4",children:i.map(m=>c.jsxs("li",{className:"min-w-[22rem] rounded-lg border border-gray-200 bg-gray-50 px-3 py-3 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-full text-xl font-bold text-white shadow-md ${r.accent}`,children:m.quantite}),c.jsx("p",{className:"text-[clamp(1rem,2.1vw,1.35rem)] font-semibold leading-tight text-gray-900 whitespace-nowrap",children:m.nom_produit})]}),m.commentaire&&c.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800",children:m.commentaire})]},m.key))})}),n&&c.jsx("div",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:c.jsxs("button",{onClick:()=>t(e.id,e.date_envoi_cuisine),className:"group inline-flex w-full items-center justify-center gap-3 rounded-lg border-2 border-transparent bg-black px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-sm transition hover:bg-neutral-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/70 focus-visible:ring-offset-2",children:[c.jsx(Xk,{size:20,className:"shrink-0"}),c.jsx("span",{children:"LISTO"})]})})]})},xne=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0),{role:i}=_a(),s=(i==null?void 0:i.permissions["/cocina"])==="editor",l=b.useCallback(async()=>{try{const f=await Se.getKitchenOrders();t(f)}catch(f){console.error("Failed to fetch kitchen orders",f)}finally{r(!1)}},[]);b.useEffect(()=>{l();const f=setInterval(l,5e3),h=Se.notifications.subscribe("orders_updated",l);return()=>{clearInterval(f),h()}},[l]);const d=async(f,h)=>{try{await Se.markOrderAsReady(f,h),l()}catch(m){console.error("Failed to mark order as ready",m)}};return n?c.jsx("div",{className:"text-gray-700",children:"Cargando pedidos de cocina..."}):c.jsx("div",{className:"flex h-full flex-col",children:e.length===0?c.jsx("div",{className:"mt-6 flex flex-1 items-center justify-center text-2xl text-gray-500",children:"No hay pedidos en preparación."}):c.jsx("div",{className:"mt-6 grid flex-1 grid-cols-1 justify-center gap-4 sm:[grid-template-columns:repeat(auto-fit,minmax(24rem,max-content))] sm:justify-start",children:e.map(f=>c.jsx(bne,{order:f,onReady:d,canMarkReady:s},f.ticketKey))})})},HC=({order:e,onValidate:t,onDeliver:n,isProcessing:r})=>{var v;const[i,s]=b.useState(!1),l=e.table_nom||`Pedido #${e.id.slice(-6)}`,d=e.date_envoi_cuisine||e.date_creation,f=mR(d),h={normal:"Normal",warning:"En seguimiento",critical:"Crítico"},m=(((v=e.applied_promotions)==null?void 0:v.length)??0)>0,g=m;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`relative flex h-full flex-col overflow-hidden rounded-xl border text-gray-900 shadow-md transition-shadow duration-300 hover:shadow-lg ${f.border} ${f.background}`,children:[c.jsx("span",{"aria-hidden":!0,className:`absolute inset-y-0 left-0 w-1 ${f.accent}`}),c.jsx("header",{className:"border-b border-gray-200 px-5 py-4",children:c.jsxs("div",{className:"grid gap-4 sm:grid-cols-[minmax(0,1fr)_auto] sm:items-start",children:[c.jsxs("div",{className:"min-w-0 space-y-1",children:[c.jsx("h4",{className:"truncate text-base font-semibold leading-tight text-gray-900 sm:text-lg md:text-xl",children:l}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Pedido enviado ",new Date(d).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]}),c.jsxs("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:[c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] ${f.badge}`,children:[c.jsx("span",{className:`h-2 w-2 rounded-full ${f.accent}`}),c.jsx("span",{children:h[f.level]})]}),c.jsx("div",{className:"flex w-full justify-start sm:justify-end",children:c.jsx(zw,{startTime:d,className:" text-sm sm:text-base"})})]})]})}),c.jsx("div",{className:"flex-1 overflow-hidden px-5 py-4",children:c.jsxs("div",{className:"flex h-full flex-col gap-4",children:[e.clientInfo&&c.jsxs("section",{className:"space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm text-gray-900 shadow-sm",children:[e.clientInfo.nom&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[c.jsx(fu,{size:16,className:f.icon}),c.jsx("span",{className:"font-medium",children:e.clientInfo.nom})]}),e.clientInfo.telephone&&c.jsxs("div",{className:"ml-6 flex items-center gap-2 text-xs text-gray-600",children:[c.jsx(eh,{size:14,className:"text-gray-500"}),c.jsx("span",{children:e.clientInfo.telephone})]})]}),e.clientInfo.adresse&&c.jsxs("div",{className:"flex items-start gap-2 text-gray-700",children:[c.jsx(wl,{size:16,className:`mt-0.5 text-gray-500 ${f.icon}`}),c.jsx("span",{className:"text-sm text-gray-700",children:e.clientInfo.adresse})]})]}),c.jsxs("section",{className:"flex min-h-[10rem] flex-col gap-3 overflow-hidden",children:[c.jsx("h5",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:"Artículos"}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:e.items.length>0?c.jsx("ul",{className:"space-y-2",children:e.items.map(x=>{var _;const j=(_=x.commentaire)==null?void 0:_.trim();return c.jsxs("li",{className:"rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-900 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[c.jsx("span",{className:`flex h-9 w-9 shrink-0 items-center justify-center rounded-full text-base font-bold text-white shadow-md ${f.accent}`,children:x.quantite}),c.jsx("span",{className:"font-semibold text-gray-900 text-[clamp(0.95rem,1.9vw,1.15rem)] leading-snug break-words text-balance whitespace-normal [hyphens:auto]",children:x.nom_produit})]}),c.jsx("span",{className:"whitespace-nowrap text-sm font-semibold text-gray-900 sm:text-base",children:ve(x.prix_unitaire*x.quantite)})]}),j&&c.jsx("p",{className:"mt-2 rounded-md border border-dashed border-blue-200 bg-blue-50 px-3 py-2 text-xs font-medium italic text-blue-800",children:j})]},x.id)})}):c.jsx("p",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-500 shadow-sm",children:"Este pedido aún no tiene artículos registrados."})})]}),g&&c.jsx("section",{className:"space-y-3 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-900 shadow-sm",children:m&&c.jsx("ul",{className:"space-y-1","aria-label":"Promotions",children:e.applied_promotions.map(x=>{const j=typeof x.config=="object"&&x.config!==null?x.config.promo_code:void 0;return c.jsxs("li",{className:"rounded-md border border-emerald-200 bg-white/70 px-3 py-2 text-emerald-900 shadow-sm",children:[c.jsxs("p",{className:"font-medium leading-tight",children:[x.name,j?` (Code: ${j})`:""]}),c.jsxs("p",{className:"mt-1 text-sm font-semibold text-emerald-700",children:["-",ve(x.discount_amount||0)]})]},`${x.promotion_id}-${x.name}`)})})}),c.jsxs("div",{className:"mt-auto flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 font-semibold text-gray-900 shadow-sm",children:[c.jsx("span",{children:"Total"}),c.jsx("span",{className:"text-lg sm:text-xl text-gray-900",children:ve(e.total)})]})]})}),c.jsx("footer",{className:"border-t border-gray-200 px-5 pb-5 pt-4",children:(t||n)&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:()=>s(!0),className:"w-full ui-btn ui-btn-secondary",type:"button",children:[c.jsx(h0,{size:16,className:f.icon})," ",e.receipt_url?"Ver comprobante":"Comprobante no disponible"]}),t&&e.statut==="pendiente_validacion"&&c.jsx("button",{onClick:()=>t(e.id),disabled:r,className:"w-full ui-btn ui-btn-info uppercase",type:"button",children:r?"Validando...":"Validar"}),n&&e.estado_cocina==="listo"&&c.jsx("button",{onClick:()=>n(e.id),disabled:r,className:"w-full ui-btn ui-btn-success uppercase",type:"button",children:r?"Procesando...":"Entregar"})]})})]}),c.jsx(an,{isOpen:i,onClose:()=>s(!1),title:"Comprobante de pago",children:e.receipt_url?c.jsx("img",{src:e.receipt_url,alt:"Comprobante",className:"w-full h-auto rounded-md"}):c.jsx("p",{children:"No se proporcionó comprobante."})})]})},wne=()=>{const[e,t]=b.useState([]),[n,r]=b.useState([]),[i,s]=b.useState(!0),[l,d]=b.useState(null),{content:f,updateContent:h,loading:m}=Uu(),[g,v]=b.useState("11:00"),[x,j]=b.useState("23:00"),[_,S]=b.useState(!1),[N,E]=b.useState(null),[C,k]=b.useState(()=>new Date);b.useEffect(()=>{if(typeof window>"u")return;const L=()=>k(new Date);L();const V=window.setInterval(L,6e4);return()=>window.clearInterval(V)},[]),b.useEffect(()=>{f&&(v(f.onlineOrdering.schedule.startTime),j(f.onlineOrdering.schedule.endTime))},[f]);const A=b.useMemo(()=>qb({startTime:g,endTime:x},"fr-FR"),[g,x]),R=b.useMemo(()=>{const L=/^([01]\d|2[0-3]):([0-5]\d)$/;return L.test(g)&&L.test(x)},[g,x]),D=b.useMemo(()=>sm({startTime:g,endTime:x},C),[x,C,g]),$=b.useCallback(async L=>{if(L.preventDefault(),!(!f||!R)){S(!0),E(null);try{await h({...f,onlineOrdering:{...f.onlineOrdering,schedule:{startTime:g,endTime:x}}}),E({message:"Horaires mis à jour avec succès.",tone:"success"})}catch(V){console.error("Failed to update online ordering schedule",V);const H=V instanceof Error?V.message:"Impossible de mettre à jour les horaires.";E({message:H,tone:"error"})}finally{S(!1)}}},[x,R,f,g,h]),G=b.useCallback(async()=>{try{const{pending:L,ready:V}=await Se.getTakeawayOrders();t(L.sort((H,se)=>H.date_creation-se.date_creation)),r(V.sort((H,se)=>(H.date_listo_cuisine||0)-(se.date_listo_cuisine||0)))}catch(L){console.error("Failed to fetch takeaway orders",L)}finally{s(!1)}},[]);b.useEffect(()=>{s(!0),G();const L=setInterval(G,1e4),V=Se.notifications.subscribe("orders_updated",G);return()=>{clearInterval(L),V()}},[G]);const K=async L=>{if(!l){d(L);try{await Se.validateTakeawayOrder(L),await G()}catch(V){console.error("Failed to validate order:",V),alert(`No se pudo validar el pedido: ${V.message}`)}finally{d(null)}}},B=async L=>{if(!l){d(L);try{await Se.markTakeawayAsDelivered(L),await G()}catch(V){console.error("Failed to mark order as delivered:",V),alert("Ocurrió un error al finalizar el pedido.")}finally{d(null)}}};return i?c.jsx("div",{className:"text-gray-700",children:"Cargando pedidos para llevar..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm",children:c.jsxs("form",{onSubmit:$,className:"flex flex-col gap-6 p-6",children:[c.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:c.jsx(ti,{size:22})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Disponibilité de la commande en ligne"}),c.jsx("p",{className:"text-sm text-gray-500",children:m?"Chargement des horaires...":`Plage actuelle : ${A}`})]})]}),c.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] ${D?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:[c.jsx("span",{className:`h-2 w-2 rounded-full ${D?"bg-emerald-500":"bg-amber-500"}`}),D?"Ouvert":"Fermé"]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("label",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Heure de début"}),c.jsx("input",{type:"time",value:g,onChange:L=>v(L.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Heure de fin"}),c.jsx("input",{type:"time",value:x,onChange:L=>j(L.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30",required:!0})]})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[N&&c.jsx("p",{className:`text-sm font-medium ${N.tone==="success"?"text-emerald-600":"text-red-600"}`,children:N.message}),c.jsx("button",{type:"submit",disabled:!R||_||!f,className:"inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:bg-blue-300",children:_?"Enregistrement...":"Enregistrer les horaires"})]})]})}),c.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-8 md:grid-cols-2",children:[c.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[c.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-blue-700",children:["Pendientes de validación (",e.length,")"]}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(L=>c.jsx(HC,{order:L,onValidate:K,isProcessing:l===L.id},L.id)):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos para validar."})})]}),c.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl",children:[c.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-700",children:["Pedidos listos (",n.length,")"]}),c.jsx("div",{className:"space-y-4",children:n.length>0?n.map(L=>c.jsx(HC,{order:L,onDeliver:B,isProcessing:l===L.id},L.id)):c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay pedidos listos."})})]})]})]})},_ne=()=>{const{role:e}=_a(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,l]=b.useState(null),[d,f]=b.useState(""),[h,m]=b.useState(!1),[g,v]=b.useState(!1),[x,j]=b.useState(!1),[_,S]=b.useState(null),[N,E]=b.useState("add"),C=(e==null?void 0:e.permissions["/ingredients"])==="editor",k=b.useCallback(async()=>{try{const D=await Se.getIngredients();n(D),l(null)}catch(D){l("Impossible de charger les ingrédients."),console.error(D)}finally{i(!1)}},[]);b.useEffect(()=>{i(!0),k()},[k]);const A=b.useMemo(()=>t.filter(D=>D.nom.toLowerCase().includes(d.toLowerCase())),[t,d]),R=(D,$=null)=>{S($),D==="add"||D==="edit"?(E(D),m(!0)):D==="resupply"?v(!0):D==="delete"&&j(!0)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[c.jsxs("div",{className:"relative w-full md:w-80",children:[c.jsx(Pb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),c.jsx("input",{type:"text",placeholder:"Rechercher un ingrédient...",value:d,onChange:D=>f(D.target.value),className:"ui-input pl-10 sm:w-64"})]}),C&&c.jsxs("button",{onClick:()=>R("add"),className:"w-full md:w-auto ui-btn-primary",children:[c.jsx(Tb,{size:20}),"Ajouter un ingrédient"]})]}),r?c.jsx("p",{className:"text-gray-800",children:"Chargement..."}):s?c.jsx("p",{className:"text-red-500",children:s}):c.jsx("div",{className:"ui-card p-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Actuel"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Stock Minimum"}),c.jsx("th",{className:"p-3 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire moyen"}),C&&c.jsx("th",{className:"p-3 text-right text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{children:A.map(D=>{const $=D.stock_actuel<=D.stock_minimum;return c.jsxs("tr",{className:`border-b hover:bg-gray-50 ${$?"bg-red-50":""}`,children:[c.jsx("td",{className:`p-3 font-semibold ${$?"text-red-900":"text-gray-900"}`,children:D.nom}),c.jsxs("td",{className:`p-3 font-bold ${$?"text-red-700":"text-gray-800"}`,children:[D.stock_actuel," ",D.unite]}),c.jsxs("td",{className:`p-3 ${$?"text-red-800":"text-gray-700"}`,children:[D.stock_minimum," ",D.unite]}),c.jsx("td",{className:`p-3 ${$?"text-red-800":"text-gray-700"}`,children:ve(D.prix_unitaire)}),C&&c.jsx("td",{className:"p-3 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>R("resupply",D),title:"Réapprovisionner",className:"p-2 text-green-600 hover:bg-green-100 rounded-full",children:c.jsx(N8,{size:20})}),c.jsx("button",{onClick:()=>R("edit",D),title:"Modifier",className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full",children:c.jsx(oA,{size:20})}),c.jsx("button",{onClick:()=>R("delete",D),title:"Supprimer",className:"p-2 text-red-600 hover:bg-red-100 rounded-full",children:c.jsx(as,{size:20})})]})})]},D.id)})})]})}),h&&C&&c.jsx(jne,{isOpen:h,onClose:()=>m(!1),onSuccess:k,ingredient:_,mode:N}),g&&C&&_&&c.jsx(Sne,{isOpen:g,onClose:()=>v(!1),onSuccess:k,ingredient:_}),x&&C&&_&&c.jsx(Nne,{isOpen:x,onClose:()=>j(!1),onSuccess:k,ingredient:_})]})},jne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r,mode:i})=>{const[s,l]=b.useState({nom:(r==null?void 0:r.nom)||"",unite:(r==null?void 0:r.unite)||"g",stock_minimum:(r==null?void 0:r.stock_minimum)||0}),[d,f]=b.useState(!1),h=async m=>{m.preventDefault(),f(!0);try{i==="edit"&&r?await Se.updateIngredient(r.id,s):await Se.createIngredient(s),n(),t()}catch(g){console.error("Failed to save ingredient",g)}finally{f(!1)}};return c.jsx(an,{isOpen:e,onClose:t,title:i==="add"?"Ajouter un Ingrédient":"Modifier l'Ingrédient",children:c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom"}),c.jsx("input",{type:"text",id:"nom",value:s.nom,onChange:m=>l({...s,nom:m.target.value}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"unite",className:"block text-sm font-medium text-gray-700",children:"Unité"}),c.jsxs("select",{id:"unite",value:s.unite,onChange:m=>l({...s,unite:m.target.value}),required:!0,className:"mt-1 ui-select",children:[c.jsx("option",{value:"g",children:"Grammes (g)"}),c.jsx("option",{value:"kg",children:"Kilogrammes (kg)"}),c.jsx("option",{value:"ml",children:"Millilitres (ml)"}),c.jsx("option",{value:"L",children:"Litres (L)"}),c.jsx("option",{value:"unite",children:"Unité"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"stock_minimum",className:"block text-sm font-medium text-gray-700",children:"Stock Minimum"}),c.jsx("input",{type:"number",id:"stock_minimum",min:"0",value:s.stock_minimum,onChange:m=>l({...s,stock_minimum:parseFloat(m.target.value)}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:d,className:"w-full ui-btn-primary py-3 disabled:opacity-60",children:d?"Sauvegarde...":"Sauvegarder"})]})]})})},Sne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r})=>{const[i,s]=b.useState(0),[l,d]=b.useState(0),[f,h]=b.useState(!1),m=async g=>{if(g.preventDefault(),!(i<=0||l<0)){h(!0);try{await Se.resupplyIngredient(r.id,i,l),n(),t()}catch(v){console.error("Failed to resupply ingredient",v)}finally{h(!1)}}};return c.jsx(an,{isOpen:e,onClose:t,title:`Réapprovisionner: ${r.nom}`,children:c.jsxs("form",{onSubmit:m,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:["Quantité Achetée (",r.unite,")"]}),c.jsx("input",{type:"number",id:"quantity",min:"0.01",step:"0.01",value:i,onChange:g=>s(parseFloat(g.target.value)),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"unitPrice",className:"block text-sm font-medium text-gray-700",children:["Prix par unité (",r.unite,")"]}),c.jsx("input",{type:"number",id:"unitPrice",min:"0",step:"0.01",value:l,onChange:g=>d(parseFloat(g.target.value)),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:f,className:"w-full ui-btn-success py-3 disabled:opacity-60",children:f?"Ajout...":"Ajouter au Stock"})]})]})})},Nne=({isOpen:e,onClose:t,onSuccess:n,ingredient:r})=>{const[i,s]=b.useState(!1),[l,d]=b.useState(null),f=async()=>{s(!0),d(null);try{await Se.deleteIngredient(r.id),n(),t()}catch(h){console.error("Failed to delete ingredient",h),d("Impossible de supprimer cet ingrédient car il est utilisé dans au moins une recette.")}finally{s(!1)}};return c.jsxs(an,{isOpen:e,onClose:t,title:"Confirmer la Suppression",children:[c.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer l'ingrédient ",c.jsx("strong",{className:"text-gray-900",children:r.nom})," ? Cette action est irréversible."]}),l&&c.jsx("p",{className:"mt-4 text-sm text-red-600",children:l}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{onClick:f,disabled:i,className:"w-full ui-btn-danger py-3 disabled:opacity-60",children:i?"Suppression...":"Supprimer"})]})]})},KC=[1,2,3,4,5,6],GC=e=>{switch(e){case"disponible":return{text:"Disponible",color:"bg-green-100 text-green-800",Icon:Fs};case"agotado_temporal":return{text:"Rupture (Temp.)",color:"bg-yellow-100 text-yellow-800",Icon:ti};case"agotado_indefinido":return{text:"Indisponible",color:"bg-red-100 text-red-800",Icon:$$};default:return{text:"Inconnu",color:"bg-gray-100 text-gray-800",Icon:I$}}},Ene=()=>{const{role:e}=_a(),[t,n]=b.useState([]),[r,i]=b.useState([]),[s,l]=b.useState([]),[d,f]=b.useState(!0),[h,m]=b.useState(null),[g,v]=b.useState(""),[x,j]=b.useState("all"),[_,S]=b.useState(!1),[N,E]=b.useState(!1),[C,k]=b.useState(!1),[A,R]=b.useState(null),[D,$]=b.useState("add"),G=(e==null?void 0:e.permissions["/produits"])==="editor",K=b.useCallback(async()=>{try{f(!0);const[se,M,z]=await Promise.all([Se.getProducts(),Se.getCategories(),Se.getIngredients()]);n(se),i(M),l(z),m(null)}catch(se){m("Impossible de charger les données des produits."),console.error(se)}finally{f(!1)}},[]);b.useEffect(()=>{K()},[K]);const B=b.useMemo(()=>t.filter(se=>se.nom_produit.toLowerCase().includes(g.toLowerCase())&&(x==="all"||se.categoria_id===x)),[t,g,x]),L=b.useMemo(()=>{const se=new Map;return t.forEach(M=>{M.is_best_seller&&M.best_seller_rank!=null&&se.set(M.best_seller_rank,M)}),se},[t]),V=(se,M="add",z=null)=>{se==="product"?($(M),R(z),S(!0)):se==="category"?E(!0):se==="delete"&&z&&(R(z),k(!0))},H=async(se,M)=>{try{await Se.updateProduct(se.id,{estado:M}),K()}catch(z){console.error("Failed to update status",z);const q=z instanceof Error?z.message:"Une erreur inconnue s'est produite.";alert(`Échec de la mise à jour du statut du produit : ${q}`)}};return d?c.jsx("p",{className:"text-gray-800",children:"Chargement des produits..."}):h?c.jsx("p",{className:"text-red-500",children:h}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mt-6 ui-card p-4 flex flex-col lg:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[c.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[c.jsx(Pb,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),c.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:g,onChange:se=>v(se.target.value),className:"ui-input pl-10"})]}),c.jsxs("select",{value:x,onChange:se=>j(se.target.value),className:"ui-select md:w-56",children:[c.jsx("option",{value:"all",children:"Toutes les catégories"}),r.map(se=>c.jsx("option",{value:se.id,children:se.nom},se.id))]})]}),G&&c.jsxs("div",{className:"flex gap-2 w-full lg:w-auto",children:[c.jsx("button",{onClick:()=>E(!0),className:"flex-1 lg:flex-initial ui-btn-secondary",children:c.jsx(Y8,{size:20})}),c.jsxs("button",{onClick:()=>V("product","add"),className:"flex-1 lg:flex-initial ui-btn-primary",children:[c.jsx(Tb,{size:20}),"Ajouter Produit"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:B.map(se=>c.jsx(One,{product:se,category:r.find(M=>M.id===se.categoria_id),onEdit:()=>V("product","edit",se),onDelete:()=>V("delete","edit",se),onStatusChange:H,canEdit:G},se.id))}),_&&G&&c.jsx(Cne,{isOpen:_,onClose:()=>S(!1),onSuccess:K,product:A,mode:D,categories:r,ingredients:s,occupiedPositions:L}),N&&G&&c.jsx(kne,{isOpen:N,onClose:()=>E(!1),onSuccess:K,categories:r}),C&&G&&A&&c.jsx(Ane,{isOpen:C,onClose:()=>k(!1),onSuccess:K,product:A})]})},One=({product:e,category:t,onEdit:n,onDelete:r,onStatusChange:i,canEdit:s})=>{const{text:l,color:d,Icon:f}=GC(e.estado),[h,m]=b.useState(!1),g=e.prix_vente-(e.cout_revient||0);return e.prix_vente>0&&g/e.prix_vente*100,c.jsxs("div",{className:"ui-card flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:e.image,alt:e.nom_produit,className:"w-full h-40 object-cover"}),e.is_best_seller&&c.jsxs("span",{className:"absolute top-2 left-2 rounded-full bg-brand-primary/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow-md",children:["Best seller",e.best_seller_rank?` #${e.best_seller_rank}`:""]})]}),c.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-black",children:(t==null?void 0:t.nom)||"Sans catégorie"}),c.jsx("h3",{className:"font-bold text-[clamp(1.05rem,2.2vw,1.35rem)] leading-snug text-black break-words text-balance whitespace-normal [hyphens:auto]",children:e.nom_produit})]}),c.jsx("p",{className:"text-xl font-extrabold text-black",children:ve(e.prix_vente)})]}),c.jsx("p",{className:"text-xs text-black mt-1 flex-grow",children:e.description}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full flex items-center gap-1 ${d}`,children:[c.jsx(f,{size:14})," ",l]}),s&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>m(!h),className:"p-1 text-gray-500 hover:text-gray-800",children:c.jsx(Zk,{size:20})}),h&&c.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:[c.jsx("button",{onClick:()=>{n(),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"}),c.jsx("button",{onClick:()=>{r(),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Supprimer"}),c.jsx("div",{className:"border-t my-1"}),c.jsx("p",{className:"px-4 pt-2 pb-1 text-xs text-gray-500",children:"Changer statut :"}),["disponible","agotado_temporal","agotado_indefinido"].map(v=>c.jsx("button",{onClick:()=>{i(e,v),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:GC(v).text},v))]})]})]})]})]})},Cne=({isOpen:e,onClose:t,onSuccess:n,product:r,mode:i,categories:s,ingredients:l,occupiedPositions:d})=>{var G;const[f,h]=b.useState({nom_produit:(r==null?void 0:r.nom_produit)||"",prix_vente:(r==null?void 0:r.prix_vente)||0,categoria_id:(r==null?void 0:r.categoria_id)||(((G=s[0])==null?void 0:G.id)??""),estado:(r==null?void 0:r.estado)||"disponible",image:(r==null?void 0:r.image)??"",description:(r==null?void 0:r.description)||"",recipe:(r==null?void 0:r.recipe)||[],is_best_seller:(r==null?void 0:r.is_best_seller)??!1,best_seller_rank:(r==null?void 0:r.best_seller_rank)??null}),[m,g]=b.useState(null),[v,x]=b.useState(!1);b.useEffect(()=>{var K;e&&(h({nom_produit:(r==null?void 0:r.nom_produit)||"",prix_vente:(r==null?void 0:r.prix_vente)||0,categoria_id:(r==null?void 0:r.categoria_id)||(((K=s[0])==null?void 0:K.id)??""),estado:(r==null?void 0:r.estado)||"disponible",image:(r==null?void 0:r.image)??"",description:(r==null?void 0:r.description)||"",recipe:(r==null?void 0:r.recipe)||[],is_best_seller:(r==null?void 0:r.is_best_seller)??!1,best_seller_rank:(r==null?void 0:r.best_seller_rank)??null}),g(null))},[e,r,s]);const j=b.useCallback(()=>{for(const K of KC){const B=d.get(K);if(!B||B.id===(r==null?void 0:r.id))return K}return null},[d,r==null?void 0:r.id]),_=b.useCallback(K=>{h(B=>{if(K){const L=B.best_seller_rank??j();return{...B,is_best_seller:!0,best_seller_rank:L??null}}return{...B,is_best_seller:!1,best_seller_rank:null}})},[j]),S=b.useCallback(K=>{const B=K.target.value;h(L=>({...L,best_seller_rank:B?Number(B):null}))},[]),N=b.useMemo(()=>new Map(l.map(K=>[K.id,K])),[l]),E=b.useMemo(()=>f.recipe.reduce((K,B)=>{const L=N.get(B.ingredient_id);if(!L)return K;let V=L.prix_unitaire;return(L.unite==="kg"||L.unite==="L")&&(V=V/1e3),K+V*B.qte_utilisee},0),[f.recipe,N]),C=f.prix_vente-E,k=f.prix_vente>0?C/f.prix_vente*100:0,A=(K,B,L)=>{const V=[...f.recipe];if(B==="qte_utilisee"){const{valueAsNumber:H,value:se}=L.currentTarget,M=Number.isNaN(H)?Number(se.replace(",",".")):H;V[K]={...V[K],[B]:Number.isNaN(M)?V[K].qte_utilisee:M}}else V[K]={...V[K],[B]:L.currentTarget.value};h(H=>({...H,recipe:V}))},R=()=>{l.length!==0&&h({...f,recipe:[...f.recipe,{ingredient_id:l[0].id,qte_utilisee:0}]})},D=K=>{const B=f.recipe.filter((L,V)=>V!==K);h({...f,recipe:B})},$=async K=>{var B;if(K.preventDefault(),f.recipe.length===0){alert("Veuillez ajouter au moins un ingrédient à la recette.");return}if(f.is_best_seller){if(f.best_seller_rank==null){alert("Veuillez sélectionner une position de best seller disponible.");return}const L=d.get(f.best_seller_rank);if(L&&L.id!==(r==null?void 0:r.id)){alert(`La position ${f.best_seller_rank} est déjà occupée par ${L.nom_produit}.`);return}}x(!0);try{let L=((B=f.image)==null?void 0:B.trim())??"";m&&(L=await e$(m,f.nom_produit));const V={...f,image:L,is_best_seller:f.is_best_seller,best_seller_rank:f.is_best_seller?f.best_seller_rank:null};i==="edit"&&r?await Se.updateProduct(r.id,V):await Se.addProduct(V),n(),g(null),t()}catch(L){console.error("Failed to save product",L);const V=L instanceof Error?L.message:"Une erreur inconnue s'est produite.";alert(`Échec du téléversement de l'image du produit : ${V}`)}finally{x(!1)}};return c.jsx(an,{isOpen:e,onClose:t,title:i==="add"?"Ajouter un Produit":"Modifier le Produit",size:"lg",children:c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsxs("div",{className:"max-h-[65vh] overflow-y-auto pr-2 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),c.jsx("input",{type:"text",value:f.nom_produit,onChange:K=>h({...f,nom_produit:K.target.value}),required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:f.prix_vente,onChange:K=>{const{valueAsNumber:B,value:L}=K.currentTarget,V=Number.isNaN(B)?Number(L.replace(",",".")):B;h(H=>({...H,prix_vente:Number.isNaN(V)?H.prix_vente:V}))},required:!0,className:"mt-1 ui-input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),c.jsx("select",{value:f.categoria_id,onChange:K=>h({...f,categoria_id:K.target.value}),required:!0,className:"mt-1 ui-select",children:s.map(K=>c.jsx("option",{value:K.id,children:K.nom},K.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),c.jsxs("select",{value:f.estado,onChange:K=>h({...f,estado:K.target.value}),required:!0,className:"mt-1 ui-select",children:[c.jsx("option",{value:"disponible",children:"Disponible"}),c.jsx("option",{value:"agotado_temporal",children:"Rupture (Temp.)"}),c.jsx("option",{value:"agotado_indefinido",children:"Indisponible"})]})]}),c.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 pt-2",children:[c.jsx("input",{id:"best-seller-toggle",type:"checkbox",checked:f.is_best_seller,onChange:K=>_(K.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),c.jsx("label",{htmlFor:"best-seller-toggle",className:"text-sm font-medium text-gray-700",children:"Best seller"})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"best-seller-rank",children:"Position dans le classement"}),c.jsxs("select",{id:"best-seller-rank",value:f.best_seller_rank??"",onChange:S,disabled:!f.is_best_seller,className:"mt-1 ui-select",children:[c.jsx("option",{value:"",children:"Sélectionner une position"}),KC.map(K=>{const B=d.get(K),L=(B==null?void 0:B.id)===(r==null?void 0:r.id),V=!!(B&&!L),H=B?L?`${K} – Position actuelle`:`${K} – Occupé par ${B.nom_produit}`:`${K}`;return c.jsx("option",{value:K,disabled:V,children:H},K)})]}),f.is_best_seller&&f.best_seller_rank===null&&c.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Sélectionnez une position disponible pour ce best seller."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Coût de revient"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ve(E)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge"}),c.jsx("p",{className:`text-lg font-semibold ${C>=0?"text-emerald-600":"text-red-600"}`,children:ve(C)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Marge %"}),c.jsxs("p",{className:`text-lg font-semibold ${k>=0?"text-emerald-600":"text-red-600"}`,children:[Number.isFinite(k)?au(k):"0","%"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),c.jsx("textarea",{rows:3,value:f.description,onChange:K=>h({...f,description:K.target.value}),className:"mt-1 ui-textarea",placeholder:"Courte description du produit..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image du produit"}),c.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[c.jsx("img",{src:m?URL.createObjectURL(m):Fk(f.image),alt:"Aperçu",className:"w-20 h-20 object-cover rounded-md bg-gray-100"}),c.jsxs("label",{htmlFor:"product-image-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kl,{size:16}),c.jsx("span",{children:"Changer l'image"})]}),c.jsx("input",{id:"product-image-upload",type:"file",className:"sr-only",onChange:K=>g(K.target.files?K.target.files[0]:null)})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 border-b pb-2 mb-2",children:"Recette"}),f.recipe.length===0&&c.jsx("div",{className:"text-center p-2 my-2 bg-red-50 border border-red-200 rounded-md",children:c.jsx("p",{className:"text-sm text-red-600",children:"Un produit doit contenir au moins un ingrédient."})}),c.jsx("div",{className:"space-y-2",children:f.recipe.map((K,B)=>{var L,V;return c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(n8,{className:"text-gray-400 cursor-move",size:16}),c.jsx("select",{value:K.ingredient_id,onChange:H=>A(B,"ingredient_id",H),className:"ui-select flex-grow",children:l.map(H=>c.jsx("option",{value:H.id,children:H.nom},H.id))}),c.jsx("input",{type:"number",placeholder:"Qté",value:K.qte_utilisee,onChange:H=>A(B,"qte_utilisee",H),className:"ui-input w-24"}),c.jsx("span",{className:"text-gray-500 text-sm w-12",children:((L=l.find(H=>H.id===K.ingredient_id))==null?void 0:L.unite)==="kg"?"g":(V=l.find(H=>H.id===K.ingredient_id))==null?void 0:V.unite}),c.jsx("button",{type:"button",onClick:()=>D(B),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:c.jsx(as,{size:16})})]},B)})}),c.jsx("button",{type:"button",onClick:R,className:"mt-2 text-sm text-blue-600 hover:underline",children:"Ajouter un ingrédient"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{type:"submit",disabled:v||f.recipe.length===0,className:"w-full sm:w-auto ui-btn-primary py-3 disabled:opacity-60",children:v?"Sauvegarde...":"Sauvegarder"})]})]})})},kne=({isOpen:e,onClose:t,onSuccess:n,categories:r})=>{const[i,s]=b.useState(""),[l,d]=b.useState(""),f=async()=>{if(i.trim())try{await Se.addCategory(i),s(""),n()}catch(m){console.error(m)}},h=async m=>{d("");try{await Se.deleteCategory(m),n()}catch(g){d(g.message),console.error(g)}};return c.jsx(an,{isOpen:e,onClose:t,title:"Gérer les Catégories",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),placeholder:"Nom de la nouvelle catégorie",className:"ui-input flex-grow"}),c.jsx("button",{onClick:f,className:"ui-btn-primary px-4",children:"Ajouter"})]}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map(m=>c.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[c.jsx("span",{className:"text-gray-800",children:m.nom}),c.jsx("button",{onClick:()=>h(m.id),className:"p-1 text-red-500 hover:bg-red-100 rounded-full",children:c.jsx(as,{size:16})})]},m.id))}),c.jsx("div",{className:"pt-4 flex",children:c.jsx("button",{type:"button",onClick:t,className:"w-full ui-btn-secondary py-3",children:"Fermer"})})]})})},Ane=({isOpen:e,onClose:t,onSuccess:n,product:r})=>{const[i,s]=b.useState(!1),l=async()=>{s(!0);try{await Se.deleteProduct(r.id),n(),t()}catch(d){console.error("Failed to delete product",d)}finally{s(!1)}};return c.jsxs(an,{isOpen:e,onClose:t,title:"Confirmer la Suppression",children:[c.jsxs("p",{className:"text-gray-700",children:["Êtes-vous sûr de vouloir supprimer le produit ",c.jsx("strong",{className:"text-gray-900",children:r.nom_produit})," ? Cette action est irréversible."]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6",children:[c.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto ui-btn-secondary py-3",children:"Annuler"}),c.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto ui-btn-danger py-3",children:i?"Suppression...":"Supprimer"})]})]})},Hf=e=>e.visuals?{...e.visuals,banner_image:e.visuals.banner_image??e.visuals.banner_url}:null,Tne=e=>{if(e.status!=="active")return!1;const t=new Date;return!(e.conditions.start_date&&new Date(e.conditions.start_date)>t||e.conditions.end_date&&new Date(e.conditions.end_date)<t||e.conditions.usage_limit&&e.usage_count>=e.conditions.usage_limit)},Pne=e=>{const t=new Date;if(e.days_of_week&&!e.days_of_week.includes(t.getDay()))return!1;if(e.time_range){const[n,r]=e.time_range.start_time.split(":").map(Number),[i,s]=e.time_range.end_time.split(":").map(Number),l=t.getHours()*60+t.getMinutes(),d=n*60+r,f=i*60+s;if(l<d||l>f)return!1}return!0},Mne=(e,t)=>{const n=e.subtotal||e.total;if(t.min_order_amount&&n<t.min_order_amount||t.max_order_amount&&n>t.max_order_amount)return!1;const r=e.items.reduce((i,s)=>i+s.quantite,0);return t.min_items_count&&r<t.min_items_count||t.max_items_count&&r>t.max_items_count||t.order_types&&!t.order_types.includes(e.type)?!1:(t.first_order_only,!0)},Kf=(e,t)=>{if(!Tne(e)||!Pne(e.conditions)||!Mne(t,e.conditions))return!1;if(e.type==="buy_x_get_y"){const n=e.discount.buy_x_get_y_config;return!n||!n.product_ids?!1:t.items.filter(i=>n.product_ids.includes(i.produitRef)).reduce((i,s)=>i+s.quantite,0)>=2}return!0},Gf=(e,t)=>{let n=0;const r=e.subtotal||e.total;t.applies_to==="total"?n=r:t.applies_to==="products"&&t.product_ids&&t.product_ids.length>0?n=e.items.filter(s=>{var l;return(l=t.product_ids)==null?void 0:l.includes(s.produitRef)}).reduce((s,l)=>s+l.prix_unitaire*l.quantite,0):t.applies_to==="categories"&&t.category_ids&&t.category_ids.length>0;let i=n*t.discount_value/100;return t.max_discount_amount&&(i=Math.min(i,t.max_discount_amount)),i},Yf=(e,t)=>t.discount_value,Rne=(e,t)=>{const n=t.buy_x_get_y_config;if(!n)return 0;let r=0;const i=e.items.reduce((s,l)=>(s[l.produitRef]||(s[l.produitRef]=[]),s[l.produitRef].push(l),s),{});for(const s in i){const l=i[s],d=l.reduce((f,h)=>f+h.quantite,0);if(n.product_ids&&n.product_ids.includes(s)&&d>=2){const f=Math.floor(d/2),h=[...l].sort((m,g)=>m.prix_unitaire-g.prix_unitaire);h.length>0&&(r+=h[0].prix_unitaire*f)}}return r},Dne=e=>e.shipping_cost||0,Vf=(e,t)=>{switch(e.type){case"percentage":return Gf(t,e.discount);case"fixed_amount":return Yf(t,e.discount);case"promo_code":return e.discount.discount_type==="percentage"?Gf(t,e.discount):e.discount.discount_type==="fixed_amount"?Yf(t,e.discount):0;case"buy_x_get_y":return Rne(t,e.discount);case"free_shipping":return Dne(t);case"threshold":return e.discount.discount_type==="percentage"?Gf(t,e.discount):e.discount.discount_type==="fixed_amount"?Yf(t,e.discount):0;case"happy_hour":return e.discount.discount_type==="percentage"?Gf(t,e.discount):e.discount.discount_type==="fixed_amount"?Yf(t,e.discount):0;default:return 0}},Ine=async e=>{const t={...e,applied_promotions:[],total_discount:0,subtotal:e.subtotal||e.total},{data:n,error:r}=await xe.from("promotions").select("*").eq("status","active");if(r||!n)return console.error("Error fetching active promotions:",r),e;let i=t.subtotal;const s=n.filter(f=>f.type==="buy_x_get_y"&&Kf(f,t)).sort((f,h)=>h.priority-f.priority);for(const f of s){const h=Vf(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,config:f.discount.buy_x_get_y_config,visuals:Hf(f)})}}if(e.promo_code){const f=await vR(e.promo_code);if(f&&Kf(f,t)){const h=Vf(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,config:{promo_code:f.discount.promo_code},visuals:Hf(f)})}}}const l=n.filter(f=>(f.type==="percentage"||f.type==="fixed_amount"||f.type==="threshold"||f.type==="happy_hour")&&Kf(f,t)).sort((f,h)=>h.priority-f.priority);for(const f of l){const h=Vf(f,t);if(h>0){const m=Math.min(h,i);i-=m,t.total_discount+=m,t.applied_promotions.push({promotion_id:f.id,name:f.name,discount_amount:m,visuals:Hf(f)})}}const d=n.find(f=>f.type==="free_shipping"&&Kf(f,t));if(d){const f=Vf(d,t);f>0&&t.applied_promotions.push({promotion_id:d.id,name:d.name,discount_amount:f,type:"FREE_SHIPPING",visuals:Hf(d)})}return t.total=i,t},Lne=async()=>{const{data:e,error:t}=await xe.from("promotions").select("*").order("priority",{ascending:!1});if(t)throw console.error("Error fetching promotions:",t),new Error("Impossible de récupérer les promotions");return e||[]},pR=async()=>{const{data:e,error:t}=await xe.from("promotions").select("*").eq("status","active").order("priority",{ascending:!1});if(t)throw console.error("Error fetching active promotions:",t),new Error("Impossible de récupérer les promotions actives");return e||[]},$ne=async e=>{const{data:t,error:n}=await xe.from("promotions").insert([{...e,usage_count:0}]).select().single();if(n)throw console.error("Error creating promotion:",n),new Error("Impossible de créer la promotion");return t},gR=async(e,t)=>{const{data:n,error:r}=await xe.from("promotions").update(t).eq("id",e).select().single();if(r)throw console.error("Error updating promotion:",r),new Error("Impossible de mettre à jour la promotion");return n},zne=async(e,t)=>gR(e,{status:t}),Une=async e=>{const{error:t}=await xe.from("promotions").delete().eq("id",e);if(t)throw console.error("Error deleting promotion:",t),new Error("Impossible de supprimer la promotion")},vR=async e=>{const{data:t,error:n}=await xe.from("promotions").select("*").eq("type","promo_code").eq("status","active");return n?(console.error("Error fetching promotion by code:",n),null):(t==null?void 0:t.find(i=>{var s;return((s=i.discount)==null?void 0:s.promo_code)===e}))||null},qne=async e=>{const{data:t,error:n}=await xe.from("promotion_usages").select("*").eq("promotion_id",e).order("applied_at",{ascending:!1});return n?(console.error("Error fetching promotion usages:",n),[]):t||[]},Bne=[{value:"percentage",label:"Pourcentage"},{value:"fixed_amount",label:"Montant fixe"},{value:"promo_code",label:"Code promo"},{value:"buy_x_get_y",label:"2x1 / Achetez X, obtenez Y"},{value:"free_product",label:"Produit gratuit"},{value:"free_shipping",label:"Livraison gratuite"},{value:"combo",label:"Combo"},{value:"threshold",label:"Palier"},{value:"happy_hour",label:"Happy hour"}],Fne=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"scheduled",label:"Programmée"},{value:"expired",label:"Expirée"}],YC=({isOpen:e,onClose:t,onSave:n,promotion:r})=>{var L,V;const[i,s]=b.useState(""),[l,d]=b.useState("percentage"),[f,h]=b.useState("active"),[m,g]=b.useState(0),[v,x]=b.useState({}),[j,_]=b.useState({type:"percentage",value:0,applies_to:"total"}),[S,N]=b.useState({}),[E,C]=b.useState(!1),[k,A]=b.useState(null),[R,D]=b.useState("general"),[$,G]=b.useState(!1);b.useEffect(()=>{r&&(s(r.name),d(r.type),h(r.status),g(r.priority),x(r.conditions),_(r.discount),N(r.visuals||{}))},[r]);const K=async H=>{if(H.preventDefault(),C(!0),A(null),l!=="free_shipping"&&(!j.value||j.value<=0)){A("La valeur de la réduction doit être supérieure à 0"),C(!1),D("discount");return}if(!i||i.trim()===""){A("Le nom de la promotion est obligatoire"),C(!1),D("general");return}try{r?await gR(r.id,{name:i,type:l,status:f,priority:m,conditions:v,discount:j,visuals:S}):await $ne({name:i,type:l,status:f,priority:m,conditions:v,discount:j,visuals:S}),n()}catch(se){A(se instanceof Error?se.message:"Une erreur est survenue")}finally{C(!1)}},B=async H=>{var M;const se=(M=H.target.files)==null?void 0:M[0];if(se){G(!0);try{const z=await El(se);N({...S,banner_image:ei(z)})}catch{A("Erreur lors du téléchargement de l'image")}finally{G(!1)}}};return e?c.jsx("div",{className:"promotion-modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 text-black backdrop-blur-sm",children:c.jsxs("div",{className:"promotion-modal__content flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:r?"Modifier la promotion":"Nouvelle promotion"}),c.jsx("button",{onClick:t,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer la fenêtre de promotion",children:c.jsx(Xa,{size:22})})]}),k&&c.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:k}),c.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${R==="general"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>D("general"),children:"Général"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${R==="conditions"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>D("conditions"),children:"Conditions"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${R==="discount"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>D("discount"),children:"Réduction"}),c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${R==="visuals"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>D("visuals"),children:"Affichage"})]}),c.jsxs("form",{onSubmit:K,className:"flex-1 overflow-y-auto bg-white px-4 py-6 text-black sm:px-6",children:[R==="general"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nom de la promotion"}),c.jsx("input",{type:"text",id:"name",value:i,onChange:H=>s(H.target.value),className:"ui-input mt-2",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de promotion"}),c.jsx("select",{id:"type",value:l,onChange:H=>d(H.target.value),className:"ui-input mt-2",required:!0,children:Bne.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"status",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Statut"}),c.jsx("select",{id:"status",value:f,onChange:H=>h(H.target.value),className:"ui-input mt-2",required:!0,children:Fne.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"priority",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Priorité"}),c.jsx("input",{type:"number",id:"priority",value:m,onChange:H=>g(parseInt(H.target.value)||0),className:"ui-input mt-2",min:"0",max:"100"}),c.jsx("p",{className:"mt-2 text-xs text-black",children:"Plus la valeur est élevée, plus la promotion est prioritaire."})]})]})}),R==="conditions"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[l==="promo_code"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"promo_code",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Code promo"}),c.jsx("input",{type:"text",id:"promo_code",value:v.promo_code||"",onChange:H=>x({...v,promo_code:H.target.value}),className:"ui-input mt-2",required:l==="promo_code"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"min_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant minimum de commande"}),c.jsx("input",{type:"number",id:"min_order_amount",value:v.min_order_amount||"",onChange:H=>x({...v,min_order_amount:parseFloat(H.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_order_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de commande"}),c.jsx("input",{type:"number",id:"max_order_amount",value:v.max_order_amount||"",onChange:H=>x({...v,max_order_amount:parseFloat(H.target.value)||void 0}),className:"ui-input mt-2",min:"0",step:"0.01"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"start_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de début"}),c.jsx("input",{type:"datetime-local",id:"start_date",value:v.start_date?new Date(v.start_date).toISOString().slice(0,16):"",onChange:H=>x({...v,start_date:H.target.value?new Date(H.target.value).toISOString():void 0}),className:"ui-input mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"end_date",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Date de fin"}),c.jsx("input",{type:"datetime-local",id:"end_date",value:v.end_date?new Date(v.end_date).toISOString().slice(0,16):"",onChange:H=>x({...v,end_date:H.target.value?new Date(H.target.value).toISOString():void 0}),className:"ui-input mt-2"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Jours de la semaine"}),c.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"].map((H,se)=>{var M;return c.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-3 py-1 text-sm text-black shadow-sm",children:[c.jsx("input",{type:"checkbox",checked:((M=v.days_of_week)==null?void 0:M.includes(se))||!1,onChange:z=>{const q=v.days_of_week||[];z.target.checked?x({...v,days_of_week:[...q,se]}):x({...v,days_of_week:q.filter(J=>J!==se)})},className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),c.jsx("span",{children:H})]},se)})})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"hours_start",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de début"}),c.jsx("input",{type:"time",id:"hours_start",value:((L=v.hours_of_day)==null?void 0:L.start)||"",onChange:H=>x({...v,hours_of_day:{...v.hours_of_day||{},start:H.target.value}}),className:"ui-input mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"hours_end",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Heure de fin"}),c.jsx("input",{type:"time",id:"hours_end",value:((V=v.hours_of_day)==null?void 0:V.end)||"",onChange:H=>x({...v,hours_of_day:{...v.hours_of_day||{},end:H.target.value}}),className:"ui-input mt-2"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_uses",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Nombre maximum d'utilisations"}),c.jsx("input",{type:"number",id:"max_uses",value:v.max_uses_total||"",onChange:H=>x({...v,max_uses_total:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_uses_per_customer",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Maximum par client"}),c.jsx("input",{type:"number",id:"max_uses_per_customer",value:v.max_uses_per_customer||"",onChange:H=>x({...v,max_uses_per_customer:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"0"})]})]}),l==="buy_x_get_y"&&c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"buy_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité à acheter"}),c.jsx("input",{type:"number",id:"buy_quantity",value:v.buy_quantity||"",onChange:H=>x({...v,buy_quantity:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:l==="buy_x_get_y"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"get_quantity",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Quantité offerte"}),c.jsx("input",{type:"number",id:"get_quantity",value:v.get_quantity||"",onChange:H=>x({...v,get_quantity:parseInt(H.target.value)||void 0}),className:"ui-input mt-2",min:"1",required:l==="buy_x_get_y"})]})]}),c.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm",children:[c.jsx("input",{type:"checkbox",id:"first_order_only",checked:v.first_order_only||!1,onChange:H=>x({...v,first_order_only:H.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-black focus:ring-black"}),c.jsx("label",{htmlFor:"first_order_only",className:"text-sm font-medium text-black",children:"Uniquement pour la première commande"})]})]})}),R==="discount"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"discount_type",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Type de réduction"}),c.jsxs("select",{id:"discount_type",value:j.type,onChange:H=>_({...j,type:H.target.value}),className:"ui-input mt-2",required:!0,children:[c.jsx("option",{value:"percentage",children:"Pourcentage"}),c.jsx("option",{value:"fixed_amount",children:"Montant fixe"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"discount_value",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Valeur de la réduction"}),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("input",{type:"number",id:"discount_value",value:j.value,onChange:H=>_({...j,value:parseFloat(H.target.value)||0}),className:"ui-input pr-10",min:"0",step:(j.type==="percentage","0.01"),required:!0}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:j.type==="percentage"?"%":"€"})]})]})]}),j.type==="percentage"&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"max_discount_amount",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Montant maximum de la réduction"}),c.jsxs("div",{className:"relative mt-2",children:[c.jsx("input",{type:"number",id:"max_discount_amount",value:j.max_discount_amount||"",onChange:H=>_({...j,max_discount_amount:parseFloat(H.target.value)||void 0}),className:"ui-input pr-10",min:"0",step:"0.01"}),c.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-sm font-semibold text-black",children:"€"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"applies_to",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Application de la réduction"}),c.jsxs("select",{id:"applies_to",value:j.applies_to,onChange:H=>_({...j,applies_to:H.target.value}),className:"ui-input mt-2",required:!0,children:[c.jsx("option",{value:"total",children:"Total de la commande"}),c.jsx("option",{value:"products",children:"Produits spécifiques"}),c.jsx("option",{value:"shipping",children:"Frais de livraison"})]})]})]})}),R==="visuals"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"space-y-6 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du badge"}),c.jsx("input",{type:"text",id:"badge_text",value:S.badge_text||"",onChange:H=>N({...S,badge_text:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: 2x1, -20%, etc."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur du texte du badge"}),c.jsx("input",{type:"color",id:"badge_color",value:S.badge_color||"#FFFFFF",onChange:H=>N({...S,badge_color:H.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_bg_color",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Couleur de fond du badge"}),c.jsx("input",{type:"color",id:"badge_bg_color",value:S.badge_bg_color||"#F9A826",onChange:H=>N({...S,badge_bg_color:H.target.value}),className:"mt-2 h-12 w-full rounded-lg border border-slate-200 bg-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"badge_bg_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de fond du badge (optionnel)"}),c.jsx("p",{className:"mt-1 text-xs text-black",children:"Si vous uploadez une image, elle remplacera la couleur de fond du badge"}),c.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[c.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[c.jsx("input",{type:"file",id:"badge_bg_image",onChange:async H=>{var M;const se=(M=H.target.files)==null?void 0:M[0];if(se){G(!0);try{const z=await El(se,{tags:["badge-background"]});N({...S,badge_bg_image:ei(z)})}catch{A("Erreur lors du téléchargement de l'image du badge")}finally{G(!1)}}},className:"sr-only",accept:"image/*"}),c.jsx("span",{children:$?"Téléchargement...":"Choisir une image"})]}),S.badge_bg_image&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:S.badge_bg_image,alt:"Aperçu de l'image de fond du badge",className:"h-16 w-auto rounded-lg object-cover shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>N({...S,badge_bg_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:c.jsx(Xa,{size:12})})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_text",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte de la bannière"}),c.jsx("input",{type:"text",id:"banner_text",value:S.banner_text||"",onChange:H=>N({...S,banner_text:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: Offre spéciale : 20% de réduction sur tous les tacos !"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_image",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de la bannière"}),c.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[c.jsxs("label",{className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-black shadow-sm transition hover:bg-slate-100",children:[c.jsx("input",{type:"file",id:"banner_image",onChange:B,className:"sr-only",accept:"image/*"}),c.jsx("span",{children:$?"Téléchargement...":"Choisir une image"})]}),S.banner_image&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:S.banner_image,alt:"Aperçu de la bannière",className:"h-20 w-auto rounded-lg object-cover shadow-sm"}),c.jsx("button",{type:"button",onClick:()=>N({...S,banner_image:void 0}),className:"absolute -top-2 -right-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-red-500 bg-white text-black shadow hover:bg-red-100",children:c.jsx(Xa,{size:12})})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"banner_cta",className:"block text-xs font-semibold uppercase tracking-wide text-black",children:"Texte du bouton d'appel à l'action"}),c.jsx("input",{type:"text",id:"banner_cta",value:S.banner_cta||"",onChange:H=>N({...S,banner_cta:H.target.value}),className:"ui-input mt-2",placeholder:"Ex: En profiter maintenant"})]})]})})]}),c.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-200 bg-slate-50/80 p-6 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:E,children:"Annuler"}),c.jsx("button",{type:"submit",onClick:K,className:"inline-flex items-center justify-center gap-2 rounded-full border border-brand-primary bg-white px-5 py-2.5 text-sm font-semibold text-black shadow transition hover:bg-brand-primary/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent"}),c.jsx("span",{children:"Enregistrement..."})]}):c.jsx("span",{children:"Enregistrer"})})]})]})}):null},hb=(e,t,n)=>Math.min(Math.max(e,t),n),Hne=e=>{const t=e.replace("#","").trim();if(t.length===3){const n=parseInt(t[0]+t[0],16),r=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16);return[n,r,i]}if(t.length===4){const n=parseInt(t[0]+t[0],16),r=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16);return[n,r,i]}if(t.length===6||t.length===8){const n=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[n,r,i]}return null},Kne=e=>{const t=e.match(/rgba?\(([^)]+)\)/i);if(!t)return null;const[n,r,i]=t[1].split(",").slice(0,3).map(s=>hb(parseFloat(s.trim()),0,255));return[n,r,i].some(s=>Number.isNaN(s))?null:[n,r,i]},Gne=(e,t,n)=>{const r=(e%360+360)%360,i=hb(t,0,1),s=hb(n,0,1);if(i===0){const x=Math.round(s*255);return[x,x,x]}const l=(1-Math.abs(2*s-1))*i,d=l*(1-Math.abs(r/60%2-1)),f=s-l/2;let h=0,m=0,g=0;r<60?(h=l,m=d):r<120?(h=d,m=l):r<180?(m=l,g=d):r<240?(m=d,g=l):r<300?(h=d,g=l):(h=l,g=d);const v=x=>Math.round((x+f)*255);return[v(h),v(m),v(g)]},Yne=e=>{const t=e.match(/hsla?\(([^)]+)\)/i);if(!t)return null;const[n,r,i]=t[1].split(",").slice(0,3).map(f=>f.trim()),s=parseFloat(n),l=parseFloat(r.replace("%",""))/100,d=parseFloat(i.replace("%",""))/100;return[s,l,d].some(f=>Number.isNaN(f))?null:Gne(s,l,d)},Vne=e=>{if(!e)return null;const t=e.trim();return t?t.startsWith("#")?Hne(t):t.toLowerCase().startsWith("rgb")?Kne(t):t.toLowerCase().startsWith("hsl")?Yne(t):null:null},Wne=e=>{const t=Vne(e);if(!t)return null;const[n,r,i]=t.map(l=>l/255),s=[n,r,i].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]},Xne=(e,t=.55)=>{const n=Wne(e);return n===null?!1:n<t},yR=(e,{lightColor:t="#FFFFFF",darkColor:n="#000000",threshold:r=.55}={})=>Xne(e,r)?t:n,Qne={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},Jne={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},Zne={active:"bg-green-100 text-black",inactive:"bg-gray-100 text-black",scheduled:"bg-blue-100 text-black",expired:"bg-red-100 text-black"},ere=({isOpen:e,onClose:t,promotion:n})=>{var _;const[r,i]=b.useState([]),[s,l]=b.useState(!1),[d,f]=b.useState(null),[h,m]=b.useState("details");b.useEffect(()=>{e&&n&&g()},[e,n]);const g=async()=>{l(!0),f(null);try{const S=await qne(n.id);i(S)}catch(S){f("Erreur lors du chargement des utilisations"),console.error(S)}finally{l(!1)}},v=S=>{const N=new Date(S);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(N)},x=((_=n.visuals)==null?void 0:_.badge_bg_color)||"#F9A826",j=yR(x);return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-6 backdrop-blur-sm",children:c.jsxs("div",{className:"flex w-full max-w-5xl flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white text-black shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 bg-white px-6 py-5 text-black sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold leading-snug sm:text-2xl",children:"Détails de la promotion"}),c.jsx("button",{onClick:t,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-transparent text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary","aria-label":"Fermer les détails de la promotion",children:c.jsx(Xa,{size:22})})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 bg-slate-50/80 px-4 py-3 sm:px-6",children:[c.jsx("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${h==="details"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>m("details"),children:"Détails"}),c.jsxs("button",{className:`rounded-full px-4 py-2 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary ${h==="usages"?"border border-brand-primary bg-brand-primary/10 text-black shadow":"border border-transparent text-black hover:bg-slate-100"}`,onClick:()=>m("usages"),children:["Utilisations (",n.usage_count,")"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-4 py-6 sm:px-6",children:[h==="details"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-black",children:n.name}),c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${Zne[n.status]}`,children:Jne[n.status]}),c.jsx("span",{className:"text-sm font-medium text-black",children:Qne[n.type]})]})]}),c.jsxs("div",{className:"rounded-full border border-slate-200 bg-white/80 px-4 py-1.5 text-sm font-semibold text-black shadow-sm",children:["Priorité : ",n.priority]})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(s8,{size:16}),"Informations générales"]}),c.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"ID"}),c.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:n.id})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Créée le"}),c.jsx("dd",{children:v(n.created_at)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Mise à jour"}),c.jsx("dd",{children:v(n.updated_at)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Utilisations"}),c.jsx("dd",{children:n.usage_count})]})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(Iu,{size:16}),"Réduction"]}),c.jsxs("dl",{className:"space-y-2 text-sm text-black",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Type"}),c.jsx("dd",{children:n.discount.type==="percentage"?"Pourcentage":"Montant fixe"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Valeur"}),c.jsxs("dd",{className:"font-semibold text-black",children:[n.discount.value,n.discount.type==="percentage"?"%":"€"]})]}),n.discount.max_discount_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Maximum"}),c.jsxs("dd",{children:[n.discount.max_discount_amount,"€"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Application"}),c.jsxs("dd",{children:[n.discount.applies_to==="total"&&"Total de la commande",n.discount.applies_to==="products"&&"Produits spécifiques",n.discount.applies_to==="shipping"&&"Frais de livraison"]})]})]})]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(v$,{size:16}),"Conditions"]}),c.jsxs("dl",{className:"grid grid-cols-1 gap-3 text-sm text-black md:grid-cols-2",children:[n.conditions.promo_code&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Code promo"}),c.jsx("dd",{className:"rounded bg-white/80 px-2 py-0.5 font-mono text-black shadow-sm",children:n.conditions.promo_code})]}),n.conditions.min_order_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Montant minimum"}),c.jsxs("dd",{children:[n.conditions.min_order_amount,"€"]})]}),n.conditions.max_order_amount&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Montant maximum"}),c.jsxs("dd",{children:[n.conditions.max_order_amount,"€"]})]}),n.conditions.start_date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Date de début"}),c.jsx("dd",{children:v(n.conditions.start_date)})]}),n.conditions.end_date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Date de fin"}),c.jsx("dd",{children:v(n.conditions.end_date)})]}),n.conditions.days_of_week&&n.conditions.days_of_week.length>0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Jours"}),c.jsx("dd",{children:n.conditions.days_of_week.map(S=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][S]).join(", ")})]}),n.conditions.hours_of_day&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Heures"}),c.jsxs("dd",{children:[n.conditions.hours_of_day.start," - ",n.conditions.hours_of_day.end]})]}),n.conditions.max_uses_total&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Utilisations max."}),c.jsx("dd",{children:n.conditions.max_uses_total})]}),n.conditions.max_uses_per_customer&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Max par client"}),c.jsx("dd",{children:n.conditions.max_uses_per_customer})]}),n.conditions.first_order_only&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Première commande"}),c.jsx("dd",{children:"Oui"})]}),n.type==="buy_x_get_y"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Achetez"}),c.jsx("dd",{children:n.conditions.buy_quantity})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("dt",{className:"font-medium",children:"Obtenez"}),c.jsx("dd",{children:n.conditions.get_quantity})]})]})]})]}),n.visuals&&Object.keys(n.visuals).length>0&&c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-sm",children:[c.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-black",children:[c.jsx(ph,{size:16}),"Éléments visuels"]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm text-black md:grid-cols-2",children:[n.visuals.badge_text&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Badge"}),c.jsx("span",{className:"rounded-full px-3 py-1 text-xs font-semibold",style:{backgroundColor:x,color:j},children:n.visuals.badge_text})]}),n.visuals.banner_text&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Texte bannière"}),c.jsx("span",{className:"text-right text-black",children:n.visuals.banner_text})]}),n.visuals.banner_cta&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"font-medium",children:"Bouton"}),c.jsx("span",{className:"text-right text-black",children:n.visuals.banner_cta})]})]}),n.visuals.banner_image&&c.jsxs("div",{className:"mt-4",children:[c.jsx("span",{className:"mb-2 block text-xs font-semibold uppercase tracking-wide text-black",children:"Image de bannière"}),c.jsx("img",{src:n.visuals.banner_image,alt:"Bannière promotionnelle",className:"w-full max-h-40 rounded-xl object-cover shadow-sm"})]})]})]}),h==="usages"&&c.jsxs("div",{className:"space-y-4",children:[d&&c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm font-medium text-black shadow-sm",children:d}),s?c.jsxs("div",{className:"flex items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-black shadow-sm",children:[c.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-brand-primary"}),c.jsx("span",{children:"Chargement…"})]}):r.length===0?c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 py-10 text-center text-sm font-medium text-black shadow-sm",children:"Aucune utilisation enregistrée pour cette promotion"}):c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 shadow-sm",children:c.jsxs("table",{className:"w-full divide-y divide-slate-200 text-sm text-black",children:[c.jsx("thead",{className:"bg-slate-50/90 text-xs font-semibold uppercase tracking-wide text-black",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Commande"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Client"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Montant"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(S=>c.jsxs("tr",{className:"bg-white/80 transition hover:bg-brand-accent-soft",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-black",children:v(S.applied_at)}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("a",{href:"#",className:"inline-flex items-center gap-2 text-black transition hover:underline",onClick:N=>{N.preventDefault()},children:[S.order_id.substring(0,8),"...",c.jsx(Y$,{size:14})]})}),c.jsx("td",{className:"px-4 py-3",children:S.customer_phone||"—"}),c.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-black",children:[S.discount_amount.toFixed(2),"€"]})]},S.id))})]})})]})]}),c.jsx("div",{className:"flex justify-end border-t border-slate-200 bg-slate-50/80 p-6",children:c.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-black transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-brand-primary",children:"Fermer"})})]})}):null},tre=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmLabel:s="Confirmer",cancelLabel:l="Annuler",confirmButtonClass:d="bg-brand-primary hover:bg-brand-primary-dark"})=>e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[c.jsx("h2",{className:"text-xl font-semibold",children:r}),c.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:c.jsx(Xa,{size:24})})]}),c.jsx("div",{className:"p-6",children:c.jsx("p",{className:"text-gray-700",children:i})}),c.jsxs("div",{className:"flex justify-end items-center gap-3 p-6 border-t",children:[c.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:l}),c.jsx("button",{type:"button",onClick:n,className:`px-4 py-2 text-white rounded-md ${d}`,children:s})]})]})}):null,nre={active:"Active",inactive:"Inactive",scheduled:"Programmée",expired:"Expirée"},rre={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",expired:"bg-red-100 text-red-800"},are={percentage:"Pourcentage",fixed_amount:"Montant fixe",promo_code:"Code promo",buy_x_get_y:"2x1 / Achetez X, obtenez Y",free_product:"Produit gratuit",free_shipping:"Livraison gratuite",combo:"Combo",threshold:"Palier",happy_hour:"Happy hour"},ire={percentage:c.jsx(Iu,{size:16}),fixed_amount:c.jsx(ph,{size:16}),promo_code:c.jsx(ph,{size:16}),buy_x_get_y:c.jsx(Ji,{size:16}),free_product:c.jsx(Ji,{size:16}),free_shipping:c.jsx(Ji,{size:16}),combo:c.jsx(Ji,{size:16}),threshold:c.jsx(Jk,{size:16}),happy_hour:c.jsx(ti,{size:16})},sre=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),[l,d]=b.useState(!1),[f,h]=b.useState(!1),[m,g]=b.useState(!1),[v,x]=b.useState(!1),[j,_]=b.useState(null),[S,N]=b.useState(""),[E,C]=b.useState("all"),[k,A]=b.useState("all"),[R,D]=b.useState("priority"),[$,G]=b.useState("desc"),K=async()=>{r(!0),s(null);try{const T=await Lne();t(T)}catch(T){s("Erreur lors du chargement des promotions"),console.error(T)}finally{r(!1)}};b.useEffect(()=>{K()},[]);const B=()=>{_(null),d(!0)},L=T=>{_(T),h(!0)},V=T=>{_(T),g(!0)},H=T=>{_(T),x(!0)},se=async T=>{try{const I=T.active?"inactive":"active",U=await zne(T.id,I);t(e.map(te=>te.id===T.id?U:te))}catch(I){s("Erreur lors de la mise à jour du statut"),console.error(I)}},M=async()=>{if(j)try{await Une(j.id),t(e.filter(T=>T.id!==j.id)),x(!1)}catch(T){s("Erreur lors de la suppression de la promotion"),console.error(T)}},z=T=>{R===T?G($==="asc"?"desc":"asc"):(D(T),G("desc"))},q=e.filter(T=>{const I=T.name.toLowerCase().includes(S.toLowerCase()),U=E==="all"||T.status===E,te=k==="all"||T.type===k;return I&&U&&te}).sort((T,I)=>{let U=0;switch(R){case"name":U=T.name.localeCompare(I.name);break;case"priority":U=T.priority-I.priority;break;case"created_at":U=new Date(T.created_at).getTime()-new Date(I.created_at).getTime();break;case"usage_count":U=T.usage_count-I.usage_count;break}return $==="asc"?U:-U}),J=T=>R!==T?null:$==="asc"?c.jsx(Jk,{size:16}):c.jsx(Qk,{size:16}),X=T=>{const I=new Date(T);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(I)};return c.jsxs("div",{className:"promotions-page p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des promotions"}),c.jsxs("button",{onClick:B,className:"bg-brand-primary hover:bg-brand-primary-dark text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[c.jsx(Lu,{size:20}),"Nouvelle promotion"]})]}),i&&c.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:i}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Rechercher une promotion...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:S,onChange:T=>N(T.target.value)}),c.jsx(Pb,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:E,onChange:T=>C(T.target.value),children:[c.jsx("option",{value:"all",children:"Tous les statuts"}),c.jsx("option",{value:"active",children:"Actives"}),c.jsx("option",{value:"inactive",children:"Inactives"}),c.jsx("option",{value:"scheduled",children:"Programmées"}),c.jsx("option",{value:"expired",children:"Expirées"})]}),c.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2",value:k,onChange:T=>A(T.target.value),children:[c.jsx("option",{value:"all",children:"Tous les types"}),c.jsx("option",{value:"percentage",children:"Pourcentage"}),c.jsx("option",{value:"fixed_amount",children:"Montant fixe"}),c.jsx("option",{value:"promo_code",children:"Code promo"}),c.jsx("option",{value:"buy_x_get_y",children:"2x1 / Achetez X, obtenez Y"}),c.jsx("option",{value:"free_product",children:"Produit gratuit"}),c.jsx("option",{value:"free_shipping",children:"Livraison gratuite"}),c.jsx("option",{value:"combo",children:"Combo"}),c.jsx("option",{value:"threshold",children:"Palier"}),c.jsx("option",{value:"happy_hour",children:"Happy hour"})]}),c.jsxs("button",{onClick:K,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2",children:[c.jsx(U8,{size:18}),c.jsx("span",{className:"hidden md:inline",children:"Actualiser"})]})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 border-b",children:[c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>z("name"),children:["Nom ",J("name")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Statut"}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>z("priority"),children:["Priorité ",J("priority")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>z("created_at"),children:["Créée le ",J("created_at")]})}),c.jsx("th",{className:"px-4 py-3 text-left",children:c.jsxs("button",{className:"flex items-center gap-1 font-semibold text-gray-700",onClick:()=>z("usage_count"),children:["Utilisations ",J("usage_count")]})}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),c.jsx("tbody",{children:n?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-4 py-8 text-center",children:c.jsxs("div",{className:"flex justify-center items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),c.jsx("span",{className:"ml-2",children:"Chargement..."})]})})}):q.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Aucune promotion trouvée"})}):q.map(T=>c.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[c.jsxs("td",{className:"px-4 py-4",children:[c.jsx("div",{className:"font-medium",children:T.name}),T.type==="promo_code"&&T.conditions.promo_code&&c.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",c.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:T.conditions.promo_code})]})]}),c.jsx("td",{className:"px-4 py-4",children:c.jsxs("div",{className:"flex items-center gap-1.5",children:[ire[T.type],c.jsx("span",{children:are[T.type]})]})}),c.jsx("td",{className:"px-4 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${rre[T.status]}`,children:nre[T.status]})}),c.jsx("td",{className:"px-4 py-4",children:T.priority}),c.jsx("td",{className:"px-4 py-4",children:X(T.created_at)}),c.jsx("td",{className:"px-4 py-4",children:T.usage_count}),c.jsx("td",{className:"px-4 py-4 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>se(T),className:"p-1.5 rounded-md hover:bg-gray-100",title:T.status==="active"?"Désactiver":"Activer",children:T.status==="active"?c.jsx(W$,{size:18}):c.jsx(h0,{size:18})}),c.jsx("button",{onClick:()=>V(T),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Voir les détails",children:c.jsx(h0,{size:18})}),c.jsx("button",{onClick:()=>L(T),className:"p-1.5 rounded-md hover:bg-gray-100",title:"Modifier",children:c.jsx(oA,{size:18})}),c.jsx("button",{onClick:()=>H(T),className:"p-1.5 rounded-md hover:bg-gray-100 text-red-500",title:"Supprimer",children:c.jsx(as,{size:18})})]})})]},T.id))})]})})]}),l&&c.jsx(YC,{isOpen:l,onClose:()=>d(!1),onSave:()=>{d(!1),K()}}),f&&j&&c.jsx(YC,{isOpen:f,onClose:()=>h(!1),onSave:()=>{h(!1),K()},promotion:j}),m&&j&&c.jsx(ere,{isOpen:m,onClose:()=>g(!1),promotion:j}),v&&j&&c.jsx(tre,{isOpen:v,onClose:()=>x(!1),onConfirm:M,title:"Supprimer la promotion",message:`Êtes-vous sûr de vouloir supprimer la promotion "${j.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",cancelLabel:"Annuler",confirmButtonClass:"bg-red-600 hover:bg-red-700"})]})},ore=({promotion:e,className:t=""})=>{const n=e.config,r=n.visuals||{};let i=r.badge_text||"",s=r.description||e.description||"";i||(n.discount_type==="percentage"?(i=`-${n.discount_value}%`,s=s||`${n.discount_value}% de descuento`):n.discount_type==="fixed_amount"?(i=`-$${n.discount_value.toLocaleString()}`,s=s||`$${n.discount_value.toLocaleString()} de descuento`):n.buy_quantity&&n.get_quantity?(i=`${n.buy_quantity}x${n.get_quantity}`,s=s||`Compra ${n.buy_quantity}, lleva ${n.get_quantity}`):n.applies_to==="shipping"?(i="ENVÍO GRATIS",s=s||"Envío gratis en este producto"):(i=e.name||"PROMO",s=s||e.name));const l=r.badge_bg_color||"#E63946",d=r.badge_bg_image,f=d?"#000000":yR(l);return c.jsx("div",{className:`px-2 py-0.5 rounded-full font-bold text-xs shadow-md ${t}`,style:{backgroundColor:d?"transparent":l,backgroundImage:d?`url(${d})`:"none",backgroundSize:"cover",backgroundPosition:"center",color:f,textShadow:d?"0 1px 3px rgba(0,0,0,0.8)":"none"},title:s,children:i})},lre=e=>{const[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,l]=b.useState(null);b.useEffect(()=>{if(!e){n([]),i(!1);return}(async()=>{try{i(!0);const g=(await pR().catch(v=>(console.error("[useProductPromotions] Error fetching active promotions from API:",v),[]))).filter(v=>{if(!yz(v)||!bz(v))return!1;const x=v.config||{},j=Array.isArray(v.conditions)?v.conditions:[];return!x.product_ids&&!x.category_ids&&j.length===0?!1:x.product_ids&&Array.isArray(x.product_ids)&&x.product_ids.length>0&&x.product_ids.includes(e.id)||x.category_ids&&Array.isArray(x.category_ids)&&x.category_ids.length>0&&x.category_ids.includes(e.categoria_id)?!0:j.length>0?j.some(S=>S.type==="specific_product"&&Array.isArray(S.value)?S.value.includes(e.id):S.type==="specific_category"&&Array.isArray(S.value)?S.value.includes(e.categoria_id):!1):!1}).sort((v,x)=>(x.priority||0)-(v.priority||0));n(g)}catch(h){console.error("[useProductPromotions] Error during promotion processing:",h),l(h instanceof Error?h:new Error("Une erreur est survenue")),n([])}finally{i(!1)}})()},[e]);const d=t.length>0?t[0]:null;return{promotions:t,bestPromotion:d,loading:r,error:s}},cre=({product:e,onClick:t})=>{const{promotions:n,loading:r}=lre(e);return c.jsxs("div",{onClick:()=>e.estado==="disponible"&&t(),className:`relative border rounded-2xl p-6 flex flex-col items-center text-center transition-shadow bg-white/90 shadow-md ${e.estado==="disponible"?"cursor-pointer hover:shadow-xl":"opacity-50"}`,children:[!r&&n.length>0&&e.estado==="disponible"&&c.jsx("div",{className:"absolute top-2 right-2 flex flex-wrap gap-1 max-w-[calc(100%-1rem)] justify-end z-10",children:n.map((i,s)=>c.jsx(ore,{promotion:i},i.id||s))}),c.jsx("img",{src:e.image,alt:e.nom_produit,className:"w-36 h-36 md:w-40 md:h-40 object-cover rounded-xl mb-4"}),c.jsx("p",{className:"font-semibold flex-grow text-black leading-snug text-[clamp(1.05rem,2.4vw,1.3rem)] break-words text-balance whitespace-normal [hyphens:auto]",children:e.nom_produit}),c.jsx("p",{className:"text-base text-black mt-2 px-1 max-h-20 overflow-hidden",children:e.description}),c.jsx("p",{className:"font-bold text-2xl text-black mt-3",children:ve(e.prix_vente)}),e.estado!=="disponible"&&c.jsx("span",{className:"text-xs text-red-500 font-bold mt-1",children:"Agotado"})]})},ure=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const f=await pR();t(f)}catch(f){console.error("Error loading promotions:",f)}finally{r(!1)}})()},[]);const i=e.filter(d=>d.type!=="promo_code");if(n||i.length===0)return null;const s=d=>{var f;return d.type==="free_shipping"?c.jsx(oz,{size:16}):d.type==="percentage"?c.jsx(Iu,{size:16}):(f=d.conditions)!=null&&f.time_range?c.jsx(ti,{size:16}):d.type==="buy_x_get_y"?c.jsx(N2,{size:16}):c.jsx(ph,{size:16})},l=d=>{const f=d.discount,h=d.conditions;let m=d.description||d.name;return h!=null&&h.min_order_amount&&(m+=` (Mínimo: ${h.min_order_amount.toLocaleString()})`),h!=null&&h.time_range&&(m+=` (${h.time_range.start_time} - ${h.time_range.end_time})`),d.type==="promo_code"&&(f!=null&&f.promo_code)&&(m+=` (Código: ${f.promo_code})`),m};return c.jsxs("div",{className:"mb-4 space-y-2",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center drop-shadow-md",children:[c.jsx(N2,{className:"mr-2",size:22}),"Promociones Activas"]}),c.jsx("div",{className:"space-y-2",children:i.map(d=>{var g,v,x,j;const f=((g=d.visuals)==null?void 0:g.badge_bg_color)||"#4CAF50",h=(v=d.visuals)==null?void 0:v.banner_image,m=(x=d.visuals)==null?void 0:x.banner_text;return h?c.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-md transition-transform hover:scale-[1.02]",children:[c.jsx("img",{src:h,alt:d.name,className:"w-full h-32 object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3",children:c.jsxs("div",{className:"text-white",children:[c.jsx("p",{className:"font-bold text-lg drop-shadow-md",children:d.name}),m&&c.jsx("p",{className:"text-sm drop-shadow-md",children:m})]})})]},d.id):c.jsxs("div",{className:"flex items-start p-2 rounded-lg shadow-sm border-l-4 transition-transform hover:scale-[1.01]",style:{borderLeftColor:f,background:`linear-gradient(to right, ${f}15, white)`},children:[c.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full mr-2 flex-shrink-0",style:{backgroundColor:f,color:((j=d.visuals)==null?void 0:j.badge_color)||"#FFFFFF"},children:s(d)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-bold text-gray-900 text-sm",children:d.name}),c.jsx("p",{className:"text-xs text-gray-600",children:l(d)})]})]},d.id)})})]})},dre=({isOpen:e,order:t,whatsappNumber:n="573238090562"})=>{var l;const r=wa();if(!e||!t)return null;const i=()=>{var A,R,D,$,G,K;const d=t.items.filter(B=>{var L;return!((L=B.nom_produit)!=null&&L.toLowerCase().includes("domicilio"))}),f=d.map(B=>`- ${B.quantite}x ${B.nom_produit} (${ve(B.prix_unitaire)})`).join(`
`),h=d.reduce((B,L)=>B+(L.quantite??0),0),m=t.subtotal??d.reduce((B,L)=>B+(L.quantite??0)*L.prix_unitaire,0),g=typeof t.date_creation=="number"?new Date(t.date_creation):void 0,v=g?new Intl.DateTimeFormat("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}).format(g):"No disponible",x=g?new Intl.DateTimeFormat("es-CO",{hour:"2-digit",minute:"2-digit"}).format(g):"No disponible",j=((A=t.clientInfo)==null?void 0:A.nom)??t.client_name??"No especificado",_=((R=t.clientInfo)==null?void 0:R.telephone)??t.client_phone??"No especificado",S=((D=t.clientInfo)==null?void 0:D.adresse)??t.client_address,N=t.total_discount??0,E=((($=t.applied_promotions)==null?void 0:$.length)??0)>0,C=t.payment_method==="transferencia"?"Transferencia":t.payment_method==="tarjeta"?"Tarjeta":"Efectivo",k=[];return k.push("¡Hola! Aquí están los detalles de mi pedido:"),k.push(`Pedido #${t.id.slice(-6)}`),k.push(`Fecha: ${v}`),k.push(`Hora: ${x}`),k.push(""),k.push(`Cliente: ${j}`),k.push(`Teléfono: ${_}`),S&&k.push(`Dirección: ${S}`),k.push(""),k.push(`Número de productos: ${h}`),f&&(k.push("Productos:"),k.push(f)),k.push(""),k.push(`Total antes de promociones: ${ve(m)}`),t.shipping_cost!==void 0&&(t.shipping_cost>0?k.push(`Costo de envío: ${ve(t.shipping_cost)}`):(G=t.applied_promotions)!=null&&G.some(B=>B.type==="FREE_SHIPPING")&&k.push("Costo de envío: Gratis")),N>0&&k.push(`Descuento total: -${ve(N)}`),E?(k.push("Promociones aplicadas:"),(K=t.applied_promotions)==null||K.forEach(B=>{k.push(`- ${B.name}: -${ve(B.discount_amount)}`)})):k.push("Promociones aplicadas: Ninguna"),k.push(`Total a pagar: ${ve(t.total)}`),k.push(`Método de pago: ${C}`),t.receipt_url&&k.push(`Comprobante: ${t.receipt_url}`),encodeURIComponent(k.join(`
`))},s=()=>{const d=i(),f=`https://wa.me/${n}?text=${d}`;window.open(f,"_blank"),r("/",{replace:!0}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Fs,{size:64,className:"mb-3"}),c.jsx("h2",{className:"text-2xl font-bold text-center",children:"¡Pedido Confirmado!"}),c.jsxs("p",{className:"text-green-100 mt-2",children:["Pedido #",t.id.slice(-6)]})]})}),c.jsxs("div",{className:"p-6 text-center",children:[c.jsxs("div",{className:"p-6 text-left",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Détails de la commande:"}),c.jsxs("div",{className:"space-y-2",children:[t.items.filter(d=>{var f;return!((f=d.nom_produit)!=null&&f.toLowerCase().includes("domicilio"))}).map((d,f)=>c.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[c.jsxs("span",{children:[d.quantite,"x ",d.nom_produit]}),c.jsx("span",{children:ve(d.quantite*d.prix_unitaire)})]},f)),t.subtotal!==void 0&&c.jsxs("div",{className:"flex justify-between items-center text-gray-700 border-t pt-2 mt-2",children:[c.jsx("span",{children:"Sous-total:"}),c.jsx("span",{children:ve(t.subtotal)})]}),t.total_discount&&t.total_discount>0&&c.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[c.jsx("span",{children:"Réduction totale:"}),c.jsxs("span",{children:["- ",ve(t.total_discount)]})]}),t.applied_promotions&&t.applied_promotions.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Promotions appliquées:"}),t.applied_promotions.map((d,f)=>c.jsxs("div",{className:"flex justify-between items-center text-xs text-green-600 ml-2",children:[c.jsxs("span",{children:["- ",d.name]}),c.jsxs("span",{children:["- ",ve(d.discount_amount)]})]},f))]}),t.shipping_cost!==void 0&&t.shipping_cost>0&&c.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[c.jsx("span",{children:"Frais de livraison:"}),c.jsx("span",{children:ve(t.shipping_cost)})]}),t.shipping_cost===0&&((l=t.applied_promotions)==null?void 0:l.some(d=>d.type==="FREE_SHIPPING"))&&c.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[c.jsx("span",{children:"Livraison gratuite:"}),c.jsx("span",{children:ve(0)})]}),c.jsxs("div",{className:"flex justify-between items-center text-gray-900 font-bold text-xl border-t pt-2 mt-2",children:[c.jsx("span",{children:"Total:"}),c.jsx("span",{children:ve(t.total)})]})]})]}),c.jsxs("button",{onClick:s,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-lg",children:[c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Enviar por WhatsApp"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Haz clic para enviar tu pedido por WhatsApp y ver el seguimiento"})]})]})})},Wf=8e3,bR="Domicilio",VC=e=>e.nom_produit===bR,WC=e=>(e??"").trim(),fre=(e,t)=>{const n=[...e??[]].sort(),r=[...t??[]].sort();return n.length!==r.length?!1:n.every((i,s)=>i===r[s])},hre=({isOpen:e,onClose:t,selectedProduct:n,onAddToCart:r})=>{var x;const[i,s]=b.useState(1),[l,d]=b.useState(""),[f,h]=b.useState([]);if(b.useEffect(()=>{e&&(s((n==null?void 0:n.quantite)||1),d((n==null?void 0:n.commentaire)||""),h((n==null?void 0:n.excluded_ingredients)||[]))},[e,n]),!e||!n)return null;const m=()=>{const j=n.product;r({id:`oi${Date.now()}`,produitRef:j.id,nom_produit:j.nom_produit,prix_unitaire:j.prix_vente,quantite:i,commentaire:l.trim()||void 0,excluded_ingredients:f.length>0?f:void 0})},g=j=>{f.includes(j)?h(f.filter(_=>_!==j)):h([...f,j])},v=((x=n.product.ingredients)==null?void 0:x.split(",").map(j=>j.trim()).filter(Boolean))||[];return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h2",{className:"text-[clamp(1.1rem,2.3vw,1.5rem)] font-bold leading-snug text-gray-800 break-words text-balance whitespace-normal [hyphens:auto]",children:n.product.nom_produit}),c.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("img",{src:n.product.image,alt:n.product.nom_produit,className:"w-full h-48 object-cover rounded-lg mb-4"}),c.jsx("p",{className:"text-gray-600 mb-4",children:n.product.description}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("p",{className:"font-bold text-gray-800 mb-2",children:["Precio: ",ve(n.product.prix_vente)]}),c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("button",{onClick:()=>s(Math.max(1,i-1)),className:"bg-gray-200 text-gray-700 rounded-l-lg px-3 py-1",children:"-"}),c.jsx("span",{className:"bg-gray-100 px-4 py-1",children:i}),c.jsx("button",{onClick:()=>s(i+1),className:"bg-gray-200 text-gray-700 rounded-r-lg px-3 py-1",children:"+"})]})]}),v.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"font-bold text-gray-800 mb-2",children:"Ingredientes:"}),c.jsx("div",{className:"space-y-2",children:v.map((j,_)=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`ingredient-${_}`,checked:!f.includes(j),onChange:()=>g(j),className:"mr-2"}),c.jsx("label",{htmlFor:`ingredient-${_}`,className:"text-gray-700",children:j})]},_))})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"comment",className:"block font-bold text-gray-800 mb-2",children:"Comentarios adicionales:"}),c.jsx("textarea",{id:"comment",value:l,onChange:j=>d(j.target.value),className:"w-full border border-gray-300 rounded-lg p-2 text-gray-700",rows:3,placeholder:"Instrucciones especiales, alergias, etc."})]}),c.jsxs("button",{onClick:m,className:"w-full rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 py-3 px-4 font-bold text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400/70 focus:ring-offset-2",children:["Agregar al carrito - ",ve(n.product.prix_vente*i)]})]})})})},mre=({onOrderSubmitted:e})=>{const t=wa(),{content:n}=Uu(),r=n??no,i=b.useMemo(()=>zb(r.hero.style,r.hero.backgroundImage),[r.hero.backgroundImage,r.hero.style]),[s,l]=b.useState([]),[d,f]=b.useState([]),[h,m]=b.useState(!0),[g,v]=b.useState(null),[x,j]=b.useState("all"),[_,S]=b.useState([]),[N,E]=b.useState(!1),[C,k]=b.useState(null),[A,R]=b.useState(""),[D,$]=b.useState(""),[G,K]=b.useState(""),[B,L]=b.useState("transferencia"),[V,H]=b.useState(null),[se,M]=b.useState(!1),[z,q]=b.useState(!1),[J,X]=b.useState(null),[T,I]=b.useState([]),[U,te]=b.useState(""),[re,ce]=b.useState(""),[he,Ne]=b.useState(""),[de,ge]=b.useState(0),[ie,Q]=b.useState(!1),[Ce,Re]=b.useState(!1),[ut,we]=b.useState(()=>new Date);b.useEffect(()=>{if(typeof window>"u")return;const pe=()=>we(new Date);pe();const Le=window.setInterval(pe,6e4);return()=>window.clearInterval(Le)},[]);const be=r.onlineOrdering.schedule,ze=b.useMemo(()=>qb(be,"fr-FR"),[be.startTime,be.endTime]),Et=sm(be,ut),et=DA(be,ut),dt=b.useMemo(()=>{if(et===null)return null;if(et<1)return"Réouverture imminente";if(et<60)return`Réouverture dans environ ${et} min`;const pe=Math.floor(et/60),Le=et%60;return Le===0?`Réouverture dans environ ${pe} h`:`Réouverture dans environ ${pe} h ${Le.toString().padStart(2,"0")} min`},[et]),[Vt,Fr]=b.useState(8e4),[Xe,jn]=b.useState("pedir_en_linea");b.useEffect(()=>{B==="efectivo"&&L("transferencia")},[B]),b.useEffect(()=>{(async()=>{try{const[Le,yt]=await Promise.all([Se.getProducts(),Se.getCategories()]);l(Le),f(yt);try{const ye=localStorage.getItem("customer-order-history");if(ye){const ke=JSON.parse(ye);I(ke.slice(0,3))}}catch(ye){console.error("Error fetching order history:",ye)}}catch(Le){console.error("Error fetching data:",Le),v("Error al cargar los datos. Por favor, intenta de nuevo más tarde.")}finally{m(!1)}})()},[]);const er=b.useMemo(()=>x==="all"?s:s.filter(pe=>pe.categoria_id===x),[s,x]),[sn,me]=b.useState({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]});b.useEffect(()=>{(async()=>{var go;const Le=_.reduce((Sa,mi)=>Sa+mi.quantite*mi.prix_unitaire,0);if(_.length===0){me({subtotal:0,total:0,automaticPromotionsDiscount:0,promoCodeDiscount:0,deliveryFee:0,appliedPromotions:[]}),Re(!1);return}const yt={id:"temp",items:_,subtotal:Le,total:Le,total_discount:0,applied_promotions:[],promo_code:re||void 0,client_name:A,client_phone:D,client_address:G,shipping_cost:Wf,order_type:Xe,payment_method:B,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},ye=await Ine(yt),ke=ye.total_discount||0,jt=((go=ye.applied_promotions.find(Sa=>{var mi;return((mi=Sa.config)==null?void 0:mi.promo_code)===re}))==null?void 0:go.discount_amount)||0,qn=ke-jt;let ja=Xe==="pedir_en_linea"?Wf:0;const tc=ye.applied_promotions.some(Sa=>Sa.type==="FREE_SHIPPING");tc&&(ja=0),Re(tc);const sd=ye.total+ja;me({subtotal:Le,total:sd,automaticPromotionsDiscount:qn,promoCodeDiscount:jt,deliveryFee:ja,appliedPromotions:ye.applied_promotions})})()},[_,re,Xe,A,D,G,B]);const{total:_e,subtotal:De,promoCodeDiscount:rt,deliveryFee:Qe}=sn,ft=pe=>{const Le=_.find(yt=>yt.produitRef===pe.id);k({product:pe,quantite:1,commentaire:Le==null?void 0:Le.commentaire,excluded_ingredients:Le==null?void 0:Le.excluded_ingredients}),E(!0)},Ue=pe=>{S(Le=>{const yt=Le.findIndex(ye=>ye.produitRef===pe.produitRef&&WC(ye.commentaire)===WC(pe.commentaire)&&fre(ye.excluded_ingredients,pe.excluded_ingredients));if(yt>-1){const ye=[...Le],ke=ye[yt];return ye[yt]={...ke,quantite:ke.quantite+pe.quantite,commentaire:pe.commentaire??ke.commentaire,excluded_ingredients:pe.excluded_ingredients??ke.excluded_ingredients},ye}return[...Le,pe]}),E(!1)},at=pe=>{S(Le=>Le.filter(yt=>yt.id!==pe))},ht=(pe,Le)=>{S(yt=>yt.flatMap(ye=>{if(ye.id!==pe)return ye;const ke=ye.quantite+Le;return ke<=0?[]:{...ye,quantite:ke}}))},kt=pe=>{const Le=pe.items.filter(yt=>!VC(yt));S(Le)},tr=async()=>{const pe=U.trim().toUpperCase();if(pe){if(re&&re===pe){Ne("Este código ya está aplicado.");return}te(pe),Ne(""),Q(!0);try{if(!await vR(pe)){Ne("Código promocional inválido o expirado.");return}ce(pe)}catch(Le){console.error("Error validating promo code:",Le),Ne("No se pudo validar el código. Intenta nuevamente.")}finally{Q(!1)}}},hi=()=>{ce(""),te(""),Ne("")},Hr=async pe=>{pe.preventDefault(),M(!0);let Le="";if(B==="transferencia"&&V)try{Le=await Hk(V)}catch(ye){console.error("Error uploading receipt:",ye),v("Error al subir el comprobante de pago."),M(!1);return}const yt={id:`ord_${Date.now()}`,items:_,clientInfo:{nom:A,telephone:D,adresse:G},shipping_cost:Qe,order_type:Xe,payment_method:B,receipt_url:Le,subtotal:sn.subtotal,total:sn.total,total_discount:sn.automaticPromotionsDiscount+sn.promoCodeDiscount,promo_code:re||void 0,applied_promotions:sn.appliedPromotions,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("finalOrder.total avant createOrder:",yt.total),console.log("orderTotals:",sn);try{const ye=await Se.createOrder(yt);console.log("submitted.total après createOrder:",ye.total),X(ye),q(!0),yk(ye.id,Date.now()+vk),e==null||e(ye);try{const ke=localStorage.getItem("customer-order-history"),jt=ke?JSON.parse(ke):[],qn=[ye,...jt].slice(0,10);localStorage.setItem("customer-order-history",JSON.stringify(qn)),I(qn.slice(0,3))}catch(ke){console.error("Error updating order history:",ke)}}catch(ye){console.error("Error submitting order:",ye),v("Error al enviar el pedido. Por favor, intenta de nuevo.")}finally{M(!1)}},In=A.trim()===""||D.trim()===""||Xe==="pedir_en_linea"&&G.trim()===""||B==="transferencia"&&!V,xr=se||_.length===0||In,Mt=!se&&_.length>0&&In;return Et?c.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",style:i,children:[c.jsxs("div",{className:"flex-1 p-4 lg:p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 drop-shadow-md",children:"Realizar Pedido"}),c.jsxs("button",{type:"button",onClick:()=>t("/"),className:"inline-flex items-center text-sm font-semibold text-brand-primary hover:text-brand-primary/80 transition-colors",children:[c.jsx(Wk,{size:16,className:"mr-1"}),"Volver"]})]}),c.jsx(ure,{}),c.jsxs("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-2",children:[c.jsx("button",{onClick:()=>j("all"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${x==="all"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:"Todos"}),d.map(pe=>c.jsx("button",{onClick:()=>j(pe.id),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${x===pe.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg scale-105 border-2 border-orange-600":"bg-white text-gray-800 shadow-md hover:bg-gray-100 border-2 border-gray-300"}`,children:pe.nom},pe.id))]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:er.map(pe=>pe&&c.jsx(cre,{product:pe,onClick:()=>ft(pe)},pe.id))})]}),c.jsxs("div",{className:"lg:w-96 flex flex-col",children:[c.jsxs("div",{className:"bg-white p-4 lg:p-6 shadow-lg flex flex-col",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 drop-shadow-md mb-4",children:"Mon panier"}),T.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"Tus últimos pedidos"}),c.jsx("div",{className:"space-y-2",children:T.map(pe=>{let Le="Fecha no disponible";const yt=pe.created_at||pe.date_commande||pe.date_servido||pe.timestamp;if(yt)try{const ke=new Date(yt);isNaN(ke.getTime())||(Le=ke.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}))}catch(ke){console.error("Error parsing date:",ke)}Le==="Fecha no disponible"&&(Le=new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}));const ye=pe.items?pe.items.filter(ke=>!VC(ke)).reduce((ke,jt)=>ke+jt.quantite,0):0;return c.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 hover:border-yellow-500 transition-all",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:["Pedido del ",Le]}),c.jsxs("p",{className:"text-xs text-gray-600",children:[ye," article",ye>1?"s":""," • ",ve(pe.total)]})]}),c.jsx("button",{onClick:()=>kt(pe),className:"ml-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-3 py-1 rounded text-xs whitespace-nowrap transition-all",children:"Pedir de nuevo"})]},pe.id)})})]}),_.length===0?c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[c.jsx(iA,{size:48,className:"mb-3"}),c.jsx("p",{children:"Tu carrito está vacío."})]}):c.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:_.map(pe=>c.jsx("div",{className:"group relative mb-3 rounded-lg bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-4 text-white shadow-lg transition-transform hover:-translate-y-0.5",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("p",{className:"font-bold text-[clamp(1rem,2vw,1.3rem)] leading-snug text-white break-words text-balance whitespace-normal [hyphens:auto]",children:(pe==null?void 0:pe.nom_produit)||"Article inconnu"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-white/90",children:[c.jsxs("span",{className:"font-semibold",children:["Precio unitario: ",ve(pe.prix_unitaire)]}),c.jsxs("span",{className:"font-semibold",children:["Total: ",ve(pe.prix_unitaire*pe.quantite)]})]}),pe.commentaire&&c.jsxs("p",{className:"text-sm text-white/90 italic bg-white/15 border-l-2 border-white/60 p-2 rounded",children:["💬 ",pe.commentaire]}),pe.excluded_ingredients&&pe.excluded_ingredients.length>0&&c.jsxs("p",{className:"text-sm text-white font-semibold bg-black/20 border-l-2 border-white/60 p-2 rounded",children:["🚫 Sin: ",pe.excluded_ingredients.join(", ")]})]}),c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("button",{onClick:()=>at(pe.id),className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/15 text-white transition hover:bg-white/25","aria-label":"Eliminar artículo",children:c.jsx(as,{size:20})}),c.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-white/15 px-2 py-1 text-xs font-semibold",children:[c.jsx("button",{onClick:()=>ht(pe.id,-1),className:"rounded-full p-1 transition hover:bg-white/20","aria-label":"Disminuir cantidad",children:c.jsx(aA,{size:14})}),c.jsx("span",{className:"min-w-[1.5rem] text-center text-sm",children:pe.quantite}),c.jsx("button",{onClick:()=>ht(pe.id,1),className:"rounded-full p-1 transition hover:bg-white/20","aria-label":"Aumentar cantidad",children:c.jsx(Lu,{size:14})})]})]})]})},pe.id))}),_.length>0&&Xe==="pedir_en_linea"&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 last:border-b-0",children:[c.jsx("p",{className:"font-medium text-gray-800",children:bR}),Ce?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("p",{className:"text-sm text-gray-400 line-through",children:ve(Wf)}),c.jsx("p",{className:"text-sm font-bold text-green-600",children:"GRATIS"})]}):c.jsx("p",{className:"text-sm text-gray-600",children:ve(Wf)})]}),c.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"promoCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Promoción:"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",id:"promoCode",value:U,onChange:pe=>te(pe.target.value.toUpperCase()),placeholder:"Ingresa tu código",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2 uppercase"}),c.jsx("button",{type:"button",onClick:tr,disabled:ie||!U.trim()||re===U,"aria-busy":ie,className:"rounded-md bg-gradient-to-r from-orange-500 via-orange-600 to-red-600 px-4 py-2 font-bold text-white shadow-sm transition-all duration-300 hover:from-orange-600 hover:via-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-400 disabled:cursor-not-allowed disabled:opacity-50",children:ie?"Validando…":"Confirmar"})]}),he&&c.jsx("p",{className:"mt-2 text-sm text-red-600",children:he}),re&&c.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-green-700 font-medium",children:['✓ Código "',re,'" aplicado']}),c.jsx("button",{type:"button",onClick:hi,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Eliminar"})]})]}),sn.appliedPromotions&&sn.appliedPromotions.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-sm font-bold text-green-800 mb-2",children:"🎉 Promociones aplicadas:"}),sn.appliedPromotions.map((pe,Le)=>{const yt=`- ${ve(pe.discount_amount)}`;return Xe==="a_emporter"?c.jsxs("div",{className:"mb-2 text-sm text-green-700",children:[c.jsx("p",{className:"font-semibold",children:pe.name}),c.jsx("p",{className:"font-semibold",children:yt})]},Le):c.jsxs("div",{className:"flex justify-between items-center mb-1 text-sm",children:[c.jsx("span",{className:"text-green-700",children:pe.name}),c.jsx("span",{className:"font-semibold text-green-700",children:yt})]},Le)})]}),de>0&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("p",{className:"text-sm text-green-600",children:"Descuento por código promocional:"}),c.jsxs("p",{className:"text-sm font-bold text-green-600",children:["- ",ve(de)]})]}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("p",{className:"text-lg font-bold text-gray-800",children:"Total:"}),c.jsx("p",{className:"text-xl font-bold text-brand-primary",children:ve(_e)})]}),c.jsxs("form",{onSubmit:Hr,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de pedido:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Xe==="pedir_en_linea"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"orderType",value:"pedir_en_linea",checked:Xe==="pedir_en_linea",onChange:()=>jn("pedir_en_linea"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"🚚 Domicilio (con entrega)"})]}),c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${Xe==="a_emporter"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"orderType",value:"a_emporter",checked:Xe==="a_emporter",onChange:()=>jn("a_emporter"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"🏪 Para llevar (recoger en tienda)"})]})]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:["Nombre: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"clientName",value:A,onChange:pe=>R(pe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientPhone",className:"block text-sm font-medium text-gray-700",children:["Teléfono: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",id:"clientPhone",value:D,onChange:pe=>$(pe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),Xe==="pedir_en_linea"&&c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"clientAddress",className:"block text-sm font-medium text-gray-700",children:["Dirección: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"clientAddress",value:G,onChange:pe=>K(pe.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:3,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de pago:"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition ${B==="transferencia"?"border-brand-primary bg-brand-primary/5":"border-gray-300 hover:border-brand-primary/50"}`,children:[c.jsx("input",{type:"radio",name:"paymentMethod",value:"transferencia",checked:B==="transferencia",onChange:()=>L("transferencia"),className:"form-radio text-brand-primary"}),c.jsx("span",{className:"ml-3 font-medium",children:"💰 Transferencia Bancaria"})]}),c.jsxs("label",{className:"flex items-center rounded-lg border-2 border-gray-200 bg-gray-100 p-3 opacity-70 cursor-not-allowed","aria-disabled":"true",children:[c.jsx("input",{type:"radio",name:"paymentMethod",value:"efectivo",checked:B==="efectivo",onChange:()=>{},disabled:!0,className:"form-radio text-gray-400"}),c.jsxs("span",{className:"ml-3 font-medium text-gray-500",children:[c.jsx("span",{children:"💵 Efectivo"}),c.jsx("span",{className:"block text-xs font-normal uppercase tracking-wide text-gray-500/80",children:"No disponible por el momento"})]})]})]})]}),B==="transferencia"&&c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:["Comprobante de pago: ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"file",id:"paymentProof",onChange:pe=>H(pe.target.files?pe.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,application/pdf",required:B==="transferencia"})]}),c.jsx("button",{type:"submit",disabled:xr,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:se?"Enviando pedido...":"Confirmar Pedido"}),Mt&&c.jsxs("p",{className:"mt-2 text-sm text-red-600",children:["Faltan datos obligatorios. Completa los campos marcados con ",c.jsx("span",{className:"font-semibold",children:"*"}),"."]})]})]})]}),C&&c.jsx(hre,{isOpen:N,onClose:()=>E(!1),selectedProduct:C,onAddToCart:Ue}),J&&c.jsx(dre,{isOpen:z,order:J,onClose:()=>{q(!1),S([]),R(""),$(""),K(""),L("transferencia"),H(null),ce(""),ge(0)}})]})]}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-600 via-red-600 to-rose-600",children:c.jsx("div",{className:"mx-auto flex min-h-screen max-w-3xl flex-col items-center justify-center px-6 py-16 text-center text-white",children:c.jsxs("div",{className:"w-full rounded-3xl border border-white/20 bg-black/30 p-10 shadow-2xl backdrop-blur-xl",children:[c.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white/15 text-white",children:c.jsx(ti,{size:32})}),c.jsx("h1",{className:"mt-6 text-3xl font-bold sm:text-4xl",children:r.onlineOrdering.closedTitle}),c.jsx("p",{className:"mt-3 text-lg text-white/85",children:r.onlineOrdering.closedSubtitle||`Revenez entre ${ze} pour passer commande.`}),c.jsxs("p",{className:"mt-6 text-sm font-semibold uppercase tracking-[0.3em] text-white/70",children:["Horaires : ",ze]}),dt&&c.jsx("p",{className:"mt-2 text-sm font-medium text-white/80",children:dt}),c.jsx("div",{className:"mt-8 flex flex-col gap-3 sm:flex-row sm:justify-center",children:c.jsx("button",{type:"button",onClick:()=>t("/"),className:"inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 px-6 py-3 text-sm font-semibold uppercase tracking-[0.25em] text-white transition hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-red-600",children:"Retour à l'accueil"})})]})})})},pre=()=>c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center",children:[c.jsx("h1",{className:"text-9xl font-extrabold text-brand-primary tracking-widest",children:"404"}),c.jsx("div",{className:"bg-brand-accent px-2 text-sm rounded rotate-12 absolute",children:"Page Non Trouvée"}),c.jsx("p",{className:"text-2xl md:text-3xl font-light text-gray-700 mt-4",children:"Désolé, la page que vous recherchez n'existe pas."}),c.jsx(_b,{to:"/",className:"mt-8 px-8 py-3 bg-brand-primary text-brand-secondary font-semibold rounded-lg hover:bg-yellow-400 transition",children:"Retour à l'accueil"})]}),gre=new Intl.NumberFormat("es-CO",{maximumFractionDigits:2}),vre=new Intl.NumberFormat("es-CO",{maximumFractionDigits:0}),XC=e=>gre.format(Number.isFinite(e)?e:0),Ts=e=>vre.format(Number.isFinite(e)?Math.round(e):0),ml={all:"Toutes",efectivo:"Efectivo",transferencia:"Transferencia",tarjeta:"Tarjeta",unknown:"Non spécifié"},QC={sur_place:"En el local",a_emporter:"Para llevar",pedir_en_linea:"Pedido en línea"},yre=()=>{const[e,t]=b.useState([]),[n,r]=b.useState([]),[i,s]=b.useState([]),[l,d]=b.useState([]),[f,h]=b.useState(!0),[m,g]=b.useState(null),[v,x]=b.useState(null),[j,_]=b.useState({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),S=b.useCallback(async()=>{h(!0);try{const[M,z,q,J]=await Promise.all([Se.getFinalizedOrders(),Se.getSalesHistory(),Se.getProducts(),Se.getCategories()]);t([...M].sort((X,T)=>T.date_creation-X.date_creation)),r(z),s(q),d(J),g(null)}catch(M){console.error("Failed to fetch sales summary",M),g("Impossible de charger les données de ventes. Veuillez réessayer.")}finally{h(!1)}},[]);b.useEffect(()=>{S()},[S]),b.useEffect(()=>{const M=Se.notifications.subscribe("orders_updated",()=>{S()});return()=>{M()}},[S]);const N=b.useMemo(()=>new Map(e.map(M=>[M.id,M])),[e]),E=b.useMemo(()=>{if(!j.startDate)return null;const M=new Date(j.startDate);return M.setHours(0,0,0,0),M.getTime()},[j.startDate]),C=b.useMemo(()=>{if(!j.endDate)return null;const M=new Date(j.endDate);return M.setHours(23,59,59,999),M.getTime()},[j.endDate]),k=b.useMemo(()=>n.filter(M=>{if(E!==null&&M.saleDate<E||C!==null&&M.saleDate>C||j.paymentMethod!=="all"&&M.paymentMethod!==j.paymentMethod||j.categoryId&&M.categoryId!==j.categoryId||j.productId&&M.productId!==j.productId)return!1;const z=N.get(M.orderId);return!(!z||j.orderType!=="all"&&z.type!==j.orderType||j.paymentMethod!=="all"&&z.payment_method&&z.payment_method!==j.paymentMethod)}),[n,E,C,j.paymentMethod,j.categoryId,j.productId,j.orderType,N]),A=b.useMemo(()=>{const M=new Map;return k.forEach(z=>{const q=M.get(z.orderId),J=z.totalPrice??0,X=z.profit??0,T=z.quantity??0;if(!q){M.set(z.orderId,{revenue:J,profit:X,quantity:T,paymentMethod:z.paymentMethod,items:[{productId:z.productId,productName:z.productName,categoryName:z.categoryName,quantity:z.quantity,revenue:J,profit:X}]});return}q.revenue+=J,q.profit+=X,q.quantity+=T,!q.paymentMethod&&z.paymentMethod&&(q.paymentMethod=z.paymentMethod);const I=q.items.findIndex(U=>U.productId===z.productId);I>-1?q.items[I]={...q.items[I],quantity:q.items[I].quantity+z.quantity,revenue:q.items[I].revenue+J,profit:q.items[I].profit+X}:q.items.push({productId:z.productId,productName:z.productName,categoryName:z.categoryName,quantity:z.quantity,revenue:J,profit:X})}),M.forEach(z=>{z.items.sort((q,J)=>J.revenue-q.revenue)}),M},[k]),R=b.useMemo(()=>e.filter(M=>A.has(M.id)).sort((M,z)=>z.date_creation-M.date_creation),[e,A]),D=b.useMemo(()=>{const M=k.reduce((T,I)=>T+(I.totalPrice??0),0),z=k.reduce((T,I)=>T+(I.totalCost??0),0),q=k.reduce((T,I)=>T+(I.profit??0),0),J=k.reduce((T,I)=>T+(I.quantity??0),0),X=R.length;return{totalRevenue:M,totalCost:z,totalProfit:q,totalQuantity:J,orderCount:X,averageOrderValue:X>0?M/X:0,averageItemsPerOrder:X>0?J/X:0,profitMargin:M>0?q/M*100:0}},[k,R]),$=b.useMemo(()=>{const M=new Map;return k.forEach(z=>{const q=z.productId,J=M.get(q);if(!J){M.set(q,{productId:z.productId,productName:z.productName,categoryName:z.categoryName,quantity:z.quantity,revenue:z.totalPrice??0,profit:z.profit??0});return}J.quantity+=z.quantity,J.revenue+=z.totalPrice??0,J.profit+=z.profit??0}),Array.from(M.values()).sort((z,q)=>q.revenue-z.revenue)},[k]),G=b.useMemo(()=>{const M=new Map;return k.forEach(z=>{const q=z.categoryId||"unknown",J=M.get(q);if(!J){M.set(q,{categoryName:z.categoryName||"Sin categoría",quantity:z.quantity,revenue:z.totalPrice??0,profit:z.profit??0});return}J.quantity+=z.quantity,J.revenue+=z.totalPrice??0,J.profit+=z.profit??0}),Array.from(M.values()).sort((z,q)=>q.revenue-z.revenue)},[k]),K=b.useMemo(()=>{const M=new Map;return k.forEach(z=>{const q=z.paymentMethod??"unknown",J=M.get(q);if(!J){M.set(q,{revenue:z.totalPrice??0,profit:z.profit??0,orders:new Set([z.orderId])});return}J.revenue+=z.totalPrice??0,J.profit+=z.profit??0,J.orders.add(z.orderId)}),Array.from(M.entries()).map(([z,q])=>({method:z,label:ml[z]??ml.unknown,revenue:q.revenue,profit:q.profit,orders:q.orders.size})).sort((z,q)=>q.revenue-z.revenue)},[k]),B=b.useMemo(()=>[...l].sort((M,z)=>M.nom.localeCompare(z.nom,"es")),[l]),L=b.useMemo(()=>{const{categoryId:M}=j;return[...M?i.filter(q=>q.categoria_id===M):i].sort((q,J)=>q.nom_produit.localeCompare(J.nom_produit,"es"))},[i,j.categoryId]),V=M=>{const{name:z,value:q}=M.target;_(J=>{if(z==="categoryId"){const X={...J,categoryId:q,productId:J.productId};if(q&&J.productId){const T=i.find(I=>I.id===J.productId);(!T||T.categoria_id!==q)&&(X.productId="")}return X}if(z==="productId"){if(!q)return{...J,productId:""};const X=i.find(T=>T.id===q);return{...J,productId:q,categoryId:X?X.categoria_id:J.categoryId}}return z==="paymentMethod"&&(q==="all"||q==="efectivo"||q==="transferencia"||q==="tarjeta")?{...J,paymentMethod:q}:z==="orderType"&&(q==="all"||q==="sur_place"||q==="a_emporter"||q==="pedir_en_linea")?{...J,orderType:q}:{...J,[z]:q}}),x(null)},H=()=>{_({startDate:"",endDate:"",paymentMethod:"all",orderType:"all",categoryId:"",productId:""}),x(null)},se=()=>{if(k.length===0)return;const M=["Fecha","Pedido","Tipo","Mesa/Cliente","Producto","Categoría","Cantidad","Precio unitario","Ingresos","Costo","Beneficio","Método de pago"],z=k.map(I=>{const U=N.get(I.orderId),te=U?QC[U.type]:"N/A",re=U?U.type==="sur_place"?U.table_nom||"N/A":U.client_name||U.client_address||"N/A":"N/A";return[new Date(I.saleDate).toLocaleString("es-CO"),I.orderId,te,`"${re}"`,`"${I.productName}"`,I.categoryName||"N/A",I.quantity,ve(I.unitPrice??0),ve(I.totalPrice??0),ve(I.totalCost??0),ve(I.profit??0),ml[I.paymentMethod??"unknown"]??ml.unknown].join(",")}),q=[M.join(","),...z].join(`
`),J=new Blob([`\uFEFF${q}`],{type:"text/csv;charset=utf-8;"}),X=URL.createObjectURL(J),T=document.createElement("a");T.href=X,T.download=`resume_ventes_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(X)};return f?c.jsx("div",{className:"text-gray-800",children:"Chargement du résumé des ventes..."}):c.jsxs("div",{className:"space-y-6",children:[m&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:m}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Filtres d'analyse"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:H,className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100",children:[c.jsx(Z$,{size:16}),"Réinitialiser"]}),c.jsxs("button",{type:"button",onClick:se,className:"inline-flex items-center gap-2 rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-white transition hover:bg-green-700",children:[c.jsx(H$,{size:16}),"Export CSV"]})]})]}),c.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de début"}),c.jsx("input",{type:"date",name:"startDate",value:j.startDate,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date de fin"}),c.jsx("input",{type:"date",name:"endDate",value:j.endDate,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type de commande"}),c.jsxs("select",{name:"orderType",value:j.orderType,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"all",children:"Tous les types"}),c.jsx("option",{value:"sur_place",children:"En el local"}),c.jsx("option",{value:"a_emporter",children:"Para llevar"}),c.jsx("option",{value:"pedir_en_linea",children:"Pedido en línea"})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Méthode de paiement"}),c.jsxs("select",{name:"paymentMethod",value:j.paymentMethod,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"all",children:"Toutes"}),c.jsx("option",{value:"efectivo",children:"Efectivo"}),c.jsx("option",{value:"transferencia",children:"Transferencia"}),c.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),c.jsxs("select",{name:"categoryId",value:j.categoryId,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"",children:"Toutes"}),B.map(M=>c.jsx("option",{value:M.id,children:M.nom},M.id))]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Produit"}),c.jsxs("select",{name:"productId",value:j.productId,onChange:V,className:"mt-1 rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-brand-primary focus:outline-none focus:ring-brand-primary",children:[c.jsx("option",{value:"",children:"Tous les produits"}),L.map(M=>c.jsx("option",{value:M.id,children:M.nom_produit},M.id))]})]})]})]}),c.jsx("section",{children:c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'affaires"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ve(D.totalRevenue)})]}),c.jsx("div",{className:"rounded-full bg-brand-primary/10 p-3 text-brand-primary",children:c.jsx(lA,{size:20})})]}),c.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Basé sur les articles correspondant aux filtres appliqués."})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bénéfice"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:ve(D.totalProfit)})]}),c.jsx("div",{className:"rounded-full bg-emerald-500/10 p-3 text-emerald-600",children:c.jsx(I8,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Marge moyenne : ",XC(D.profitMargin),"%"]})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Commandes"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:Ts(D.orderCount)})]}),c.jsx("div",{className:"rounded-full bg-indigo-500/10 p-3 text-indigo-600",children:c.jsx(Ji,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Panier moyen : ",ve(D.averageOrderValue)]})]}),c.jsxs("div",{className:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Articles vendus"}),c.jsx("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:Ts(D.totalQuantity)})]}),c.jsx("div",{className:"rounded-full bg-amber-500/10 p-3 text-amber-600",children:c.jsx(E2,{size:20})})]}),c.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Moyenne par commande : ",XC(D.averageItemsPerOrder)]})]})]})}),c.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par méthode de paiement"}),c.jsx(w$,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Méthode"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"}),c.jsx("th",{className:"p-2 text-right",children:"Commandes"})]})}),c.jsx("tbody",{children:K.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):K.map(M=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:M.label}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.profit)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:Ts(M.orders)})]},M.method))})]})})]}),c.jsxs("div",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Répartition par catégorie"}),c.jsx(E2,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:G.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"p-4 text-center text-sm text-gray-500",children:"Aucune donnée pour les filtres sélectionnés."})}):G.map(M=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:M.categoryName}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:Ts(M.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.profit)})]},M.categoryName))})]})})]})]}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits les plus performants"}),c.jsx(Ji,{size:18,className:"text-brand-primary"})]}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Produit"}),c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:$.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"p-4 text-center text-sm text-gray-500",children:"Aucun produit trouvé pour les filtres sélectionnés."})}):$.map(M=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:M.productName}),c.jsx("td",{className:"p-2 text-sm text-gray-700",children:M.categoryName||"Sin categoría"}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:Ts(M.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(M.profit)})]},M.productId))})]})})]}),c.jsxs("section",{className:"rounded-xl bg-white p-4 shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Détails des commandes"}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-12 p-3"}),c.jsx("th",{className:"p-3",children:"Date"}),c.jsx("th",{className:"p-3",children:"Type"}),c.jsx("th",{className:"p-3",children:"Table/Client"}),c.jsx("th",{className:"p-3 text-right",children:"Articles"}),c.jsx("th",{className:"p-3 text-right",children:"Ventes"}),c.jsx("th",{className:"p-3 text-right",children:"Bénéfice"}),c.jsx("th",{className:"p-3",children:"Paiement"})]})}),c.jsx("tbody",{children:R.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"p-6 text-center text-sm text-gray-500",children:"Aucune commande ne correspond aux filtres sélectionnés."})}):R.map(M=>{const z=A.get(M.id);if(!z)return null;const q=v===M.id,J=M.type==="sur_place"?c.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800",children:[c.jsx(fu,{size:12}),"En el local"]}):c.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800",children:[c.jsx(Mb,{size:12}),QC[M.type]]}),X=M.type==="sur_place"?M.table_nom||"N/A":M.client_name||M.client_address||"N/A",T=ml[z.paymentMethod??M.payment_method??"unknown"]??ml.unknown;return c.jsxs(pr.Fragment,{children:[c.jsxs("tr",{onClick:()=>x(q?null:M.id),className:"cursor-pointer border-b transition hover:bg-gray-50",children:[c.jsx("td",{className:"p-3 align-top",children:q?c.jsx(Qk,{size:16}):c.jsx(O$,{size:16})}),c.jsx("td",{className:"p-3 text-sm text-gray-700",children:new Date(M.date_creation).toLocaleString("es-CO")}),c.jsx("td",{className:"p-3",children:J}),c.jsx("td",{className:"p-3 text-sm font-semibold text-gray-900",children:X}),c.jsx("td",{className:"p-3 text-right text-sm text-gray-700",children:Ts(z.quantity)}),c.jsx("td",{className:"p-3 text-right text-sm font-semibold text-gray-900",children:ve(z.revenue)}),c.jsx("td",{className:"p-3 text-right text-sm font-semibold text-emerald-600",children:ve(z.profit)}),c.jsx("td",{className:"p-3 text-sm text-gray-700",children:T})]}),q&&c.jsx("tr",{className:"bg-gray-50",children:c.jsx("td",{colSpan:8,className:"p-4",children:c.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[c.jsxs("h4",{className:"text-sm font-semibold text-gray-800",children:["Articles inclus (",z.items.length,")"]}),c.jsx("div",{className:"mt-3 overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"border-b text-xs uppercase text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2",children:"Produit"}),c.jsx("th",{className:"p-2",children:"Catégorie"}),c.jsx("th",{className:"p-2 text-right",children:"Quantité"}),c.jsx("th",{className:"p-2 text-right",children:"Ventes"}),c.jsx("th",{className:"p-2 text-right",children:"Bénéfice"})]})}),c.jsx("tbody",{children:z.items.map(I=>c.jsxs("tr",{className:"border-b last:border-b-0",children:[c.jsx("td",{className:"p-2 text-sm font-medium text-gray-800",children:I.productName}),c.jsx("td",{className:"p-2 text-sm text-gray-700",children:I.categoryName||"Sin categoría"}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:Ts(I.quantity)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(I.revenue)}),c.jsx("td",{className:"p-2 text-right text-sm text-gray-700",children:ve(I.profit)})]},I.productId))})]})})]})})})]},M.id)})})]})})]})]})},Xf="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition hover:border-brand-primary/50 hover:text-brand-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-primary disabled:opacity-50",bre=({id:e,value:t,fallback:n,onChange:r,className:i,placeholder:s})=>{const l=b.useRef(null),[d,f]=b.useState(()=>((t==null?void 0:t.plainText)??n).trim().length===0),h=()=>{const E=l.current;if(!E){f(!0);return}const C=E.textContent??"";f(C.trim().length===0)};b.useEffect(()=>{const E=l.current;if(E){if(t&&typeof t.html=="string"){E.innerHTML!==t.html&&(E.innerHTML=t.html),h();return}E.textContent!==n&&(E.textContent=n,h())}},[t,n]);const m=()=>{const E=l.current;if(!E){r(null),f(!0);return}const C=E.innerHTML,k=E.innerText,A=Rb({html:C,plainText:k});r(A),h()},g=E=>{var C;document.execCommand("styleWithCSS",!1,"false"),document.execCommand(E),(C=l.current)==null||C.focus(),m()},v=E=>{var k;const C=E.target.value;document.execCommand("styleWithCSS",!1,"true"),document.execCommand("foreColor",!1,C),(k=l.current)==null||k.focus(),m()},x=()=>{var E;document.execCommand("removeFormat"),document.execCommand("unlink"),(E=l.current)==null||E.focus(),m()},j=()=>{m()},_=()=>{m()},S=E=>{E.preventDefault();const C=E.clipboardData.getData("text/plain");document.execCommand("insertText",!1,C),m()},N=E=>{if((E.metaKey||E.ctrlKey)&&E.key.toLowerCase()==="b"){E.preventDefault(),g("bold");return}if((E.metaKey||E.ctrlKey)&&E.key.toLowerCase()==="i"){E.preventDefault(),g("italic");return}(E.metaKey||E.ctrlKey)&&E.key.toLowerCase()==="x"&&E.shiftKey&&(E.preventDefault(),g("strikeThrough"))};return c.jsxs("div",{className:`space-y-2 ${i??""}`,children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("button",{type:"button",className:Xf,onClick:()=>g("bold"),"aria-label":"Mettre en gras",children:c.jsx(d$,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsx("button",{type:"button",className:Xf,onClick:()=>g("italic"),"aria-label":"Mettre en italique",children:c.jsx(l8,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsx("button",{type:"button",className:Xf,onClick:()=>g("strikeThrough"),"aria-label":"Barrer",children:c.jsx(tz,{className:"h-4 w-4","aria-hidden":"true"})}),c.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[c.jsx(C8,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Choisir une couleur"}),c.jsx("input",{type:"color",className:"h-8 w-8 cursor-pointer rounded-full border border-slate-200",onChange:v,"aria-label":"Sélectionner une couleur de texte"})]}),c.jsx("button",{type:"button",className:Xf,onClick:x,"aria-label":"Supprimer la mise en forme",children:c.jsx(Xa,{className:"h-4 w-4","aria-hidden":"true"})})]}),c.jsxs("div",{className:"relative",children:[s&&d&&c.jsx("div",{className:"pointer-events-none absolute left-4 top-3 text-sm text-slate-400",children:s}),c.jsx("div",{id:e,ref:l,className:"ui-textarea w-full min-h-[120px] whitespace-pre-wrap break-words px-4 py-3",contentEditable:!0,role:"textbox","aria-multiline":"true",suppressContentEditableWarning:!0,onInput:j,onBlur:_,onKeyDown:N,onPaste:S})]})]})},xre=["Inter","Poppins","Roboto","Montserrat","Playfair Display","Lora","Open Sans","Georgia, serif","Arial, sans-serif"],wre=["14px","16px","18px","20px","24px","clamp(1rem, 2vw, 1.5rem)"],mb=["#0f172a","#111827","#f8fafc","#ffffff","#e2e8f0","#f97316","transparent","currentColor"];new Set(Nz);const _re={"navigation.brand":"Nom de la marque","navigation.brandLogo":"Logo principal","navigation.staffLogo":"Logo d'accès équipe","navigation.links.home":"Lien Accueil","navigation.links.about":"Lien À propos","navigation.links.menu":"Lien Menu","navigation.links.contact":"Lien Contact","navigation.links.loginCta":"Bouton d'accès staff","navigation.style.background":"Fond de la navigation","hero.title":"Titre du hero","hero.subtitle":"Sous-titre du hero","hero.ctaLabel":"Bouton principal du hero","hero.historyTitle":"Titre de l'historique","hero.reorderCtaLabel":"Bouton de réassort","hero.backgroundImage":"Image du hero","hero.style.background":"Fond du hero","about.title":"Titre À propos","about.description":"Texte À propos","about.image":"Image À propos","about.style.background":"Fond À propos","menu.title":"Titre du menu","menu.ctaLabel":"Bouton du menu","menu.loadingLabel":"Texte de chargement du menu","menu.image":"Image du menu","menu.style.background":"Fond du menu","instagramReviews.title":"Titre Avis Instagram","instagramReviews.subtitle":"Sous-titre Avis Instagram","instagramReviews.image":"Image centrale Avis Instagram","instagramReviews.style.background":"Fond Avis Instagram","findUs.title":"Titre Encuéntranos","findUs.addressLabel":"Libellé de l'adresse (Encuéntranos)","findUs.address":"Adresse (Encuéntranos)","findUs.cityLabel":"Libellé de contact","findUs.city":"Email (Encuéntranos)","findUs.hoursLabel":"Libellé des horaires","findUs.hours":"Horaires","findUs.mapLabel":"Libellé du lien carte","findUs.style.background":"Fond Encuéntranos","footer.text":"Texte du pied de page","footer.style.background":"Fond du pied de page"},jre={..._re},Sre=[{id:"preview",label:"Aperçu"},{id:"custom",label:"Personnalisation"}],Nre=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`asset-${Date.now()}-${Math.random().toString(36).slice(2,10)}`,id=e=>{var i;const{type:t,name:n}=e;if(t.startsWith("image/"))return"image";if(t.startsWith("video/"))return"video";if(t.startsWith("audio/"))return"audio";if(t.includes("font"))return"font";const r=(i=n.split(".").pop())==null?void 0:i.toLowerCase();return r&&["ttf","otf","woff","woff2"].includes(r)?"font":"raw"},Qf=e=>typeof globalThis.structuredClone=="function"?globalThis.structuredClone(e):JSON.parse(JSON.stringify(e)),xR=(e,t,n)=>{const r=t.split("."),i=r.pop();if(!i)return;let s=e;r.forEach(l=>{if(s&&typeof s=="object"){const d=s[l];d&&typeof d=="object"?s[l]=Array.isArray(d)?[...d]:{...d}:s[l]={},s=s[l]}}),s&&typeof s=="object"&&(s[i]=n)},JC=(e,t,n)=>{const r={};n.fontFamily&&n.fontFamily.trim().length>0&&(r.fontFamily=n.fontFamily.trim()),n.fontSize&&n.fontSize.trim().length>0&&(r.fontSize=n.fontSize.trim()),n.textColor&&n.textColor.trim().length>0&&(r.textColor=n.textColor.trim()),n.backgroundColor&&n.backgroundColor.trim().length>0&&(r.backgroundColor=n.backgroundColor.trim());const i={...e.elementStyles};Object.keys(r).length===0?delete i[t]:i[t]=r,e.elementStyles=i},ZC=(e,t,n)=>{const r={...e.elementRichText};n&&n.html.trim().length>0?r[t]=n:delete r[t],e.elementRichText=r},Ere=(e,t,n)=>{const r=va(t),i={...e[r]},s={...i.style,background:{...n}};i.style=s,e[r]=i},Ore=(e,t)=>{var s;const n=((s=e.assets)==null?void 0:s.library)??[],r=n.findIndex(l=>l.url===t.url||l.id===t.id),i=r>=0?n.map((l,d)=>d===r?t:l):[...n,t];e.assets={...e.assets,library:i}},wR=(e,t)=>{const n=t.split(".");let r=e;for(const i of n){if(!r||typeof r!="object")return"";r=r[i]}return typeof r=="string"?r:""},Cre=(e,t)=>{const n=wR(e,t);return n.trim().length>0?n:null},kre=(e,t)=>e.elementStyles[t]??{},Are=(e,t)=>e.elementRichText[t]??null,Tre=(e,t)=>{const n=va(t);return e[n].style.background},zm=(e,t)=>{const n=e.name.replace(/\.[^/.]+$/,"").trim()||"media",r=id(e),i=r==="font"?$b(n):n;return{id:Nre(),name:i,url:t,format:e.type||"application/octet-stream",bytes:e.size,type:r,createdAt:new Date().toISOString()}},Pre=e=>{if(e===0)return"0 o";const t=["o","Ko","Mo","Go"],n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),r=e/Math.pow(1024,n);return`${r.toFixed(r>=10||n===0?0:1)} ${t[n]}`},Mre=[{id:"navigation",title:"Navigation",description:"Logos, liens principaux et fond du menu supérieur.",groups:[{id:"navigation-main",title:"Contenu principal",fields:[{id:"navigation-brand",type:"text",element:"navigation.brand",label:"Nom de la marque"},{id:"navigation-home",type:"text",element:"navigation.links.home",label:"Libellé du lien Accueil"},{id:"navigation-about",type:"text",element:"navigation.links.about",label:"Libellé du lien À propos"},{id:"navigation-menu",type:"text",element:"navigation.links.menu",label:"Libellé du lien Menu"},{id:"navigation-contact",type:"text",element:"navigation.links.contact",label:"Libellé du lien Contact"},{id:"navigation-login",type:"text",element:"navigation.links.loginCta",label:"Texte du bouton d'accès staff"}]},{id:"navigation-branding",title:"Identité visuelle",fields:[{id:"navigation-brand-logo",type:"image",element:"navigation.brandLogo",label:"Logo principal",description:"PNG ou SVG recommandé pour un rendu net sur tous les écrans."},{id:"navigation-staff-logo",type:"image",element:"navigation.staffLogo",label:"Logo d'accès équipe",description:"S'affiche pour le bouton d'accès staff si disponible."}]},{id:"navigation-background",title:"Fond et mise en forme",fields:[{id:"navigation-style-background",type:"background",element:"navigation.style.background",label:"Fond du bandeau"}]}]},{id:"hero",title:"Section Hero",description:"Grand bandeau d’ouverture avec accroche et image de fond.",groups:[{id:"hero-content",title:"Contenu",fields:[{id:"hero-title",type:"text",element:"hero.title",label:"Titre principal",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-subtitle",type:"text",element:"hero.subtitle",label:"Sous-titre",allowRichText:!0,showStyleOptions:!0,multiline:!0},{id:"hero-cta",type:"text",element:"hero.ctaLabel",label:"Bouton principal"},{id:"hero-history",type:"text",element:"hero.historyTitle",label:"Titre du bloc historique",multiline:!0},{id:"hero-reorder",type:"text",element:"hero.reorderCtaLabel",label:"Bouton de réassort"}]},{id:"hero-visuals",title:"Visuels et ambiance",fields:[{id:"hero-background-image",type:"image",element:"hero.backgroundImage",label:"Image de fond",description:"Utilisez des images haute résolution. Optimisation Cloudinary recommandée."},{id:"hero-background-style",type:"background",element:"hero.style.background",label:"Couleurs et ambiance"}]}]},{id:"about",title:"Section À propos",description:"Présentation de votre histoire et visuels associés.",groups:[{id:"about-content",title:"Contenu",fields:[{id:"about-title",type:"text",element:"about.title",label:"Titre",showStyleOptions:!0},{id:"about-description",type:"text",element:"about.description",label:"Texte descriptif",allowRichText:!0,multiline:!0,showStyleOptions:!0}]},{id:"about-visuals",title:"Visuels",fields:[{id:"about-image",type:"image",element:"about.image",label:"Image principale",description:"Photo illustrative de votre établissement ou de vos produits."},{id:"about-background",type:"background",element:"about.style.background",label:"Fond de section"}]}]},{id:"menu",title:"Section Menu",description:"Mettre en avant vos plats signatures et CTA vers la commande.",groups:[{id:"menu-content",title:"Contenu",fields:[{id:"menu-title",type:"text",element:"menu.title",label:"Titre du menu",showStyleOptions:!0},{id:"menu-cta",type:"text",element:"menu.ctaLabel",label:"Texte du bouton",showStyleOptions:!0},{id:"menu-loading",type:"text",element:"menu.loadingLabel",label:"Message de chargement",multiline:!0}]},{id:"menu-visuals",title:"Visuels",fields:[{id:"menu-image",type:"image",element:"menu.image",label:"Image d’illustration"},{id:"menu-background",type:"background",element:"menu.style.background",label:"Fond de section"}]}]},{id:"instagram",title:"Section Avis Instagram",description:"Personnalisez le carrousel social, ses textes et ses visuels.",groups:[{id:"instagram-header",title:"En-tête de section",fields:[{id:"instagram-title",type:"text",element:"instagramReviews.title",label:"Titre de la section",showStyleOptions:!0},{id:"instagram-subtitle",type:"text",element:"instagramReviews.subtitle",label:"Sous-titre",allowRichText:!0,multiline:!0},{id:"instagram-image",type:"image",element:"instagramReviews.image",label:"Image centrale",description:"Illustration affichée à droite du carrousel."},{id:"instagram-background",type:"background",element:"instagramReviews.style.background",label:"Fond de section"}]},...$u.map((e,t)=>({id:`instagram-review-${e}`,title:`Carte témoignage ${t+1}`,description:"Personnalisez le contenu de la carte et les médias associés (avatar, visuel de post, mise en avant).",fields:[{id:`instagram-review-${e}-name`,type:"text",element:`instagramReviews.reviews.${e}.name`,label:"Nom"},{id:`instagram-review-${e}-handle`,type:"text",element:`instagramReviews.reviews.${e}.handle`,label:"Handle Instagram"},{id:`instagram-review-${e}-timeAgo`,type:"text",element:`instagramReviews.reviews.${e}.timeAgo`,label:"Durée depuis la publication"},{id:`instagram-review-${e}-message`,type:"text",element:`instagramReviews.reviews.${e}.message`,label:"Message principal",multiline:!0,allowRichText:!0},{id:`instagram-review-${e}-highlight`,type:"text",element:`instagramReviews.reviews.${e}.highlight`,label:"Message mis en avant",multiline:!0},{id:`instagram-review-${e}-highlight-caption`,type:"text",element:`instagramReviews.reviews.${e}.highlightCaption`,label:"Description du highlight",multiline:!0},{id:`instagram-review-${e}-badge`,type:"text",element:`instagramReviews.reviews.${e}.badgeLabel`,label:"Badge"},{id:`instagram-review-${e}-location`,type:"text",element:`instagramReviews.reviews.${e}.location`,label:"Localisation"},{id:`instagram-review-${e}-avatar`,type:"image",element:`instagramReviews.reviews.${e}.avatarUrl`,label:"Avatar"},{id:`instagram-review-${e}-highlight-image`,type:"image",element:`instagramReviews.reviews.${e}.highlightImageUrl`,label:"Image highlight"},{id:`instagram-review-${e}-post-image`,type:"image",element:`instagramReviews.reviews.${e}.postImageUrl`,label:"Image du post"},{id:`instagram-review-${e}-post-alt`,type:"text",element:`instagramReviews.reviews.${e}.postImageAlt`,label:"Texte alternatif de l'image du post"}]}))]},{id:"find-us",title:"Section Encuéntranos",description:"Coordonnées, horaires et informations de contact.",groups:[{id:"find-us-content",title:"Contenu",fields:[{id:"find-us-title",type:"text",element:"findUs.title",label:"Titre",showStyleOptions:!0},{id:"find-us-address-label",type:"text",element:"findUs.addressLabel",label:"Libellé de l'adresse"},{id:"find-us-address",type:"text",element:"findUs.address",label:"Adresse complète",multiline:!0},{id:"find-us-city-label",type:"text",element:"findUs.cityLabel",label:"Libellé de contact"},{id:"find-us-city",type:"text",element:"findUs.city",label:"Contact (mail ou téléphone)"},{id:"find-us-hours-label",type:"text",element:"findUs.hoursLabel",label:"Libellé des horaires"},{id:"find-us-hours",type:"text",element:"findUs.hours",label:"Horaires détaillés",multiline:!0},{id:"find-us-map-label",type:"text",element:"findUs.mapLabel",label:"Libellé du lien carte"}]},{id:"find-us-background",title:"Fond",fields:[{id:"find-us-style-background",type:"background",element:"findUs.style.background",label:"Personnalisation du fond"}]}]},{id:"footer",title:"Pied de page",description:"Dernière section visible de la page d’accueil.",groups:[{id:"footer-content",title:"Contenu",fields:[{id:"footer-text",type:"text",element:"footer.text",label:"Texte du pied de page",multiline:!0,allowRichText:!0,showStyleOptions:!0}]},{id:"footer-background",title:"Fond",fields:[{id:"footer-style-background",type:"background",element:"footer.style.background",label:"Couleur ou image de fond"}]}]}],Vy=({element:e,label:t,description:n,isActive:r,register:i,onFocus:s,children:l})=>{const d=b.useCallback(f=>{i(e,f)},[e,i]);return c.jsxs("div",{ref:d,className:`group relative rounded-3xl border p-6 transition shadow-sm focus-within:ring-2 focus-within:ring-brand-primary/60 ${r?"border-brand-primary/80 ring-1 ring-brand-primary/40":"border-slate-200 hover:border-slate-300"}`,tabIndex:-1,onFocusCapture:()=>s(e),onMouseEnter:()=>s(e),children:[c.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-slate-900",children:t}),n&&c.jsx("p",{className:"mt-1 text-sm text-slate-500",children:n})]}),r&&c.jsx("span",{className:"rounded-full bg-brand-primary/10 px-3 py-1 text-xs font-medium text-brand-primary",children:"Sélectionné"})]}),c.jsx("div",{className:"space-y-4",children:l})]})},Rre=({element:e,draft:t,onApply:n,fontOptions:r,onAssetAdded:i,multiline:s=!1,allowRichText:l=!0,showStyleOptions:d=!1,placeholder:f})=>{const h=wR(t,e),m=Are(t,e),g=kre(t,e),[v,x]=b.useState(h),[j,_]=b.useState(m),[S,N]=b.useState(!!m),[E,C]=b.useState(g.fontFamily??""),[k,A]=b.useState(g.fontSize??""),[R,D]=b.useState(g.textColor??""),[$,G]=b.useState(g.backgroundColor??""),[K,B]=b.useState(null),[L,V]=b.useState(!1);b.useEffect(()=>{x(h),_(m),N(!!m),C(g.fontFamily??""),A(g.fontSize??""),D(g.textColor??""),G(g.backgroundColor??"")},[h,m,g.fontFamily,g.fontSize,g.textColor,g.backgroundColor]);const H=b.useCallback(()=>{const q=v;n(J=>(xR(J,e,q),ZC(J,e,S?j:null),d&&JC(J,e,{fontFamily:E,fontSize:k,textColor:R,backgroundColor:$}),J))},[$,e,E,k,S,n,v,j,d,R]),se=b.useCallback(()=>{C(""),A(""),D(""),G(""),n(q=>(JC(q,e,{}),q))},[e,n]),M=()=>{S?(N(!1),_(null),n(q=>(ZC(q,e,null),q))):N(!0)},z=async q=>{var X;const J=(X=q.target.files)==null?void 0:X[0];if(J){B(null),V(!0);try{const T=await El(J,{tags:[id(J)]}),I=zm(J,T);i(I),C(I.name)}catch(T){B(T instanceof Error?T.message:"Impossible de téléverser la police. Réessayez plus tard.")}finally{V(!1),q.target.value=""}}};return c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${e}-input`,children:"Contenu"}),s?c.jsx("textarea",{id:`${e}-input`,className:"ui-textarea w-full",rows:4,value:v,placeholder:f,onChange:q=>x(q.target.value)}):c.jsx("input",{id:`${e}-input`,className:"ui-input w-full",value:v,placeholder:f,onChange:q=>x(q.target.value)})]}),l&&c.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-slate-50/70 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mise en forme avancée"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Activez l’éditeur riche pour ajouter du gras, de l’italique et des liens."})]}),c.jsx("button",{type:"button",className:"ui-btn-secondary whitespace-nowrap",onClick:M,children:S?"Désactiver":"Activer"})]}),S&&c.jsx(bre,{id:`${e}-rich`,value:j,fallback:v,onChange:q=>{_(q),q&&x(q.plainText)},className:"rounded-xl border border-slate-200 bg-white",placeholder:"Saisissez votre texte..."})]}),d&&c.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Style du texte"}),c.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary",onClick:se,children:"Réinitialiser"})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Police"}),c.jsx("input",{className:"ui-input w-full",value:E,onChange:q=>C(q.target.value),list:`${e}-font-options`,placeholder:"Ex: Poppins"}),c.jsx("datalist",{id:`${e}-font-options`,children:r.map(q=>c.jsx("option",{value:q},q))}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer text-xs",children:[c.jsx("input",{type:"file",accept:".woff,.woff2,.ttf,.otf",className:"absolute inset-0 cursor-pointer opacity-0",onChange:z,disabled:L}),c.jsx(Kl,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),"Importer une police"]}),L&&c.jsx(Ol,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),K&&c.jsx("span",{className:"text-xs text-amber-600",children:K})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Taille du texte"}),c.jsx("input",{className:"ui-input w-full",value:k,onChange:q=>A(q.target.value),list:`${e}-size-options`,placeholder:"Ex: 18px"}),c.jsx("datalist",{id:`${e}-size-options`,children:wre.map(q=>c.jsx("option",{value:q},q))})]})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Couleur du texte"}),c.jsx("input",{className:"ui-input w-full",value:R,onChange:q=>D(q.target.value),placeholder:"Ex: #0f172a"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:mb.map(q=>c.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:q},onClick:()=>D(q),children:c.jsx("span",{className:"sr-only",children:q})},q))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:"Fond du texte"}),c.jsx("input",{className:"ui-input w-full",value:$,onChange:q=>G(q.target.value),placeholder:"Ex: transparent"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:mb.map(q=>c.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:q},onClick:()=>G(q),children:c.jsx("span",{className:"sr-only",children:q})},q))})]})]})]}),c.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[c.jsx("button",{type:"button",className:"ui-btn-secondary",onClick:()=>{x(h),_(m),N(!!m),C(g.fontFamily??""),A(g.fontSize??""),D(g.textColor??""),G(g.backgroundColor??"")},children:"Réinitialiser les modifications"}),c.jsx("button",{type:"button",className:"ui-btn-primary",onClick:H,children:"Appliquer"})]})]})},Dre=({element:e,draft:t,onApply:n,onAssetAdded:r,placeholder:i})=>{const s=Cre(t,e)??"",[l,d]=b.useState(s),[f,h]=b.useState(null),[m,g]=b.useState(!1);b.useEffect(()=>{d(s)},[s]);const v=()=>{const _=l.trim(),S=ei(_)??(_.length>0?_:null);n(N=>(xR(N,e,S),N))},x=async _=>{var N;const S=(N=_.target.files)==null?void 0:N[0];if(S){h(null),g(!0);try{const E=await El(S,{tags:[id(S)]}),C=zm(S,E);r(C),d(E)}catch(E){h(E instanceof Error?E.message:"Téléversement impossible. Vérifiez votre connexion.")}finally{g(!1),_.target.value=""}}},j=l.trim();return c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${e}-image`,children:"URL de l'image ou du média"}),c.jsx("input",{id:`${e}-image`,className:"ui-input w-full",value:l,placeholder:i??"https://",onChange:_=>d(_.target.value)}),c.jsx("p",{className:"text-xs text-slate-500",children:"Collez une URL Cloudinary ou téléversez un fichier pour l’ajouter automatiquement."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:x,disabled:m}),c.jsx(Kl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer un média"]}),m&&c.jsx(Ol,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>d(""),children:"Supprimer le média"})]}),f&&c.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[c.jsx(ta,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),c.jsx("p",{children:f})]}),j&&c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:c.jsx("img",{src:j,alt:"Aperçu",className:"h-48 w-full object-cover"})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"ui-btn-primary",onClick:v,children:"Appliquer"})})]})},Ire=({element:e,draft:t,onApply:n,onAssetAdded:r})=>{const i=Tre(t,e),[s,l]=b.useState(i.type),[d,f]=b.useState(i.color),[h,m]=b.useState(i.image??""),[g,v]=b.useState(null),[x,j]=b.useState(!1);b.useEffect(()=>{l(i.type),f(i.color),m(i.image??"")},[i.type,i.color,i.image]);const _=()=>{const N=d.trim()||"transparent",E=h.trim(),C=ei(E)??(E.length>0?E:null);n(k=>(Ere(k,e,{type:s,color:N,image:s==="image"?C:null}),k))},S=async N=>{var C;const E=(C=N.target.files)==null?void 0:C[0];if(E){v(null),j(!0);try{const k=await El(E,{tags:[id(E)]}),A=zm(E,k);r(A),m(k),l("image")}catch(k){v(k instanceof Error?k.message:"Téléversement impossible.")}finally{j(!1),N.target.value=""}}};return c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${s==="color"?"ring-2 ring-brand-primary":""}`,onClick:()=>l("color"),children:"Couleur"}),c.jsx("button",{type:"button",className:`ui-btn-secondary flex-1 ${s==="image"?"ring-2 ring-brand-primary":""}`,onClick:()=>l("image"),children:"Image"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${e}-background-color`,children:"Couleur"}),c.jsx("input",{id:`${e}-background-color`,className:"ui-input w-full",value:d,onChange:N=>f(N.target.value)}),c.jsx("div",{className:"flex flex-wrap gap-2",children:mb.map(N=>c.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-slate-200",style:{backgroundColor:N},onClick:()=>f(N),children:c.jsx("span",{className:"sr-only",children:N})},N))})]}),s==="image"&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium text-slate-700",htmlFor:`${e}-background-image`,children:"Image de fond"}),c.jsx("input",{id:`${e}-background-image`,className:"ui-input w-full",value:h,onChange:N=>m(N.target.value),placeholder:"https://"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("label",{className:"ui-btn-secondary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*,video/*",className:"absolute inset-0 cursor-pointer opacity-0",onChange:S,disabled:x}),c.jsx(Kl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Importer une image"]}),x&&c.jsx(Ol,{className:"h-4 w-4 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("button",{type:"button",className:"text-sm font-medium text-brand-primary hover:text-brand-primary/80",onClick:()=>m(""),children:"Supprimer l'image"})]}),g&&c.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-sm text-amber-700",children:[c.jsx(ta,{className:"mt-0.5 h-4 w-4","aria-hidden":"true"}),c.jsx("p",{children:g})]}),h.trim()&&c.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200",children:c.jsx("img",{src:h,alt:"Aperçu du fond",className:"h-40 w-full object-cover"})})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",className:"ui-btn-primary",onClick:_,children:"Appliquer"})})]})},Lre=({assets:e,onUpload:t})=>{const[n,r]=b.useState(null),[i,s]=b.useState(!1),[l,d]=b.useState(null),f=async x=>{try{await navigator.clipboard.writeText(x.url),r(x.id),setTimeout(()=>r(null),2e3)}catch(j){console.error(j)}},h=async x=>{var _;const j=(_=x.target.files)==null?void 0:_[0];if(j){d(null),s(!0);try{await t(j)}catch(S){d(S instanceof Error?S.message:"Téléversement impossible.")}finally{s(!1),x.target.value=""}}},m=e.filter(x=>x.type==="font"),g=e.filter(x=>x.type==="image"),v=e.filter(x=>x.type!=="image"&&x.type!=="font");return c.jsxs("section",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[c.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Bibliothèque de médias"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Centralisez toutes vos ressources pour la personnalisation (polices, images, vidéos, audio)."})]}),c.jsxs("label",{className:"ui-btn-primary relative cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,.ttf,.otf,.woff,.woff2",className:"absolute inset-0 cursor-pointer opacity-0",onChange:h,disabled:i}),c.jsx(Kl,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Ajouter un média"]})]}),l&&c.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[c.jsx(ta,{className:"h-5 w-5","aria-hidden":"true"}),c.jsx("div",{children:c.jsx("p",{children:l})})]}),i&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[c.jsx(Ol,{className:"h-4 w-4 animate-spin","aria-hidden":"true"})," Téléversement en cours…"]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Wy,{title:"Polices",assets:m,onCopy:f,copySuccessId:n}),c.jsx(Wy,{title:"Images",assets:g,onCopy:f,copySuccessId:n}),c.jsx(Wy,{title:"Autres médias",assets:v,onCopy:f,copySuccessId:n})]})]})},Wy=({title:e,assets:t,onCopy:n,copySuccessId:r})=>t.length===0?c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:e}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Aucun média pour le moment."})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:e}),c.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.map(i=>c.jsxs("article",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-slate-900",children:i.name}),c.jsxs("p",{className:"text-xs text-slate-500",children:[i.format.split("/").pop()??i.format," • ",Pre(i.bytes)]})]}),c.jsxs("button",{type:"button",className:`ui-btn-secondary flex items-center gap-2 text-xs ${r===i.id?"border-emerald-200 bg-emerald-50 text-emerald-700":""}`,onClick:()=>n(i),children:[c.jsx(q$,{className:"h-4 w-4","aria-hidden":"true"}),r===i.id?"Copié !":"Copier l’URL"]})]}),c.jsx("p",{className:"mt-3 break-all text-xs text-slate-500",children:i.url})]},i.id))})]}),$re=()=>{var ge;const{content:e,loading:t,error:n,updateContent:r}=Uu(),[i,s]=b.useState(()=>e?Qf(e):null),[l,d]=b.useState(null),[f,h]=b.useState(null),[m,g]=b.useState("custom"),[v,x]=b.useState(!1),[j,_]=b.useState(null),[S,N]=b.useState(null),[E,C]=b.useState([]),[k,A]=b.useState(!1),[R,D]=b.useState(null),[$,G]=b.useState(null),[K,B]=b.useState(null),[L,V]=b.useState(null),[H,se]=b.useState(!1);b.useEffect(()=>{e&&s(Qf(e))},[e]),b.useEffect(()=>{let ie=!0;return(async()=>{A(!0),D(null);try{const Ce=await Se.getBestSellerProducts();ie&&C(Ce)}catch(Ce){ie&&D(Ce instanceof Error?Ce.message:"Impossible de charger les produits mis en avant.")}finally{ie&&A(!1)}})(),()=>{ie=!1}},[]),b.useEffect(()=>{if(!S)return;const ie=setTimeout(()=>N(null),4e3);return()=>clearTimeout(ie)},[S]);const M=b.useCallback(ie=>{s(Q=>{if(!Q)return Q;const Ce=Qf(Q);return ie(Ce)})},[]),z=b.useCallback(ie=>{s(Q=>{if(!Q)return Q;const Ce=Qf(Q);return Ore(Ce,ie),Ce})},[]),q=b.useMemo(()=>{const ie=new Map;return Mre.forEach(Q=>{Q.groups.forEach(Ce=>{Ce.fields.forEach(Re=>{ie.set(Re.element,{section:Q,group:Ce,field:Re})})})}),ie},[]),J=b.useCallback(()=>{},[]),X=b.useCallback(ie=>{d(ie);try{const Q=va(ie);h(Q)}catch(Q){console.error(Q)}},[]),T=b.useCallback((ie,Q)=>{if(X(ie),h(Q.zone),B(Q.anchor??null),V(Q.boundary??null),!q.has(ie)){console.warn(`Aucun formulaire de personnalisation trouvé pour l'élément "${ie}".`);return}G(ie)},[q,X,h,B,V]),I=async()=>{x(!0),_(null),N(null);try{if(!i)throw new Error("Le brouillon est indisponible.");const ie=await r(i);s(ie),N("Modifications enregistrées avec succès.")}catch(ie){_(ie instanceof Error?ie.message:"Une erreur est survenue lors de la sauvegarde.")}finally{x(!1)}},U=b.useMemo(()=>{const ie=Array.from(xre);if(!i)return ie;const Q=i.assets.library.filter(Ce=>Ce.type==="font").map(Ce=>$b(Ce.name));return Array.from(new Set([...ie,...Q]))},[i]),te=b.useMemo(()=>$?q.get($)??null:null,[$,q]),re=b.useMemo(()=>{var Q;if(!$)return"";const ie=((Q=q.get($))==null?void 0:Q.field.label)??$;return jre[$]??ie},[$,q]),ce=b.useCallback(()=>{G(null),d(null),h(null),B(null),V(null)},[d,h,B,V,G]);b.useEffect(()=>{m!=="custom"&&ce()},[m,ce]),b.useEffect(()=>{if(!$)return;if(!te){ce();return}if(typeof window>"u")return;const ie=window.setTimeout(()=>{const Q=document.querySelector('[data-element-editor-modal="true"]'),Ce=Q==null?void 0:Q.querySelector('input, textarea, [contenteditable="true"], select');Ce==null||Ce.focus({preventScroll:!0})},80);return()=>{window.clearTimeout(ie)}},[te,ce,$]);const he=b.useCallback(ie=>{if(!i)return null;const Q={key:ie.id,element:ie.element,label:ie.label,description:ie.description,isActive:l===ie.element,register:J,onFocus:X};return ie.type==="text"?c.jsx(Vy,{...Q,children:c.jsx(Rre,{element:ie.element,draft:i,onApply:M,fontOptions:U,onAssetAdded:z,multiline:ie.multiline,allowRichText:ie.allowRichText,showStyleOptions:ie.showStyleOptions,placeholder:ie.placeholder})}):ie.type==="image"?c.jsx(Vy,{...Q,children:c.jsx(Dre,{element:ie.element,draft:i,onApply:M,onAssetAdded:z,placeholder:ie.placeholder})}):c.jsx(Vy,{...Q,children:c.jsx(Ire,{element:ie.element,draft:i,onApply:M,onAssetAdded:z})})},[l,z,M,i,X,U,J]),Ne=b.useCallback(async ie=>{const Q=await El(ie,{tags:[id(ie)]}),Ce=zm(ie,Q);z(Ce)},[z]);if(t)return c.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[c.jsx(Ol,{className:"h-10 w-10 animate-spin text-brand-primary","aria-hidden":"true"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Chargement du contenu du site…"})]});if(!e||!i)return c.jsxs("div",{className:"flex h-full min-h-[60vh] flex-col items-center justify-center gap-3",children:[c.jsx(ta,{className:"h-6 w-6 text-amber-500","aria-hidden":"true"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Le contenu du site est en cours d'initialisation…"})]});const de=((ge=i.assets)==null?void 0:ge.library)??[];return c.jsxs("div",{className:"space-y-8 px-4 sm:px-6 lg:px-0",children:[c.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Site public"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Ajustez le contenu, les couleurs et les médias de votre page d’accueil en temps réel."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[S&&c.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-emerald-50 px-4 py-2 text-sm text-emerald-700",children:[c.jsx(T$,{className:"h-4 w-4","aria-hidden":"true"}),S]}),j&&c.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-amber-50 px-4 py-2 text-sm text-amber-700",children:[c.jsx(ta,{className:"h-4 w-4","aria-hidden":"true"}),j]}),c.jsx("button",{type:"button",onClick:()=>se(!0),className:"ui-btn-secondary",children:"Bibliothèque de médias"}),c.jsx("button",{type:"button",onClick:I,className:"ui-btn-primary",disabled:v,children:v?"Enregistrement…":"Enregistrer les modifications"})]})]}),n&&c.jsxs("div",{className:"flex items-start gap-3 rounded-3xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[c.jsx(ta,{className:"h-5 w-5","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{children:n}),c.jsx("p",{className:"mt-1",children:"Les valeurs affichées correspondent à la configuration par défaut."})]})]}),c.jsx("nav",{className:"flex w-full items-center gap-2 overflow-x-auto rounded-full bg-slate-100 p-1",children:Sre.map(ie=>c.jsx("button",{type:"button",onClick:()=>g(ie.id),className:`flex-1 rounded-full px-4 py-2 text-sm font-medium transition ${m===ie.id?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:ie.label},ie.id))}),c.jsx("div",{children:m==="preview"?c.jsx("div",{className:"mx-auto w-full max-w-6xl",children:c.jsx("div",{className:"rounded-[2.5rem] border border-slate-200 bg-slate-50 p-6",children:c.jsx($2,{content:i,bestSellerProducts:E,onEdit:()=>{},activeZone:null,showEditButtons:!1})})}):c.jsxs("div",{className:"space-y-6",children:[R&&c.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:[c.jsx(ta,{className:"h-5 w-5","aria-hidden":"true"}),c.jsx("p",{children:R})]}),c.jsx("div",{className:"mx-auto w-full max-w-7xl",children:c.jsx("div",{className:"rounded-[2.75rem] border border-slate-200 bg-slate-50 p-4 shadow-inner sm:p-6 lg:p-8",children:c.jsx($2,{content:i,bestSellerProducts:E,onEdit:(ie,Q)=>T(ie,Q),activeZone:f})})}),k&&c.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[c.jsx(Ol,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Chargement des produits populaires…"]})]})}),c.jsx(an,{isOpen:!!($&&te),onClose:ce,title:re?`Personnaliser ${re}`:"Personnalisation",size:"lg",anchor:K,boundary:L,children:te?c.jsxs("div",{className:"space-y-5","data-element-editor-modal":"true",children:[c.jsxs("div",{className:"rounded-2xl bg-slate-100/70 p-4 text-sm text-slate-600",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-900",children:te.section.title}),c.jsx("p",{className:"text-xs text-slate-500",children:te.group.title}),te.group.description&&c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:te.group.description})]}),he(te.field)]}):c.jsx("p",{className:"text-sm text-slate-500",children:"Sélectionnez un élément à personnaliser."})}),c.jsx(an,{isOpen:H,onClose:()=>se(!1),title:"Bibliothèque de médias",size:"xl",children:c.jsx(Lre,{assets:de,onUpload:Ne})})]})},_R=({onLogout:e})=>{const t=wa(),n=pr.useCallback(()=>{e&&e(),t("/login",{replace:!0})},[t,e]);return c.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Accès non autorisé"}),c.jsx("p",{className:"text-base text-gray-600",children:"Votre rôle ne dispose actuellement d'aucune page accessible. Veuillez contacter un administrateur ou revenir à l'écran de connexion."})]}),c.jsx("button",{type:"button",onClick:n,className:"rounded-md bg-brand-primary px-6 py-3 text-white transition hover:bg-brand-primary/90 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2",children:"Retour à la connexion"})]})},zre=[{path:"/dashboard",permissionKey:"/dashboard",Component:Zte},{path:"/para-llevar",permissionKey:"/para-llevar",Component:wne},{path:"/ventes",permissionKey:"/ventes",Component:ine},{path:"/commande/:tableId",permissionKey:"/ventes",Component:pne},{path:"/cocina",permissionKey:"/cocina",Component:xne},{path:"/resume-ventes",permissionKey:"/resume-ventes",Component:yre},{path:"/ingredients",permissionKey:"/ingredients",Component:_ne},{path:"/produits",permissionKey:"/produits",Component:Ene},{path:"/promotions",permissionKey:"/promotions",Component:sre},{path:ni,permissionKey:ni,Component:$re}],jR=()=>c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-primary"})}),SR=({children:e,permissionKey:t})=>{var d;const{role:n,loading:r,logout:i}=_a();if(r)return c.jsx(jR,{});if(!n)return c.jsx(ch,{to:"/",replace:!0});const s=t?(d=n.permissions)==null?void 0:d[t]:void 0;if(!(t?vh(s):!0)){const f=Lb(n);return f?c.jsx(ch,{to:f,replace:!0}):c.jsx(_R,{onLogout:i})}return e},Ure=()=>{const{role:e,loading:t,logout:n}=_a(),[,r]=b.useState(()=>{const s=uh();return s?s.orderId:null});if(Uu(),b.useEffect(()=>{const s=()=>{const l=uh();r(l?l.orderId:null)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),t)return c.jsx(jR,{});if(!e)return c.jsx(LU,{});const i=Lb(e);return i?c.jsx(ch,{to:i,replace:!0}):c.jsx(_R,{onLogout:n})},qre=()=>c.jsx(SR,{children:c.jsx(jU,{})}),Bre=()=>c.jsxs(K5,{children:[c.jsx(Ps,{path:"/",element:c.jsx(Ure,{})}),c.jsx(Ps,{path:"/login",element:c.jsx(ch,{to:"/",replace:!0})}),c.jsx(Ps,{path:"/commande-client",element:c.jsx(mre,{})}),c.jsx(Ps,{element:c.jsx(qre,{}),children:zre.map(({path:e,permissionKey:t,Component:n})=>c.jsx(Ps,{path:e,element:c.jsx(SR,{permissionKey:t,children:c.jsx(n,{})})},e))}),c.jsx(Ps,{path:"*",element:c.jsx(pre,{})})]}),Fre=()=>c.jsx(vU,{children:c.jsx(mI,{children:c.jsx(Bre,{})})}),NR=document.getElementById("root");if(!NR)throw new Error("Could not find root element to mount to");const Hre=Q4.createRoot(NR);Hre.render(c.jsx(pr.StrictMode,{children:c.jsx(Fre,{})}));
